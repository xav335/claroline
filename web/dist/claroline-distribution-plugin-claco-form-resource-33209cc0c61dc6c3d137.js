webpackJsonp([17],{0:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(4);__webpack_require__(5);__webpack_require__(246);__webpack_require__(6);__webpack_require__(247);__webpack_require__(441);__webpack_require__(237);__webpack_require__(149);__webpack_require__(630);__webpack_require__(635);__webpack_require__(640);__webpack_require__(645);__webpack_require__(647);var _routing=__webpack_require__(649);var _routing2=_interopRequireDefault(_routing);var _MenuCtrl=__webpack_require__(659);var _MenuCtrl2=_interopRequireDefault(_MenuCtrl);var _GeneralConfigurationCtrl=__webpack_require__(660);var _GeneralConfigurationCtrl2=_interopRequireDefault(_GeneralConfigurationCtrl);var _FieldsManagementCtrl=__webpack_require__(661);var _FieldsManagementCtrl2=_interopRequireDefault(_FieldsManagementCtrl);var _CategoriesManagementCtrl=__webpack_require__(662);var _CategoriesManagementCtrl2=_interopRequireDefault(_CategoriesManagementCtrl);var _KeywordsManagementCtrl=__webpack_require__(663);var _KeywordsManagementCtrl2=_interopRequireDefault(_KeywordsManagementCtrl);var _TemplateManagementCtrl=__webpack_require__(664);var _TemplateManagementCtrl2=_interopRequireDefault(_TemplateManagementCtrl);var _EntriesListCtrl=__webpack_require__(665);var _EntriesListCtrl2=_interopRequireDefault(_EntriesListCtrl);var _EntryCreationCtrl=__webpack_require__(667);var _EntryCreationCtrl2=_interopRequireDefault(_EntryCreationCtrl);var _EntryEditionCtrl=__webpack_require__(668);var _EntryEditionCtrl2=_interopRequireDefault(_EntryEditionCtrl);var _EntryViewCtrl=__webpack_require__(669);var _EntryViewCtrl2=_interopRequireDefault(_EntryViewCtrl);var _EntryRandomCtrl=__webpack_require__(670);var _EntryRandomCtrl2=_interopRequireDefault(_EntryRandomCtrl);var _ClacoFormService=__webpack_require__(671);var _ClacoFormService2=_interopRequireDefault(_ClacoFormService);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("ClacoFormModule",["ui.router","ui.translation","ngAnimate","ui.bootstrap","ui.bootstrap.tpls","angular-loading-bar","ngTable","ui.fos-js-router","FormBuilder","ui.tinymce","FieldModule","CategoryModule","KeywordModule","EntryModule","CommentModule"]).service("ClacoFormService",_ClacoFormService2.default).controller("MenuCtrl",["$state","ClacoFormService","EntryService",_MenuCtrl2.default]).controller("GeneralConfigurationCtrl",["$state","ClacoFormService","CategoryService",_GeneralConfigurationCtrl2.default]).controller("FieldsManagementCtrl",["NgTableParams","ClacoFormService","FieldService",_FieldsManagementCtrl2.default]).controller("CategoriesManagementCtrl",["NgTableParams","ClacoFormService","CategoryService",_CategoriesManagementCtrl2.default]).controller("KeywordsManagementCtrl",["NgTableParams","ClacoFormService","KeywordService",_KeywordsManagementCtrl2.default]).controller("TemplateManagementCtrl",["$state","ClacoFormService","FieldService",_TemplateManagementCtrl2.default]).controller("EntriesListCtrl",["NgTableParams","ClacoFormService","EntryService","FieldService","CategoryService",_EntriesListCtrl2.default]).controller("EntryCreationCtrl",["$state","ClacoFormService","EntryService","FieldService","KeywordService",_EntryCreationCtrl2.default]).controller("EntryEditionCtrl",["$state","$stateParams","ClacoFormService","EntryService","FieldService","CategoryService","KeywordService",_EntryEditionCtrl2.default]).controller("EntryViewCtrl",["$state","$stateParams","$filter","NgTableParams","ClacoFormService","EntryService","FieldService","CategoryService","KeywordService","CommentService",_EntryViewCtrl2.default]).controller("EntryRandomCtrl",["$state","ClacoFormService",_EntryRandomCtrl2.default]).directive("template",function($compile){return{restrict:"A",replace:true,link:function link(scope,element,attrs){scope.$watch(attrs.template,function(tpl){element.html(tpl);$compile(element.contents())(scope)})}}}).config(_routing2.default).config(["cfpLoadingBarProvider",function configureLoadingBar(cfpLoadingBarProvider){cfpLoadingBarProvider.latencyThreshold=200;cfpLoadingBarProvider.includeBar=true;cfpLoadingBarProvider.includeSpinner=true}])},630:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(5);__webpack_require__(6);__webpack_require__(9);var _FieldCreationModalCtrl=__webpack_require__(631);var _FieldCreationModalCtrl2=_interopRequireDefault(_FieldCreationModalCtrl);var _FieldEditionModalCtrl=__webpack_require__(632);var _FieldEditionModalCtrl2=_interopRequireDefault(_FieldEditionModalCtrl);var _FieldService=__webpack_require__(633);var _FieldService2=_interopRequireDefault(_FieldService);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("FieldModule",["ui.translation","ui.bootstrap","ui.bootstrap.tpls","ClarolineAPI"]).service("FieldService",_FieldService2.default).controller("FieldCreationModalCtrl",_FieldCreationModalCtrl2.default).controller("FieldEditionModalCtrl",_FieldEditionModalCtrl2.default)},631:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FieldCreationModalCtrl=function(){function FieldCreationModalCtrl($http,$uibModalInstance,FieldService,CategoryService,resourceId,title,callback){(0,_classCallCheck3.default)(this,FieldCreationModalCtrl);this.$http=$http;this.$uibModalInstance=$uibModalInstance;this.CategoryService=CategoryService;this.resourceId=resourceId;this.title=title;this.callback=callback;this.field={name:null,type:null,required:true,isMetadata:false,choices:[]};this.fieldErrors={name:null};this.types=FieldService.getTypes();this.type=this.types[0];this.index=1;this.choices=[{index:this.index,value:"",category:null,categoryEnabled:false}];this.choicesErrors={};this.choicesErrors[this.index]=null;this.categories=CategoryService.getCategories();++this.index}(0,_createClass3.default)(FieldCreationModalCtrl,[{key:"submit",value:function submit(){var _this=this;this.resetErrors();if(!this.field["name"]){this.fieldErrors["name"]=Translator.trans("form_not_blank_error",{},"clacoform")}else if(this.field["name"]==="clacoform_entry_title"){this.fieldErrors["name"]=Translator.trans("form_reserved_error",{},"clacoform")}this.field["type"]=this.type["value"];if(this.hasChoices()){this.choices.forEach(function(c){if(!c["value"]){_this.choicesErrors[c["index"]]=Translator.trans("form_not_blank_error",{},"clacoform")}else{_this.choices.forEach(function(nc){if(nc["index"]!==c["index"]&&nc["value"]===c["value"]){_this.choicesErrors[c["index"]]=Translator.trans("form_not_unique_error",{},"clacoform");_this.choicesErrors[nc["index"]]=Translator.trans("form_not_unique_error",{},"clacoform")}})}})}if(this.isValid()){var checkNameUrl=Routing.generate("claro_claco_form_get_field_by_name_excluding_id",{clacoForm:this.resourceId,name:this.field["name"],id:0});this.$http.get(checkNameUrl).then(function(d){if(d["status"]===200){if(d["data"]==="null"){var url=Routing.generate("claro_claco_form_field_create",{clacoForm:_this.resourceId});_this.$http.post(url,{fieldData:_this.field,choicesData:_this.choices}).then(function(d){_this.callback(d["data"]);_this.$uibModalInstance.close()})}else{_this.fieldErrors["name"]=Translator.trans("form_not_unique_error",{},"clacoform")}}})}}},{key:"resetErrors",value:function resetErrors(){for(var key in this.fieldErrors){this.fieldErrors[key]=null}for(var _key in this.choicesErrors){this.choicesErrors[_key]=null}}},{key:"isValid",value:function isValid(){var valid=true;for(var key in this.fieldErrors){if(this.fieldErrors[key]){valid=false;break}}if(valid&&this.hasChoices()){valid=this.isChoicesValid()}return valid}},{key:"isChoicesValid",value:function isChoicesValid(){var valid=true;for(var key in this.choicesErrors){if(this.choicesErrors[key]){valid=false;break}}return valid}},{key:"hasChoices",value:function hasChoices(){var hasChoice=false;switch(this.type["value"]){case 4:case 5:case 6:hasChoice=true}return hasChoice}},{key:"addChoice",value:function addChoice(){this.choices.push({index:this.index,value:"",category:null,categoryEnabled:false});this.choicesErrors[this.index]=null;++this.index}},{key:"removeChoice",value:function removeChoice(index){var choiceIndex=this.choices.findIndex(function(c){return c["index"]===index});if(choiceIndex>-1){this.choices.splice(choiceIndex,1);delete this.choicesErrors[index]}}},{key:"enableChoiceCategory",value:function enableChoiceCategory(index){var choiceIndex=this.choices.findIndex(function(c){return c["index"]===index});if(choiceIndex>-1){this.choices[choiceIndex]["categoryEnabled"]=true}}},{key:"disableChoiceCategory",value:function disableChoiceCategory(index){var choiceIndex=this.choices.findIndex(function(c){return c["index"]===index});if(choiceIndex>-1){this.choices[choiceIndex]["categoryEnabled"]=false;this.choices[choiceIndex]["category"]=null}}}]);return FieldCreationModalCtrl}();exports.default=FieldCreationModalCtrl},632:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FieldEditionModalCtrl=function(){function FieldEditionModalCtrl($http,$uibModalInstance,FieldService,CategoryService,resourceId,field,title,callback){(0,_classCallCheck3.default)(this,FieldEditionModalCtrl);this.$http=$http;this.$uibModalInstance=$uibModalInstance;this.CategoryService=CategoryService;this.resourceId=resourceId;this.source=field;this.title=title;this.callback=callback;this.field={name:null,type:null,required:true,isMetadata:false,choices:[]};this.fieldErrors={name:null};this.types=FieldService.getTypes();this.type=null;this.oldChoices=[];this.oldChoicesErrors={};this.index=1;this.choices=[];this.choicesErrors={};this.categories=CategoryService.getCategories();this.initializeField();this.initializeChoices()}(0,_createClass3.default)(FieldEditionModalCtrl,[{key:"initializeField",value:function initializeField(){var _this=this;this.field["name"]=this.source["name"];this.field["type"]=this.source["type"];this.field["required"]=this.source["required"];this.field["isMetadata"]=this.source["isMetadata"];var selectedType=this.types.find(function(t){return t["value"]===_this.source["type"]});this.type=selectedType}},{key:"initializeChoices",value:function initializeChoices(){var _this2=this;if(this.source["fieldFacet"]["field_facet_choices"].length>0){this.source["fieldFacet"]["field_facet_choices"].forEach(function(c){var id=c["id"];_this2.oldChoices.push({index:id,value:c["label"],category:null,categoryEnabled:false});_this2.oldChoicesErrors[id]=null});var choicesCategoriesUrl=Routing.generate("claro_claco_form_field_choices_categories_retrieve",{field:this.source["id"]});this.$http.get(choicesCategoriesUrl).then(function(d){if(d["status"]===200){var choicesCategories=JSON.parse(d["data"]);choicesCategories.forEach(function(cc){var id=cc["fieldFacetChoice"]["id"];var oldChoiceIndex=_this2.oldChoices.findIndex(function(oc){return oc["index"]===id});if(oldChoiceIndex>-1){var selectedCategory=_this2.categories.find(function(c){return c["id"]===cc["category"]["id"]});if(selectedCategory){_this2.oldChoices[oldChoiceIndex]["category"]=selectedCategory;_this2.oldChoices[oldChoiceIndex]["categoryEnabled"]=true}}})}})}else{this.choices=[{index:this.index,value:""}];this.choicesErrors[this.index]=null;++this.index}}},{key:"submit",value:function submit(){var _this3=this;this.resetErrors();if(!this.field["name"]){this.fieldErrors["name"]=Translator.trans("form_not_blank_error",{},"clacoform")}else if(this.field["name"]==="clacoform_entry_title"){this.fieldErrors["name"]=Translator.trans("form_reserved_error",{},"clacoform")}this.field["type"]=this.type["value"];if(this.hasChoices()){this.oldChoices.forEach(function(c){if(!c["value"]){_this3.oldChoicesErrors[c["index"]]=Translator.trans("form_not_blank_error",{},"clacoform")}else{_this3.oldChoices.forEach(function(oc){if(oc["index"]!==c["index"]&&oc["value"]===c["value"]){_this3.oldChoicesErrors[c["index"]]=Translator.trans("form_not_unique_error",{},"clacoform");_this3.oldChoicesErrors[oc["index"]]=Translator.trans("form_not_unique_error",{},"clacoform")}});_this3.choices.forEach(function(nc){if(nc["value"]===c["value"]){_this3.oldChoicesErrors[c["index"]]=Translator.trans("form_not_unique_error",{},"clacoform");_this3.choicesErrors[nc["index"]]=Translator.trans("form_not_unique_error",{},"clacoform")}})}});this.choices.forEach(function(c){if(!c["value"]){_this3.choicesErrors[c["index"]]=Translator.trans("form_not_blank_error",{},"clacoform")}else{_this3.choices.forEach(function(nc){if(nc["index"]!==c["index"]&&nc["value"]===c["value"]){_this3.choicesErrors[c["index"]]=Translator.trans("form_not_unique_error",{},"clacoform");_this3.choicesErrors[nc["index"]]=Translator.trans("form_not_unique_error",{},"clacoform")}});_this3.oldChoices.forEach(function(oc){if(oc["value"]===c["value"]){_this3.choicesErrors[c["index"]]=Translator.trans("form_not_unique_error",{},"clacoform");_this3.oldChoicesErrors[oc["index"]]=Translator.trans("form_not_unique_error",{},"clacoform")}})}})}if(this.isValid()){var checkNameUrl=Routing.generate("claro_claco_form_get_field_by_name_excluding_id",{clacoForm:this.resourceId,name:this.field["name"],id:this.source["id"]});this.$http.get(checkNameUrl).then(function(d){if(d["status"]===200){if(d["data"]==="null"){var url=Routing.generate("claro_claco_form_field_edit",{field:_this3.source["id"]});_this3.$http.put(url,{fieldData:_this3.field,oldChoicesData:_this3.oldChoices,choicesData:_this3.choices}).then(function(d){_this3.callback(d["data"]);_this3.$uibModalInstance.close()})}else{_this3.fieldErrors["name"]=Translator.trans("form_not_unique_error",{},"clacoform")}}})}}},{key:"resetErrors",value:function resetErrors(){for(var key in this.fieldErrors){this.fieldErrors[key]=null}for(var _key in this.oldChoicesErrors){this.oldChoicesErrors[_key]=null}for(var _key2 in this.choicesErrors){this.choicesErrors[_key2]=null}}},{key:"isValid",value:function isValid(){var valid=true;for(var key in this.fieldErrors){if(this.fieldErrors[key]){valid=false;break}}if(valid&&this.hasChoices()){valid=this.isChoicesValid()}return valid}},{key:"isChoicesValid",value:function isChoicesValid(){var valid=true;for(var key in this.oldChoicesErrors){if(this.oldChoicesErrors[key]){valid=false;break}}if(valid){for(var _key3 in this.choicesErrors){if(this.choicesErrors[_key3]){valid=false;break}}}return valid}},{key:"hasChoices",value:function hasChoices(){var hasChoice=false;switch(this.type["value"]){case 4:case 5:case 6:hasChoice=true}return hasChoice}},{key:"addChoice",value:function addChoice(){this.choices.push({index:this.index,value:"",category:null,categoryEnabled:false});this.choicesErrors[this.index]=null;++this.index}},{key:"removeOldChoice",value:function removeOldChoice(index){var choiceIndex=this.oldChoices.findIndex(function(c){return c["index"]===index});if(choiceIndex>-1){this.oldChoices.splice(choiceIndex,1);delete this.oldChoicesErrors[index]}}},{key:"removeChoice",value:function removeChoice(index){var choiceIndex=this.choices.findIndex(function(c){return c["index"]===index});if(choiceIndex>-1){this.choices.splice(choiceIndex,1);delete this.choicesErrors[index]}}},{key:"enableOldChoiceCategory",value:function enableOldChoiceCategory(index){var choiceIndex=this.oldChoices.findIndex(function(c){return c["index"]===index});if(choiceIndex>-1){this.oldChoices[choiceIndex]["categoryEnabled"]=true}}},{key:"disableOldChoiceCategory",value:function disableOldChoiceCategory(index){var choiceIndex=this.oldChoices.findIndex(function(c){return c["index"]===index});if(choiceIndex>-1){this.oldChoices[choiceIndex]["categoryEnabled"]=false;this.oldChoices[choiceIndex]["category"]=null}}},{key:"enableChoiceCategory",value:function enableChoiceCategory(index){var choiceIndex=this.choices.findIndex(function(c){return c["index"]===index});if(choiceIndex>-1){this.choices[choiceIndex]["categoryEnabled"]=true}}},{key:"disableChoiceCategory",value:function disableChoiceCategory(index){var choiceIndex=this.choices.findIndex(function(c){return c["index"]===index});if(choiceIndex>-1){this.choices[choiceIndex]["categoryEnabled"]=false;this.choices[choiceIndex]["category"]=null}}}]);return FieldEditionModalCtrl}();exports.default=FieldEditionModalCtrl},633:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _field_form_modal=__webpack_require__(634);var _field_form_modal2=_interopRequireDefault(_field_form_modal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FieldService=function(){function FieldService($http,$uibModal,ClarolineAPIService){(0,_classCallCheck3.default)(this,FieldService);this.$http=$http;this.$uibModal=$uibModal;this.ClarolineAPIService=ClarolineAPIService;this.canEdit=FieldService._getGlobal("canEdit");this.fields=FieldService._getGlobal("fields");this.types=[{value:1,name:Translator.trans("text",{},"platform")},{value:2,name:Translator.trans("number",{},"platform")},{value:3,name:Translator.trans("date",{},"platform")},{value:4,name:Translator.trans("radio",{},"platform")},{value:5,name:Translator.trans("select",{},"platform")},{value:6,name:Translator.trans("checkboxes",{},"platform")},{value:7,name:Translator.trans("country",{},"platform")},{value:8,name:Translator.trans("email",{},"platform")},{value:9,name:Translator.trans("rich_text",{},"platform")}];this.countries=[{label:"Afghanistan",value:"AF"},{label:"Åland Islands",value:"AX"},{label:"Albania",value:"AL"},{label:"Algeria",value:"DZ"},{label:"American Samoa",value:"AS"},{label:"Andorra",value:"AD"},{label:"Angola",value:"AO"},{label:"Anguilla",value:"AI"},{label:"Antarctica",value:"AQ"},{label:"Antigua and Barbuda",value:"AG"},{label:"Argentina",value:"AR"},{label:"Armenia",value:"AM"},{label:"Aruba",value:"AW"},{label:"Australia",value:"AU"},{label:"Austria",value:"AT"},{label:"Azerbaijan",value:"AZ"},{label:"Bahamas",value:"BS"},{label:"Bahrain",value:"BH"},{label:"Bangladesh",value:"BD"},{label:"Barbados",value:"BB"},{label:"Belarus",value:"BY"},{label:"Belgium",value:"BE"},{label:"Belize",value:"BZ"},{label:"Benin",value:"BJ"},{label:"Bermuda",value:"BM"},{label:"Bhutan",value:"BT"},{label:"Bolivia",value:"BO"},{label:"Bosnia and Herzegovina",value:"BA"},{label:"Botswana",value:"BW"},{label:"Bouvet Island",value:"BV"},{label:"Brazil",value:"BR"},{label:"British Indian Ocean Territory",value:"IO"},{label:"Brunei Darussalam",value:"BN"},{label:"Bulgaria",value:"BG"},{label:"Burkina Faso",value:"BF"},{label:"Burundi",value:"BI"},{label:"Cambodia",value:"KH"},{label:"Cameroon",value:"CM"},{label:"Canada",value:"CA"},{label:"Cape Verde",value:"CV"},{label:"Cayman Islands",value:"KY"},{label:"Central African Republic",value:"CF"},{label:"Chad",value:"TD"},{label:"Chile",value:"CL"},{label:"China",value:"CN"},{label:"Christmas Island",value:"CX"},{label:"Cocos (Keeling) Islands",value:"CC"},{label:"Colombia",value:"CO"},{label:"Comoros",value:"KM"},{label:"Congo",value:"CG"},{label:"Congo, The Democratic Republic of the",value:"CD"},{label:"Cook Islands",value:"CK"},{label:"Costa Rica",value:"CR"},{label:"Cote D'Ivoire",value:"CI"},{label:"Croatia",value:"HR"},{label:"Cuba",value:"CU"},{label:"Cyprus",value:"CY"},{label:"Czech Republic",value:"CZ"},{label:"Denmark",value:"DK"},{label:"Djibouti",value:"DJ"},{label:"Dominica",value:"DM"},{label:"Dominican Republic",value:"DO"},{label:"Ecuador",value:"EC"},{label:"Egypt",value:"EG"},{label:"El Salvador",value:"SV"},{label:"Equatorial Guinea",value:"GQ"},{label:"Eritrea",value:"ER"},{label:"Estonia",value:"EE"},{label:"Ethiopia",value:"ET"},{label:"Falkland Islands (Malvinas)",value:"FK"},{label:"Faroe Islands",value:"FO"},{label:"Fiji",value:"FJ"},{label:"Finland",value:"FI"},{label:"France",value:"FR"},{label:"French Guiana",value:"GF"},{label:"French Polynesia",value:"PF"},{label:"French Southern Territories",value:"TF"},{label:"Gabon",value:"GA"},{label:"Gambia",value:"GM"},{label:"Georgia",value:"GE"},{label:"Germany",value:"DE"},{label:"Ghana",value:"GH"},{label:"Gibraltar",value:"GI"},{label:"Greece",value:"GR"},{label:"Greenland",value:"GL"},{label:"Grenada",value:"GD"},{label:"Guadeloupe",value:"GP"},{label:"Guam",value:"GU"},{label:"Guatemala",value:"GT"},{label:"Guernsey",value:"GG"},{label:"Guinea",value:"GN"},{label:"Guinea-Bissau",value:"GW"},{label:"Guyana",value:"GY"},{label:"Haiti",value:"HT"},{label:"Heard Island and Mcdonald Islands",value:"HM"},{label:"Holy See (Vatican City State)",value:"VA"},{label:"Honduras",value:"HN"},{label:"Hong Kong",value:"HK"},{label:"Hungary",value:"HU"},{label:"Iceland",value:"IS"},{label:"India",value:"IN"},{label:"Indonesia",value:"ID"},{label:"Iran, Islamic Republic Of",value:"IR"},{label:"Iraq",value:"IQ"},{label:"Ireland",value:"IE"},{label:"Isle of Man",value:"IM"},{label:"Israel",value:"IL"},{label:"Italy",value:"IT"},{label:"Jamaica",value:"JM"},{label:"Japan",value:"JP"},{label:"Jersey",value:"JE"},{label:"Jordan",value:"JO"},{label:"Kazakhstan",value:"KZ"},{label:"Kenya",value:"KE"},{label:"Kiribati",value:"KI"},{label:"Korea, Democratic People'S Republic of",value:"KP"},{label:"Korea, Republic of",value:"KR"},{label:"Kuwait",value:"KW"},{label:"Kyrgyzstan",value:"KG"},{label:"Lao People'S Democratic Republic",value:"LA"},{label:"Latvia",value:"LV"},{label:"Lebanon",value:"LB"},{label:"Lesotho",value:"LS"},{label:"Liberia",value:"LR"},{label:"Libyan Arab Jamahiriya",value:"LY"},{label:"Liechtenstein",value:"LI"},{label:"Lithuania",value:"LT"},{label:"Luxembourg",value:"LU"},{label:"Macao",value:"MO"},{label:"Macedonia, The Former Yugoslav Republic of",value:"MK"},{label:"Madagascar",value:"MG"},{label:"Malawi",value:"MW"},{label:"Malaysia",value:"MY"},{label:"Maldives",value:"MV"},{label:"Mali",value:"ML"},{label:"Malta",value:"MT"},{label:"Marshall Islands",value:"MH"},{label:"Martinique",value:"MQ"},{label:"Mauritania",value:"MR"},{label:"Mauritius",value:"MU"},{label:"Mayotte",value:"YT"},{label:"Mexico",value:"MX"},{label:"Micronesia, Federated States of",value:"FM"},{label:"Moldova, Republic of",value:"MD"},{label:"Monaco",value:"MC"},{label:"Mongolia",value:"MN"},{label:"Montserrat",value:"MS"},{label:"Morocco",value:"MA"},{label:"Mozambique",value:"MZ"},{label:"Myanmar",value:"MM"},{label:"Namibia",value:"NA"},{label:"Nauru",value:"NR"},{label:"Nepal",value:"NP"},{label:"Netherlands",value:"NL"},{label:"Netherlands Antilles",value:"AN"},{label:"New Caledonia",value:"NC"},{label:"New Zealand",value:"NZ"},{label:"Nicaragua",value:"NI"},{label:"Niger",value:"NE"},{label:"Nigeria",value:"NG"},{label:"Niue",value:"NU"},{label:"Norfolk Island",value:"NF"},{label:"Northern Mariana Islands",value:"MP"},{label:"Norway",value:"NO"},{label:"Oman",value:"OM"},{label:"Pakistan",value:"PK"},{label:"Palau",value:"PW"},{label:"Palestinian Territory, Occupied",value:"PS"},{label:"Panama",value:"PA"},{label:"Papua New Guinea",value:"PG"},{label:"Paraguay",value:"PY"},{label:"Peru",value:"PE"},{label:"Philippines",value:"PH"},{label:"Pitcairn",value:"PN"},{label:"Poland",value:"PL"},{label:"Portugal",value:"PT"},{label:"Puerto Rico",value:"PR"},{label:"Qatar",value:"QA"},{label:"Reunion",value:"RE"},{label:"Romania",value:"RO"},{label:"Russian Federation",value:"RU"},{label:"RWANDA",value:"RW"},{label:"Saint Helena",value:"SH"},{label:"Saint Kitts and Nevis",value:"KN"},{label:"Saint Lucia",value:"LC"},{label:"Saint Pierre and Miquelon",value:"PM"},{label:"Saint Vincent and the Grenadines",value:"VC"},{label:"Samoa",value:"WS"},{label:"San Marino",value:"SM"},{label:"Sao Tome and Principe",value:"ST"},{label:"Saudi Arabia",value:"SA"},{label:"Senegal",value:"SN"},{label:"Serbia and Montenegro",value:"CS"},{label:"Seychelles",value:"SC"},{label:"Sierra Leone",value:"SL"},{label:"Singapore",value:"SG"},{label:"Slovakia",value:"SK"},{label:"Slovenia",value:"SI"},{label:"Solomon Islands",value:"SB"},{label:"Somalia",value:"SO"},{label:"South Africa",value:"ZA"},{label:"South Georgia and the South Sandwich Islands",value:"GS"},{label:"Spain",value:"ES"},{label:"Sri Lanka",value:"LK"},{label:"Sudan",value:"SD"},{label:"Surilabel",value:"SR"},{label:"Svalbard and Jan Mayen",value:"SJ"},{label:"Swaziland",value:"SZ"},{label:"Sweden",value:"SE"},{label:"Switzerland",value:"CH"},{label:"Syrian Arab Republic",value:"SY"},{label:"Taiwan, Province of China",value:"TW"},{label:"Tajikistan",value:"TJ"},{label:"Tanzania, United Republic of",value:"TZ"},{label:"Thailand",value:"TH"},{label:"Timor-Leste",value:"TL"},{label:"Togo",value:"TG"},{label:"Tokelau",value:"TK"},{label:"Tonga",value:"TO"},{label:"Trinidad and Tobago",value:"TT"},{label:"Tunisia",value:"TN"},{label:"Turkey",value:"TR"},{label:"Turkmenistan",value:"TM"},{label:"Turks and Caicos Islands",value:"TC"},{label:"Tuvalu",value:"TV"},{label:"Uganda",value:"UG"},{label:"Ukraine",value:"UA"},{label:"United Arab Emirates",value:"AE"},{label:"United Kingdom",value:"GB"},{label:"United States",value:"US"},{label:"United States Minor Outlying Islands",value:"UM"},{label:"Uruguay",value:"UY"},{label:"Uzbekistan",value:"UZ"},{label:"Vanuatu",value:"VU"},{label:"Venezuela",value:"VE"},{label:"Viet Nam",value:"VN"},{label:"Virgin Islands, British",value:"VG"},{label:"Virgin Islands, U.S.",value:"VI"},{label:"Wallis and Futuna",value:"WF"},{label:"Western Sahara",value:"EH"},{label:"Yemen",value:"YE"},{label:"Zambia",value:"ZM"},{label:"Zimbabwe",value:"ZW"}];this._addFieldCallback=this._addFieldCallback.bind(this);this._updateFieldCallback=this._updateFieldCallback.bind(this);this._removeFieldCallback=this._removeFieldCallback.bind(this);this.initialize()}(0,_createClass3.default)(FieldService,[{key:"_addFieldCallback",value:function _addFieldCallback(data){var field=JSON.parse(data);this.formatField(field);this.fields.push(field)}},{key:"_updateFieldCallback",value:function _updateFieldCallback(data){var field=JSON.parse(data);this.formatField(field);var index=this.fields.findIndex(function(f){return f["id"]===field["id"]});if(index>-1){this.fields[index]=field}}},{key:"_removeFieldCallback",value:function _removeFieldCallback(data){var field=JSON.parse(data);var index=this.fields.findIndex(function(f){return f["id"]===field["id"]});if(index>-1){this.fields.splice(index,1)}}},{key:"initialize",value:function initialize(){var _this=this;this.fields.forEach(function(f){return _this.formatField(f)})}},{key:"getFields",value:function getFields(){return this.fields}},{key:"getTypes",value:function getTypes(){return this.types}},{key:"getCountryNameFromCode",value:function getCountryNameFromCode(code){var country=this.countries.find(function(c){return c["value"]===code});return country?country["label"]:"-"}},{key:"formatField",value:function formatField(field){var type=this.types.find(function(t){return t["value"]===field["type"]});field["typeName"]=type["name"];var choices=field["fieldFacet"]["field_facet_choices"];if(!Array.isArray(choices)){field["fieldFacet"]["field_facet_choices"]=[];for(var key in choices){field["fieldFacet"]["field_facet_choices"].push(choices[key])}}field["fieldFacet"]["field_facet_choices"].forEach(function(ffc){return ffc["value"]=ffc["label"]})}},{key:"createField",value:function createField(_resourceId){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var addCallback=callback!==null?callback:this._addFieldCallback;this.$uibModal.open({template:_field_form_modal2.default,controller:"FieldCreationModalCtrl",controllerAs:"cfc",resolve:{resourceId:function resourceId(){return _resourceId},title:function title(){return Translator.trans("create_a_field",{},"clacoform")},callback:function callback(){return addCallback}}})}},{key:"editField",value:function editField(_field,_resourceId2){var callback=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var updateCallback=callback!==null?callback:this._updateFieldCallback;this.$uibModal.open({template:_field_form_modal2.default,controller:"FieldEditionModalCtrl",controllerAs:"cfc",resolve:{resourceId:function resourceId(){return _resourceId2},field:function field(){return _field},title:function title(){return Translator.trans("edit_field",{},"clacoform")},callback:function callback(){return updateCallback}}})}},{key:"deleteField",value:function deleteField(field){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var url=Routing.generate("claro_claco_form_field_delete",{field:field["id"]});var deleteCallback=callback!==null?callback:this._removeFieldCallback;this.ClarolineAPIService.confirm({url:url,method:"DELETE"},deleteCallback,Translator.trans("delete_field",{},"clacoform"),Translator.trans("delete_field_confirm_message",{name:field["name"]},"clacoform"))}}],[{key:"_getGlobal",value:function _getGlobal(name){if(typeof window[name]==="undefined"){throw new Error("Expected "+name+" to be exposed in a window."+name+" variable")}return window[name]}}]);return FieldService}();exports.default=FieldService},634:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button>\n        <h3>{{ cfc.title }}</h3>\n    </div>\n    <div class="modal-body">\n        <div class="form-group row" ng-class="cfc.fieldErrors[\'name\'] ? \'has-error\' : \'\'">\n            <label class="control-label col-md-3">\n                {{ \'name\'|trans:{}:\'platform\' }}\n            </label>\n            <div class="col-md-9">\n                <input type="text" class="form-control" ng-model="cfc.field[\'name\']">\n                <div class="help-block field-error" ng-if="cfc.fieldErrors[\'name\']">\n                    {{ cfc.fieldErrors[\'name\'] }}\n                </div>\n            </div>\n        </div>\n        <div class="form-group row">\n            <label class="control-label col-md-3">\n                {{ \'type\'|trans:{}:\'platform\' }}\n            </label>\n            <div class="col-md-9">\n                <select class="form-control" ng-model="cfc.type" ng-options="t[\'name\'] for t in cfc.types">\n                </select>\n            </div>\n        </div>\n        <div class="alert alert-default" ng-if="cfc.type[\'value\'] === 9">\n            {{ \'rich_text_field_info\'|trans:{}:\'clacoform\' }}\n        </div>\n        <div class="form-group row" ng-if="cfc.hasChoices()">\n            <hr>\n            <label class="control-label col-md-3">\n                {{ \'choices\'|trans:{}:\'clacoform\' }}\n            </label>\n            <div class="col-md-9">\n                <div class="margin-bottom-sm" ng-class="cfc.oldChoicesErrors[choice[\'index\']] ? \'has-error\' : \'\'" ng-repeat="choice in cfc.oldChoices">\n                    <div class="input-group">\n                        <input type="text" class="form-control" ng-model="choice[\'value\']">\n                        <span class="input-group-btn">\n                            <button type="button" class="btn btn-default"\n                                    data-toggle="tooltip"\n                                    data-placement="top"\n                                    title="{{ \'associate_category\'|trans:{}:\'clacoform\' }}"\n                                    ng-click="cfc.enableOldChoiceCategory(choice[\'index\'])"\n                                    ng-if="!choice[\'categoryEnabled\']"\n                            >\n                                <i class="fa fa-bars"></i>\n                            </button>\n                            <button type="button" class="btn btn-warning"\n                                    data-toggle="tooltip"\n                                    data-placement="top"\n                                    title="{{ \'remove_category\'|trans:{}:\'clacoform\' }}"\n                                    ng-click="cfc.disableOldChoiceCategory(choice[\'index\'])"\n                                    ng-if="choice[\'categoryEnabled\']"\n                            >\n                                <i class="fa fa-bars"></i>\n                            </button>\n                            <button type="button" class="btn btn-danger" ng-click="cfc.removeOldChoice(choice[\'index\'])">\n                                <i class="fa fa-trash"></i>\n                            </button>\n                        </span>\n                    </div>\n                    <select class="form-control"\n                            ng-model="choice[\'category\']"\n                            ng-options="category[\'name\'] for category in cfc.categories"\n                            ng-if="choice[\'categoryEnabled\']"\n                    >\n                    </select>\n                    <div class="help-block field-error" ng-if="cfc.oldChoicesErrors[choice[\'index\']]">\n                        {{ cfc.oldChoicesErrors[choice[\'index\']] }}\n                    </div>\n                </div>\n                <div class="margin-bottom-sm" ng-class="cfc.choicesErrors[choice[\'index\']] ? \'has-error\' : \'\'" ng-repeat="choice in cfc.choices">\n                    <div class="input-group">\n                        <input type="text" class="form-control" ng-model="choice[\'value\']">\n                        <span class="input-group-btn">\n                            <button type="button" class="btn btn-default"\n                                    data-toggle="tooltip"\n                                    data-placement="top"\n                                    title="{{ \'associate_category\'|trans:{}:\'clacoform\' }}"\n                                    ng-click="cfc.enableChoiceCategory(choice[\'index\'])"\n                                    ng-if="!choice[\'categoryEnabled\']"\n                            >\n                                <i class="fa fa-bars"></i>\n                            </button>\n                            <button type="button" class="btn btn-warning"\n                                    data-toggle="tooltip"\n                                    data-placement="top"\n                                    title="{{ \'remove_category\'|trans:{}:\'clacoform\' }}"\n                                    ng-click="cfc.disableChoiceCategory(choice[\'index\'])"\n                                    ng-if="choice[\'categoryEnabled\']"\n                            >\n                                <i class="fa fa-bars"></i>\n                            </button>\n                            <button type="button" class="btn btn-danger" ng-click="cfc.removeChoice(choice[\'index\'])">\n                                <i class="fa fa-trash"></i>\n                            </button>\n                        </span>\n                    </div>\n                    <select class="form-control"\n                            ng-model="choice[\'category\']"\n                            ng-options="category[\'name\'] for category in cfc.categories"\n                            ng-if="choice[\'categoryEnabled\']"\n                    >\n                    </select>\n                    <div class="help-block field-error" ng-if="cfc.choicesErrors[choice[\'index\']]">\n                        {{ cfc.choicesErrors[choice[\'index\']] }}\n                    </div>\n                </div>\n                <button class="btn btn-primary btn-sm" ng-click="cfc.addChoice()">\n                    <i class="fa fa-plus-circle"></i>\n                    {{ \'add_choice\'|trans:{}:\'clacoform\' }}\n                </button>\n            </div>\n        </div>\n        <hr ng-if="cfc.hasChoices()">\n        <div class="form-group row">\n            <label class="control-label col-md-3">\n                {{ \'mandatory\'|trans:{}:\'clacoform\' }}\n            </label>\n            <div class="col-md-9">\n                <label>\n                    <input type="radio" ng-model="cfc.field[\'required\']" ng-value="true"/>\n                    {{ \'yes\'|trans:{}:\'platform\' }}\n                </label>\n                &nbsp;&nbsp;&nbsp;&nbsp;\n                <label>\n                    <input type="radio" ng-model="cfc.field[\'required\']" ng-value="false"/>\n                    {{ \'no\'|trans:{}:\'platform\' }}\n                </label>\n            </div>\n        </div>\n        <div class="form-group row">\n            <label class="control-label col-md-3">\n                {{ \'metadata\'|trans:{}:\'clacoform\' }}\n            </label>\n            <div class="col-md-9">\n                <label>\n                    <input type="radio" ng-model="cfc.field[\'isMetadata\']" ng-value="true"/>\n                    {{ \'yes\'|trans:{}:\'platform\' }}\n                </label>\n                &nbsp;&nbsp;&nbsp;&nbsp;\n                <label>\n                    <input type="radio" ng-model="cfc.field[\'isMetadata\']" ng-value="false"/>\n                    {{ \'no\'|trans:{}:\'platform\' }}\n                </label>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" data-dismiss="modal" ng-click="$close()">\n            {{ \'cancel\'|trans:{}:\'platform\' }}\n        </button>\n        <button type="submit" class="btn btn-primary" ng-click="cfc.submit()">\n            {{ \'ok\'|trans:{}:\'platform\' }}\n        </button>\n    </div>\n</div>\n';
},635:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(5);__webpack_require__(8);__webpack_require__(6);__webpack_require__(9);var _CategoryCreationModalCtrl=__webpack_require__(636);var _CategoryCreationModalCtrl2=_interopRequireDefault(_CategoryCreationModalCtrl);var _CategoryEditionModalCtrl=__webpack_require__(637);var _CategoryEditionModalCtrl2=_interopRequireDefault(_CategoryEditionModalCtrl);var _CategoryService=__webpack_require__(638);var _CategoryService2=_interopRequireDefault(_CategoryService);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("CategoryModule",["ui.translation","ui.bootstrap","ui.bootstrap.tpls","colorpicker.module","ClarolineAPI"]).service("CategoryService",_CategoryService2.default).controller("CategoryCreationModalCtrl",_CategoryCreationModalCtrl2.default).controller("CategoryEditionModalCtrl",_CategoryEditionModalCtrl2.default)},636:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CategoryCreationModalCtrl=function(){function CategoryCreationModalCtrl($rootScope,$http,$uibModalInstance,CategoryService,resourceId,workspaceId,title,callback){(0,_classCallCheck3.default)(this,CategoryCreationModalCtrl);this.$rootScope=$rootScope;this.$http=$http;this.$uibModalInstance=$uibModalInstance;this.CategoryService=CategoryService;this.resourceId=resourceId;this.workspaceId=workspaceId;this.title=title;this.callback=callback;this.category={name:null,color:"",notifyAddition:true,notifyEdition:true,notifyRemoval:true,managers:[]};this.categoryErrors={name:null};this.managers=[];this._userpickerCallback=this._userpickerCallback.bind(this)}(0,_createClass3.default)(CategoryCreationModalCtrl,[{key:"_userpickerCallback",value:function _userpickerCallback(data){this.managers=data===null?[]:data;this.refreshScope()}},{key:"submit",value:function submit(){var _this=this;this.resetErrors();if(!this.category["name"]){this.categoryErrors["name"]=Translator.trans("form_not_blank_error",{},"clacoform")}this.category["managers"]=[];this.managers.forEach(function(m){_this.category["managers"].push(m["id"])});if(this.isValid()){var url=Routing.generate("claro_claco_form_category_create",{clacoForm:this.resourceId});this.$http.post(url,{categoryData:this.category}).then(function(d){_this.callback(d["data"]);_this.$uibModalInstance.close()})}}},{key:"resetErrors",value:function resetErrors(){for(var key in this.categoryErrors){this.categoryErrors[key]=null}}},{key:"isValid",value:function isValid(){var valid=true;for(var key in this.categoryErrors){if(this.categoryErrors[key]){valid=false;break}}return valid}},{key:"displayManagers",value:function displayManagers(){var value="";var index=0;var length=this.managers.length-1;this.managers.forEach(function(u){value+=u["firstName"]+" "+u["lastName"];if(index<length){value+=", "}++index});return value}},{key:"getSelectedUsersIds",value:function getSelectedUsersIds(){var selectedUsersIds=[];this.managers.forEach(function(m){selectedUsersIds.push(m["id"])});return selectedUsersIds}},{key:"openUserPicker",value:function openUserPicker(){var userPicker=new UserPicker;var options={picker_name:"managers-picker",picker_title:Translator.trans("managers_selection",{},"clacoform"),multiple:true,selected_users:this.getSelectedUsersIds(),forced_workspaces:[this.workspaceId],return_datas:true};userPicker.configure(options,this._userpickerCallback);userPicker.open()}},{key:"refreshScope",value:function refreshScope(){this.$rootScope.$apply()}}]);return CategoryCreationModalCtrl}();exports.default=CategoryCreationModalCtrl},637:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CategoryEditionModalCtrl=function(){function CategoryEditionModalCtrl($rootScope,$http,$uibModalInstance,CategoryService,workspaceId,category,title,callback){(0,_classCallCheck3.default)(this,CategoryEditionModalCtrl);this.$rootScope=$rootScope;this.$http=$http;this.$uibModalInstance=$uibModalInstance;this.CategoryService=CategoryService;this.workspaceId=workspaceId;this.source=category;this.title=title;this.callback=callback;this.category={name:null,color:"",notifyAddition:true,notifyEdition:true,notifyRemoval:true,managers:[]};this.categoryErrors={name:null};this.managers=[];this._userpickerCallback=this._userpickerCallback.bind(this);this.initialize()}(0,_createClass3.default)(CategoryEditionModalCtrl,[{key:"_userpickerCallback",value:function _userpickerCallback(data){this.managers=data===null?[]:data;this.refreshScope()}},{key:"initialize",value:function initialize(){var _this=this;this.category["name"]=this.source["name"];this.category["notifyAddition"]=this.source["details"]["notify_addition"];this.category["notifyEdition"]=this.source["details"]["notify_edition"];this.category["notifyRemoval"]=this.source["details"]["notify_removal"];if(this.source["details"]["color"]){this.category["color"]=this.source["details"]["color"]}this.source["managers"].forEach(function(m){return _this.managers.push(m)})}},{key:"submit",value:function submit(){var _this2=this;this.resetErrors();if(!this.category["name"]){this.categoryErrors["name"]=Translator.trans("form_not_blank_error",{},"clacoform")}this.category["managers"]=[];this.managers.forEach(function(m){_this2.category["managers"].push(m["id"])});if(this.isValid()){var url=Routing.generate("claro_claco_form_category_edit",{category:this.source["id"]});this.$http.put(url,{categoryData:this.category}).then(function(d){_this2.callback(d["data"]);_this2.$uibModalInstance.close()})}}},{key:"resetErrors",value:function resetErrors(){for(var key in this.categoryErrors){this.categoryErrors[key]=null}}},{key:"isValid",value:function isValid(){var valid=true;for(var key in this.categoryErrors){if(this.categoryErrors[key]){valid=false;break}}return valid}},{key:"displayManagers",value:function displayManagers(){var value="";var index=0;var length=this.managers.length-1;this.managers.forEach(function(u){value+=u["firstName"]+" "+u["lastName"];if(index<length){value+=", "}++index});return value}},{key:"getSelectedUsersIds",value:function getSelectedUsersIds(){var selectedUsersIds=[];this.managers.forEach(function(m){selectedUsersIds.push(m["id"])});return selectedUsersIds}},{key:"openUserPicker",value:function openUserPicker(){var userPicker=new UserPicker;var options={picker_name:"managers-picker",picker_title:Translator.trans("managers_selection",{},"clacoform"),multiple:true,selected_users:this.getSelectedUsersIds(),forced_workspaces:[this.workspaceId],return_datas:true};userPicker.configure(options,this._userpickerCallback);userPicker.open()}},{key:"refreshScope",value:function refreshScope(){this.$rootScope.$apply()}}]);return CategoryEditionModalCtrl}();exports.default=CategoryEditionModalCtrl},638:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _category_form_modal=__webpack_require__(639);var _category_form_modal2=_interopRequireDefault(_category_form_modal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CategoryService=function(){function CategoryService($http,$uibModal,ClarolineAPIService){(0,_classCallCheck3.default)(this,CategoryService);this.$http=$http;this.$uibModal=$uibModal;this.ClarolineAPIService=ClarolineAPIService;this.canEdit=CategoryService._getGlobal("canEdit");this.isCategoryManager=CategoryService._getGlobal("isCategoryManager");this.workspaceId=CategoryService._getGlobal("workspaceId");this.categories=CategoryService._getGlobal("categories");this._addCategoryCallback=this._addCategoryCallback.bind(this);this._updateCategoryCallback=this._updateCategoryCallback.bind(this);this._removeCategoryCallback=this._removeCategoryCallback.bind(this)}(0,_createClass3.default)(CategoryService,[{key:"_addCategoryCallback",value:function _addCategoryCallback(data){var category=JSON.parse(data);this.formatCategory(category);this.categories.push(category)}},{key:"_updateCategoryCallback",value:function _updateCategoryCallback(data){var category=JSON.parse(data);this.formatCategory(category);var index=this.categories.findIndex(function(c){return c["id"]===category["id"]});if(index>-1){this.categories[index]=category}}},{key:"_removeCategoryCallback",value:function _removeCategoryCallback(data){var category=JSON.parse(data);var index=this.categories.findIndex(function(c){return c["id"]===category["id"]});if(index>-1){this.categories.splice(index,1)}}},{key:"getIsCategoryManager",value:function getIsCategoryManager(){return this.isCategoryManager}},{key:"getWorkspaceId",value:function getWorkspaceId(){return this.workspaceId}},{key:"getCategories",value:function getCategories(){return this.categories}},{key:"formatCategory",value:function formatCategory(category){var managersName="";var index=0;var length=category["managers"].length-1;category["managers"].forEach(function(m){managersName+=m["firstName"]+" "+m["lastName"];if(index<length){managersName+=", "}++index});category["managersName"]=managersName}},{key:"createCategory",value:function createCategory(_resourceId,_workspaceId){var callback=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var addCallback=callback!==null?callback:this._addCategoryCallback;this.$uibModal.open({template:_category_form_modal2.default,controller:"CategoryCreationModalCtrl",controllerAs:"cfc",resolve:{resourceId:function resourceId(){return _resourceId},workspaceId:function workspaceId(){return _workspaceId},title:function title(){return Translator.trans("create_a_category",{},"clacoform")},callback:function callback(){return addCallback}}})}},{key:"editCategory",value:function editCategory(_category,_workspaceId2){var callback=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var updateCallback=callback!==null?callback:this._updateCategoryCallback;this.$uibModal.open({template:_category_form_modal2.default,controller:"CategoryEditionModalCtrl",controllerAs:"cfc",resolve:{workspaceId:function workspaceId(){return _workspaceId2},category:function category(){return _category},title:function title(){return Translator.trans("edit_category",{},"clacoform")},callback:function callback(){return updateCallback}}})}},{key:"deleteCategory",value:function deleteCategory(category){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var url=Routing.generate("claro_claco_form_category_delete",{category:category["id"]});var deleteCallback=callback!==null?callback:this._removeCategoryCallback;this.ClarolineAPIService.confirm({url:url,method:"DELETE"},deleteCallback,Translator.trans("delete_category",{},"clacoform"),Translator.trans("delete_category_confirm_message",{name:category["name"]},"clacoform"))}}],[{key:"_getGlobal",value:function _getGlobal(name){if(typeof window[name]==="undefined"){throw new Error("Expected "+name+" to be exposed in a window."+name+" variable")}return window[name]}}]);return CategoryService}();exports.default=CategoryService},639:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button>\n        <h3>{{ cfc.title }}</h3>\n    </div>\n    <div class="modal-body">\n        <div class="form-group row" ng-class="cfc.categoryErrors[\'name\'] ? \'has-error\' : \'\'">\n            <label class="control-label col-md-3">\n                {{ \'name\'|trans:{}:\'platform\' }}\n            </label>\n            <div class="col-md-9">\n                <input type="text" class="form-control" ng-model="cfc.category[\'name\']">\n                <div class="help-block field-error" ng-if="cfc.categoryErrors[\'name\']">\n                    {{ cfc.categoryErrors[\'name\'] }}\n                </div>\n            </div>\n        </div>\n        <div class="form-group row">\n            <label class="control-label col-md-3">\n                {{ \'color\'|trans:{}:\'platform\' }}\n            </label>\n            <div class="col-md-9">\n                <span class="input-group">\n                    <input colorpicker="hex" type="text" class="form-control" ng-model="cfc.category[\'color\']">\n                    <span class="input-group-addon" ng-style="{\'background-color\': cfc.category[\'color\']}">\n                        &nbsp;&nbsp;&nbsp;\n                    </span>\n                </span>\n            </div>\n        </div>\n        <div class="form-group row">\n            <label class="control-label col-md-3">\n                {{ \'managers\'|trans:{}:\'clacoform\' }}\n            </label>\n            <div class="col-md-9">\n                <span class="input-group">\n                    <input type="text" class="form-control" ng-value="cfc.displayManagers()" readonly/>\n                    <span class="input-group-btn">\n                        <button type="button" class="btn btn-default" ng-click="cfc.openUserPicker()">\n                            <i class="fa fa-user"></i>\n                        </button>\n                    </span>\n                </span>\n            </div>\n        </div>\n        <div class="form-group row">\n            <label class="control-label col-md-3">\n                {{ \'category_notify_addition\'|trans:{}:\'clacoform\' }}\n            </label>\n            <div class="col-md-9">\n                <label>\n                    <input type="radio" ng-model="cfc.category[\'notifyAddition\']" ng-value="true"/>\n                    {{ \'yes\'|trans:{}:\'platform\' }}\n                </label>\n                &nbsp;&nbsp;&nbsp;&nbsp;\n                <label>\n                    <input type="radio" ng-model="cfc.category[\'notifyAddition\']" ng-value="false"/>\n                    {{ \'no\'|trans:{}:\'platform\' }}\n                </label>\n            </div>\n        </div>\n        <div class="form-group row">\n            <label class="control-label col-md-3">\n                {{ \'category_notify_edition\'|trans:{}:\'clacoform\' }}\n            </label>\n            <div class="col-md-9">\n                <label>\n                    <input type="radio" ng-model="cfc.category[\'notifyEdition\']" ng-value="true"/>\n                    {{ \'yes\'|trans:{}:\'platform\' }}\n                </label>\n                &nbsp;&nbsp;&nbsp;&nbsp;\n                <label>\n                    <input type="radio" ng-model="cfc.category[\'notifyEdition\']" ng-value="false"/>\n                    {{ \'no\'|trans:{}:\'platform\' }}\n                </label>\n            </div>\n        </div>\n        <div class="form-group row">\n            <label class="control-label col-md-3">\n                {{ \'category_notify_removal\'|trans:{}:\'clacoform\' }}\n            </label>\n            <div class="col-md-9">\n                <label>\n                    <input type="radio" ng-model="cfc.category[\'notifyRemoval\']" ng-value="true"/>\n                    {{ \'yes\'|trans:{}:\'platform\' }}\n                </label>\n                &nbsp;&nbsp;&nbsp;&nbsp;\n                <label>\n                    <input type="radio" ng-model="cfc.category[\'notifyRemoval\']" ng-value="false"/>\n                    {{ \'no\'|trans:{}:\'platform\' }}\n                </label>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" data-dismiss="modal" ng-click="$close()">\n            {{ \'cancel\'|trans:{}:\'platform\' }}\n        </button>\n        <button type="submit" class="btn btn-primary" ng-click="cfc.submit()">\n            {{ \'ok\'|trans:{}:\'platform\' }}\n        </button>\n    </div>\n</div>\n'},640:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(5);__webpack_require__(6);__webpack_require__(9);var _KeywordCreationModalCtrl=__webpack_require__(641);var _KeywordCreationModalCtrl2=_interopRequireDefault(_KeywordCreationModalCtrl);var _KeywordEditionModalCtrl=__webpack_require__(642);var _KeywordEditionModalCtrl2=_interopRequireDefault(_KeywordEditionModalCtrl);var _KeywordService=__webpack_require__(643);var _KeywordService2=_interopRequireDefault(_KeywordService);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("KeywordModule",["ui.translation","ui.bootstrap","ui.bootstrap.tpls","ClarolineAPI"]).service("KeywordService",_KeywordService2.default).controller("KeywordCreationModalCtrl",_KeywordCreationModalCtrl2.default).controller("KeywordEditionModalCtrl",_KeywordEditionModalCtrl2.default)},641:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var KeywordCreationModalCtrl=function(){function KeywordCreationModalCtrl($http,$uibModalInstance,KeywordService,resourceId,title,callback){(0,_classCallCheck3.default)(this,KeywordCreationModalCtrl);this.$http=$http;this.$uibModalInstance=$uibModalInstance;this.KeywordService=KeywordService;this.resourceId=resourceId;this.title=title;this.callback=callback;this.keyword={name:null};this.keywordErrors={name:null}}(0,_createClass3.default)(KeywordCreationModalCtrl,[{key:"submit",value:function submit(){var _this=this;this.resetErrors();if(!this.keyword["name"]){this.keywordErrors["name"]=Translator.trans("form_not_blank_error",{},"clacoform")}if(this.isValid()){var checkNameUrl=Routing.generate("claro_claco_form_get_keyword_by_name_excluding_id",{clacoForm:this.resourceId,name:this.keyword["name"],id:0});this.$http.get(checkNameUrl).then(function(d){if(d["status"]===200){if(d["data"]==="null"){var url=Routing.generate("claro_claco_form_keyword_create",{clacoForm:_this.resourceId});_this.$http.post(url,{keywordData:_this.keyword}).then(function(d){_this.callback(d["data"]);_this.$uibModalInstance.close()})}else{_this.keywordErrors["name"]=Translator.trans("form_not_unique_error",{},"clacoform")}}})}}},{key:"resetErrors",value:function resetErrors(){for(var key in this.keywordErrors){this.keywordErrors[key]=null}}},{key:"isValid",value:function isValid(){var valid=true;for(var key in this.keywordErrors){if(this.keywordErrors[key]){valid=false;break}}return valid}}]);return KeywordCreationModalCtrl}();exports.default=KeywordCreationModalCtrl},642:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var KeywordEditionModalCtrl=function(){function KeywordEditionModalCtrl($http,$uibModalInstance,KeywordService,resourceId,keyword,title,callback){(0,_classCallCheck3.default)(this,KeywordEditionModalCtrl);this.$http=$http;this.$uibModalInstance=$uibModalInstance;this.KeywordService=KeywordService;this.resourceId=resourceId;this.source=keyword;this.title=title;this.callback=callback;this.keyword={name:null};this.keywordErrors={name:null};this.initialize()}(0,_createClass3.default)(KeywordEditionModalCtrl,[{key:"initialize",value:function initialize(){this.keyword["name"]=this.source["name"]}},{key:"submit",value:function submit(){var _this=this;this.resetErrors();if(!this.keyword["name"]){this.keywordErrors["name"]=Translator.trans("form_not_blank_error",{},"clacoform")}if(this.isValid()){var checkNameUrl=Routing.generate("claro_claco_form_get_keyword_by_name_excluding_id",{clacoForm:this.resourceId,name:this.keyword["name"],id:this.source["id"]});this.$http.get(checkNameUrl).then(function(d){if(d["status"]===200){if(d["data"]==="null"){var url=Routing.generate("claro_claco_form_keyword_edit",{keyword:_this.source["id"]});_this.$http.put(url,{keywordData:_this.keyword}).then(function(d){_this.callback(d["data"]);_this.$uibModalInstance.close()})}else{_this.keywordErrors["name"]=Translator.trans("form_not_unique_error",{},"clacoform")}}})}}},{key:"resetErrors",value:function resetErrors(){for(var key in this.keywordErrors){this.keywordErrors[key]=null}}},{key:"isValid",value:function isValid(){var valid=true;for(var key in this.keywordErrors){if(this.keywordErrors[key]){valid=false;break}}return valid}}]);return KeywordEditionModalCtrl}();exports.default=KeywordEditionModalCtrl},643:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _keyword_form_modal=__webpack_require__(644);var _keyword_form_modal2=_interopRequireDefault(_keyword_form_modal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var KeywordService=function(){function KeywordService($http,$uibModal,ClarolineAPIService){(0,_classCallCheck3.default)(this,KeywordService);this.$http=$http;this.$uibModal=$uibModal;this.ClarolineAPIService=ClarolineAPIService;this.canEdit=KeywordService._getGlobal("canEdit");this.keywords=KeywordService._getGlobal("keywords");this._addKeywordCallback=this._addKeywordCallback.bind(this);this._updateKeywordCallback=this._updateKeywordCallback.bind(this);this._removeKeywordCallback=this._removeKeywordCallback.bind(this)}(0,_createClass3.default)(KeywordService,[{key:"_addKeywordCallback",value:function _addKeywordCallback(data){var keyword=JSON.parse(data);this.keywords.push(keyword)}},{key:"_updateKeywordCallback",value:function _updateKeywordCallback(data){var keyword=JSON.parse(data);var index=this.keywords.findIndex(function(k){return k["id"]===keyword["id"]});if(index>-1){this.keywords[index]=keyword}}},{key:"_removeKeywordCallback",value:function _removeKeywordCallback(data){var keyword=JSON.parse(data);var index=this.keywords.findIndex(function(k){return k["id"]===keyword["id"]});if(index>-1){this.keywords.splice(index,1)}}},{key:"getKeywords",value:function getKeywords(){return this.keywords}},{key:"createKeyword",value:function createKeyword(_resourceId){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var addCallback=callback!==null?callback:this._addKeywordCallback;this.$uibModal.open({template:_keyword_form_modal2.default,controller:"KeywordCreationModalCtrl",controllerAs:"cfc",resolve:{resourceId:function resourceId(){return _resourceId},title:function title(){return Translator.trans("create_a_keyword",{},"clacoform")},callback:function callback(){return addCallback}}})}},{key:"editKeyword",value:function editKeyword(_keyword,_resourceId2){var callback=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var updateCallback=callback!==null?callback:this._updateKeywordCallback;this.$uibModal.open({template:_keyword_form_modal2.default,controller:"KeywordEditionModalCtrl",controllerAs:"cfc",resolve:{resourceId:function resourceId(){return _resourceId2},keyword:function keyword(){return _keyword},title:function title(){return Translator.trans("edit_keyword",{},"clacoform")},callback:function callback(){return updateCallback}}})}},{key:"deleteKeyword",value:function deleteKeyword(keyword){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var url=Routing.generate("claro_claco_form_keyword_delete",{keyword:keyword["id"]});var deleteCallback=callback!==null?callback:this._removeKeywordCallback;this.ClarolineAPIService.confirm({url:url,method:"DELETE"},deleteCallback,Translator.trans("delete_keyword",{},"clacoform"),Translator.trans("delete_keyword_confirm_message",{name:keyword["name"]},"clacoform"))}}],[{key:"_getGlobal",value:function _getGlobal(name){if(typeof window[name]==="undefined"){throw new Error("Expected "+name+" to be exposed in a window."+name+" variable")}return window[name]}}]);return KeywordService}();exports.default=KeywordService},644:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button>\n        <h3>{{ cfc.title }}</h3>\n    </div>\n    <div class="modal-body">\n        <div class="form-group row" ng-class="cfc.keywordErrors[\'name\'] ? \'has-error\' : \'\'">\n            <label class="control-label col-md-3">\n                {{ \'name\'|trans:{}:\'platform\' }}\n            </label>\n            <div class="col-md-9">\n                <input type="text" class="form-control" ng-model="cfc.keyword[\'name\']">\n                <div class="help-block field-error" ng-if="cfc.keywordErrors[\'name\']">\n                    {{ cfc.keywordErrors[\'name\'] }}\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" data-dismiss="modal" ng-click="$close()">\n            {{ \'cancel\'|trans:{}:\'platform\' }}\n        </button>\n        <button type="submit" class="btn btn-primary" ng-click="cfc.submit()">\n            {{ \'ok\'|trans:{}:\'platform\' }}\n        </button>\n    </div>\n</div>\n'},645:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(5);__webpack_require__(6);__webpack_require__(9);var _EntryService=__webpack_require__(646);var _EntryService2=_interopRequireDefault(_EntryService);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("EntryModule",["ui.translation","ui.bootstrap","ui.bootstrap.tpls","ClarolineAPI"]).service("EntryService",_EntryService2.default)},646:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EntryService=function(){function EntryService($http,$uibModal,ClarolineAPIService,FieldService){(0,_classCallCheck3.default)(this,EntryService);this.$http=$http;this.$uibModal=$uibModal;this.ClarolineAPIService=ClarolineAPIService;this.FieldService=FieldService;this.canEdit=EntryService._getGlobal("canEdit");this.resourceId=EntryService._getGlobal("resourceId");this.resourceDetails=EntryService._getGlobal("resourceDetails");this.entries=[];this.myEntries=EntryService._getGlobal("myEntries");this.managerEntries=EntryService._getGlobal("managerEntries");this.nbEntries=EntryService._getGlobal("nbEntries");this.nbPublishedEntries=EntryService._getGlobal("nbPublishedEntries");this.categoryFilter="";this.keywordFilter="";this._updateEntryCallback=this._updateEntryCallback.bind(this);this._removeEntryCallback=this._removeEntryCallback.bind(this);this.initialize()}(0,_createClass3.default)(EntryService,[{key:"_updateEntryCallback",value:function _updateEntryCallback(data){var statusChanged=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var oldStatus=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var entry=JSON.parse(data);this.formatEntry(entry);var entryIndex=this.entries.findIndex(function(e){return e["id"]===entry["id"]});var myEntryIndex=this.myEntries.findIndex(function(e){return e["id"]===entry["id"]});var managerEntryIndex=this.managerEntries.findIndex(function(e){return e["id"]===entry["id"]});if(entryIndex>-1){this.entries[entryIndex]=entry}if(myEntryIndex>-1){this.myEntries[myEntryIndex]=entry}if(managerEntryIndex>-1){this.managerEntries[managerEntryIndex]=entry}if(statusChanged){if(entry["status"]===1){++this.nbPublishedEntries}else if(oldStatus===1){--this.nbPublishedEntries}}}},{key:"_removeEntryCallback",value:function _removeEntryCallback(data){var entry=JSON.parse(data);var entryIndex=this.entries.findIndex(function(e){return e["id"]===entry["id"]});var myEntryIndex=this.myEntries.findIndex(function(e){return e["id"]===entry["id"]});var managerEntryIndex=this.managerEntries.findIndex(function(e){return e["id"]===entry["id"]});if(entryIndex>-1){this.entries.splice(entryIndex,1)}if(myEntryIndex>-1){this.myEntries.splice(myEntryIndex,1)}if(managerEntryIndex>-1){this.managerEntries.splice(managerEntryIndex,1)}--this.nbEntries;if(entry["status"]===1){--this.nbPublishedEntries}}},{key:"initialize",value:function initialize(){var _this=this;this.myEntries.forEach(function(e){return _this.formatEntry(e)});this.managerEntries.forEach(function(e){return _this.formatEntry(e)});var url=Routing.generate("claro_claco_form_entries_list",{clacoForm:this.resourceId});this.$http.get(url).then(function(d){var data=JSON.parse(d["data"]);data.forEach(function(e){_this.formatEntry(e);_this.entries.push(e)})})}},{key:"getEntries",value:function getEntries(){return this.entries}},{key:"getMyEntries",value:function getMyEntries(){return this.myEntries}},{key:"getManagerEntries",value:function getManagerEntries(){return this.managerEntries}},{key:"getEntry",value:function getEntry(entryId){return this.entries.find(function(e){return e["id"]===entryId})}},{key:"getEntryById",value:function getEntryById(entryId){var _this2=this;var url=Routing.generate("claro_claco_form_entry_retrieve",{entry:entryId});return this.$http.get(url).then(function(d){if(d["status"]===200){var entry=JSON.parse(d["data"]);_this2.formatEntry(entry);return entry}})}},{key:"getNbEntries",value:function getNbEntries(){return this.nbEntries}},{key:"getNbPublishedEntries",value:function getNbPublishedEntries(){return this.nbPublishedEntries}},{key:"getNbMyEntries",value:function getNbMyEntries(){return this.myEntries.length}},{key:"getCanOpenEntry",value:function getCanOpenEntry(entryId){return this.canEdit||this.isManagerEntry(entryId)||this.isMyEntry(entryId)||this.resourceDetails["search_enabled"]&&this.getEntryStatus(entryId)===1}},{key:"getCanEditEntry",value:function getCanEditEntry(entryId){return this.canEdit||this.isManagerEntry(entryId)||this.resourceDetails["edition_enabled"]&&this.isMyEntry(entryId)}},{key:"getCanManageEntry",value:function getCanManageEntry(entryId){return this.canEdit||this.isManagerEntry(entryId)}},{key:"isMyEntry",value:function isMyEntry(entryId){return this.myEntries.find(function(e){return e["id"]===entryId})!==undefined}},{key:"isManagerEntry",value:function isManagerEntry(entryId){return this.managerEntries.find(function(e){return e["id"]===entryId})!==undefined}},{key:"getEntryStatus",value:function getEntryStatus(entryId){
var entry=this.entries.find(function(e){return e["id"]===entryId});return entry?entry["status"]:null}},{key:"createEntry",value:function createEntry(resourceId,entryData,entryTitle){var _this3=this;var keywordsData=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var url=Routing.generate("claro_claco_form_entry_create",{clacoForm:resourceId});return this.$http.post(url,{entryData:entryData,titleData:entryTitle,keywordsData:keywordsData}).then(function(d){if(d["status"]===200){var entry=JSON.parse(d["data"]);_this3.entries.push(entry);_this3.myEntries.push(entry);_this3.formatEntry(entry);++_this3.nbEntries;if(entry["status"]===1){++_this3.nbPublishedEntries}return entry}})}},{key:"editEntry",value:function editEntry(entryId,entryData,entryTitle){var categoriesData=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var keywordsData=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[];var callback=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var url=Routing.generate("claro_claco_form_entry_edit",{entry:entryId});var updateCallback=callback!==null?callback:this._updateEntryCallback;return this.$http.post(url,{entryData:entryData,titleData:entryTitle,categoriesData:categoriesData,keywordsData:keywordsData}).then(function(d){if(d["status"]===200){updateCallback(d["data"]);return true}})}},{key:"formatEntry",value:function formatEntry(entry){var _this4=this;var creationDate=new Date(entry["creationDate"]);entry["creationDateString"]=creationDate.getDate()+"/"+(creationDate.getMonth()+1)+"/"+creationDate.getFullYear();if(entry["user"]){entry["userString"]=entry["user"]["firstName"]+" "+entry["user"]["lastName"]}else{entry["userString"]="-"}if(entry["categories"].length>0){(function(){var categoriesNames=[];entry["categories"].forEach(function(c){return categoriesNames.push(c["name"])});entry["categoriesString"]=categoriesNames.join(", ")})()}else{entry["categoriesString"]="-"}if(entry["keywords"].length>0){(function(){var keywordsNames=[];entry["keywords"].forEach(function(k){return keywordsNames.push(k["name"])});entry["keywordsString"]=keywordsNames.join(", ")})()}else{entry["keywordsString"]="-"}entry["alert"]=entry["status"]===0||entry["comments"].length>0;entry["fieldValues"].forEach(function(v){var fieldId=v["field"]["id"];var fieldLabel="field_"+fieldId;entry[fieldId]=v["fieldFacetValue"]["value"];if(v["fieldFacetValue"]["field_facet"]["type"]===3){var valueDate=new Date(v["fieldFacetValue"]["value"]);entry[fieldLabel]=valueDate.getDate()+"/"+(valueDate.getMonth()+1)+"/"+valueDate.getFullYear()}else if(v["fieldFacetValue"]["field_facet"]["type"]===6){entry[fieldLabel]=v["fieldFacetValue"]["value"].join(", ")}else if(v["fieldFacetValue"]["field_facet"]["type"]===7){entry[fieldLabel]=_this4.FieldService.getCountryNameFromCode(v["fieldFacetValue"]["value"])}else{entry[fieldLabel]=v["fieldFacetValue"]["value"]}})}},{key:"deleteEntry",value:function deleteEntry(entry){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var url=Routing.generate("claro_claco_form_entry_delete",{entry:entry["id"]});var deleteCallback=callback!==null?callback:this._removeEntryCallback;this.ClarolineAPIService.confirm({url:url,method:"DELETE"},deleteCallback,Translator.trans("delete_entry",{},"clacoform"),Translator.trans("delete_entry_confirm_message",{title:entry["title"]},"clacoform"))}},{key:"changeEntryStatus",value:function changeEntryStatus(entry){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var oldStatus=entry["status"];var url=Routing.generate("claro_claco_form_entry_status_change",{entry:entry["id"]});var updateCallback=callback!==null?callback:this._updateEntryCallback;this.$http.put(url).then(function(d){if(d["status"]===200){updateCallback(d["data"],true,oldStatus)}})}},{key:"getCategoryFilter",value:function getCategoryFilter(){return this.categoryFilter}},{key:"setCategoryFilter",value:function setCategoryFilter(filter){this.categoryFilter=filter}},{key:"getKeywordFilter",value:function getKeywordFilter(){return this.keywordFilter}},{key:"setKeywordFilter",value:function setKeywordFilter(filter){this.keywordFilter=filter}}],[{key:"_getGlobal",value:function _getGlobal(name){if(typeof window[name]==="undefined"){throw new Error("Expected "+name+" to be exposed in a window."+name+" variable")}return window[name]}}]);return EntryService}();exports.default=EntryService},647:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(5);__webpack_require__(6);__webpack_require__(9);var _CommentService=__webpack_require__(648);var _CommentService2=_interopRequireDefault(_CommentService);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("CommentModule",["ui.translation","ui.bootstrap","ui.bootstrap.tpls","ClarolineAPI"]).service("CommentService",_CommentService2.default)},648:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CommentService=function(){function CommentService($http,ClarolineAPIService){(0,_classCallCheck3.default)(this,CommentService);this.$http=$http;this.ClarolineAPIService=ClarolineAPIService;this.canEdit=CommentService._getGlobal("canEdit");this.comments=[];this._addCommentCallback=this._addCommentCallback.bind(this)}(0,_createClass3.default)(CommentService,[{key:"_addCommentCallback",value:function _addCommentCallback(data){var comment=JSON.parse(data);this.comments.unshift(comment)}},{key:"_updateCommentCallback",value:function _updateCommentCallback(data){var comment=JSON.parse(data);var index=this.comments.findIndex(function(c){return c["id"]===comment["id"]});if(index>-1){this.comments[index]=comment}}},{key:"_removeCommentCallback",value:function _removeCommentCallback(data){var comment=JSON.parse(data);var index=this.comments.findIndex(function(c){return c["id"]===comment["id"]});if(index>-1){this.comments.splice(index,1)}}},{key:"initializeComments",value:function initializeComments(entryId){var _this=this;var url=Routing.generate("claro_claco_form_entry_comments_retrieve",{entry:entryId});this.$http.get(url).then(function(d){if(d["status"]===200){var retrievedComments=JSON.parse(d["data"]);_this.comments.splice(0,_this.comments.length);retrievedComments.forEach(function(c){return _this.comments.push(c)})}})}},{key:"getComments",value:function getComments(){return this.comments}},{key:"createComment",value:function createComment(entryId,content){var callback=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var url=Routing.generate("claro_claco_form_entry_comment_create",{entry:entryId});var addCallback=callback!==null?callback:this._addCommentCallback;this.$http.post(url,{commentData:content}).then(function(d){if(d["status"]===200){addCallback(d["data"])}})}},{key:"editComment",value:function editComment(comment){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var url=Routing.generate("claro_claco_form_entry_comment_edit",{comment:comment["id"]});var updateCallback=callback!==null?callback:this._updateCommentCallback;this.$http.put(url,{commentData:comment["content"]}).then(function(d){if(d["status"]===200){updateCallback(d["data"])}})}},{key:"deleteComment",value:function deleteComment(comment){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var url=Routing.generate("claro_claco_form_entry_comment_delete",{comment:comment["id"]});var deleteCallback=callback!==null?callback:this._removeCommentCallback;this.ClarolineAPIService.confirm({url:url,method:"DELETE"},deleteCallback,Translator.trans("delete_comment",{},"clacoform"),Translator.trans("delete_comment_confirm_message",{},"clacoform"))}},{key:"activateComment",value:function activateComment(comment){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var url=Routing.generate("claro_claco_form_entry_comment_activate",{comment:comment["id"]});var updateCallback=callback!==null?callback:this._updateCommentCallback;this.$http.put(url).then(function(d){if(d["status"]===200){updateCallback(d["data"])}})}},{key:"blockComment",value:function blockComment(comment){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var url=Routing.generate("claro_claco_form_entry_comment_block",{comment:comment["id"]});var updateCallback=callback!==null?callback:this._updateCommentCallback;this.$http.put(url).then(function(d){if(d["status"]===200){updateCallback(d["data"])}})}}],[{key:"_getGlobal",value:function _getGlobal(name){if(typeof window[name]==="undefined"){throw new Error("Expected "+name+" to be exposed in a window."+name+" variable")}return window[name]}}]);return CommentService}();exports.default=CommentService},649:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function($stateProvider,$urlRouterProvider){var config=window["resourceDetails"];$stateProvider.state("menu",{url:"/menu",template:_menu2.default,controller:"MenuCtrl",controllerAs:"cfc"}).state("general_configuration",{url:"/configuration",template:_general_configuration2.default,controller:"GeneralConfigurationCtrl",controllerAs:"cfc"}).state("fields_management",{url:"/fields/management",template:_fields_management2.default,controller:"FieldsManagementCtrl",controllerAs:"cfc"}).state("categories_management",{url:"/categories/management",template:_categories_management2.default,controller:"CategoriesManagementCtrl",controllerAs:"cfc"}).state("keywords_management",{url:"/keywords/management",template:_keywords_management2.default,controller:"KeywordsManagementCtrl",controllerAs:"cfc"}).state("template_management",{url:"/template/management",template:_template_management2.default,controller:"TemplateManagementCtrl",controllerAs:"cfc"}).state("entries_list",{url:"/entries/list",template:_entries_list2.default,controller:"EntriesListCtrl",controllerAs:"cfc"}).state("entry_creation",{url:"/entries/creation",template:_entry_form2.default,controller:"EntryCreationCtrl",controllerAs:"cfc"}).state("entry_edition",{url:"/entries/{entryId}/edition",template:_entry_form2.default,controller:"EntryEditionCtrl",controllerAs:"cfc"}).state("entry_view",{url:"/entries/{entryId}/view",template:_entry_view2.default,controller:"EntryViewCtrl",controllerAs:"cfc"}).state("entry_random",{url:"/entries/random",controller:"EntryRandomCtrl",controllerAs:"cfc"});switch(config["default_home"]){case"random":$urlRouterProvider.otherwise("/entries/random");break;case"search":$urlRouterProvider.otherwise("/entries/list");break;case"add":$urlRouterProvider.otherwise("/entries/creation");break;default:$urlRouterProvider.otherwise("/menu")}};var _menu=__webpack_require__(650);var _menu2=_interopRequireDefault(_menu);var _general_configuration=__webpack_require__(651);var _general_configuration2=_interopRequireDefault(_general_configuration);var _fields_management=__webpack_require__(652);var _fields_management2=_interopRequireDefault(_fields_management);var _categories_management=__webpack_require__(653);var _categories_management2=_interopRequireDefault(_categories_management);var _keywords_management=__webpack_require__(654);var _keywords_management2=_interopRequireDefault(_keywords_management);var _template_management=__webpack_require__(655);var _template_management2=_interopRequireDefault(_template_management);var _entries_list=__webpack_require__(656);var _entries_list2=_interopRequireDefault(_entries_list);var _entry_form=__webpack_require__(657);var _entry_form2=_interopRequireDefault(_entry_form);var _entry_view=__webpack_require__(658);var _entry_view2=_interopRequireDefault(_entry_view);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},650:function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-heading clearfix">\n        <h3 class="panel-title">\n            <span ng-bind-html="cfc.getResourceNodeName()|trust_html"></span>\n            <span class="badge" ng-if="cfc.showNbEntries">\n                {{ \'entries\'|trans:{}:\'clacoform\' }} :\n                <span ng-if="cfc.config[\'display_nb_entries\'] === \'all\'">\n                    {{ cfc.getNbEntries() }}\n                </span>\n                <span ng-if="cfc.config[\'display_nb_entries\'] === \'published\'">\n                    {{ cfc.getNbPublishedEntries() }}\n                </span>\n            </span>\n            <div class="btn-group pull-right" uib-dropdown ng-if="cfc.canEdit()">\n                <button class="btn btn-default btn-sm" uib-dropdown-toggle>\n                    <i class="fa fa-cogs"></i>\n                    <i class="fa fa-caret-down"></i>\n                </button>\n                <ul class="dropdown-menu" uib-dropdown-menu role="menu">\n                    <li role="menuitem">\n                        <a ui-sref="entry_creation">\n                            {{ \'add_entry\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entries_list">\n                            {{ \'entries_list\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="general_configuration">\n                            {{ \'general_configuration\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="fields_management">\n                            {{ \'fields_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="template_management">\n                            {{ \'template_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <!--<li role="menuitem">-->\n                        <!--<a ui-sref="votes_management">-->\n                            <!--{{ \'votes_management\'|trans:{}:\'clacoform\' }}-->\n                        <!--</a>-->\n                    <!--</li>-->\n                    <li role="menuitem">\n                        <a ui-sref="categories_management">\n                            {{ \'categories_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="keywords_management">\n                            {{ \'keywords_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </h3>\n    </div>\n    <div class="panel-body">\n        <div class="alert alert-danger" ng-if="cfc.getErrorMessage()">\n            <i class="fa fa-times pointer-hand close" ng-click="cfc.clearErrorMessage()"></i>\n            {{ cfc.getErrorMessage() }}\n        </div>\n        <div class="alert alert-success" ng-if="cfc.getSuccessMessage()">\n            <i class="fa fa-times pointer-hand close" ng-click="cfc.clearSuccessMessage()"></i>\n            {{ cfc.getSuccessMessage() }}\n        </div>\n        <div class="text-center">\n            <a class="btn btn-default" ui-sref="entry_creation" ng-if="cfc.canAdd()">\n                <i class="fa fa-pencil-square-o fa-5x"></i>\n                <h4>{{ \'add_entry\'|trans:{}:\'clacoform\' }}</h4>\n            </a>\n            <a class="btn btn-default" ui-sref="entries_list" ng-if="cfc.canSearch()">\n                <i class="fa fa-search fa-5x"></i>\n                <h4>{{ \'find_entry\'|trans:{}:\'clacoform\' }}</h4>\n            </a>\n            <button class="btn btn-default" ng-click="cfc.getRandomEntry()" ng-if="cfc.config[\'random_enabled\']">\n                <i class="fa fa-random fa-5x"></i>\n                <h4>{{ \'random_entry\'|trans:{}:\'clacoform\' }}</h4>\n            </button>\n        </div>\n    </div>\n</div>'},651:function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-heading clearfix">\n        <h3 class="panel-title">\n            {{ \'general_configuration\'|trans:{}:\'clacoform\' }}\n            <div class="btn-group pull-right" uib-dropdown ng-if="cfc.canEdit()">\n                <button class="btn btn-default btn-sm" uib-dropdown-toggle>\n                    <i class="fa fa-cogs"></i>\n                    <i class="fa fa-caret-down"></i>\n                </button>\n                <ul class="dropdown-menu" uib-dropdown-menu role="menu">\n                    <li role="menuitem">\n                        <a ui-sref="menu">\n                            {{ \'main_menu\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entry_creation">\n                            {{ \'add_entry\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entries_list">\n                            {{ \'entries_list\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="fields_management">\n                            {{ \'fields_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="template_management">\n                            {{ \'template_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <!--<li role="menuitem">-->\n                        <!--<a ui-sref="votes_management">-->\n                            <!--{{ \'votes_management\'|trans:{}:\'clacoform\' }}-->\n                        <!--</a>-->\n                    <!--</li>-->\n                    <li role="menuitem">\n                        <a ui-sref="categories_management">\n                            {{ \'categories_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="keywords_management">\n                            {{ \'keywords_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </h3>\n    </div>\n    <div class="panel-body">\n        <div class="panel panel-default" ng-if="cfc.canEdit()">\n            <div class="panel-heading">\n                <span class="pointer-hand"\n                      ng-class="cfc.configErrors[\'max_entries\'] ? \'text-danger\' : \'\'"\n                      ng-click="cfc.isCollapsed[\'general\'] = !cfc.isCollapsed[\'general\']"\n                >\n                    {{ \'general\'|trans:{}:\'platform\' }}\n                    <i ng-class="cfc.isCollapsed[\'general\'] ? \'fa fa-chevron-circle-right\' : \'fa fa-chevron-circle-down\'">\n                    </i>\n                </span>\n            </div>\n            <div class="panel-body" uib-collapse="cfc.isCollapsed[\'general\']">\n                <div class="form-group row" ng-class="cfc.configErrors[\'max_entries\'] ? \'has-error\' : \'\'">\n                    <span class="control-label col-md-3">\n                        {{ \'label_max_entries\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-2">\n                        <input type="number" class="form-control" ng-model="cfc.config[\'max_entries\']">\n                        <div class="help-block field-error" ng-if="cfc.configErrors[\'max_entries\']">\n                            {{ cfc.configErrors[\'max_entries\'] }}\n                        </div>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_creation_enabled\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'creation_enabled\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'creation_enabled\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_edition_enabled\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'edition_enabled\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'edition_enabled\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_moderated\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'moderated\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'moderated\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n            </div>\n            <div class="panel-heading">\n                <span class="pointer-hand" ng-click="cfc.isCollapsed[\'display\'] = !cfc.isCollapsed[\'display\']">\n                    {{ \'display\'|trans:{}:\'clacoform\' }}\n                    <i ng-class="cfc.isCollapsed[\'display\'] ? \'fa fa-chevron-circle-right\' : \'fa fa-chevron-circle-down\'">\n                    </i>\n                </span>\n            </div>\n            <div class="panel-body" uib-collapse="cfc.isCollapsed[\'display\']">\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_default_home\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'default_home\']" value="menu"/>\n                            {{ \'menu\'|trans:{}:\'clacoform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'default_home\']" value="random"/>\n                            {{ \'random_mode\'|trans:{}:\'clacoform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'default_home\']" value="search"/>\n                            {{ \'search_mode\'|trans:{}:\'clacoform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'default_home\']" value="add"/>\n                            {{ \'entry_addition\'|trans:{}:\'clacoform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_display_nb_entries\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_nb_entries\']" value="all"/>\n                            {{ \'choice_entry_all\'|trans:{}:\'clacoform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_nb_entries\']" value="published"/>\n                            {{ \'choice_entry_published\'|trans:{}:\'clacoform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_nb_entries\']" value="none"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_menu_position\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'menu_position\']" value="down"/>\n                            {{ \'choice_menu_position_down\'|trans:{}:\'clacoform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'menu_position\']" value="up"/>\n                            {{ \'choice_menu_position_up\'|trans:{}:\'clacoform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'menu_position\']" value="both"/>\n                            {{ \'choice_menu_position_both\'|trans:{}:\'clacoform\' }}\n                        </label>\n                    </div>\n                </div>\n            </div>\n            <div class="panel-heading">\n                <span class="pointer-hand" ng-click="cfc.isCollapsed[\'random\'] = !cfc.isCollapsed[\'random\']">\n                    {{ \'random_entries\'|trans:{}:\'clacoform\' }}\n                    <i ng-class="cfc.isCollapsed[\'random\'] ? \'fa fa-chevron-circle-right\' : \'fa fa-chevron-circle-down\'">\n                    </i>\n                </span>\n            </div>\n            <div class="panel-body" uib-collapse="cfc.isCollapsed[\'random\']">\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_random_enabled\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'random_enabled\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'random_enabled\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_random_categories\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-5">\n                        <select multiple class="form-control" ng-model="cfc.categories" ng-options="c[\'name\'] for c in cfc.categoriesList">\n                        </select>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_random_date\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-2">\n                        <span class="input-group">\n                            <input type="text"\n                                   class="form-control"\n                                   uib-datepicker-popup="{{ cfc.randomStartDate[\'format\'] }}"\n                                   ng-model="cfc.config[\'random_start_date\']"\n                                   is-open="cfc.randomStartDate[\'open\']"\n                                   datepicker-options="cfc.dateOptions"\n                                   ng-required="true"\n                                   placeholder="{{ cfc.dateOptions[\'placeHolder\'] }}"\n                            />\n                            <span class="input-group-btn">\n                                <button type="button" class="btn btn-default" ng-click="cfc.openDatePicker(\'randomStart\')">\n                                    <i class="fa fa-calendar"></i>\n                                </button>\n                            </span>\n                        </span>\n                    </div>\n                    <div class="col-md-1 text-center">\n                        <i class="fa fa-long-arrow-right"></i>\n                    </div>\n                    <div class="col-md-2">\n                        <span class="input-group">\n                            <input type="text"\n                                   class="form-control"\n                                   uib-datepicker-popup="{{ cfc.randomEndDate[\'format\'] }}"\n                                   ng-model="cfc.config[\'random_end_date\']"\n                                   is-open="cfc.randomEndDate[\'open\']"\n                                   datepicker-options="cfc.dateOptions"\n                                   ng-required="true"\n                                   placeholder="{{ cfc.dateOptions[\'placeHolder\'] }}"\n                            />\n                            <span class="input-group-btn">\n                                <button type="button" class="btn btn-default" ng-click="cfc.openDatePicker(\'randomEnd\')">\n                                    <i class="fa fa-calendar"></i>\n                                </button>\n                            </span>\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div class="panel-heading">\n                <span class="pointer-hand" ng-click="cfc.isCollapsed[\'find\'] = !cfc.isCollapsed[\'find\']">\n                    {{ \'entries_list_search\'|trans:{}:\'clacoform\' }}\n                    <i ng-class="cfc.isCollapsed[\'find\'] ? \'fa fa-chevron-circle-right\' : \'fa fa-chevron-circle-down\'">\n                    </i>\n                </span>\n            </div>\n            <div class="panel-body" uib-collapse="cfc.isCollapsed[\'find\']">\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_search_enabled\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'search_enabled\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'search_enabled\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_search_column_enabled\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'search_column_enabled\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'search_column_enabled\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n            </div>\n            <div class="panel-heading">\n                <span class="pointer-hand" ng-click="cfc.isCollapsed[\'data\'] = !cfc.isCollapsed[\'data\']">\n                    {{ \'metadata\'|trans:{}:\'clacoform\' }}\n                    <i ng-class="cfc.isCollapsed[\'data\'] ? \'fa fa-chevron-circle-right\' : \'fa fa-chevron-circle-down\'">\n                    </i>\n                </span>\n            </div>\n            <div class="panel-body" uib-collapse="cfc.isCollapsed[\'data\']">\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_display_metadata\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_metadata\']" value="all"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_metadata\']" value="none"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_metadata\']" value="manager"/>\n                            {{ \'choice_manager_only\'|trans:{}:\'clacoform\' }}\n                        </label>\n                    </div>\n                </div>\n            </div>\n            <div class="panel-heading">\n                <span class="pointer-hand" ng-click="cfc.isCollapsed[\'categories\'] = !cfc.isCollapsed[\'categories\']">\n                    {{ \'categories\'|trans:{}:\'platform\' }}\n                    <i ng-class="cfc.isCollapsed[\'categories\'] ? \'fa fa-chevron-circle-right\' : \'fa fa-chevron-circle-down\'">\n                    </i>\n                </span>\n            </div>\n            <div class="panel-body" uib-collapse="cfc.isCollapsed[\'categories\']">\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_display_categories\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_categories\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_categories\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_open_panel_by_default\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'open_categories\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'open_categories\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n            </div>\n            <div class="panel-heading">\n                <span class="pointer-hand" ng-click="cfc.isCollapsed[\'comments\'] = !cfc.isCollapsed[\'comments\']">\n                    {{ \'comments\'|trans:{}:\'clacoform\' }}\n                    <i ng-class="cfc.isCollapsed[\'comments\'] ? \'fa fa-chevron-circle-right\' : \'fa fa-chevron-circle-down\'">\n                    </i>\n                </span>\n            </div>\n            <div class="panel-body" uib-collapse="cfc.isCollapsed[\'comments\']">\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_comments_enabled\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'comments_enabled\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'comments_enabled\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_anonymous_comments_enabled\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'anonymous_comments_enabled\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'anonymous_comments_enabled\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_moderate_comments\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'moderate_comments\']" value="all"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'moderate_comments\']" value="none"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'moderate_comments\']" value="anonymous"/>\n                            {{ \'choice_anonymous_comments_only\'|trans:{}:\'clacoform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_display_comments\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_comments\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_comments\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_open_panel_by_default\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'open_comments\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'open_comments\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_display_comment_author\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_comment_author\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_comment_author\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_display_comment_date\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_comment_date\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_comment_date\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n            </div>\n            <!--<div class="panel-heading">-->\n                <!--<span class="pointer-hand" ng-click="cfc.isCollapsed[\'votes\'] = !cfc.isCollapsed[\'votes\']">-->\n                    <!--{{ \'votes\'|trans:{}:\'clacoform\' }}-->\n                    <!--<i ng-class="cfc.isCollapsed[\'votes\'] ? \'fa fa-chevron-circle-right\' : \'fa fa-chevron-circle-down\'">-->\n                    <!--</i>-->\n                <!--</span>-->\n            <!--</div>-->\n            <!--<div class="panel-body" uib-collapse="cfc.isCollapsed[\'votes\']">-->\n                <!--<div class="form-group row">-->\n                    <!--<span class="control-label col-md-3">-->\n                        <!--{{ \'label_votes_enabled\'|trans:{}:\'clacoform\' }}-->\n                    <!--</span>-->\n                    <!--<div class="col-md-9">-->\n                        <!--<label>-->\n                            <!--<input type="radio" ng-model="cfc.config[\'votes_enabled\']" ng-value="true"/>-->\n                            <!--{{ \'yes\'|trans:{}:\'platform\' }}-->\n                        <!--</label>-->\n                        <!--&nbsp;&nbsp;&nbsp;&nbsp;-->\n                        <!--<label>-->\n                            <!--<input type="radio" ng-model="cfc.config[\'votes_enabled\']" ng-value="false"/>-->\n                            <!--{{ \'no\'|trans:{}:\'platform\' }}-->\n                        <!--</label>-->\n                    <!--</div>-->\n                <!--</div>-->\n                <!--<div class="form-group row">-->\n                    <!--<span class="control-label col-md-3">-->\n                        <!--{{ \'label_display_votes\'|trans:{}:\'clacoform\' }}-->\n                    <!--</span>-->\n                    <!--<div class="col-md-9">-->\n                        <!--<label>-->\n                            <!--<input type="radio" ng-model="cfc.config[\'display_votes\']" ng-value="true"/>-->\n                            <!--{{ \'yes\'|trans:{}:\'platform\' }}-->\n                        <!--</label>-->\n                        <!--&nbsp;&nbsp;&nbsp;&nbsp;-->\n                        <!--<label>-->\n                            <!--<input type="radio" ng-model="cfc.config[\'display_votes\']" ng-value="false"/>-->\n                            <!--{{ \'no\'|trans:{}:\'platform\' }}-->\n                        <!--</label>-->\n                    <!--</div>-->\n                <!--</div>-->\n                <!--<div class="form-group row">-->\n                    <!--<span class="control-label col-md-3">-->\n                        <!--{{ \'label_open_panel_by_default\'|trans:{}:\'clacoform\' }}-->\n                    <!--</span>-->\n                    <!--<div class="col-md-9">-->\n                        <!--<label>-->\n                            <!--<input type="radio" ng-model="cfc.config[\'open_votes\']" ng-value="true"/>-->\n                            <!--{{ \'yes\'|trans:{}:\'platform\' }}-->\n                        <!--</label>-->\n                        <!--&nbsp;&nbsp;&nbsp;&nbsp;-->\n                        <!--<label>-->\n                            <!--<input type="radio" ng-model="cfc.config[\'open_votes\']" ng-value="false"/>-->\n                            <!--{{ \'no\'|trans:{}:\'platform\' }}-->\n                        <!--</label>-->\n                    <!--</div>-->\n                <!--</div>-->\n                <!--<div class="form-group row">-->\n                    <!--<span class="control-label col-md-3">-->\n                        <!--{{ \'label_votes_date\'|trans:{}:\'clacoform\' }}-->\n                    <!--</span>-->\n                    <!--<div class="col-md-2">-->\n                        <!--<span class="input-group">-->\n                            <!--<input type="text"-->\n                                   <!--class="form-control"-->\n                                   <!--uib-datepicker-popup="{{ cfc.votesStartDate[\'format\'] }}"-->\n                                   <!--ng-model="cfc.config[\'votes_start_date\']"-->\n                                   <!--is-open="cfc.votesStartDate[\'open\']"-->\n                                   <!--datepicker-options="cfc.dateOptions"-->\n                                   <!--ng-required="true"-->\n                                   <!--placeholder="{{ cfc.dateOptions[\'placeHolder\'] }}"-->\n                            <!--/>-->\n                            <!--<span class="input-group-btn">-->\n                                <!--<button type="button" class="btn btn-default" ng-click="cfc.openDatePicker(\'votesStart\')">-->\n                                    <!--<i class="fa fa-calendar"></i>-->\n                                <!--</button>-->\n                            <!--</span>-->\n                        <!--</span>-->\n                    <!--</div>-->\n                    <!--<div class="col-md-1 text-center">-->\n                        <!--<i class="fa fa-long-arrow-right"></i>-->\n                    <!--</div>-->\n                    <!--<div class="col-md-2">-->\n                        <!--<span class="input-group">-->\n                            <!--<input type="text"-->\n                                   <!--class="form-control"-->\n                                   <!--uib-datepicker-popup="{{ cfc.votesEndDate[\'format\'] }}"-->\n                                   <!--ng-model="cfc.config[\'votes_end_date\']"-->\n                                   <!--is-open="cfc.votesEndDate[\'open\']"-->\n                                   <!--datepicker-options="cfc.dateOptions"-->\n                                   <!--ng-required="true"-->\n                                   <!--placeholder="{{ cfc.dateOptions[\'placeHolder\'] }}"-->\n                            <!--/>-->\n                            <!--<span class="input-group-btn">-->\n                                <!--<button type="button" class="btn btn-default" ng-click="cfc.openDatePicker(\'votesEnd\')">-->\n                                    <!--<i class="fa fa-calendar"></i>-->\n                                <!--</button>-->\n                            <!--</span>-->\n                        <!--</span>-->\n                    <!--</div>-->\n                <!--</div>-->\n            <!--</div>-->\n            <div class="panel-heading">\n                <span class="pointer-hand" ng-click="cfc.isCollapsed[\'keywords\'] = !cfc.isCollapsed[\'keywords\']">\n                    {{ \'keywords\'|trans:{}:\'clacoform\' }}\n                    <i ng-class="cfc.isCollapsed[\'keywords\'] ? \'fa fa-chevron-circle-right\' : \'fa fa-chevron-circle-down\'">\n                    </i>\n                </span>\n            </div>\n            <div class="panel-body" uib-collapse="cfc.isCollapsed[\'keywords\']">\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_keywords_enabled\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'keywords_enabled\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'keywords_enabled\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_new_keywords_enabled\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'new_keywords_enabled\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'new_keywords_enabled\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_display_keywords\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_keywords\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'display_keywords\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <span class="control-label col-md-3">\n                        {{ \'label_open_panel_by_default\'|trans:{}:\'clacoform\' }}\n                    </span>\n                    <div class="col-md-9">\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'open_keywords\']" ng-value="true"/>\n                            {{ \'yes\'|trans:{}:\'platform\' }}\n                        </label>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <label>\n                            <input type="radio" ng-model="cfc.config[\'open_keywords\']" ng-value="false"/>\n                            {{ \'no\'|trans:{}:\'platform\' }}\n                        </label>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="alert alert-danger" ng-if="!cfc.canEdit()">\n            {{ \'unauthorized\'|trans:{}:\'platform\' }}\n        </div>\n    </div>\n    <div class="panel-footer" ng-if="cfc.canEdit()">\n        <button class="btn btn-primary" ng-click="cfc.submit()">\n            {{ \'ok\'|trans:{}:\'platform\' }}\n        </button>\n        <a class="btn btn-default" ui-sref="menu">\n            {{ \'cancel\'|trans:{}:\'platform\' }}\n        </a>\n    </div>\n</div>';
},652:function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-heading clearfix">\n        <h3 class="panel-title">\n            {{ \'fields_management\'|trans:{}:\'clacoform\' }}\n            <div class="btn-group pull-right" uib-dropdown ng-if="cfc.canEdit()">\n                <button class="btn btn-default btn-sm" uib-dropdown-toggle>\n                    <i class="fa fa-cogs"></i>\n                    <i class="fa fa-caret-down"></i>\n                </button>\n                <ul class="dropdown-menu" uib-dropdown-menu role="menu">\n                    <li role="menuitem">\n                        <a ui-sref="menu">\n                            {{ \'main_menu\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entry_creation">\n                            {{ \'add_entry\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entries_list">\n                            {{ \'entries_list\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="general_configuration">\n                            {{ \'general_configuration\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="template_management">\n                            {{ \'template_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <!--<li role="menuitem">-->\n                        <!--<a ui-sref="votes_management">-->\n                            <!--{{ \'votes_management\'|trans:{}:\'clacoform\' }}-->\n                        <!--</a>-->\n                    <!--</li>-->\n                    <li role="menuitem">\n                        <a ui-sref="categories_management">\n                            {{ \'categories_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="keywords_management">\n                            {{ \'keywords_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </h3>\n    </div>\n    <div class="panel-body">\n        <div ng-if="cfc.canEdit()">\n            <div class="table-responsive" ng-if="cfc.fields.length > 0">\n                <table class="table" ng-table="cfc.tableParams" show-filter="true">\n                    <tr ng-repeat="field in $data">\n                        <td data-title="\'name\'|trans:{}:\'platform\'" filter="{name: \'text\'}" sortable="\'name\'">\n                            {{ field[\'name\'] }}\n                        </td>\n                        <td class="text-center" data-title="\'type\'|trans:{}:\'platform\'" filter="{typeName: \'text\'}" sortable="\'typeName\'">\n                            {{ field[\'typeName\'] }}\n                        </td>\n                        <td class="text-center" data-title="\'mandatory\'|trans:{}:\'clacoform\'" sortable="\'required\'">\n                            <i class="fa fa-check text-success" ng-if="field[\'required\']"></i>\n                            <i class="fa fa-times text-danger" ng-if="!field[\'required\']"></i>\n                        </td>\n                        <td class="text-center" data-title="\'metadata\'|trans:{}:\'clacoform\'" sortable="\'isMetadata\'">\n                            <i class="fa fa-check text-success" ng-if="field[\'isMetadata\']"></i>\n                            <i class="fa fa-times text-danger" ng-if="!field[\'isMetadata\']"></i>\n                        </td>\n                        <td class="text-center" data-title="\'actions\'|trans:{}:\'platform\'">\n                            <button class="btn btn-default btn-sm" ng-click="cfc.editField(field)">\n                                <i class="fa fa-pencil"></i>\n                            </button>\n                            <button class="btn btn-danger btn-sm" ng-click="cfc.deleteField(field)">\n                                <i class="fa fa-trash"></i>\n                            </button>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n            <div class="alert alert-warning" ng-if="cfc.fields.length === 0">\n                {{ \'no_field\'|trans:{}:\'clacoform\' }}\n            </div>\n            <button class="btn btn-primary" ng-click="cfc.createField()">\n                <i class="fa fa-plus"></i>\n                {{ \'create_a_field\'|trans:{}:\'clacoform\' }}\n            </button>\n        </div>\n        <div class="alert alert-danger" ng-if="!cfc.canEdit()">\n            {{ \'unauthorized\'|trans:{}:\'platform\' }}\n        </div>\n    </div>\n</div>'},653:function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-heading clearfix">\n        <h3 class="panel-title">\n            {{ \'categories_management\'|trans:{}:\'clacoform\' }}\n            <div class="btn-group pull-right" uib-dropdown ng-if="cfc.canEdit()">\n                <button class="btn btn-default btn-sm" uib-dropdown-toggle>\n                    <i class="fa fa-cogs"></i>\n                    <i class="fa fa-caret-down"></i>\n                </button>\n                <ul class="dropdown-menu" uib-dropdown-menu role="menu">\n                    <li role="menuitem">\n                        <a ui-sref="menu">\n                            {{ \'main_menu\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entry_creation">\n                            {{ \'add_entry\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entries_list">\n                            {{ \'entries_list\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="general_configuration">\n                            {{ \'general_configuration\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="fields_management">\n                            {{ \'fields_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="template_management">\n                            {{ \'template_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <!--<li role="menuitem">-->\n                        <!--<a ui-sref="votes_management">-->\n                            <!--{{ \'votes_management\'|trans:{}:\'clacoform\' }}-->\n                        <!--</a>-->\n                    <!--</li>-->\n                    <li role="menuitem">\n                        <a ui-sref="keywords_management">\n                            {{ \'keywords_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </h3>\n    </div>\n    <div class="panel-body">\n        <div ng-if="cfc.canEdit()">\n            <div class="table-responsive" ng-if="cfc.categories.length > 0">\n                <table class="table" ng-table="cfc.tableParams" show-filter="true">\n                    <tr ng-repeat="category in $data">\n                        <td data-title="\'name\'|trans:{}:\'platform\'" filter="{name: \'text\'}" sortable="\'name\'">\n                            <i class="fa fa-circle" ng-style="{\'color\': category[\'details\'][\'color\']}" ng-if="category[\'details\'][\'color\']"></i>\n                            {{ category[\'name\'] }}\n                        </td>\n                        <td class="text-center" data-title="\'managers\'|trans:{}:\'clacoform\'" filter="{managersName: \'text\'}" sortable="\'managersName\'">\n                            {{ category[\'managersName\'] }}\n                        </td>\n                        <td class="text-center" data-title="\'category_notify_addition\'|trans:{}:\'clacoform\'" sortable="\'details.notify_addition\'">\n                            <i class="fa fa-check text-success" ng-if="category[\'details\'][\'notify_addition\']"></i>\n                            <i class="fa fa-times text-danger" ng-if="!category[\'details\'][\'notify_addition\']"></i>\n                        </td>\n                        <td class="text-center" data-title="\'category_notify_edition\'|trans:{}:\'clacoform\'" sortable="\'details.notify_edition\'">\n                            <i class="fa fa-check text-success" ng-if="category[\'details\'][\'notify_edition\']"></i>\n                            <i class="fa fa-times text-danger" ng-if="!category[\'details\'][\'notify_edition\']"></i>\n                        </td>\n                        <td class="text-center" data-title="\'category_notify_removal\'|trans:{}:\'clacoform\'" sortable="\'details.notify_removal\'">\n                            <i class="fa fa-check text-success" ng-if="category[\'details\'][\'notify_removal\']"></i>\n                            <i class="fa fa-times text-danger" ng-if="!category[\'details\'][\'notify_removal\']"></i>\n                        </td>\n                        <td class="text-center" data-title="\'actions\'|trans:{}:\'platform\'">\n                            <button class="btn btn-default btn-sm" ng-click="cfc.editCategory(category)">\n                                <i class="fa fa-pencil"></i>\n                            </button>\n                            <button class="btn btn-danger btn-sm" ng-click="cfc.deleteCategory(category)">\n                                <i class="fa fa-trash"></i>\n                            </button>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n            <div class="alert alert-warning" ng-if="cfc.categories.length === 0">\n                {{ \'no_category\'|trans:{}:\'clacoform\' }}\n            </div>\n            <button class="btn btn-primary" ng-click="cfc.createCategory()">\n                <i class="fa fa-plus"></i>\n                {{ \'create_a_category\'|trans:{}:\'clacoform\' }}\n            </button>\n        </div>\n        <div class="alert alert-danger" ng-if="!cfc.canEdit()">\n            {{ \'unauthorized\'|trans:{}:\'platform\' }}\n        </div>\n    </div>\n</div>'},654:function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-heading clearfix">\n        <h3 class="panel-title">\n            {{ \'keywords_management\'|trans:{}:\'clacoform\' }}\n            <div class="btn-group pull-right" uib-dropdown ng-if="cfc.canEdit()">\n                <button class="btn btn-default btn-sm" uib-dropdown-toggle>\n                    <i class="fa fa-cogs"></i>\n                    <i class="fa fa-caret-down"></i>\n                </button>\n                <ul class="dropdown-menu" uib-dropdown-menu role="menu">\n                    <li role="menuitem">\n                        <a ui-sref="menu">\n                            {{ \'main_menu\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entry_creation">\n                            {{ \'add_entry\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entries_list">\n                            {{ \'entries_list\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="general_configuration">\n                            {{ \'general_configuration\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="fields_management">\n                            {{ \'fields_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="template_management">\n                            {{ \'template_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <!--<li role="menuitem">-->\n                        <!--<a ui-sref="votes_management">-->\n                            <!--{{ \'votes_management\'|trans:{}:\'clacoform\' }}-->\n                        <!--</a>-->\n                    <!--</li>-->\n                    <li role="menuitem">\n                        <a ui-sref="categories_management">\n                            {{ \'categories_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </h3>\n    </div>\n    <div class="panel-body">\n        <div ng-if="cfc.canEdit()">\n            <div class="table-responsive" ng-if="cfc.keywords.length > 0">\n                <table class="table" ng-table="cfc.tableParams" show-filter="true">\n                    <tr ng-repeat="keyword in $data">\n                        <td data-title="\'name\'|trans:{}:\'platform\'" filter="{name: \'text\'}" sortable="\'name\'">\n                            {{ keyword[\'name\'] }}\n                        </td>\n                        <td class="text-center" data-title="\'actions\'|trans:{}:\'platform\'">\n                            <button class="btn btn-default btn-sm" ng-click="cfc.editKeyword(keyword)">\n                                <i class="fa fa-pencil"></i>\n                            </button>\n                            <button class="btn btn-danger btn-sm" ng-click="cfc.deleteKeyword(keyword)">\n                                <i class="fa fa-trash"></i>\n                            </button>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n            <div class="alert alert-warning" ng-if="cfc.keywords.length === 0">\n                {{ \'no_keyword\'|trans:{}:\'clacoform\' }}\n            </div>\n            <button class="btn btn-primary" ng-click="cfc.createKeyword()">\n                <i class="fa fa-plus"></i>\n                {{ \'create_a_keyword\'|trans:{}:\'clacoform\' }}\n            </button>\n        </div>\n        <div class="alert alert-danger" ng-if="!cfc.canEdit()">\n            {{ \'unauthorized\'|trans:{}:\'platform\' }}\n        </div>\n    </div>\n</div>'},655:function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-heading clearfix">\n        <h3 class="panel-title">\n            {{ \'template_management\'|trans:{}:\'clacoform\' }}\n            <div class="btn-group pull-right" uib-dropdown ng-if="cfc.canEdit()">\n                <button class="btn btn-default btn-sm" uib-dropdown-toggle>\n                    <i class="fa fa-cogs"></i>\n                    <i class="fa fa-caret-down"></i>\n                </button>\n                <ul class="dropdown-menu" uib-dropdown-menu role="menu">\n                    <li role="menuitem">\n                        <a ui-sref="menu">\n                            {{ \'main_menu\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entry_creation">\n                            {{ \'add_entry\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entries_list">\n                            {{ \'entries_list\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="general_configuration">\n                            {{ \'general_configuration\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="fields_management">\n                            {{ \'fields_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <!--<li role="menuitem">-->\n                        <!--<a ui-sref="votes_management">-->\n                            <!--{{ \'votes_management\'|trans:{}:\'clacoform\' }}-->\n                        <!--</a>-->\n                    <!--</li>-->\n                    <li role="menuitem">\n                        <a ui-sref="categories_management">\n                            {{ \'categories_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="keywords_management">\n                            {{ \'keywords_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </h3>\n    </div>\n    <div class="panel-body">\n        <div ng-if="cfc.canEdit()">\n            <div class="alert alert-warning">\n                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">\n                    &times;\n                </button>\n                {{ \'template_variables_message\'|trans:{}:\'clacoform\' }}\n                <div>\n                    <br>\n                    <h4>\n                        {{ \'mandatory\'|trans:{}:\'clacoform\' }}\n                        <small>({{ \'template_mandatory_variables_message\'|trans:{}:\'clacoform\' }})</small>\n                    </h4>\n                    <ul>\n                        <li>\n                            <b>%clacoform_entry_title%</b> : {{ \'entry_title_info\'|trans:{}:\'clacoform\' }}\n                        </li>\n                        <li ng-repeat="field in cfc.mandatory">\n                            <b>%{{ cfc.removeAccent(field[\'name\']) }}%</b> : {{ field[\'typeName\'] }}\n                        </li>\n                    </ul>\n                </div>\n                <div ng-if="cfc.optional.length > 0">\n                    <hr>\n                    <h4>{{ \'optional\'|trans:{}:\'clacoform\' }}</h4>\n                    <ul>\n                        <li ng-repeat="field in cfc.optional">\n                            <b>%{{ cfc.removeAccent(field[\'name\']) }}%</b> : {{ field[\'typeName\'] }}\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class="alert alert-danger" ng-if="cfc.requiredErrors.length > 0 || cfc.duplicatedErrors.length > 0">\n                <div ng-if="cfc.requiredErrors.length > 0">\n                    {{ \'template_missing_mandatory_variables_message\'|trans:{}:\'clacoform\' }}\n                    <ul>\n                        <li ng-repeat="field in cfc.requiredErrors">\n                            %{{ field[\'name\'] }}%\n                        </li>\n                    </ul>\n                </div>\n                <div ng-if="cfc.duplicatedErrors.length > 0">\n                    {{ \'template_duplicated_variables_message\'|trans:{}:\'clacoform\' }}\n                    <ul>\n                        <li ng-repeat="field in cfc.duplicatedErrors">\n                            %{{ field[\'name\'] }}%\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <textarea data-ui-tinymce="cfc.tinymceOptions"\n                      data-before-unload="off"\n                      id="clacoform-template"\n                      class="form-control"\n                      ng-model="cfc.template"\n            >\n            </textarea>\n        </div>\n        <div class="alert alert-danger" ng-if="!cfc.canEdit()">\n            {{ \'unauthorized\'|trans:{}:\'platform\' }}\n        </div>\n    </div>\n    <div class="panel-footer" ng-if="cfc.canEdit()">\n        <button class="btn btn-primary" ng-click="cfc.submit()">\n            {{ \'ok\'|trans:{}:\'platform\' }}\n        </button>\n        <a class="btn btn-default" ui-sref="menu">\n            {{ \'cancel\'|trans:{}:\'platform\' }}\n        </a>\n    </div>\n</div>'},656:function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-heading clearfix">\n        <h3 class="panel-title">\n            {{ \'entries_list\'|trans:{}:\'clacoform\' }}\n            <div class="btn-group pull-right" uib-dropdown ng-if="cfc.canEdit()">\n                <button class="btn btn-default btn-sm" uib-dropdown-toggle>\n                    <i class="fa fa-cogs"></i>\n                    <i class="fa fa-caret-down"></i>\n                </button>\n                <ul class="dropdown-menu" uib-dropdown-menu role="menu">\n                    <li role="menuitem">\n                        <a ui-sref="menu">\n                            {{ \'main_menu\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entry_creation">\n                            {{ \'add_entry\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="general_configuration">\n                            {{ \'general_configuration\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="fields_management">\n                            {{ \'fields_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="template_management">\n                            {{ \'template_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <!--<li role="menuitem">-->\n                        <!--<a ui-sref="votes_management">-->\n                            <!--{{ \'votes_management\'|trans:{}:\'clacoform\' }}-->\n                        <!--</a>-->\n                    <!--</li>-->\n                    <li role="menuitem">\n                        <a ui-sref="categories_management">\n                            {{ \'categories_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="keywords_management">\n                            {{ \'keywords_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </h3>\n    </div>\n    <div class="panel-body">\n        <div ng-if="cfc.mode === \'all_entries\'">\n            <div class="col-md-2" ng-if="!cfc.isAnon()">\n                <select class="form-control" ng-model="cfc.mode">\n                    <option ng-repeat="mode in cfc.modes" value="{{ mode }}">{{ mode|trans:{}:\'clacoform\' }}</option>\n                </select>\n            </div>\n            <div ng-if="cfc.config[\'search_column_enabled\']">\n                <div class="btn-group pull-right" uib-dropdown dropdown-append-to-body="true" auto-close="outsideClick">\n                    <button class="btn btn-default btn-sm" area-expanded="true" uib-dropdown-toggle>\n                        {{ \'filters\'|trans:{}:\'platform\' }}\n                        <span class="caret"></span>\n                    </button>\n                    <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n                        <li role="menuitem" ng-repeat="key in cfc.columnsKeys[\'entries\']">\n                            <label>\n                                <input type="checkbox" ng-model="cfc.columns[\'entries\'][key][\'value\']">\n                                {{ cfc.columns[\'entries\'][key][\'name\'] }}\n                            </label>\n                        </li>\n                    </ul>\n                </div>\n                <br>\n                <br>\n            </div>\n            <div class="table-responsive" ng-if="cfc.entries.length > 0">\n                <table class="table" ng-table-dynamic="cfc.tableParams[\'entries\'] with cfc.getDisplayedColumns(\'entries\')" show-filter="true">\n                    <tr ng-repeat="entry in $data" ng-class="cfc.getStatusClass(entry[\'status\'])">\n                        <td class="text-center" ng-repeat="fc in cfc.fieldsColumns[\'entries\']" ng-if="fc[\'id\'] === \'alert\' || cfc.columns[\'entries\'][fc[\'id\']][\'value\']">\n                            <span ng-if="fc[\'id\'] === \'alert\'">\n                                <i class="fa fa-exclamation-circle"\n                                   data-toggle="tooltip"\n                                   data-placement="top"\n                                   title="{{ \'pending\'|trans:{}:\'platform\' }}"\n                                   ng-if="entry[\'status\'] === 0"\n                                >\n                                </i>\n                                <i class="fa fa-comments"\n                                   data-toggle="tooltip"\n                                   data-placement="top"\n                                   title="{{ \'comments\'|trans:{}:\'clacoform\' }}"\n                                   ng-if="entry[\'comments\'].length > 0"\n                                >\n                                </i>\n                            </span>\n                            <span ng-if="fc[\'id\'] === \'actions\'">\n                                <a class="btn btn-default btn-sm" ui-sref="entry_edition({entryId: entry[\'id\']})">\n                                    <i class="fa fa-pencil"></i>\n                                </a>\n                                <button class="btn btn-default btn-sm"\n                                        data-toggle="tooltip"\n                                        data-placement="top"\n                                        title="{{ \'unpublish\'|trans:{}:\'platform\' }}"\n                                        ng-click="cfc.changeEntryStatus(entry)"\n                                        ng-if="entry[\'status\'] === 1"\n                                >\n                                    <i class="fa fa-eye-slash"></i>\n                                </button>\n                                <button class="btn btn-default btn-sm"\n                                        data-toggle="tooltip"\n                                        data-placement="top"\n                                        title="{{ \'publish\'|trans:{}:\'platform\' }}"\n                                        ng-click="cfc.changeEntryStatus(entry)"\n                                        ng-if="entry[\'status\'] !== 1"\n                                >\n                                    <i class="fa fa-eye"></i>\n                                </button>\n                                <button class="btn btn-danger btn-sm" ng-click="cfc.deleteEntry(entry)">\n                                    <i class="fa fa-trash"></i>\n                                </button>\n                            </span>\n                            <span ng-if="cfc.isDefaultField(fc[\'id\'])">\n                                <a ui-sref="entry_view({entryId: entry[\'id\']})" ng-if="fc[\'id\'] === \'title\'">\n                                    {{ entry[fc[\'id\']] }}\n                                </a>\n                                <span ng-if="fc[\'id\'] !== \'title\'">\n                                    {{ entry[fc[\'id\']] }}\n                                </span>\n                            </span>\n                            <span ng-if="cfc.isCustomField(fc[\'id\'])">\n                                {{ entry[\'field_\' + fc[\'id\']] }}\n                            </span>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n            <div class="alert alert-warning" ng-if="cfc.entries.length === 0">\n                {{ \'no_entry\'|trans:{}:\'clacoform\' }}\n            </div>\n        </div>\n        <div ng-if="cfc.mode === \'my_entries\'">\n            <div class="col-md-2" ng-if="!cfc.isAnon()">\n                <select class="form-control" ng-model="cfc.mode">\n                    <option ng-repeat="mode in cfc.modes" value="{{ mode }}">{{ mode|trans:{}:\'clacoform\' }}</option>\n                </select>\n            </div>\n            <div ng-if="cfc.config[\'search_column_enabled\']">\n                <div class="btn-group pull-right" uib-dropdown dropdown-append-to-body="true" auto-close="outsideClick">\n                    <button class="btn btn-default btn-sm" area-expanded="true" uib-dropdown-toggle>\n                        {{ \'filters\'|trans:{}:\'platform\' }}\n                        <span class="caret"></span>\n                    </button>\n                    <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n                        <li role="menuitem" ng-repeat="key in cfc.columnsKeys[\'myEntries\']">\n                            <label>\n                                <input type="checkbox" ng-model="cfc.columns[\'myEntries\'][key][\'value\']">\n                                {{ cfc.columns[\'myEntries\'][key][\'name\'] }}\n                            </label>\n                        </li>\n                    </ul>\n                </div>\n                <br>\n                <br>\n            </div>\n            <div class="table-responsive" ng-if="cfc.myEntries.length > 0">\n                <table class="table" ng-table-dynamic="cfc.tableParams[\'myEntries\'] with cfc.getDisplayedColumns(\'myEntries\')" show-filter="true">\n                    <tr ng-repeat="entry in $data" ng-class="cfc.getStatusClass(entry[\'status\'])">\n                        <td class="text-center" ng-repeat="fc in cfc.fieldsColumns[\'myEntries\']" ng-if="fc[\'id\'] === \'alert\' || cfc.columns[\'myEntries\'][fc[\'id\']][\'value\']">\n                            <span ng-if="fc[\'id\'] === \'alert\'">\n                                <i class="fa fa-exclamation-circle"\n                                   data-toggle="tooltip"\n                                   data-placement="top"\n                                   title="{{ \'pending\'|trans:{}:\'platform\' }}"\n                                   ng-if="entry[\'status\'] === 0"\n                                >\n                                </i>\n                                <i class="fa fa-comments"\n                                   data-toggle="tooltip"\n                                   data-placement="top"\n                                   title="{{ \'comments\'|trans:{}:\'clacoform\' }}"\n                                   ng-if="entry[\'comments\'].length > 0"\n                                >\n                                </i>\n                            </span>\n                            <span ng-if="fc[\'id\'] === \'actions\'">\n                                <a class="btn btn-default btn-sm" ui-sref="entry_edition({entryId: entry[\'id\']})">\n                                    <i class="fa fa-pencil"></i>\n                                </a>\n                                <button class="btn btn-danger btn-sm" ng-click="cfc.deleteEntry(entry)">\n                                    <i class="fa fa-trash"></i>\n                                </button>\n                            </span>\n                            <span ng-if="cfc.isDefaultField(fc[\'id\'])">\n                                {{ entry[fc[\'id\']] }}\n                            </span>\n                            <span ng-if="cfc.isCustomField(fc[\'id\'])">\n                                {{ entry[\'field_\' + fc[\'id\']] }}\n                            </span>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n            <div class="alert alert-warning" ng-if="cfc.myEntries.length === 0">\n                {{ \'no_own_entry\'|trans:{}:\'clacoform\' }}\n            </div>\n        </div>\n        <div ng-if="cfc.mode === \'manager_entries\'">\n            <div class="col-md-2" ng-if="!cfc.isAnon()">\n                <select class="form-control" ng-model="cfc.mode">\n                    <option ng-repeat="mode in cfc.modes" value="{{ mode }}">{{ mode|trans:{}:\'clacoform\' }}</option>\n                </select>\n            </div>\n            <div ng-if="cfc.config[\'search_column_enabled\']">\n                <div class="btn-group pull-right" uib-dropdown dropdown-append-to-body="true" auto-close="outsideClick">\n                    <button class="btn btn-default btn-sm" area-expanded="true" uib-dropdown-toggle>\n                        {{ \'filters\'|trans:{}:\'platform\' }}\n                        <span class="caret"></span>\n                    </button>\n                    <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n                        <li role="menuitem" ng-repeat="key in cfc.columnsKeys[\'managerEntries\']">\n                            <label>\n                                <input type="checkbox" ng-model="cfc.columns[\'managerEntries\'][key][\'value\']">\n                                {{ cfc.columns[\'managerEntries\'][key][\'name\'] }}\n                            </label>\n                        </li>\n                    </ul>\n                </div>\n                <br>\n                <br>\n            </div>\n            <div class="table-responsive" ng-if="cfc.managerEntries.length > 0">\n                <table class="table" ng-table-dynamic="cfc.tableParams[\'managerEntries\'] with cfc.getDisplayedColumns(\'managerEntries\')" show-filter="true">\n                    <tr ng-repeat="entry in $data" ng-class="cfc.getStatusClass(entry[\'status\'])">\n                        <td class="text-center" ng-repeat="fc in cfc.fieldsColumns[\'managerEntries\']" ng-if="fc[\'id\'] === \'alert\' || cfc.columns[\'managerEntries\'][fc[\'id\']][\'value\']">\n                            <span ng-if="fc[\'id\'] === \'alert\'">\n                                <i class="fa fa-exclamation-circle"\n                                   data-toggle="tooltip"\n                                   data-placement="top"\n                                   title="{{ \'pending\'|trans:{}:\'platform\' }}"\n                                   ng-if="entry[\'status\'] === 0"\n                                >\n                                </i>\n                                <i class="fa fa-comments"\n                                   data-toggle="tooltip"\n                                   data-placement="top"\n                                   title="{{ \'comments\'|trans:{}:\'clacoform\' }}"\n                                   ng-if="entry[\'comments\'].length > 0"\n                                >\n                                </i>\n                            </span>\n                            <span ng-if="fc[\'id\'] === \'actions\'">\n                                <a class="btn btn-default btn-sm" ui-sref="entry_edition({entryId: entry[\'id\']})">\n                                    <i class="fa fa-pencil"></i>\n                                </a>\n                                <button class="btn btn-default btn-sm"\n                                        data-toggle="tooltip"\n                                        data-placement="top"\n                                        title="{{ \'unpublish\'|trans:{}:\'platform\' }}"\n                                        ng-click="cfc.changeEntryStatus(entry)"\n                                        ng-if="entry[\'status\'] === 1"\n                                >\n                                    <i class="fa fa-eye-slash"></i>\n                                </button>\n                                <button class="btn btn-default btn-sm"\n                                        data-toggle="tooltip"\n                                        data-placement="top"\n                                        title="{{ \'publish\'|trans:{}:\'platform\' }}"\n                                        ng-click="cfc.changeEntryStatus(entry)"\n                                        ng-if="entry[\'status\'] !== 1"\n                                >\n                                    <i class="fa fa-eye"></i>\n                                </button>\n                                <button class="btn btn-danger btn-sm" ng-click="cfc.deleteEntry(entry)">\n                                    <i class="fa fa-trash"></i>\n                                </button>\n                            </span>\n                            <span ng-if="cfc.isDefaultField(fc[\'id\'])">\n                                {{ entry[fc[\'id\']] }}\n                            </span>\n                            <span ng-if="cfc.isCustomField(fc[\'id\'])">\n                                {{ entry[\'field_\' + fc[\'id\']] }}\n                            </span>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n            <div class="alert alert-warning" ng-if="cfc.managerEntries.length === 0">\n                {{ \'no_manager_entry\'|trans:{}:\'clacoform\' }}\n            </div>\n        </div>\n    </div>\n</div>';
},657:function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-heading clearfix">\n        <h3 class="panel-title">\n            {{ cfc.title }}\n            <div class="btn-group pull-right" uib-dropdown ng-if="cfc.canEdit()">\n                <button class="btn btn-default btn-sm" uib-dropdown-toggle>\n                    <i class="fa fa-cogs"></i>\n                    <i class="fa fa-caret-down"></i>\n                </button>\n                <ul class="dropdown-menu" uib-dropdown-menu role="menu">\n                    <li role="menuitem">\n                        <a ui-sref="menu">\n                            {{ \'main_menu\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem" ng-if="cfc.mode === \'edition\'">\n                        <a ui-sref="entry_creation">\n                            {{ \'add_entry\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entries_list">\n                            {{ \'entries_list\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="general_configuration">\n                            {{ \'general_configuration\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="fields_management">\n                            {{ \'fields_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="template_management">\n                            {{ \'template_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <!--<li role="menuitem">-->\n                        <!--<a ui-sref="votes_management">-->\n                            <!--{{ \'votes_management\'|trans:{}:\'clacoform\' }}-->\n                        <!--</a>-->\n                    <!--</li>-->\n                    <li role="menuitem">\n                        <a ui-sref="categories_management">\n                            {{ \'categories_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="keywords_management">\n                            {{ \'keywords_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </h3>\n    </div>\n    <div class="panel-body" ng-if="cfc.isAllowed()">\n        <div class="alert alert-danger" ng-if="cfc.fields.length === 0">\n            {{ \'not_configured_yet\'|trans:{}:\'clacoform\' }}\n            <div ng-if="cfc.canEdit()">\n                {{ \'no_field_alert_msg\'|trans:{}:\'clacoform\' }}\n                <a ui-sref="fields_management">\n                    {{ \'fields_management\'|trans:{}:\'clacoform\' }}\n                </a>\n            </div>\n        </div>\n        <div ng-if="cfc.fields.length > 0">\n            <div template="cfc.template" ng-if="cfc.template">\n            </div>\n            <div ng-if="!cfc.template">\n                <form-field field="[cfc.entryTitle[\'label\'], \'text\', {error: cfc.entryErrors[\'entry_title\']}]" ng-model="cfc.entryTitle[\'value\']">\n                </form-field>\n                <div ng-repeat="field in cfc.fields">\n                    <form-field field="[field[\'name\'],\n                                       field[\'fieldFacet\'][\'translation_key\'],\n                                       {\n                                           values: field[\'fieldFacet\'][\'field_facet_choices\'],\n                                           choice_value: \'value\',\n                                           error: cfc.entryErrors[field[\'id\']],\n                                           noLabel: false\n                                       }]"\n                                ng-model="cfc.entry[field[\'id\']]"\n                    >\n                    </form-field>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="panel-body" ng-if="!cfc.isAllowed()">\n        <div class="alert alert-danger">\n            {{ \'unauthorized\'|trans:{}:\'platform\' }}\n        </div>\n    </div>\n\n    <div class="panel-heading" ng-if="cfc.canManageKeywords()">\n        <h3 class="panel-title">\n            {{ \'keywords\'|trans:{}:\'clacoform\' }}\n        </h3>\n    </div>\n    <div class="panel-body" ng-if="cfc.canManageKeywords()">\n        <div class="btn-group margin-right-sm" ng-repeat="keyword in cfc.keywords">\n            <button class="btn btn-default">\n                {{ keyword }}\n            </button>\n            <button class="btn btn-danger" ng-click="cfc.removeKeyword(keyword)">\n                <i class="fa fa-times-circle"></i>\n            </button>\n        </div>\n        <button class="btn btn-default" ng-click="cfc.enableKeywordsSelect()">\n            <i class="fa fa-plus"></i>\n        </button>\n        <div class="row" ng-if="cfc.showKeywordsSelect">\n            <br>\n            <div class="col-md-6">\n                <div class="input-group">\n                    <select class="form-control"\n                            ng-model="cfc.selectedKeyword"\n                            ng-options="k[\'name\'] for k in cfc.keywordsChoices"\n                            ng-if="!cfc.config[\'new_keywords_enabled\']"\n                    >\n                    </select>\n                    <input type="text"\n                           class="form-control"\n                           ng-model="cfc.selectedKeyword"\n                           uib-typeahead="k[\'name\'] for k in cfc.keywordsChoices| filter:{name:$viewValue}"\n                           ng-if="cfc.config[\'new_keywords_enabled\']"\n                    >\n                    <span class="input-group-btn">\n                        <button class="btn btn-primary" ng-click="cfc.addSelectedKeyword()">\n                            {{ \'add\'|trans:{}:\'platform\' }}\n                        </button>\n                        <button class="btn btn-default" ng-click="cfc.disableKeywordsSelect()">\n                            {{ \'cancel\'|trans:{}:\'platform\' }}\n                        </button>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="panel-heading" ng-if="cfc.canManageCategories()">\n        <h3 class="panel-title">\n            {{ \'categories\'|trans:{}:\'platform\' }}\n        </h3>\n    </div>\n    <div class="panel-body" ng-if="cfc.canManageCategories()">\n        <div class="btn-group margin-right-sm" ng-repeat="category in cfc.categories">\n            <button class="btn btn-default">\n                {{ category[\'name\'] }}\n            </button>\n            <button class="btn btn-danger" ng-click="cfc.removeCategory(category)">\n                <i class="fa fa-times-circle"></i>\n            </button>\n        </div>\n        <button class="btn btn-default" ng-click="cfc.enableCategoriesSelect()">\n            <i class="fa fa-plus"></i>\n        </button>\n        <div class="row" ng-if="cfc.showCategoriesSelect">\n            <br>\n            <div class="col-md-6">\n                <div class="input-group">\n                    <select class="form-control" ng-model="cfc.selectedCategory" ng-options="c[\'name\'] for c in cfc.categoriesChoices">\n                    </select>\n                    <span class="input-group-btn">\n                        <button class="btn btn-primary" ng-click="cfc.addSelectedCategory()">\n                            {{ \'add\'|trans:{}:\'platform\' }}\n                        </button>\n                        <button class="btn btn-default" ng-click="cfc.disableCategoriesSelect()">\n                            {{ \'cancel\'|trans:{}:\'platform\' }}\n                        </button>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="panel-footer" ng-if="cfc.isAllowed() && cfc.fields.length > 0">\n        <button class="btn btn-primary" ng-click="cfc.submit()">\n            {{ \'ok\'|trans:{}:\'platform\' }}\n        </button>\n        <a class="btn btn-default" ng-click="cfc.cancel()">\n            {{ \'cancel\'|trans:{}:\'platform\' }}\n        </a>\n    </div>\n</div>'},658:function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-heading clearfix">\n        <h3 class="panel-title">\n            {{ cfc.title }}\n            <div class="btn-group pull-right" uib-dropdown ng-if="cfc.canEdit()">\n                <button class="btn btn-default btn-sm" uib-dropdown-toggle>\n                    <i class="fa fa-cogs"></i>\n                    <i class="fa fa-caret-down"></i>\n                </button>\n                <ul class="dropdown-menu" uib-dropdown-menu role="menu">\n                    <li role="menuitem">\n                        <a ui-sref="menu">\n                            {{ \'main_menu\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entry_creation">\n                            {{ \'add_entry\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="entries_list">\n                            {{ \'entries_list\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="general_configuration">\n                            {{ \'general_configuration\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="fields_management">\n                            {{ \'fields_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="template_management">\n                            {{ \'template_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <!--<li role="menuitem">-->\n                        <!--<a ui-sref="votes_management">-->\n                            <!--{{ \'votes_management\'|trans:{}:\'clacoform\' }}-->\n                        <!--</a>-->\n                    <!--</li>-->\n                    <li role="menuitem">\n                        <a ui-sref="categories_management">\n                            {{ \'categories_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                    <li role="menuitem">\n                        <a ui-sref="keywords_management">\n                            {{ \'keywords_management\'|trans:{}:\'clacoform\' }}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </h3>\n    </div>\n    <div class="panel-body" ng-if="cfc.isAllowed()">\n        <div class="alert alert-danger" ng-if="cfc.getErrorMessage()">\n            <i class="fa fa-times pointer-hand close" ng-click="cfc.clearErrorMessage()"></i>\n            {{ cfc.getErrorMessage() }}\n        </div>\n        <div class="text-center" ng-if="cfc.config[\'menu_position\'] === \'up\' || cfc.config[\'menu_position\'] === \'both\'">\n            <a class="btn btn-default"\n                    ui-sref="entry_creation"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    title="{{ \'add_entry\'|trans:{}:\'clacoform\' }}"\n                    ng-if="cfc.canCreate()"\n            >\n                <i class="fa fa-edit"></i>\n            </a>\n            <a class="btn btn-default"\n                    ui-sref="entries_list"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    title="{{ \'entries_list\'|trans:{}:\'clacoform\' }}"\n                    ng-if="cfc.canSearch()"\n            >\n                <i class="fa fa-table"></i>\n            </a>\n            <button class="btn btn-default"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    title="{{ \'random_entry\'|trans:{}:\'clacoform\' }}"\n                    ng-click="cfc.getRandomEntry()"\n                    ng-if="cfc.config[\'random_enabled\']"\n            >\n                <i class="fa fa-random"></i>\n            </button>\n            <br>\n            <br>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading clearfix">\n                <div class="panel-title">\n                    <h3 ng-class="cfc.entry[\'status\'] === 1 ? \'\' : \'unpublished-entry-row\'">\n                        {{ cfc.entry[\'title\'] }}\n                        <span class="pull-right">\n                            <button class="btn btn-default btn-sm"\n                                    data-toggle="tooltip"\n                                    data-placement="top"\n                                    title="{{ \'unpublish\'|trans:{}:\'platform\' }}"\n                                    ng-click="cfc.changeEntryStatus()"\n                                    ng-if="cfc.canManageEntry() && cfc.entry[\'status\'] === 1"\n                            >\n                                <i class="fa fa-eye-slash"></i>\n                            </button>\n                            <button class="btn btn-default btn-sm"\n                                    data-toggle="tooltip"\n                                    data-placement="top"\n                                    title="{{ \'publish\'|trans:{}:\'platform\' }}"\n                                    ng-click="cfc.changeEntryStatus()"\n                                    ng-if="cfc.canManageEntry() && cfc.entry[\'status\'] !== 1"\n                            >\n                                <i class="fa fa-eye"></i>\n                            </button>\n                            <a class="btn btn-default btn-sm" ui-sref="entry_edition({entryId: cfc.entryId})" ng-if="cfc.canEditEntry()">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <button class="btn btn-danger btn-sm" ng-click="cfc.deleteEntry()" ng-if="cfc.canManageEntry()">\n                                <i class="fa fa-trash"></i>\n                            </button>\n                        </span>\n                    </h3>\n                </div>\n            </div>\n            <div class="panel-body">\n                <div template="cfc.template" ng-if="cfc.template">\n                </div>\n                <div ng-if="!cfc.template">\n                    <div ng-repeat="field in cfc.fields" ng-if="cfc.metadataAllowed || !field[\'isMetadata\']">\n                        <div class="row">\n                            <label class="col-md-3">\n                                {{ field[\'name\'] }}\n                            </label>\n                            <div class="col-md-9">\n                                <span ng-switch="field[\'type\']">\n                                    <span ng-switch-when="3">\n                                        {{ cfc.entry[field[\'id\']]|date:\'dd/MM/yyyy\' }}\n                                    </span>\n                                    <span ng-switch-when="6">\n                                        {{ cfc.entry[field[\'id\']].join(\', \') }}\n                                    </span>\n                                    <span ng-switch-when="7">\n                                        {{ cfc.getCountryName(cfc.entry[field[\'id\']]) }}\n                                    </span>\n                                    <span ng-switch-when="9" ng-bind-html="cfc.entry[field[\'id\']]|trust_html">\n                                    </span>\n                                    <span ng-switch-default>\n                                        {{ cfc.entry[field[\'id\']] }}\n                                    </span>\n                                </span>\n                            </div>\n                        </div>\n                        <hr ng-if="!$last">\n                    </div>\n                </div>\n                <div ng-if="cfc.metadataAllowed">\n                    <br>\n                    <span ng-if="cfc.entry[\'publicationDate\']">\n                        {{ \'publication_date\'|trans:{}:\'clacoform\' }} :\n                        {{ cfc.entry[\'publicationDate\']|date:\'dd/MM/yyyy\' }}\n                        -\n                    </span>\n                    <span ng-if="cfc.entry[\'editionDate\']">\n                        {{ \'edition_date\'|trans:{}:\'clacoform\' }} :\n                        {{ cfc.entry[\'editionDate\']|date:\'dd/MM/yyyy\' }}\n                        -\n                    </span>\n                    {{ \'author\'|trans:{}:\'platform\' }} :\n                    <span ng-if="cfc.entry[\'user\']">\n                        {{ cfc.entry[\'user\'][\'firstName\'] }} {{ cfc.entry[\'user\'][\'lastName\'] }}\n                    </span>\n                    <span ng-if="!cfc.entry[\'user\']">\n                        {{ \'anonymous\'|trans:{}:\'platform\' }}\n                    </span>\n                </div>\n            </div>\n\n            <div class="panel-heading" ng-if="cfc.config[\'display_keywords\']">\n                <div class="panel-title">\n                    <a class="pointer-hand" ng-click="cfc.toggleCollapsed(\'keywords\')">\n                        {{ \'keywords\'|trans:{}:\'clacoform\' }}\n                        <i class="fa" ng-class="cfc.collapsed[\'keywords\'] ? \'fa-chevron-circle-right\' : \'fa-chevron-circle-down\'"></i>\n                    </a>\n                </div>\n            </div>\n            <div class="panel-body collapse" uib-collapse="cfc.collapsed[\'keywords\']" ng-if="cfc.config[\'display_keywords\']">\n                <button class="btn btn-default margin-right-sm"\n                        ng-click="cfc.filterKeyword(keyword)"\n                        ng-repeat="keyword in cfc.keywords"\n                >\n                    {{ keyword }}\n                </button>\n            </div>\n\n            <div class="panel-heading" ng-if="cfc.config[\'display_categories\']">\n                <div class="panel-title">\n                    <a class="pointer-hand" ng-click="cfc.toggleCollapsed(\'categories\')">\n                        {{ \'categories\'|trans:{}:\'platform\' }}\n                        <i class="fa" ng-class="cfc.collapsed[\'categories\'] ? \'fa-chevron-circle-right\' : \'fa-chevron-circle-down\'"></i>\n                    </a>\n                </div>\n            </div>\n            <div class="panel-body collapse" uib-collapse="cfc.collapsed[\'categories\']" ng-if="cfc.config[\'display_categories\']">\n                <button class="btn btn-default margin-right-sm"\n                        ng-click="cfc.filterCategory(category[\'name\'])"\n                        ng-repeat="category in cfc.categories"\n                >\n                    {{ category[\'name\'] }}\n                </button>\n            </div>\n\n            <div class="panel-heading" ng-if="cfc.isCommentsDisplayable()">\n                <div class="panel-title">\n                    <a class="pointer-hand" ng-click="cfc.toggleCollapsed(\'comments\')">\n                        {{ \'comments\'|trans:{}:\'clacoform\' }}\n                        <span class="badge">{{ cfc.comments.length }}</span>\n                        <i class="fa" ng-class="cfc.collapsed[\'comments\'] ? \'fa-chevron-circle-right\' : \'fa-chevron-circle-down\'"></i>\n                    </a>\n                </div>\n            </div>\n            <div class="panel-body collapse" uib-collapse="cfc.collapsed[\'comments\']" ng-if="cfc.isCommentsDisplayable()">\n                <div ng-if="cfc.isCommentsEnabled()">\n                    <div ng-if="!cfc.newCommentFormActive">\n                        <button class="btn btn-default" ng-click="cfc.displayNewCommentForm()">\n                            <i class="fa fa-plus-circle"></i>\n                            {{ \'add_comment\'|trans:{}:\'clacoform\' }}\n                        </button>\n                    </div>\n                    <div ng-if="cfc.newCommentFormActive">\n                        <textarea data-ui-tinymce="cfc.tinymceOptions"\n                                  data-before-unload="off"\n                                  class="form-control"\n                                  ng-model="cfc.newComment"\n                        >\n                        </textarea>\n                        <br>\n                        <button class="btn btn-primary" ng-click="cfc.createNewComment()">\n                            {{ \'ok\'|trans:{}:\'platform\' }}\n                        </button>\n                        <button class="btn btn-default" ng-click="cfc.hideNewCommentForm()">\n                            {{ \'cancel\'|trans:{}:\'platform\' }}\n                        </button>\n                    </div>\n                </div>\n                <div ng-if="cfc.config[\'display_comments\']">\n                    <br ng-if="cfc.isCommentsEnabled()">\n                    <div class="alert alert-warning" ng-if="cfc.comments.length === 0">\n                        {{ \'no_comment\'|trans:{}:\'clacoform\' }}\n                    </div>\n                    <div class="table-responsive" ng-if="cfc.comments.length > 0">\n                        <table class="table" ng-table="cfc.tableParams" show-filter="false">\n                            <thead></thead>\n                            <tbody>\n                                <tr ng-repeat="comment in $data">\n                                    <td ng-class="comment[\'status\'] === 1 ? \'\' : \'inactive-comment-row\'">\n                                        <span class="close" ng-if="comment[\'status\'] === 0">\n                                            {{ \'comment_pending_info\'|trans:{}:\'clacoform\' }}\n                                        </span>\n                                        <span class="close" ng-if="comment[\'status\'] === 2">\n                                            {{ \'comment_blocked_info\'|trans:{}:\'clacoform\' }}\n                                        </span>\n                                        <div ng-if="cfc.config[\'display_comment_author\'] || cfc.config[\'display_comment_date\']">\n                                            <b>\n                                                <span ng-if="cfc.config[\'display_comment_author\'] && comment[\'user\']">\n                                                    {{ comment[\'user\'][\'firstName\'] }}\n                                                    {{ comment[\'user\'][\'lastName\'] }}\n                                                </span>\n                                                <span ng-if="cfc.config[\'display_comment_author\'] && !comment[\'user\']">\n                                                    {{ \'anonymous\'|trans:{}:\'platform\' }}\n                                                </span>\n                                                <span ng-if="cfc.config[\'display_comment_date\']">\n                                                    [{{ comment[\'creationDate\']|date:\'dd-MM-yyyy HH:mm\' }}]\n                                                </span>\n                                            </b>\n                                        </div>\n                                        <div ng-if="cfc.canEditComment(comment)">\n                                            <button class="btn btn-default btn-sm"\n                                                    data-toggle="tooltip"\n                                                    data-placement="top"\n                                                    title="{{ \'edit\'|trans:{}:\'platform\' }}"\n                                                    ng-click="cfc.activateCommentEdition(comment[\'id\'])"\n                                            >\n                                                <i class="fa fa-pencil"></i>\n                                            </button>\n                                            <button class="btn btn-success btn-sm"\n                                                    data-toggle="tooltip"\n                                                    data-placement="top"\n                                                    title="{{ \'validate\'|trans:{}:\'clacoform\' }}"\n                                                    ng-click="cfc.activateComment(comment)"\n                                                    ng-if="cfc.canManageComments() && (comment[\'status\'] === 0)"\n                                            >\n                                                <i class="fa fa-check"></i>\n                                            </button>\n                                            <button class="btn btn-default btn-sm"\n                                                    data-toggle="tooltip"\n                                                    data-placement="top"\n                                                    title="{{ \'activate\'|trans:{}:\'clacoform\' }}"\n                                                    ng-click="cfc.activateComment(comment)"\n                                                    ng-if="cfc.canManageComments() && (comment[\'status\'] === 2)"\n                                            >\n                                                <i class="fa fa-eye"></i>\n                                            </button>\n                                            <button class="btn btn-danger btn-sm"\n                                                    data-toggle="tooltip"\n                                                    data-placement="top"\n                                                    title="{{ \'block\'|trans:{}:\'clacoform\' }}"\n                                                    ng-click="cfc.blockComment(comment)"\n                                                    ng-if="cfc.canManageComments() && (comment[\'status\'] !== 2)"\n                                            >\n                                                <i class="fa fa-ban"></i>\n                                            </button>\n                                            <button class="btn btn-danger btn-sm"\n                                                    data-toggle="tooltip"\n                                                    data-placement="top"\n                                                    title="{{ \'delete\'|trans:{}:\'platform\' }}"\n                                                    ng-click="cfc.deleteComment(comment)"\n                                                    ng-if="cfc.canManageComments()"\n                                            >\n                                                <i class="fa fa-trash"></i>\n                                            </button>\n                                            <br>\n                                            <br>\n                                        </div>\n                                        <div ng-bind-html="comment[\'content\']|trust_html" ng-if="!cfc.commentsEditionForm[comment[\'id\']]">\n                                        </div>\n                                        <div ng-if="cfc.commentsEditionForm[comment[\'id\']]">\n                                            <textarea data-ui-tinymce="cfc.tinymceOptions"\n                                                      data-before-unload="off"\n                                                      class="form-control"\n                                                      ng-model="comment[\'content\']"\n                                            >\n                                            </textarea>\n                                            <br>\n                                            <button class="btn btn-primary" ng-click="cfc.editComment(comment)">\n                                                {{ \'ok\'|trans:{}:\'platform\' }}\n                                            </button>\n                                            <button class="btn btn-default" ng-click="cfc.closeCommentEditionForm(comment[\'id\'])">\n                                                {{ \'cancel\'|trans:{}:\'platform\' }}\n                                            </button>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="text-center" ng-if="cfc.config[\'menu_position\'] === \'down\' || cfc.config[\'menu_position\'] === \'both\'">\n            <a class="btn btn-default"\n                    ui-sref="entry_creation"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    title="{{ \'add_entry\'|trans:{}:\'clacoform\' }}"\n                    ng-if="cfc.canCreate()"\n            >\n                <i class="fa fa-edit"></i>\n            </a>\n            <a class="btn btn-default"\n                    ui-sref="entries_list"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    title="{{ \'entries_list\'|trans:{}:\'clacoform\' }}"\n                    ng-if="cfc.canSearch()"\n            >\n                <i class="fa fa-table"></i>\n            </a>\n            <button class="btn btn-default"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    title="{{ \'random_entry\'|trans:{}:\'clacoform\' }}"\n                    ng-click="cfc.getRandomEntry()"\n                    ng-if="cfc.config[\'random_enabled\']"\n            >\n                <i class="fa fa-random"></i>\n            </button>\n        </div>\n    </div>\n    <div class="panel-body" ng-if="!cfc.isAllowed()">\n        <div class="alert alert-danger">\n            {{ \'unauthorized\'|trans:{}:\'platform\' }}\n        </div>\n    </div>\n</div>'},659:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MenuCtrl=function(){function MenuCtrl($state,ClacoFormService,EntryService){(0,_classCallCheck3.default)(this,MenuCtrl);this.$state=$state;this.ClacoFormService=ClacoFormService;this.EntryService=EntryService;this.config=ClacoFormService.getResourceDetails();this.showNbEntries=this.config["display_nb_entries"]==="all"||this.config["display_nb_entries"]==="published"}(0,_createClass3.default)(MenuCtrl,[{key:"canEdit",value:function canEdit(){return this.ClacoFormService.getCanEdit()}},{key:"getResourceNodeName",value:function getResourceNodeName(){return this.ClacoFormService.getResourceNodeName()}},{
key:"getSuccessMessage",value:function getSuccessMessage(){return this.ClacoFormService.getSuccessMessage()}},{key:"getErrorMessage",value:function getErrorMessage(){return this.ClacoFormService.getErrorMessage()}},{key:"clearSuccessMessage",value:function clearSuccessMessage(){this.ClacoFormService.clearSuccessMessage()}},{key:"clearErrorMessage",value:function clearErrorMessage(){this.ClacoFormService.clearErrorMessage()}},{key:"canAdd",value:function canAdd(){return this.ClacoFormService.getCanCreateEntry()}},{key:"canSearch",value:function canSearch(){return this.ClacoFormService.getCanSearchEntry()}},{key:"getNbEntries",value:function getNbEntries(){return this.EntryService.getNbEntries()}},{key:"getNbPublishedEntries",value:function getNbPublishedEntries(){return this.EntryService.getNbPublishedEntries()}},{key:"getRandomEntry",value:function getRandomEntry(){var _this=this;this.ClacoFormService.getRandomEntryId(this.ClacoFormService.getResourceId()).then(function(d){if(d){if(typeof d==="number"&&d>0){_this.$state.go("entry_view",{entryId:d})}else{_this.ClacoFormService.setErrorMessage(Translator.trans("no_available_random_entry",{},"clacoform"))}}})}}]);return MenuCtrl}();exports.default=MenuCtrl},660:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GeneralConfigurationCtrl=function(){function GeneralConfigurationCtrl($state,ClacoFormService,CategoryService){(0,_classCallCheck3.default)(this,GeneralConfigurationCtrl);this.$state=$state;this.ClacoFormService=ClacoFormService;this.resourceId=ClacoFormService.getResourceId();this.config=ClacoFormService.getResourceDetails();this.configErrors={max_entries:null};this.isCollapsed={general:false,display:true,random:true,find:true,data:true,categories:true,comments:true,votes:true,keywords:true};this.randomStartDate={format:"dd/MM/yyyy",open:false};this.randomEndDate={format:"dd/MM/yyyy",open:false};this.votesStartDate={format:"dd/MM/yyyy",open:false};this.votesEndDate={format:"dd/MM/yyyy",open:false};this.dateOptions={formatYear:"yy",startingDay:1,placeHolder:"jj/mm/aaaa"};this.categoriesList=CategoryService.getCategories();this.categories=[];this.initialize()}(0,_createClass3.default)(GeneralConfigurationCtrl,[{key:"initialize",value:function initialize(){var _this=this;this.ClacoFormService.clearMessages();if(this.config["random_start_date"]){this.config["random_start_date"]=new Date(this.config["random_start_date"])}if(this.config["random_end_date"]){this.config["random_end_date"]=new Date(this.config["random_end_date"])}if(this.config["votes_start_date"]){this.config["votes_start_date"]=new Date(this.config["votes_start_date"])}if(this.config["votes_end_date"]){this.config["votes_end_date"]=new Date(this.config["votes_end_date"])}if(this.config["random_categories"]){this.config["random_categories"].forEach(function(categoryId){var selectedCategory=_this.categoriesList.find(function(c){return c["id"]===categoryId});_this.categories.push(selectedCategory)})}}},{key:"canEdit",value:function canEdit(){return this.ClacoFormService.getCanEdit()}},{key:"submit",value:function submit(){var _this2=this;this.resetErrors();if(this.config["max_entries"]===null||this.config["max_entries"]===undefined){this.configErrors["max_entries"]=Translator.trans("form_not_blank_error",{},"clacoform")}else{this.config["max_entries"]=parseInt(this.config["max_entries"]);if(this.config["max_entries"]<0){this.configErrors["max_entries"]=Translator.trans("form_number_superior_error",{value:0},"clacoform")}}this.config["random_categories"]=[];this.categories.forEach(function(c){return _this2.config["random_categories"].push(c["id"])});if(this.isValid()){this.ClacoFormService.saveConfiguration(this.resourceId,this.config).then(function(d){if(d){_this2.$state.go("menu")}})}}},{key:"resetErrors",value:function resetErrors(){for(var key in this.configErrors){this.configErrors[key]=null}}},{key:"isValid",value:function isValid(){var valid=true;for(var key in this.configErrors){if(this.configErrors[key]){valid=false;break}}return valid}},{key:"openDatePicker",value:function openDatePicker(type){switch(type){case"randomStart":this.randomStartDate["open"]=true;break;case"randomEnd":this.randomEndDate["open"]=true;break;case"votesStart":this.votesStartDate["open"]=true;break;case"votesEnd":this.votesEndDate["open"]=true;break}}}]);return GeneralConfigurationCtrl}();exports.default=GeneralConfigurationCtrl},661:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FieldsManagementCtrl=function(){function FieldsManagementCtrl(NgTableParams,ClacoFormService,FieldService){(0,_classCallCheck3.default)(this,FieldsManagementCtrl);this.ClacoFormService=ClacoFormService;this.FieldService=FieldService;this.fields=FieldService.getFields();this.tableParams=new NgTableParams({count:20},{counts:[10,20,50,100],dataset:this.fields});this.types={1:Translator.trans("text",{},"platform"),2:Translator.trans("number",{},"platform"),3:Translator.trans("date",{},"platform"),4:Translator.trans("radio",{},"platform"),5:Translator.trans("select",{},"platform"),6:Translator.trans("checkboxes",{},"platform"),7:Translator.trans("country",{},"platform"),8:Translator.trans("email",{},"platform")};this._addFieldCallback=this._addFieldCallback.bind(this);this._updateFieldCallback=this._updateFieldCallback.bind(this);this._removeFieldCallback=this._removeFieldCallback.bind(this);this.initialize()}(0,_createClass3.default)(FieldsManagementCtrl,[{key:"_addFieldCallback",value:function _addFieldCallback(data){this.FieldService._addFieldCallback(data);this.tableParams.reload()}},{key:"_updateFieldCallback",value:function _updateFieldCallback(data){this.FieldService._updateFieldCallback(data);this.tableParams.reload()}},{key:"_removeFieldCallback",value:function _removeFieldCallback(data){this.FieldService._removeFieldCallback(data);this.tableParams.reload()}},{key:"initialize",value:function initialize(){this.ClacoFormService.clearMessages()}},{key:"canEdit",value:function canEdit(){return this.ClacoFormService.getCanEdit()}},{key:"createField",value:function createField(){this.FieldService.createField(this.ClacoFormService.getResourceId(),this._addFieldCallback)}},{key:"editField",value:function editField(field){this.FieldService.editField(field,this.ClacoFormService.getResourceId(),this._updateFieldCallback)}},{key:"deleteField",value:function deleteField(field){this.FieldService.deleteField(field,this._removeFieldCallback)}}]);return FieldsManagementCtrl}();exports.default=FieldsManagementCtrl},662:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CategoriesManagementCtrl=function(){function CategoriesManagementCtrl(NgTableParams,ClacoFormService,CategoryService){(0,_classCallCheck3.default)(this,CategoriesManagementCtrl);this.ClacoFormService=ClacoFormService;this.CategoryService=CategoryService;this.categories=CategoryService.getCategories();this.tableParams=new NgTableParams({count:20},{counts:[10,20,50,100],dataset:this.categories});this._addCategoryCallback=this._addCategoryCallback.bind(this);this._updateCategoryCallback=this._updateCategoryCallback.bind(this);this._removeCategoryCallback=this._removeCategoryCallback.bind(this);this.initialize()}(0,_createClass3.default)(CategoriesManagementCtrl,[{key:"_addCategoryCallback",value:function _addCategoryCallback(data){this.CategoryService._addCategoryCallback(data);this.tableParams.reload()}},{key:"_updateCategoryCallback",value:function _updateCategoryCallback(data){this.CategoryService._updateCategoryCallback(data);this.tableParams.reload()}},{key:"_removeCategoryCallback",value:function _removeCategoryCallback(data){this.CategoryService._removeCategoryCallback(data);this.tableParams.reload()}},{key:"initialize",value:function initialize(){var _this=this;this.ClacoFormService.clearMessages();this.categories.forEach(function(c){return _this.CategoryService.formatCategory(c)})}},{key:"canEdit",value:function canEdit(){return this.ClacoFormService.getCanEdit()}},{key:"createCategory",value:function createCategory(){this.CategoryService.createCategory(this.ClacoFormService.getResourceId(),this.CategoryService.getWorkspaceId(),this._addCategoryCallback)}},{key:"editCategory",value:function editCategory(category){this.CategoryService.editCategory(category,this.CategoryService.getWorkspaceId(),this._updateCategoryCallback)}},{key:"deleteCategory",value:function deleteCategory(category){this.CategoryService.deleteCategory(category,this._removeCategoryCallback)}}]);return CategoriesManagementCtrl}();exports.default=CategoriesManagementCtrl},663:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var KeywordsManagementCtrl=function(){function KeywordsManagementCtrl(NgTableParams,ClacoFormService,KeywordService){(0,_classCallCheck3.default)(this,KeywordsManagementCtrl);this.ClacoFormService=ClacoFormService;this.KeywordService=KeywordService;this.keywords=KeywordService.getKeywords();this.sortedKeywords={};this.tableParams=new NgTableParams({count:20},{counts:[10,20,50,100],dataset:this.keywords});this._addKeywordCallback=this._addKeywordCallback.bind(this);this._updateKeywordCallback=this._updateKeywordCallback.bind(this);this._removeKeywordCallback=this._removeKeywordCallback.bind(this);this.initialize()}(0,_createClass3.default)(KeywordsManagementCtrl,[{key:"_addKeywordCallback",value:function _addKeywordCallback(data){this.KeywordService._addKeywordCallback(data);this.tableParams.reload()}},{key:"_updateKeywordCallback",value:function _updateKeywordCallback(data){this.KeywordService._updateKeywordCallback(data);this.tableParams.reload()}},{key:"_removeKeywordCallback",value:function _removeKeywordCallback(data){this.KeywordService._removeKeywordCallback(data);this.tableParams.reload()}},{key:"initialize",value:function initialize(){this.ClacoFormService.clearMessages()}},{key:"canEdit",value:function canEdit(){return this.ClacoFormService.getCanEdit()}},{key:"createKeyword",value:function createKeyword(){this.KeywordService.createKeyword(this.ClacoFormService.getResourceId(),this._addKeywordCallback)}},{key:"editKeyword",value:function editKeyword(keyword){this.KeywordService.editKeyword(keyword,this.ClacoFormService.getResourceId(),this._updateKeywordCallback)}},{key:"deleteKeyword",value:function deleteKeyword(keyword){this.KeywordService.deleteKeyword(keyword,this._removeKeywordCallback)}}]);return KeywordsManagementCtrl}();exports.default=KeywordsManagementCtrl},664:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TemplateManagementCtrl=function(){function TemplateManagementCtrl($state,ClacoFormService,FieldService){(0,_classCallCheck3.default)(this,TemplateManagementCtrl);this.$state=$state;this.ClacoFormService=ClacoFormService;this.FieldService=FieldService;this.resourceId=ClacoFormService.getResourceId();this.template=ClacoFormService.getTemplate();this.fields=FieldService.getFields();this.mandatory=[];this.optional=[];this.requiredErrors=[];this.duplicatedErrors=[];this.tinymceOptions=ClacoFormService.getTinymceConfiguration();this.initialize()}(0,_createClass3.default)(TemplateManagementCtrl,[{key:"initialize",value:function initialize(){var _this=this;this.ClacoFormService.clearMessages();this.fields.forEach(function(f){if(f["required"]){_this.mandatory.push(f)}else{_this.optional.push(f)}})}},{key:"canEdit",value:function canEdit(){return this.ClacoFormService.getCanEdit()}},{key:"submit",value:function submit(){var _this2=this;if(this.isValid()){this.ClacoFormService.saveTemplate(this.resourceId,this.template).then(function(d){if(d){_this2.$state.go("menu")}})}}},{key:"isValid",value:function isValid(){var _this3=this;this.requiredErrors=[];this.duplicatedErrors=[];if(this.template){var titleRegex=new RegExp("%clacoform_entry_title%","g");var titleMatches=this.template.match(titleRegex);if(titleMatches===null){this.requiredErrors.push({name:"clacoform_entry_title"})}else if(titleMatches.length>1){this.duplicatedErrors.push({name:"clacoform_entry_title"})}this.mandatory.forEach(function(f){var regex=new RegExp("%"+_this3.removeAccent(f["name"])+"%","g");var matches=_this3.template.match(regex);if(matches===null){_this3.requiredErrors.push(f)}else if(matches.length>1){_this3.duplicatedErrors.push(f)}});this.optional.forEach(function(f){var regex=new RegExp("%"+f["name"]+"%","g");var matches=_this3.template.match(regex);if(matches!==null&&matches.length>1){_this3.duplicatedErrors.push(f)}})}return this.requiredErrors.length===0&&this.duplicatedErrors.length===0}},{key:"removeAccent",value:function removeAccent(str){return this.ClacoFormService.removeAccent(str)}}]);return TemplateManagementCtrl}();exports.default=TemplateManagementCtrl},665:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _defineProperty2=__webpack_require__(666);var _defineProperty3=_interopRequireDefault(_defineProperty2);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EntriesManagementCtrl=function(){function EntriesManagementCtrl(NgTableParams,ClacoFormService,EntryService,FieldService,CategoryService){(0,_classCallCheck3.default)(this,EntriesManagementCtrl);this.ClacoFormService=ClacoFormService;this.EntryService=EntryService;this.FieldService=FieldService;this.CategoryService=CategoryService;this.config=ClacoFormService.getResourceDetails();this.fields=FieldService.getFields();this.entries=EntryService.getEntries();this.myEntries=EntryService.getMyEntries();this.managerEntries=EntryService.getManagerEntries();this.tableParams={entries:new NgTableParams({count:20,filter:{categoriesString:EntryService.getCategoryFilter(),keywordsString:EntryService.getKeywordFilter()}},{counts:[10,20,50,100],dataset:this.entries}),myEntries:new NgTableParams({count:20},{counts:[10,20,50,100],dataset:this.myEntries}),managerEntries:new NgTableParams({count:20},{counts:[10,20,50,100],dataset:this.managerEntries})};this.columns={entries:{},myEntries:{},managerEntries:{}};this.columnsKeys={entries:[],myEntries:[],managerEntries:[]};this.fieldsColumns={entries:[],myEntries:[],managerEntries:[]};this.modes=[];this.mode=null;this._updateEntryCallback=this._updateEntryCallback.bind(this);this._removeEntryCallback=this._removeEntryCallback.bind(this);this.initialize()}(0,_createClass3.default)(EntriesManagementCtrl,[{key:"_updateEntryCallback",value:function _updateEntryCallback(data){var statusChanged=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var oldStatus=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this.EntryService._updateEntryCallback(data,statusChanged,oldStatus);this.tableParams["entries"].reload();this.tableParams["myEntries"].reload();this.tableParams["managerEntries"].reload()}},{key:"_removeEntryCallback",value:function _removeEntryCallback(data){this.EntryService._removeEntryCallback(data);this.tableParams["entries"].reload();this.tableParams["myEntries"].reload();this.tableParams["managerEntries"].reload()}},{key:"initialize",value:function initialize(){this.ClacoFormService.clearMessages();this.EntryService.setCategoryFilter("");this.EntryService.setKeywordFilter("");this.initializeModes();this.initializeColumns()}},{key:"initializeModes",value:function initializeModes(){if(this.ClacoFormService.getCanEdit()||this.config["search_enabled"]){this.modes.push("all_entries")}if(this.CategoryService.getIsCategoryManager()){this.modes.push("manager_entries")}if(!this.ClacoFormService.getIsAnon()){this.modes.push("my_entries")}if(this.modes.length>0){this.mode=this.modes[0]}}},{key:"initializeColumns",value:function initializeColumns(){var _this=this;var displayMetadata=this.ClacoFormService.getCanEdit()||this.config["display_metadata"]==="all"||this.config["display_metadata"]==="manager"&&this.CategoryService.getIsCategoryManager();var transTitle=Translator.trans("title",{},"platform");var transDate=Translator.trans("date",{},"platform");var transUser=Translator.trans("user",{},"platform");var transCategories=Translator.trans("categories",{},"platform");var transKeywords=Translator.trans("keywords",{},"clacoform");var transActions=Translator.trans("actions",{},"platform");var alertFieldColumn={id:"alert",sortable:"alert"};var titleFieldColumn={id:"title",title:transTitle,filter:{title:"text"},sortable:"title"};var dateFieldColumn={id:"creationDateString",title:transDate,filter:{creationDateString:"text"},sortable:"creationDate"};var userFieldColumn={id:"userString",title:transUser,filter:{userString:"text"},sortable:"userString"};this.columns["entries"]["title"]={name:transTitle,value:true};this.columns["myEntries"]["title"]={name:transTitle,value:true};this.columns["managerEntries"]["title"]={name:transTitle,value:true};this.columns["managerEntries"]["creationDateString"]={name:transDate,value:true};this.columns["managerEntries"]["userString"]={name:transUser,value:true};this.columns["myEntries"]["creationDateString"]={name:transDate,value:true};this.columnsKeys["entries"].push("title");this.columnsKeys["myEntries"].push("title");this.columnsKeys["myEntries"].push("creationDateString");this.columnsKeys["managerEntries"].push("title");this.columnsKeys["managerEntries"].push("creationDateString");this.columnsKeys["managerEntries"].push("userString");this.fieldsColumns["entries"].push(alertFieldColumn);this.fieldsColumns["entries"].push(titleFieldColumn);this.fieldsColumns["myEntries"].push(alertFieldColumn);this.fieldsColumns["myEntries"].push(titleFieldColumn);this.fieldsColumns["myEntries"].push(dateFieldColumn);this.fieldsColumns["managerEntries"].push(alertFieldColumn);this.fieldsColumns["managerEntries"].push(titleFieldColumn);this.fieldsColumns["managerEntries"].push(dateFieldColumn);this.fieldsColumns["managerEntries"].push(userFieldColumn);if(displayMetadata){this.columns["entries"]["creationDateString"]={name:transDate,value:true};this.columns["entries"]["userString"]={name:transUser,value:true};this.columnsKeys["entries"].push("creationDateString");this.columnsKeys["entries"].push("userString");this.fieldsColumns["entries"].push(dateFieldColumn);this.fieldsColumns["entries"].push(userFieldColumn)}if(this.config["display_categories"]){this.columns["entries"]["categoriesString"]={name:transCategories,value:true};this.columns["myEntries"]["categoriesString"]={name:transCategories,value:true};this.columns["managerEntries"]["categoriesString"]={name:transCategories,value:true};this.columnsKeys["entries"].push("categoriesString");this.columnsKeys["myEntries"].push("categoriesString");this.columnsKeys["managerEntries"].push("categoriesString");var categoriesFieldColumns={id:"categoriesString",title:transCategories,filter:{categoriesString:"text"},sortable:"categoriesString"};this.fieldsColumns["entries"].push(categoriesFieldColumns);this.fieldsColumns["myEntries"].push(categoriesFieldColumns);this.fieldsColumns["managerEntries"].push(categoriesFieldColumns)}if(this.config["display_keywords"]){this.columns["entries"]["keywordsString"]={name:transKeywords,value:true};this.columns["myEntries"]["keywordsString"]={name:transKeywords,value:true};this.columns["managerEntries"]["keywordsString"]={name:transKeywords,value:true};this.columnsKeys["entries"].push("keywordsString");this.columnsKeys["myEntries"].push("keywordsString");this.columnsKeys["managerEntries"].push("keywordsString");var keywordsFieldColumns={id:"keywordsString",title:transKeywords,filter:{keywordsString:"text"},sortable:"keywordsString"};this.fieldsColumns["entries"].push(keywordsFieldColumns);this.fieldsColumns["myEntries"].push(keywordsFieldColumns);this.fieldsColumns["managerEntries"].push(keywordsFieldColumns)}this.fields.forEach(function(f){var id=f["id"];var data={id:id,title:f["name"]};if(f["type"]===3){data["sortable"]=""+id}else{data["sortable"]="field_"+id}data["filter"]=(0,_defineProperty3.default)({},"field_"+id,"text");_this.columns["myEntries"][id]={name:f["name"],value:false};_this.columns["managerEntries"][id]={name:f["name"],value:false};_this.columnsKeys["myEntries"].push(id);_this.columnsKeys["managerEntries"].push(id);_this.fieldsColumns["myEntries"].push(data);_this.fieldsColumns["managerEntries"].push(data);if(f["type"]!==9&&(displayMetadata||!f["isMetadata"])){_this.columns["entries"][id]={name:f["name"],value:false};_this.columnsKeys["entries"].push(id);_this.fieldsColumns["entries"].push(data)}});this.columns["managerEntries"]["actions"]={name:transActions,value:true};this.columnsKeys["managerEntries"].push("actions");this.fieldsColumns["managerEntries"].push({id:"actions",title:transActions});if(this.canEdit()){this.columns["entries"]["actions"]={name:transActions,value:true};this.columnsKeys["entries"].push("actions");this.fieldsColumns["entries"].push({id:"actions",title:transActions})}if(this.canEdit()||this.config["edition_enabled"]){this.columns["myEntries"]["actions"]={name:transActions,value:true};this.columnsKeys["myEntries"].push("actions");this.fieldsColumns["myEntries"].push({id:"actions",title:transActions})}}},{key:"isAnon",value:function isAnon(){return this.ClacoFormService.getIsAnon()}},{key:"canEdit",value:function canEdit(){return this.ClacoFormService.getCanEdit()}},{key:"getStatusClass",value:function getStatusClass(status){var statusClass="";if(status===0){statusClass="pending-entry-row"}else if(status===2){statusClass="unpublished-entry-row"}return statusClass}},{key:"getDisplayedColumns",value:function getDisplayedColumns(type){var _this2=this;var columns=[];this.fieldsColumns[type].forEach(function(fc){if(fc["id"]==="alert"){columns.push(fc)}else{if(_this2.columns[type][fc["id"]]["value"]){columns.push(fc)}}});return columns}},{key:"isDefaultField",value:function isDefaultField(name){return name==="title"||name==="userString"||name==="creationDateString"||name==="categoriesString"||name==="keywordsString"}},{key:"isCustomField",value:function isCustomField(name){return name!=="alert"&&name!=="actions"&&name!=="title"&&name!=="userString"&&name!=="creationDateString"&&name!=="categoriesString"&&name!=="keywordsString"}},{key:"deleteEntry",value:function deleteEntry(entry){this.EntryService.deleteEntry(entry,this._removeEntryCallback)}},{key:"changeEntryStatus",value:function changeEntryStatus(entry){this.EntryService.changeEntryStatus(entry,this._updateEntryCallback)}}]);return EntriesManagementCtrl}();exports.default=EntriesManagementCtrl},666:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _defineProperty=__webpack_require__(15);var _defineProperty2=_interopRequireDefault(_defineProperty);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(obj,key,value){if(key in obj){(0,_defineProperty2.default)(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}},667:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _stringify=__webpack_require__(99);var _stringify2=_interopRequireDefault(_stringify);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EntryCreationCtrl=function(){function EntryCreationCtrl($state,ClacoFormService,EntryService,FieldService,KeywordService){(0,_classCallCheck3.default)(this,EntryCreationCtrl);this.$state=$state;this.ClacoFormService=ClacoFormService;this.EntryService=EntryService;this.KeywordService=KeywordService;this.entry={};this.entryTitle={label:Translator.trans("entry_title",{},"clacoform"),value:null};this.entryErrors={};this.resourceId=ClacoFormService.getResourceId();this.title=Translator.trans("entry_addition",{},"clacoform");this.config=ClacoFormService.getResourceDetails();this.template=ClacoFormService.getTemplate();this.fields=FieldService.getFields();this.tinymceOptions=ClacoFormService.getTinymceConfiguration();this.mode="creation";this.keywordssChoices=[];this.keywords=[];this.selectedKeyword=null;this.showKeywordsSelect=false;this.initialize()}(0,_createClass3.default)(EntryCreationCtrl,[{key:"initialize",value:function initialize(){var _this=this;this.ClacoFormService.clearMessages();if(this.template){var replacedField="\n        <form-field field=\"['"+this.entryTitle["label"]+"',\n                           'text',\n                           {error: cfc.entryErrors['entry_title'], noLabel: true}]\"\n                    ng-model=\"cfc.entryTitle['value']\"\n        >\n        </form-field>\n      ";this.template=this.template.replace("%clacoform_entry_title%",replacedField)}this.fields.forEach(function(f){var id=f["id"];var name=f["name"];_this.entry[id]=null;if(f["required"]){_this.entryErrors[id]=null}if(_this.template){var choices=(0,_stringify2.default)(f["fieldFacet"]["field_facet_choices"]);choices=choices.replace(/"/g,"'");var _replacedField="\n          <form-field field=\"['"+name+"',\n                             '"+f["fieldFacet"]["translation_key"]+"',\n                             {\n                                 values: "+choices+",\n                                 choice_value: 'value',\n                                 error: cfc.entryErrors["+id+'],\n                                 noLabel: true\n                             }]"\n                      ng-model="cfc.entry['+id+']"\n          >\n          </form-field>\n        ';_this.template=_this.template.replace("%"+_this.ClacoFormService.removeAccent(name)+"%",_replacedField)}});this.initializeKeywords()}},{key:"initializeKeywords",value:function initializeKeywords(){this.keywordsChoices=this.KeywordService.getKeywords()}},{key:"canEdit",value:function canEdit(){return this.ClacoFormService.getCanEdit()}},{key:"isAllowed",value:function isAllowed(){return this.ClacoFormService.getCanCreateEntry()}},{key:"canManageKeywords",value:function canManageKeywords(){return this.isAllowed()&&this.config["keywords_enabled"]}},{key:"enableKeywordsSelect",value:function enableKeywordsSelect(){this.showKeywordsSelect=true}},{key:"disableKeywordsSelect",value:function disableKeywordsSelect(){this.showKeywordsSelect=false;this.selectedKeyword=null}},{key:"addSelectedKeyword",value:function addSelectedKeyword(){var _this2=this;if(this.selectedKeyword){if(this.config["new_keywords_enabled"]){var existingKeyword=this.keywords.find(function(k){return k.toUpperCase()===_this2.selectedKeyword.toUpperCase()});if(!existingKeyword){this.keywords.push(this.selectedKeyword)}}else{var _existingKeyword=this.keywords.find(function(k){return k.toUpperCase()===_this2.selectedKeyword["name"].toUpperCase()});if(!_existingKeyword){this.keywords.push(this.selectedKeyword["name"])}}}this.showKeywordsSelect=false;this.selectedKeyword=null}},{key:"removeKeyword",value:function removeKeyword(keyword){var index=this.keywords.findIndex(function(k){return k===keyword});if(index>-1){this.keywords.splice(index,1)}}},{key:"submit",value:function submit(){var _this3=this;this.resetErrors();if(!this.entryTitle["value"]){this.entryErrors["entry_title"]=Translator.trans("form_not_blank_error",{},"clacoform")}this.fields.forEach(function(f){var id=f["id"];if(f["required"]&&(_this3.entry[id]===undefined||_this3.entry[id]===null||_this3.entry[id]===""||_this3.entry[id].length===0)){_this3.entryErrors[id]=Translator.trans("form_not_blank_error",{},"clacoform");_this3.entry[id]=null}});if(this.isValid()){this.EntryService.createEntry(this.resourceId,this.entry,this.entryTitle["value"],this.keywords).then(function(d){if(d!=="null"){_this3.ClacoFormService.setSuccessMessage(Translator.trans("entry_addition_success_message",{},"clacoform"));_this3.$state.go("menu")}})}}},{key:"resetErrors",value:function resetErrors(){for(var key in this.entryErrors){this.entryErrors[key]=null}}},{key:"isValid",value:function isValid(){var valid=true;for(var key in this.entryErrors){if(this.entryErrors[key]){valid=false;break}}return valid}},{key:"cancel",value:function cancel(){this.$state.go("menu")}}]);return EntryCreationCtrl}();exports.default=EntryCreationCtrl},668:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _stringify=__webpack_require__(99);var _stringify2=_interopRequireDefault(_stringify);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EntryEditionCtrl=function(){function EntryEditionCtrl($state,$stateParams,ClacoFormService,EntryService,FieldService,CategoryService,KeywordService){(0,_classCallCheck3.default)(this,EntryEditionCtrl);this.$state=$state;this.ClacoFormService=ClacoFormService;this.EntryService=EntryService;this.CategoryService=CategoryService;this.KeywordService=KeywordService;this.entryId=parseInt($stateParams.entryId);this.source={};this.entry={};this.entryTitle={label:Translator.trans("entry_title",{},"clacoform"),value:null};this.entryErrors={};this.resourceId=ClacoFormService.getResourceId();this.title=Translator.trans("entry_edition",{},"clacoform");this.config=ClacoFormService.getResourceDetails();this.template=ClacoFormService.getTemplate();this.fields=FieldService.getFields();this.tinymceOptions=ClacoFormService.getTinymceConfiguration();this.mode="edition";this.categoriesChoices=[];this.categories=[];this.selectedCategory=null;this.showCategoriesSelect=false;this.keywordssChoices=[];this.keywords=[];this.selectedKeyword=null;this.showKeywordsSelect=false;this.initialize()}(0,_createClass3.default)(EntryEditionCtrl,[{key:"initialize",value:function initialize(){this.ClacoFormService.clearMessages();this.source=this.EntryService.getEntry(this.entryId);if(this.source===undefined){this.cancel()}else{this.initializeEntry();this.initializeCategories();this.initializeKeywords();
}this.initializeTemplate()}},{key:"initializeEntry",value:function initializeEntry(){var _this=this;this.entryTitle["value"]=this.source["title"];this.fields.forEach(function(f){var id=f["id"];_this.entry[id]=_this.source[id]!==undefined?_this.source[id]:null;if(f["required"]){_this.entryErrors[id]=null}})}},{key:"initializeCategories",value:function initializeCategories(){var _this2=this;this.categoriesChoices=this.CategoryService.getCategories();this.source["categories"].forEach(function(c){return _this2.categories.push(c)})}},{key:"initializeKeywords",value:function initializeKeywords(){var _this3=this;this.keywordsChoices=this.KeywordService.getKeywords();this.source["keywords"].forEach(function(k){return _this3.keywords.push(k["name"])})}},{key:"initializeTemplate",value:function initializeTemplate(){var _this4=this;if(this.template){var replacedTitleField="\n        <form-field field=\"['"+this.entryTitle["label"]+"',\n                           'text',\n                           {error: cfc.entryErrors['entry_title'], noLabel: true}]\"\n                    ng-model=\"cfc.entryTitle['value']\"\n        >\n        </form-field>\n      ";this.template=this.template.replace("%clacoform_entry_title%",replacedTitleField);this.fields.forEach(function(f){var id=f["id"];var name=f["name"];if(_this4.template){var choices=(0,_stringify2.default)(f["fieldFacet"]["field_facet_choices"]);choices=choices.replace(/"/g,"'");var replacedField="\n            <form-field field=\"['"+name+"',\n                               '"+f["fieldFacet"]["translation_key"]+"',\n                               {\n                                   values: "+choices+",\n                                   choice_value: 'value',\n                                   error: cfc.entryErrors["+id+'],\n                                   noLabel: true\n                               }]"\n                        ng-model="cfc.entry['+id+']"\n            >\n            </form-field>\n          ';_this4.template=_this4.template.replace("%"+_this4.ClacoFormService.removeAccent(name)+"%",replacedField)}})}}},{key:"canEdit",value:function canEdit(){return this.ClacoFormService.getCanEdit()}},{key:"isAllowed",value:function isAllowed(){return this.EntryService.getCanEditEntry(this.entryId)}},{key:"canManageCategories",value:function canManageCategories(){return this.isAllowed()&&this.canEdit()}},{key:"canManageKeywords",value:function canManageKeywords(){return this.isAllowed()&&this.config["keywords_enabled"]}},{key:"enableCategoriesSelect",value:function enableCategoriesSelect(){this.showCategoriesSelect=true}},{key:"disableCategoriesSelect",value:function disableCategoriesSelect(){this.showCategoriesSelect=false;this.selectedCategory=null}},{key:"addSelectedCategory",value:function addSelectedCategory(){var _this5=this;if(this.selectedCategory){var existingCategory=this.categories.find(function(c){return c["id"]===_this5.selectedCategory["id"]});if(!existingCategory){this.categories.push(this.selectedCategory)}}this.showCategoriesSelect=false;this.selectedCategory=null}},{key:"removeCategory",value:function removeCategory(category){var index=this.categories.findIndex(function(c){return c["id"]===category["id"]});if(index>-1){this.categories.splice(index,1)}}},{key:"enableKeywordsSelect",value:function enableKeywordsSelect(){this.showKeywordsSelect=true}},{key:"disableKeywordsSelect",value:function disableKeywordsSelect(){this.showKeywordsSelect=false;this.selectedKeyword=null}},{key:"addSelectedKeyword",value:function addSelectedKeyword(){var _this6=this;if(this.selectedKeyword){if(this.config["new_keywords_enabled"]){var existingKeyword=this.keywords.find(function(k){return k.toUpperCase()===_this6.selectedKeyword.toUpperCase()});if(!existingKeyword){this.keywords.push(this.selectedKeyword)}}else{var _existingKeyword=this.keywords.find(function(k){return k.toUpperCase()===_this6.selectedKeyword["name"].toUpperCase()});if(!_existingKeyword){this.keywords.push(this.selectedKeyword["name"])}}}this.showKeywordsSelect=false;this.selectedKeyword=null}},{key:"removeKeyword",value:function removeKeyword(keyword){var index=this.keywords.findIndex(function(k){return k===keyword});if(index>-1){this.keywords.splice(index,1)}}},{key:"submit",value:function submit(){var _this7=this;this.resetErrors();if(!this.entryTitle["value"]){this.entryErrors["entry_title"]=Translator.trans("form_not_blank_error",{},"clacoform")}this.fields.forEach(function(f){var id=f["id"];if(f["required"]&&(_this7.entry[id]===undefined||_this7.entry[id]===null||_this7.entry[id]===""||_this7.entry[id].length===0)){_this7.entryErrors[id]=Translator.trans("form_not_blank_error",{},"clacoform");_this7.entry[id]=null}});if(this.isValid()){(function(){var categoriesIds=[];_this7.categories.forEach(function(c){return categoriesIds.push(c["id"])});_this7.EntryService.editEntry(_this7.source["id"],_this7.entry,_this7.entryTitle["value"],categoriesIds,_this7.keywords).then(function(d){if(d!=="null"){_this7.$state.go("entries_list")}})})()}}},{key:"resetErrors",value:function resetErrors(){for(var key in this.entryErrors){this.entryErrors[key]=null}}},{key:"isValid",value:function isValid(){var valid=true;for(var key in this.entryErrors){if(this.entryErrors[key]){valid=false;break}}return valid}},{key:"cancel",value:function cancel(){this.$state.go("entries_list")}}]);return EntryEditionCtrl}();exports.default=EntryEditionCtrl},669:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EntryViewCtrl=function(){function EntryViewCtrl($state,$stateParams,$filter,NgTableParams,ClacoFormService,EntryService,FieldService,CategoryService,KeywordService,CommentService){(0,_classCallCheck3.default)(this,EntryViewCtrl);this.$state=$state;this.$filter=$filter;this.ClacoFormService=ClacoFormService;this.EntryService=EntryService;this.FieldService=FieldService;this.CategoryService=CategoryService;this.KeywordService=KeywordService;this.CommentService=CommentService;this.entryId=parseInt($stateParams.entryId);this.entry={};this.userId=ClacoFormService.getUserId();this.title=ClacoFormService.getResourceNodeName();this.config=ClacoFormService.getResourceDetails();this.template=ClacoFormService.getTemplate();this.fields=FieldService.getFields();this.tinymceOptions=ClacoFormService.getTinymceConfiguration();this.categories=[];this.keywords=[];this.collapsed={keywords:true,categories:true,comments:true};this.comments=CommentService.getComments();this.newComment=null;this.newCommentFormActive=false;this.tinymceOptions=ClacoFormService.getTinymceConfiguration();this.tableParams=new NgTableParams({count:20},{counts:[10,20,50,100],dataset:this.comments});this.commentsEditionForm={};this.metadataAllowed=ClacoFormService.getCanEdit()||this.config["display_metadata"]==="all";this._addCommentCallback=this._addCommentCallback.bind(this);this._updateCommentCallback=this._updateCommentCallback.bind(this);this._removeCommentCallback=this._removeCommentCallback.bind(this);this._updateEntryCallback=this._updateEntryCallback.bind(this);this._removeEntryCallback=this._removeEntryCallback.bind(this);this.initialize()}(0,_createClass3.default)(EntryViewCtrl,[{key:"_addCommentCallback",value:function _addCommentCallback(data){this.CommentService._addCommentCallback(data);this.newCommentFormActive=false;this.newComment=null;this.tableParams.reload()}},{key:"_updateCommentCallback",value:function _updateCommentCallback(data){this.CommentService._updateCommentCallback(data);this.tableParams.reload()}},{key:"_removeCommentCallback",value:function _removeCommentCallback(data){this.CommentService._removeCommentCallback(data);this.tableParams.reload()}},{key:"_updateEntryCallback",value:function _updateEntryCallback(data){this.EntryService._updateEntryCallback(data);var e=JSON.parse(data);this.entry["status"]=e["status"]}},{key:"_removeEntryCallback",value:function _removeEntryCallback(data){this.EntryService._removeEntryCallback(data);this.$state.go("entries_list")}},{key:"initialize",value:function initialize(){var _this=this;this.ClacoFormService.clearMessages();this.entry=this.EntryService.getEntry(this.entryId);this.collapsed["keywords"]=!this.config["open_keywords"];this.collapsed["categories"]=!this.config["open_categories"];this.collapsed["comments"]=!this.config["open_comments"];if(this.entry===undefined){this.EntryService.getEntryById(this.entryId).then(function(d){_this.entry=d;_this.initializeCategories();_this.initializeKeywords();_this.initializeTemplate()})}else{this.initializeCategories();this.initializeKeywords();this.initializeTemplate()}this.CommentService.initializeComments(this.entryId)}},{key:"initializeTemplate",value:function initializeTemplate(){var _this2=this;if(this.template){this.template=this.template.replace("%clacoform_entry_title%",this.entry["title"]);this.fields.forEach(function(f){var name=f["name"];var id=f["id"];var replacedField="";if(_this2.metadataAllowed||!f["isMetadata"]){switch(f["type"]){case 3:replacedField=_this2.$filter("date")(_this2.entry[id],"dd/MM/yyyy");break;case 6:replacedField=_this2.entry[id].join(", ");break;case 7:replacedField=_this2.FieldService.getCountryNameFromCode(_this2.entry[id]);break;default:replacedField=_this2.entry[id]}}if(replacedField===undefined){replacedField=""}_this2.template=_this2.template.replace("%"+_this2.ClacoFormService.removeAccent(name)+"%",replacedField)})}}},{key:"initializeCategories",value:function initializeCategories(){var _this3=this;this.entry["categories"].forEach(function(c){_this3.categories.push(c);if(!_this3.metadataAllowed&&_this3.config["display_metadata"]==="manager"){var managers=c["managers"];managers.forEach(function(m){if(m["id"]===_this3.userId){_this3.metadataAllowed=true}})}})}},{key:"initializeKeywords",value:function initializeKeywords(){var _this4=this;this.entry["keywords"].forEach(function(k){return _this4.keywords.push(k["name"])})}},{key:"canEdit",value:function canEdit(){return this.ClacoFormService.getCanEdit()}},{key:"isAllowed",value:function isAllowed(){return this.EntryService.getCanOpenEntry(this.entryId)}},{key:"toggleCollapsed",value:function toggleCollapsed(type){this.collapsed[type]=!this.collapsed[type]}},{key:"isCommentsDisplayable",value:function isCommentsDisplayable(){var isAnon=this.ClacoFormService.getIsAnon();return this.config["display_comments"]||this.config["comments_enabled"]&&(!isAnon||this.config["anonymous_comments_enabled"])}},{key:"isCommentsEnabled",value:function isCommentsEnabled(){var isAnon=this.ClacoFormService.getIsAnon();return this.config["comments_enabled"]&&(!isAnon||this.config["anonymous_comments_enabled"])}},{key:"canManageComments",value:function canManageComments(){return this.canEdit()||this.EntryService.isManagerEntry(this.entryId)}},{key:"canEditComment",value:function canEditComment(comment){return this.canManageComments()||comment["user"]&&comment["user"]["id"]===this.userId}},{key:"displayNewCommentForm",value:function displayNewCommentForm(){this.newCommentFormActive=true}},{key:"hideNewCommentForm",value:function hideNewCommentForm(){this.newCommentFormActive=false;this.newComment=null}},{key:"createNewComment",value:function createNewComment(){this.CommentService.createComment(this.entryId,this.newComment,this._addCommentCallback)}},{key:"activateCommentEdition",value:function activateCommentEdition(commentId){this.commentsEditionForm[commentId]=true}},{key:"closeCommentEditionForm",value:function closeCommentEditionForm(commentId){this.commentsEditionForm[commentId]=false}},{key:"editComment",value:function editComment(comment){this.CommentService.editComment(comment,this._updateCommentCallback);this.commentsEditionForm[comment["id"]]=false}},{key:"activateComment",value:function activateComment(comment){this.CommentService.activateComment(comment,this._updateCommentCallback)}},{key:"blockComment",value:function blockComment(comment){this.CommentService.blockComment(comment,this._updateCommentCallback)}},{key:"deleteComment",value:function deleteComment(comment){this.CommentService.deleteComment(comment,this._removeCommentCallback)}},{key:"canEditEntry",value:function canEditEntry(){return this.EntryService.getCanEditEntry(this.entryId)}},{key:"canManageEntry",value:function canManageEntry(){return this.EntryService.getCanManageEntry(this.entryId)}},{key:"canCreate",value:function canCreate(){return this.ClacoFormService.getCanCreateEntry()}},{key:"canSearch",value:function canSearch(){return this.ClacoFormService.getCanSearchEntry()}},{key:"deleteEntry",value:function deleteEntry(){this.EntryService.deleteEntry(this.entry,this._removeEntryCallback)}},{key:"changeEntryStatus",value:function changeEntryStatus(){this.EntryService.changeEntryStatus(this.entry,this._updateEntryCallback)}},{key:"getRandomEntry",value:function getRandomEntry(){var _this5=this;this.ClacoFormService.getRandomEntryId(this.ClacoFormService.getResourceId()).then(function(d){if(d){if(typeof d==="number"&&d>0){_this5.$state.go("entry_view",{entryId:d})}else{_this5.ClacoFormService.setErrorMessage(Translator.trans("no_available_random_entry",{},"clacoform"))}}})}},{key:"getErrorMessage",value:function getErrorMessage(){return this.ClacoFormService.getErrorMessage()}},{key:"clearErrorMessage",value:function clearErrorMessage(){this.ClacoFormService.clearErrorMessage()}},{key:"filterCategory",value:function filterCategory(categoryName){this.EntryService.setCategoryFilter(categoryName);this.$state.go("entries_list")}},{key:"filterKeyword",value:function filterKeyword(keyword){this.EntryService.setKeywordFilter(keyword);this.$state.go("entries_list")}},{key:"getCountryName",value:function getCountryName(code){return this.FieldService.getCountryNameFromCode(code)}}]);return EntryViewCtrl}();exports.default=EntryViewCtrl},670:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EntryRandomCtrl=function(){function EntryRandomCtrl($state,ClacoFormService){(0,_classCallCheck3.default)(this,EntryRandomCtrl);this.$state=$state;this.ClacoFormService=ClacoFormService;this.initialize()}(0,_createClass3.default)(EntryRandomCtrl,[{key:"initialize",value:function initialize(){var _this=this;this.ClacoFormService.getRandomEntryId(this.ClacoFormService.getResourceId()).then(function(d){if(d){if(typeof d==="number"&&d>0){_this.$state.go("entry_view",{entryId:d})}else{_this.ClacoFormService.setErrorMessage(Translator.trans("no_available_random_entry",{},"clacoform"));_this.$state.go("menu")}}})}}]);return EntryRandomCtrl}();exports.default=EntryRandomCtrl},671:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _jquery=__webpack_require__(123);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ClacoFormService=function(){function ClacoFormService($http,$uibModal,EntryService){(0,_classCallCheck3.default)(this,ClacoFormService);this.$http=$http;this.$uibModal=$uibModal;this.EntryService=EntryService;this.isAnon=ClacoFormService._getGlobal("isAnon");this.canEdit=ClacoFormService._getGlobal("canEdit");this.userId=ClacoFormService._getGlobal("userId");this.resourceId=ClacoFormService._getGlobal("resourceId");this.template=ClacoFormService._getGlobal("template");this.resourceDetails=ClacoFormService._getGlobal("resourceDetails");this.resourceNodeId=ClacoFormService._getGlobal("resourceNodeId");this.resourceNodeName=ClacoFormService._getGlobal("resourceNodeName");this.successMessage=null;this.errorMessage=null}(0,_createClass3.default)(ClacoFormService,[{key:"getIsAnon",value:function getIsAnon(){return this.isAnon}},{key:"getUserId",value:function getUserId(){return this.userId}},{key:"getCanEdit",value:function getCanEdit(){return this.canEdit}},{key:"getCanCreateEntry",value:function getCanCreateEntry(){return this.resourceDetails["creation_enabled"]&&!(this.isAnon&&this.resourceDetails["max_entries"]>0)&&!(this.resourceDetails["max_entries"]>0&&this.EntryService.getNbMyEntries()>=this.resourceDetails["max_entries"])}},{key:"getCanSearchEntry",value:function getCanSearchEntry(){return this.resourceDetails["search_enabled"]||this.canEdit||!this.isAnon}},{key:"getResourceId",value:function getResourceId(){return this.resourceId}},{key:"getTemplate",value:function getTemplate(){return this.template}},{key:"getResourceDetails",value:function getResourceDetails(){var details={};for(var key in this.resourceDetails){details[key]=this.resourceDetails[key]}return details}},{key:"getResourceNodeId",value:function getResourceNodeId(){return this.resourceNodeId}},{key:"getResourceNodeName",value:function getResourceNodeName(){return this.resourceNodeName}},{key:"getSuccessMessage",value:function getSuccessMessage(){return this.successMessage}},{key:"setSuccessMessage",value:function setSuccessMessage(message){this.successMessage=message}},{key:"clearSuccessMessage",value:function clearSuccessMessage(){this.successMessage=null}},{key:"getErrorMessage",value:function getErrorMessage(){return this.errorMessage}},{key:"setErrorMessage",value:function setErrorMessage(message){this.errorMessage=message}},{key:"clearErrorMessage",value:function clearErrorMessage(){this.errorMessage=null}},{key:"clearMessages",value:function clearMessages(){this.clearSuccessMessage();this.clearErrorMessage()}},{key:"saveConfiguration",value:function saveConfiguration(resourceId,config){var _this=this;var url=Routing.generate("claro_claco_form_configuration_edit",{clacoForm:resourceId});return this.$http.put(url,{configData:config}).then(function(d){if(d["status"]===200){_this.successMessage=Translator.trans("config_success_message",{},"clacoform");_this.resourceDetails=d["data"];return true}})}},{key:"saveTemplate",value:function saveTemplate(resourceId,template){var _this2=this;var url=Routing.generate("claro_claco_form_template_edit",{clacoForm:resourceId});return this.$http.put(url,{template:template}).then(function(d){if(d["status"]===200){_this2.successMessage=Translator.trans("template_success_message",{},"clacoform");_this2.template=d["data"]["template"];return true}})}},{key:"getRandomEntryId",value:function getRandomEntryId(resourceId){var url=Routing.generate("claro_claco_form_entry_random",{clacoForm:resourceId});return this.$http.get(url).then(function(d){if(d["status"]===200){return d["data"]}})}},{key:"getTinymceConfiguration",value:function getTinymceConfiguration(){var tinymce=window.tinymce;tinymce.claroline.init=tinymce.claroline.init||{};tinymce.claroline.plugins=tinymce.claroline.plugins||{};var plugins=["autoresize advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars fullscreen","insertdatetime media nonbreaking save table directionality","template paste textcolor emoticons code -accordion -mention -codemirror"];var toolbar="bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | fullscreen displayAllButtons";_jquery2.default.each(tinymce.claroline.plugins,function(key,value){if("autosave"!=key&&value===true){plugins.push(key);toolbar+=" "+key}});var config={};for(var prop in tinymce.claroline.configuration){if(tinymce.claroline.configuration.hasOwnProperty(prop)){config[prop]=tinymce.claroline.configuration[prop]}}config.plugins=plugins;config.toolbar1=toolbar;config.trusted=true;config.format="html";return config}},{key:"removeAccent",value:function removeAccent(str){var convertedStr=str;convertedStr=convertedStr.replace(/Ç/g,"C");convertedStr=convertedStr.replace(/ç/g,"c");convertedStr=convertedStr.replace(/è/g,"e");convertedStr=convertedStr.replace(/é/g,"e");convertedStr=convertedStr.replace(/ê/g,"e");convertedStr=convertedStr.replace(/ë/g,"e");convertedStr=convertedStr.replace(/È/g,"E");convertedStr=convertedStr.replace(/É/g,"E");convertedStr=convertedStr.replace(/Ê/g,"E");convertedStr=convertedStr.replace(/Ë/g,"E");convertedStr=convertedStr.replace(/à/g,"a");convertedStr=convertedStr.replace(/á/g,"a");convertedStr=convertedStr.replace(/â/g,"a");convertedStr=convertedStr.replace(/ã/g,"a");convertedStr=convertedStr.replace(/ä/g,"a");convertedStr=convertedStr.replace(/ä/g,"a");convertedStr=convertedStr.replace(/@/g,"A");convertedStr=convertedStr.replace(/À/g,"A");convertedStr=convertedStr.replace(/Á/g,"A");convertedStr=convertedStr.replace(/Â/g,"A");convertedStr=convertedStr.replace(/Ã/g,"A");convertedStr=convertedStr.replace(/Ä/g,"A");convertedStr=convertedStr.replace(/Å/g,"A");convertedStr=convertedStr.replace(/ì/g,"i");convertedStr=convertedStr.replace(/í/g,"i");convertedStr=convertedStr.replace(/î/g,"i");convertedStr=convertedStr.replace(/ï/g,"i");convertedStr=convertedStr.replace(/Ì/g,"I");convertedStr=convertedStr.replace(/Í/g,"I");convertedStr=convertedStr.replace(/Î/g,"I");convertedStr=convertedStr.replace(/Ï/g,"I");convertedStr=convertedStr.replace(/ð/g,"o");convertedStr=convertedStr.replace(/ò/g,"o");convertedStr=convertedStr.replace(/ó/g,"o");convertedStr=convertedStr.replace(/ô/g,"o");convertedStr=convertedStr.replace(/õ/g,"o");convertedStr=convertedStr.replace(/ö/g,"o");convertedStr=convertedStr.replace(/Ò/g,"O");convertedStr=convertedStr.replace(/Ó/g,"O");convertedStr=convertedStr.replace(/Ô/g,"O");convertedStr=convertedStr.replace(/Õ/g,"O");convertedStr=convertedStr.replace(/Ö/g,"O");convertedStr=convertedStr.replace(/ù/g,"u");convertedStr=convertedStr.replace(/ú/g,"u");convertedStr=convertedStr.replace(/û/g,"u");convertedStr=convertedStr.replace(/ü/g,"u");convertedStr=convertedStr.replace(/Ù/g,"U");convertedStr=convertedStr.replace(/Ú/g,"U");convertedStr=convertedStr.replace(/Û/g,"U");convertedStr=convertedStr.replace(/Ü/g,"U");convertedStr=convertedStr.replace(/ý/g,"y");convertedStr=convertedStr.replace(/ÿ/g,"y");convertedStr=convertedStr.replace(/Ý/g,"Y");return convertedStr}}],[{key:"_getGlobal",value:function _getGlobal(name){if(typeof window[name]==="undefined"){throw new Error("Expected "+name+" to be exposed in a window."+name+" variable")}return window[name]}}]);return ClacoFormService}();exports.default=ClacoFormService}});