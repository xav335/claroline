webpackJsonp([22],[function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(123);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var userId=parseInt((0,_jquery2.default)("#user-sessions-datas-box").data("user-id"));var sourceId=void 0;var documentId=void 0;var documentData=[];function initializeSelect(type){documentId=null;(0,_jquery2.default)("#document-selection-select").empty();(0,_jquery2.default)("#document-selection-details").empty();(0,_jquery2.default)("#submit-document-selection").prop("disabled",true);_jquery2.default.ajax({url:Routing.generate("api_get_cursus_populated_document_models_by_type_for_user",{user:userId,type:type,sourceId:sourceId}),type:"GET",success:function success(data){(0,_jquery2.default)("#document-selection-select").append('<option value="0" selected="selected"></option>');documentData=data;data.forEach(function(d){(0,_jquery2.default)("#document-selection-select").append('<option value="'+d["id"]+'">'+d["name"]+"</option>")});(0,_jquery2.default)("#document-selection-modal").modal("show")}})}(0,_jquery2.default)("#user-sessions-managament-body").on("click",".delete-session-user-btn",function(){var sessionUserId=(0,_jquery2.default)(this).data("session-user-id");window.Claroline.Modal.confirmRequest(Routing.generate("api_delete_session_user",{sessionUser:sessionUserId}),removeSessionRow,sessionUserId,Translator.trans("unregister_user_from_session_message",{},"cursus"),Translator.trans("unregister_user_from_session",{},"cursus"))});(0,_jquery2.default)("#user-sessions-managament-body").on("click",".delete-session-event-user-btn",function(){var sessionEventUserId=(0,_jquery2.default)(this).data("session-event-user-id");window.Claroline.Modal.confirmRequest(Routing.generate("claro_cursus_session_event_unregister_user",{sessionEventUser:sessionEventUserId}),removeSessionEventRow,sessionEventUserId,Translator.trans("unregister_user_from_session_event_message",{},"cursus"),Translator.trans("unregister_user_from_session_event",{},"cursus"))});(0,_jquery2.default)("#user-sessions-managament-body").on("click",".send-session-invitation-btn",function(){sourceId=parseInt((0,_jquery2.default)(this).data("session-id"));(0,_jquery2.default)("#document-selection-title").html(Translator.trans("session_invitation",{},"cursus"));initializeSelect(0)});(0,_jquery2.default)("#user-sessions-managament-body").on("click",".generate-session-certificate-btn",function(){sourceId=parseInt((0,_jquery2.default)(this).data("session-id"));(0,_jquery2.default)("#document-selection-title").html(Translator.trans("session_certificate",{},"cursus"));initializeSelect(2)});(0,_jquery2.default)("#user-sessions-managament-body").on("click",".send-session-event-invitation-btn",function(){sourceId=parseInt((0,_jquery2.default)(this).data("session-event-id"));(0,_jquery2.default)("#document-selection-title").html(Translator.trans("session_event_invitation",{},"cursus"));initializeSelect(1)});(0,_jquery2.default)("#user-sessions-managament-body").on("click",".generate-session-event-certificate-btn",function(){sourceId=parseInt((0,_jquery2.default)(this).data("session-event-id"));(0,_jquery2.default)("#document-selection-title").html(Translator.trans("session_event_certificate",{},"cursus"));initializeSelect(3)});(0,_jquery2.default)("#document-selection-select").on("change",function(){documentId=parseInt((0,_jquery2.default)(this).val());(0,_jquery2.default)("#document-selection-details").empty();(0,_jquery2.default)("#submit-document-selection").prop("disabled",true);if(documentId){var documentModel=documentData.find(function(d){return d["id"]===documentId});(0,_jquery2.default)("#document-selection-details").html(documentModel["content"]);(0,_jquery2.default)("#submit-document-selection").prop("disabled",false)}});(0,_jquery2.default)("#submit-document-selection").on("click",function(){if(documentId>0){_jquery2.default.ajax({url:Routing.generate("api_post_cursus_document_for_user_send",{documentModel:documentId,user:userId,sourceId:sourceId}),type:"POST",success:function success(){(0,_jquery2.default)("#document-selection-modal").modal("hide")}})}});(0,_jquery2.default)(".session-event-registration-btn").on("click",function(){var sessionId=parseInt((0,_jquery2.default)(this).data("session-id"));var sessionName=(0,_jquery2.default)(this).data("session-name");(0,_jquery2.default)("#session-event-registration-title").html(sessionName);_jquery2.default.ajax({url:Routing.generate("claro_cursus_session_events_registration_management",{user:userId,session:sessionId}),type:"GET",success:function success(data){(0,_jquery2.default)("#session-event-registration-body").html(data);(0,_jquery2.default)("#session-event-registration-modal").modal("show")}})});(0,_jquery2.default)("#session-event-registration-modal").on("click",".register-user-to-session-event-btn",function(){var sessionEventId=parseInt((0,_jquery2.default)(this).data("session-event-id"));_jquery2.default.ajax({url:Routing.generate("api_post_session_event_user_registration",{sessionEvent:sessionEventId,user:userId}),type:"POST",success:function success(data){if(data["status"]==="success"){var successLabel='<label class="label label-success">'+Translator.trans("registered",{},"platform")+"</label>";(0,_jquery2.default)(".registration-button-"+sessionEventId).html(successLabel);var eventRow='\n          <li id="event-row-'+data["datas"]["id"]+'">\n              '+data["datas"]["sessionEventName"]+'\n              &nbsp;\n              <span class="label label-primary pointer-hand send-session-event-invitation-btn"\n                    data-session-event-id="'+data["datas"]["sessionEventId"]+'"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    title="'+Translator.trans("invite_to_session_event",{},"cursus")+'"\n              >\n                  <i class="fa fa-plus-square"></i>\n              </span>\n              &nbsp;\n              <span class="label label-primary pointer-hand generate-session-event-certificate-btn"\n                    data-session-event-id="'+data["datas"]["sessionEventId"]+'"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    title="'+Translator.trans("generate_event_certificate",{},"cursus")+'"\n              >\n                  <i class="fa fa-graduation-cap"></i>\n              </span>\n              &nbsp;\n              <span class="label label-danger pointer-hand delete-session-event-user-btn"\n                    data-session-event-user-id="'+data["datas"]["id"]+'"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    title="'+Translator.trans("unregister_user_from_session_event",{},"cursus")+'"\n              >\n                  <i class="fa fa-times"></i>\n              </span>\n          </li>\n        ';(0,_jquery2.default)("#events-0-"+data["datas"]["sessionId"]).append(eventRow)}else if(data["status"]==="failed"){var failedLabel='<label class="label label-danger">'+Translator.trans("no_more_place",{},"cursus")+"</label>";(0,_jquery2.default)(".registration-button-"+sessionEventId).html(failedLabel)}}})});var removeSessionRow=function removeSessionRow(event,sessionUserId){(0,_jquery2.default)("#session-row-"+sessionUserId).remove()};var removeSessionEventRow=function removeSessionEventRow(event,sessionEventUserId){(0,_jquery2.default)("#event-row-"+sessionEventUserId).remove()}}]);