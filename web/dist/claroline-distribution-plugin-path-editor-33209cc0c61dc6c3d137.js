webpackJsonp([32],{0:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(245);__webpack_require__(11);__webpack_require__(5);__webpack_require__(6);__webpack_require__(1760);__webpack_require__(1833);__webpack_require__(1848);__webpack_require__(1766);__webpack_require__(1799);__webpack_require__(1805);__webpack_require__(1862);var _app=__webpack_require__(1863);var _app2=_interopRequireDefault(_app);var _edit=__webpack_require__(1864);var _edit2=_interopRequireDefault(_edit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("PathEditorApp",["ngSanitize","ngRoute","ui.bootstrap","ui.translation","PathModuleBase","Path","Summary","Navigation","Step","UserProgression"]).config(["$routeProvider",function PathEditorConfig($routeProvider){$routeProvider.when("/",{template:_edit2.default,controller:"StepEditCtrl",controllerAs:"stepEditCtrl",resolve:_app2.default.resolveRootFunctions}).when("/:stepId?",{template:_edit2.default,controller:"StepEditCtrl",controllerAs:"stepEditCtrl",resolve:_app2.default.resolveFunctions}).otherwise({redirectTo:"/:stepId?"})}]).run(["$rootScope","$location","$anchorScroll",_app2.default.run])},798:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("translation",[]).service("Translator",function(){return Translator})},1760:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(441);__webpack_require__(237);__webpack_require__(798);__webpack_require__(1761);__webpack_require__(1763);__webpack_require__(1765);__webpack_require__(1833);__webpack_require__(1848);__webpack_require__(1766);__webpack_require__(1799);__webpack_require__(1768);var _PathService=__webpack_require__(1854);var _PathService2=_interopRequireDefault(_PathService);var _PathShowCtrl=__webpack_require__(1855);var _PathShowCtrl2=_interopRequireDefault(_PathShowCtrl);var _PathEditCtrl=__webpack_require__(1857);var _PathEditCtrl2=_interopRequireDefault(_PathEditCtrl);var _PathShowDirective=__webpack_require__(1858);var _PathShowDirective2=_interopRequireDefault(_PathShowDirective);var _PathEditDirective=__webpack_require__(1860);var _PathEditDirective2=_interopRequireDefault(_PathEditDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Path",["ui.tinymce","ui.fos-js-router","translation","Utils","History","Clipboard","Authorization","Navigation","Summary","Step","UserProgression"]).service("PathService",["$http","$q","$timeout","$location","Translator","url","AlertService","StepService","UserProgressionService",_PathService2.default]).controller("PathShowCtrl",["$window","$route","$routeParams","url","PathService","AuthorizationCheckerService","UserProgressionService",_PathShowCtrl2.default]).controller("PathEditCtrl",["$window","$route","$routeParams","url","PathService","Translator","HistoryService","ConfirmService","$scope","tinymceConfig",_PathEditCtrl2.default]).directive("pathShow",[function(){return new _PathShowDirective2.default}]).directive("pathEdit",[function(){return new _PathEditDirective2.default}])},1761:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _HistoryService=__webpack_require__(1762);var _HistoryService2=_interopRequireDefault(_HistoryService);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("History",[]).service("HistoryService",[_HistoryService2.default])},1762:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HistoryService=function(){function HistoryService(){(0,_classCallCheck3.default)(this,HistoryService);this.disabled={redo:true,undo:true};this.history=[];this.historyIndex=-1}(0,_createClass3.default)(HistoryService,[{key:"getDisabled",value:function getDisabled(){return this.disabled}},{key:"canUndo",value:function canUndo(){return!this.disabled.undo}},{key:"canRedo",value:function canRedo(){return!this.disabled.redo}},{key:"isEmpty",value:function isEmpty(){return-1==this.historyIndex}},{key:"clear",value:function clear(){this.disabled.redo=true;this.disabled.undo=true;this.history=[];this.historyIndex=-1}},{key:"update",value:function update(data){var updated=false;var lastHistoryData=this.getFromHistory(this.historyIndex);var lastHistoryDataJson=_index2.default.toJson(lastHistoryData);var dataCopy=_index2.default.copy(data);var dataCopyJson=_index2.default.toJson(dataCopy);if(this.isEmpty()||lastHistoryDataJson!=dataCopyJson){this.incrementIndex();this.history.push(dataCopy);if(this.getIndex()!==0){this.disabled.undo=false}this.disabled.redo=true;updated=true}return updated}},{key:"undo",value:function undo(currentData){this.decrementIndex();var data=this.getFromHistory(this.historyIndex);this.disabled.redo=false;if(0<=this.historyIndex){this.disabled.undo=true}return this.restoreData(currentData,data)}},{key:"redo",value:function redo(currentData){this.incrementIndex();var data=this.getFromHistory(this.historyIndex);this.disabled.undo=false;if(this.historyIndex==this.history.length-1){this.disabled.redo=true}return this.restoreData(currentData,data)}},{key:"incrementIndex",value:function incrementIndex(){this.setIndex(this.getIndex()+1)}},{key:"decrementIndex",value:function decrementIndex(){this.setIndex(this.getIndex()-1)}},{key:"getIndex",value:function getIndex(){return this.historyIndex}},{key:"setIndex",value:function setIndex(newIndex){this.historyIndex=newIndex}},{key:"getFromHistory",value:function getFromHistory(index){var data=null;if(typeof this.history[index]!=="undefined"){data=this.history[index]}return data}},{key:"restoreData",value:function restoreData(destination,source){for(var prop in destination){if(destination.hasOwnProperty(prop)){delete destination[prop]}}_index2.default.extend(destination,source);return destination}}]);return HistoryService}();exports.default=HistoryService},1763:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _ClipboardService=__webpack_require__(1764);var _ClipboardService2=_interopRequireDefault(_ClipboardService);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Clipboard",[]).service("ClipboardService",[_ClipboardService2.default])},1764:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ClipboardService=function(){function ClipboardService(){(0,_classCallCheck3.default)(this,ClipboardService);this.clipboard=null;this.disabled={copy:false,paste:true}}(0,_createClass3.default)(ClipboardService,[{key:"clear",value:function clear(){this.clipboard=null;this.disabled.paste=true}},{key:"getDisabled",value:function getDisabled(){return this.disabled}},{key:"copy",value:function copy(data,callback){var tempData=_index2.default.copy(data);if(typeof callback==="function"){callback(tempData)}this.clipboard=tempData;this.disabled.paste=false}},{key:"paste",value:function paste(destination,callback){if(null!==this.clipboard){var dataCopy=_index2.default.copy(this.clipboard);if(typeof callback==="function"){callback(dataCopy)}destination.push(dataCopy)}}}]);return ClipboardService}();exports.default=ClipboardService},1765:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(798);__webpack_require__(1760);__webpack_require__(1766);__webpack_require__(1799);__webpack_require__(1805);var _AuthorizationCheckerService=__webpack_require__(1830);var _AuthorizationCheckerService2=_interopRequireDefault(_AuthorizationCheckerService);var _AuthorizationBlockDirective=__webpack_require__(1831);var _AuthorizationBlockDirective2=_interopRequireDefault(_AuthorizationBlockDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Authorization",["translation","Path","Step","UserProgression","Condition"]).service("AuthorizationCheckerService",["$q","Translator","PathService","StepService","UserProgressionService","StepConditionsService",_AuthorizationCheckerService2.default]).directive("authorizationBlock",[function(){return new _AuthorizationBlockDirective2.default}])},1766:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(1767);__webpack_require__(441);__webpack_require__(237);__webpack_require__(798);__webpack_require__(1768);__webpack_require__(1773);__webpack_require__(1765);__webpack_require__(1777);__webpack_require__(1783);__webpack_require__(1791);__webpack_require__(1799);__webpack_require__(1805);var _StepService=__webpack_require__(1826);var _StepService2=_interopRequireDefault(_StepService);var _StepShowCtrl=__webpack_require__(1827);var _StepShowCtrl2=_interopRequireDefault(_StepShowCtrl);var _StepEditCtrl=__webpack_require__(1829);var _StepEditCtrl2=_interopRequireDefault(_StepEditCtrl);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Step",["ui.tinymce","ui.resourcePicker","ui.fos-js-router","translation","Utils","Form","Authorization","Resource","ResourcePrimary","ResourceSecondary","UserProgression","Condition"]).service("StepService",["$http","$filter","Translator","url","IdentifierService","ResourceService",_StepService2.default]).controller("StepShowCtrl",["step","inheritedResources","PathService","authorization","$sce","UserProgressionService",_StepShowCtrl2.default]).controller("StepEditCtrl",["step","inheritedResources","PathService","url","$scope","StepService","tinymceConfig",_StepEditCtrl2.default])},1767:function(module,exports){(function(){"use strict";angular.module("ui.resourcePicker",[]).directive("btnResourcePicker",[function(){return{restrict:"E",replace:true,transclude:true,scope:{parameters:"="},template:'<a href="" role="button" data-ng-click="resourcePickerOpen(pickerName)" data-ng-transclude=""></a>',link:function($scope,el,attrs){$scope.pickerName="picker-"+Math.floor(Math.random()*1e4);$scope.$watch("parameters",function(newValue){if(Claroline.ResourceManager.hasPicker($scope.pickerName)){var picker=Claroline.ResourceManager.get($scope.pickerName);if(angular.isObject(picker)){for(var parameter in newValue){if(newValue.hasOwnProperty(parameter)){picker.parameters[parameter]=newValue[parameter]}}}}});$scope.resourcePickerOpen=function(pickerName){if(!Claroline.ResourceManager.hasPicker($scope.pickerName)){Claroline.ResourceManager.createPicker($scope.pickerName,$scope.parameters,true)}else{console.log("picker use directive");Claroline.ResourceManager.picker(pickerName,"open")}};$scope.resourcePickerClose=function(pickerName){Claroline.ResourceManager.picker(pickerName,"close")};$scope.$on("$destroy",function handleDestroyEvent(){if(Claroline.ResourceManager.hasPicker($scope.pickerName)){Claroline.ResourceManager.destroy($scope.pickerName)}})}}}])})()},1768:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _TinymceConfigService=__webpack_require__(1769);var _TinymceConfigService2=_interopRequireDefault(_TinymceConfigService);var _IdentifierService=__webpack_require__(1770);var _IdentifierService2=_interopRequireDefault(_IdentifierService);var _TruncateFilter=__webpack_require__(1771);var _TruncateFilter2=_interopRequireDefault(_TruncateFilter);var _TrustAsHtmlFilter=__webpack_require__(1772);var _TrustAsHtmlFilter2=_interopRequireDefault(_TrustAsHtmlFilter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Utils",[]).factory("tinymceConfig",[_TinymceConfigService2.default]).service("IdentifierService",[_IdentifierService2.default]).filter("truncate",[_TruncateFilter2.default]).filter("trustAsHtml",["$sce",_TrustAsHtmlFilter2.default])},1769:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=tinymceConfig;var _jquery=__webpack_require__(123);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function tinymceConfig(){var tinymce=window.tinymce;tinymce.claroline.init=tinymce.claroline.init||{};tinymce.claroline.plugins=tinymce.claroline.plugins||{};var plugins=["autoresize advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars fullscreen","insertdatetime media nonbreaking save table directionality","template paste textcolor emoticons code -accordion -mention -codemirror"];var toolbar="bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | fullscreen displayAllButtons";_jquery2.default.each(tinymce.claroline.plugins,function(key,value){if("autosave"!=key&&value===true){plugins.push(key);toolbar+=" "+key}});var config={};for(var prop in tinymce.claroline.configuration){if(tinymce.claroline.configuration.hasOwnProperty(prop)){config[prop]=tinymce.claroline.configuration[prop]}}config.plugins=plugins;config.toolbar1=toolbar;config.trusted=true;config.format="html";config.autosave_ask_before_unload=false;config.setup=function(){};return config}},1770:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var IdentifierService=function(){function IdentifierService(){(0,_classCallCheck3.default)(this,IdentifierService)}(0,_createClass3.default)(IdentifierService,[{key:"generateUUID",value:function generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c==="x"?r:r&3|8;return v.toString(16)})}}]);return IdentifierService}();exports.default=IdentifierService},1771:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=truncateFilter;function truncateFilter(){return function(text,length,end){var truncated="";if(undefined!==text&&null!==text&&0!==text.length){length=isNaN(length)?50:length;end=end===undefined?"...":end;if(text.length<=length||text.length-end.length<=length){truncated=text}else{truncated=String(text).substring(0,length-end.length)+end}}return truncated}}},1772:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=trustAsHtmlFilter;function trustAsHtmlFilter($sce){return function(text){return $sce.trustAsHtml(text)}}},1773:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _DurationFieldDirective=__webpack_require__(1774);var _DurationFieldDirective2=_interopRequireDefault(_DurationFieldDirective);var _FieldValidationDirective=__webpack_require__(1776);var _FieldValidationDirective2=_interopRequireDefault(_FieldValidationDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Form",[]).directive("durationField",[function(){return new _DurationFieldDirective2.default}]).directive("fieldValidation",[function(){return new _FieldValidationDirective2.default}])},1774:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _durationField=__webpack_require__(1775);var _durationField2=_interopRequireDefault(_durationField);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DurationFieldDirective=function DurationFieldDirective(){(0,_classCallCheck3.default)(this,DurationFieldDirective);this.stepHour=1;this.stepMinute=5;this.restrict="E";this.replace=true;this.template=_durationField2.default;this.scope={model:"="};this.link=function(scope){scope.$watch("model",function(newValue){scope.hours=0;scope.minutes=0;if(newValue){var minutes=parseInt(scope.model/60);scope.hours=parseInt(minutes/60);scope.minutes=parseInt(minutes%60)}});scope.incrementDuration=function(type){if("hour"===type){scope.hours+=this.stepHour}else if("minute"===type&&scope.minutes+this.stepMinute<60){scope.minutes+=this.stepMinute}scope.recalculate()}.bind(this);scope.decrementDuration=function(type){if("hour"===type&&scope.hours-this.stepHour>=0){scope.hours-=this.stepHour}else if("minute"===type&&scope.minutes-this.stepMinute>=0){scope.minutes-=this.stepMinute}scope.recalculate()}.bind(this);scope.correctDuration=function(type){if("hour"===type){scope.hours=Math.abs(scope.hours)}else if("minute"===type){scope.minutes=Math.abs(scope.minutes);var minutesToHours=Math.floor(scope.minutes/60);if(minutesToHours>0){scope.hours+=minutesToHours;scope.minutes=scope.minutes%60}}scope.recalculate()};scope.recalculate=function(){scope.model=scope.hours*3600+scope.minutes*60}}};exports.default=DurationFieldDirective},1775:function(module,exports){module.exports='<div class="duration-field">\n    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">\n        <div class="input-group">\n            <!-- Label -->\n            <span class="input-group-addon">h</span>\n\n            <!-- Input -->\n            <input type="text" class="form-control text-right" data-ng-model="hours" data-ng-change="correctDuration(\'hour\')" size="1" />\n\n            <!-- Increment / Decrement buttons -->\n            <div class="btn-group-vertical">\n                <button type="button" data-ng-click="incrementDuration(\'hour\')" class="btn btn-xs btn-default">\n                    <span class="fa fa-chevron-up"></span>\n                </button>\n                <button type="button" data-ng-click="decrementDuration(\'hour\')" class="btn btn-xs btn-default">\n                    <span class="fa fa-chevron-down"></span>\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">\n        <div class="input-group">\n            <!-- Label -->\n            <span class="input-group-addon">min</span>\n\n            <!-- Input -->\n            <input type="text" class="form-control text-right" data-ng-model="minutes" data-ng-change="correctDuration(\'minute\')" size="1" />\n\n            <!-- Increment / Decrement buttons -->\n            <div class="btn-group-vertical">\n                <button type="button" data-ng-click="incrementDuration(\'minute\')" class="btn btn-xs btn-default">\n                    <span class="fa fa-chevron-up"></span>\n                </button>\n                <button type="button" data-ng-click="decrementDuration(\'minute\')" class="btn btn-xs btn-default">\n                    <span class="fa fa-chevron-down"></span>\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n'},1776:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FieldValidationDirective=function FieldValidationDirective(){(0,_classCallCheck3.default)(this,FieldValidationDirective);this.require="ngModel";this.link=function(scope,element,attrs,ngModel){ngModel.$parsers.push(function(value){value=parseInt(value,10);if(!(typeof value==="number"&&value%1===0)){value=1}ngModel.$setViewValue(value);ngModel.$render();return value})}};exports.default=FieldValidationDirective},1777:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(248);__webpack_require__(237);__webpack_require__(1768);__webpack_require__(1778);var _ResourceService=__webpack_require__(1782);var _ResourceService2=_interopRequireDefault(_ResourceService);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Resource",["ui.fos-js-router","ui.asset","Utils","Confirm"]).service("ResourceService",["$q","$http","url","IdentifierService",_ResourceService2.default])},1778:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(5);var _ConfirmService=__webpack_require__(1779);var _ConfirmService2=_interopRequireDefault(_ConfirmService);var _ConfirmModalCtrl=__webpack_require__(1781);var _ConfirmModalCtrl2=_interopRequireDefault(_ConfirmModalCtrl);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Confirm",["ui.bootstrap"]).service("ConfirmService",["$uibModal",_ConfirmService2.default]).controller("ConfirmModalCtrl",["$scope","$uibModalInstance","title","message","confirmButton",_ConfirmModalCtrl2.default])},1779:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _confirm=__webpack_require__(1780);var _confirm2=_interopRequireDefault(_confirm);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ConfirmService=function(){function ConfirmService($uibModal){(0,_classCallCheck3.default)(this,ConfirmService);this.$uibModal=$uibModal}(0,_createClass3.default)(ConfirmService,[{key:"open",value:function open(options,callback){var _title=void 0,_message=void 0,_confirmButton=void 0;if(options){if(options.title){_title=options.title}if(options.message){_message=options.message}if(options.confirmButton){_confirmButton=options.confirmButton}}var modalInstance=this.$uibModal.open({template:_confirm2.default,controller:"ConfirmModalCtrl",resolve:{title:function title(){return _title},message:function message(){return _message},confirmButton:function confirmButton(){return _confirmButton}}});if(callback){modalInstance.result.then(callback)}}}]);return ConfirmService}();exports.default=ConfirmService},1780:function(module,exports){module.exports='<div class="modal-header">\n    <h4 class="modal-title" data-ng-bind-html="title"></h4>\n</div>\n\n<div class="modal-body" data-ng-bind-html="message"></div>\n\n<div class="modal-footer">\n    <button class="btn btn-primary" data-ng-click="confirm()">{{ confirmButton }}</button>\n    <button class="btn btn-default cancel" data-ng-click="cancel()">{{ \'cancel\' | trans:{}:\'path_wizards\' }}</button>\n</div>'},1781:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ConfirmModalCtrl=function ConfirmModalCtrl($scope,$uibModalInstance,title,message,confirmButton){(0,_classCallCheck3.default)(this,ConfirmModalCtrl);$scope.title=title;$scope.message=message;$scope.confirmButton=confirmButton;$scope.confirm=function(){$uibModalInstance.close()};$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}};exports.default=ConfirmModalCtrl},1782:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof2=__webpack_require__(34);var _typeof3=_interopRequireDefault(_typeof2);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResourceService=function(){function ResourceService($q,$http,url,IdentifierService){(0,_classCallCheck3.default)(this,ResourceService);this.$q=$q;this.$http=$http;this.UrlGenerator=url;this.IdentifierService=IdentifierService;this.resourceIcons=null;this.resourceIconsPromise=null}(0,_createClass3.default)(ResourceService,[{key:"getResourceIcons",value:function getResourceIcons(){var _this=this;if(!this.resourceIconsPromise){var _ret=function(){var deferred=_this.$q.defer();if(null!==_this.resourceIcons){deferred.resolve(_this.resourceIcons)}else{_this.$http.get(_this.UrlGenerator("claro_resource_icon_list")).success(function(response){_this.resourceIcons=response;deferred.resolve(response);delete _this.resourceIconsPromise}).error(function(response){deferred.reject(response);delete _this.resourceIconsPromise});_this.resourceIconsPromise=deferred.promise}return{v:deferred.promise}}();if((typeof _ret==="undefined"?"undefined":(0,_typeof3.default)(_ret))==="object")return _ret.v}return this.resourceIconsPromise}},{key:"newResource",value:function newResource(type,mimeType,id,name){return{id:this.IdentifierService.generateUUID(),resourceId:id?id:null,name:name?name:null,type:type?type:null,mimeType:mimeType?mimeType:null,propagateToChildren:true}}},{key:"exists",value:function exists(resources,resource){var resourceExists=false;if(_index2.default.isObject(resources)){for(var i=0;i<resources.length;i++){var currentResource=resources[i];if(currentResource.resourceId===resource.resourceId){resourceExists=true;break}}}return resourceExists}}]);return ResourceService}();exports.default=ResourceService},1783:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(1767);__webpack_require__(237);__webpack_require__(798);__webpack_require__(1778);__webpack_require__(1777);var _ResourcesPrimaryShowCtrl=__webpack_require__(1784);var _ResourcesPrimaryShowCtrl2=_interopRequireDefault(_ResourcesPrimaryShowCtrl);var _ResourcesPrimaryEditCtrl=__webpack_require__(1787);var _ResourcesPrimaryEditCtrl2=_interopRequireDefault(_ResourcesPrimaryEditCtrl);var _ResourcesPrimaryShowDirective=__webpack_require__(1788);var _ResourcesPrimaryShowDirective2=_interopRequireDefault(_ResourcesPrimaryShowDirective);var _ResourcesPrimaryEditDirective=__webpack_require__(1789);var _ResourcesPrimaryEditDirective2=_interopRequireDefault(_ResourcesPrimaryEditDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("ResourcePrimary",["ui.resourcePicker","ui.fos-js-router","translation","Confirm","Resource"]).controller("ResourcesPrimaryShowCtrl",["url","ResourceService",_ResourcesPrimaryShowCtrl2.default]).controller("ResourcesPrimaryEditCtrl",["url","ResourceService","$scope","Translator","ConfirmService",_ResourcesPrimaryEditCtrl2.default]).directive("resourcesPrimaryShow",[function(){return new _ResourcesPrimaryShowDirective2.default}]).directive("resourcesPrimaryEdit",[function(){return new _ResourcesPrimaryEditDirective2.default}])},1784:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _ResourcesPrimaryBaseCtrl=__webpack_require__(1785);var _ResourcesPrimaryBaseCtrl2=_interopRequireDefault(_ResourcesPrimaryBaseCtrl);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResourcesPrimaryShowCtrl=function(_ResourcesPrimaryBase){(0,_inherits3.default)(ResourcesPrimaryShowCtrl,_ResourcesPrimaryBase);function ResourcesPrimaryShowCtrl(url,ResourceService){(0,_classCallCheck3.default)(this,ResourcesPrimaryShowCtrl);var _this=(0,_possibleConstructorReturn3.default)(this,(ResourcesPrimaryShowCtrl.__proto__||(0,_getPrototypeOf2.default)(ResourcesPrimaryShowCtrl)).call(this,url,ResourceService));if(_index2.default.isObject(_this.resources)&&_index2.default.isObject(_this.resources[0])){var resource=_this.resources[0];if(!_index2.default.isDefined(resource.url)||0===resource.url.length){resource.url=_this.UrlGenerator("claro_resource_open",{node:_this.resources[0].id,resourceType:_this.resources[0].type})+"?iframe=1"}}return _this}return ResourcesPrimaryShowCtrl}(_ResourcesPrimaryBaseCtrl2.default);exports.default=ResourcesPrimaryShowCtrl},1785:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _ResourcesCtrl2=__webpack_require__(1786);var _ResourcesCtrl3=_interopRequireDefault(_ResourcesCtrl2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResourcesPrimaryBaseCtrl=function(_ResourcesCtrl){(0,_inherits3.default)(ResourcesPrimaryBaseCtrl,_ResourcesCtrl);function ResourcesPrimaryBaseCtrl(){(0,_classCallCheck3.default)(this,ResourcesPrimaryBaseCtrl);return(0,_possibleConstructorReturn3.default)(this,(ResourcesPrimaryBaseCtrl.__proto__||(0,_getPrototypeOf2.default)(ResourcesPrimaryBaseCtrl)).apply(this,arguments))}return ResourcesPrimaryBaseCtrl}(_ResourcesCtrl3.default);exports.default=ResourcesPrimaryBaseCtrl},1786:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResourcesCtrl=function(){function ResourcesCtrl(url,ResourceService){
var _this=this;(0,_classCallCheck3.default)(this,ResourcesCtrl);this.UrlGenerator=url;this.ResourceService=ResourceService;this.resourceIcons=[];this.ResourceService.getResourceIcons().then(function(data){return _this.resourceIcons=data})}(0,_createClass3.default)(ResourcesCtrl,[{key:"showResource",value:function showResource(resource){var route=null;if(resource.url){route=resource.url}else{route=this.UrlGenerator("claro_resource_open",{node:resource.resourceId,resourceType:resource.type})}window.open(route,"_blank")}}]);return ResourcesCtrl}();exports.default=ResourcesCtrl},1787:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _ResourcesPrimaryBaseCtrl=__webpack_require__(1785);var _ResourcesPrimaryBaseCtrl2=_interopRequireDefault(_ResourcesPrimaryBaseCtrl);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResourcesPrimaryEditCtrl=function(_ResourcesPrimaryBase){(0,_inherits3.default)(ResourcesPrimaryEditCtrl,_ResourcesPrimaryBase);function ResourcesPrimaryEditCtrl(url,ResourceService,$scope,Translator,ConfirmService){(0,_classCallCheck3.default)(this,ResourcesPrimaryEditCtrl);var _this=(0,_possibleConstructorReturn3.default)(this,(ResourcesPrimaryEditCtrl.__proto__||(0,_getPrototypeOf2.default)(ResourcesPrimaryEditCtrl)).call(this,url,ResourceService));_this.scope=$scope;_this.confirmService=ConfirmService;_this.Translator=Translator;_this.collapsed=false;_this.resourcePicker={isPickerMultiSelectAllowed:false,typeBlackList:["innova_path","activity"],callback:function callback(nodes){if(_index2.default.isObject(nodes)){for(var nodeId in nodes){if(nodes.hasOwnProperty(nodeId)){var node=nodes[nodeId];var resource=_this.ResourceService.newResource(node[1],node[2],nodeId,node[0]);if(!_this.ResourceService.exists(_this.resources,resource)){_this.resources.splice(0,_this.resources.length);_this.resources.push(resource)}break}}_this.scope.$apply();nodes={}}}};return _this}(0,_createClass3.default)(ResourcesPrimaryEditCtrl,[{key:"removeResource",value:function removeResource(resource){var _this2=this;this.confirmService.open({title:this.Translator.trans("resource_delete_title",{resourceName:resource.name},"path_wizards"),message:this.Translator.trans("resource_delete_confirm",{},"path_wizards"),confirmButton:this.Translator.trans("resource_delete",{},"path_wizards")},function(){for(var i=0;i<_this2.resources.length;i++){if(resource.id===_this2.resources[i].id){_this2.resources.splice(i,1);break}}})}}]);return ResourcesPrimaryEditCtrl}(_ResourcesPrimaryBaseCtrl2.default);exports.default=ResourcesPrimaryEditCtrl},1788:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _jquery=__webpack_require__(123);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResourcesPrimaryEditDirective=function ResourcesPrimaryEditDirective(){(0,_classCallCheck3.default)(this,ResourcesPrimaryEditDirective);this.restrict="E";this.replace=true;this.controller="ResourcesPrimaryShowCtrl";this.controllerAs="resourcesPrimaryShowCtrl";this.template='<iframe id="embeddedActivity" style="width: 100%; min-height: {{ resourcesPrimaryShowCtrl.height }}px;" data-ng-src="{{ resourcesPrimaryShowCtrl.resources[0].url }}" allowfullscreen></iframe>';this.scope={resources:"=",height:"="};this.bindToController=true;this.link=function(scope,element){(0,_jquery2.default)(window).on("message",function(e){if(typeof e.originalEvent.data==="string"&&e.originalEvent.data.indexOf("documentHeight:")>-1){var height=e.originalEvent.data.split("documentHeight:")[1];(0,_jquery2.default)(element).css("height",parseInt(height)+15)}})}};exports.default=ResourcesPrimaryEditDirective},1789:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _edit=__webpack_require__(1790);var _edit2=_interopRequireDefault(_edit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResourcesPrimaryEditDirective=function ResourcesPrimaryEditDirective(){(0,_classCallCheck3.default)(this,ResourcesPrimaryEditDirective);this.restrict="E";this.replace=true;this.controller="ResourcesPrimaryEditCtrl";this.controllerAs="resourcesPrimaryEditCtrl";this.template=_edit2.default;this.scope={resources:"="};this.bindToController=true};exports.default=ResourcesPrimaryEditDirective},1790:function(module,exports){module.exports='<div class="panel panel-default">\n    <!-- Primary resource -->\n    <div class="panel-heading">\n        <h4 class="panel-title" data-ng-click="resourcesPrimaryEditCtrl.collapsed = !resourcesPrimaryEditCtrl.collapsed">\n            <span class="fa fa-fw" data-ng-class="{ \'fa-caret-right\': resourcesPrimaryEditCtrl.collapsed, \'fa-caret-down\': !resourcesPrimaryEditCtrl.collapsed }"></span>\n\n            <span class="badge">{{ resourcesPrimaryEditCtrl.resources ? resourcesPrimaryEditCtrl.resources.length : 0 }}</span>\n\n            <span>{{ \'primary_resource\'|trans:{}:\'path_wizards\' }}</span>\n        </h4>\n\n        <div class="btns">\n            <btn-resource-picker data-parameters="resourcesPrimaryEditCtrl.resourcePicker" class="btn btn-sm btn-primary">\n                <span class="fa fa-plus"></span>\n                <span data-ng-show="!resourcesPrimaryEditCtrl.resources || resourcesPrimaryEditCtrl.resources.length == 0">{{ \'resource_primary_add\'|trans:{}:\'path_wizards\' }}</span>\n                <span data-ng-show="resourcesPrimaryEditCtrl.resources && resourcesPrimaryEditCtrl.resources.length != 0">{{  \'resource_primary_replace\'|trans:{}:\'path_wizards\' }}</span>\n            </btn-resource-picker>\n\n            <button type="button" role="button" class="btn btn-sm btn-danger" data-ng-if="resourcesPrimaryEditCtrl.resources.length != 0" data-ng-click="resourcesPrimaryEditCtrl.removeResource(resourcesPrimaryEditCtrl.resources[0])">\n                <span class="fa fa-trash-o"></span>\n                {{ \'resource_primary_delete\'|trans:{}:\'path_wizards\' }}\n            </button>\n        </div>\n    </div>\n\n    <div class="panel-body" data-ng-show="!resourcesPrimaryEditCtrl.collapsed">\n        <!-- No resource message -->\n        <em data-ng-show="!resourcesPrimaryEditCtrl.resources || resourcesPrimaryEditCtrl.resources.length == 0">{{ \'no_primary_resource\'|trans:{}:\'path_wizards\' }}</em>\n\n        <!-- Resource -->\n        <div data-ng-show="resourcesPrimaryEditCtrl.resources && resourcesPrimaryEditCtrl.resources.length != 0">\n            <div style="display:inline-block; vertical-align: middle; margin-right: 15px;">\n                <img height="60"\n                     alt="{{ resourcesPrimaryEditCtrl.resources[0].mimeType }}"\n                     data-ng-if="0 !== resourcesPrimaryEditCtrl.resourceIcons.length"\n                     data-ng-src="{{ (resourcesPrimaryEditCtrl.resourceIcons[resourcesPrimaryEditCtrl.resources[0].mimeType] || resourcesPrimaryEditCtrl.resourceIcons[\'custom/default\'])|asset }}" />\n            </div>\n            <div style="display:inline-block; vertical-align: middle;">\n                <p class="h4">{{ resourcesPrimaryEditCtrl.resources[0].name }}</p>\n                <button type="button" role="button" class="btn btn-default" data-ng-click="resourcesPrimaryEditCtrl.showResource(resourcesPrimaryEditCtrl.resources[0])">\n                    <span class="fa fa-fw fa-sign-out"></span> {{ \'resource_show\'|trans:{}:\'path_wizards\' }}\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n'},1791:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(1767);__webpack_require__(798);__webpack_require__(1778);__webpack_require__(1777);var _ResourcesSecondaryShowCtrl=__webpack_require__(1792);var _ResourcesSecondaryShowCtrl2=_interopRequireDefault(_ResourcesSecondaryShowCtrl);var _ResourcesSecondaryEditCtrl=__webpack_require__(1794);var _ResourcesSecondaryEditCtrl2=_interopRequireDefault(_ResourcesSecondaryEditCtrl);var _ResourcesSecondaryShowDirective=__webpack_require__(1795);var _ResourcesSecondaryShowDirective2=_interopRequireDefault(_ResourcesSecondaryShowDirective);var _ResourcesSecondaryEditDirective=__webpack_require__(1797);var _ResourcesSecondaryEditDirective2=_interopRequireDefault(_ResourcesSecondaryEditDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("ResourceSecondary",["ui.resourcePicker","translation","Confirm","Resource"]).controller("ResourcesSecondaryShowCtrl",["url","ResourceService",_ResourcesSecondaryShowCtrl2.default]).controller("ResourcesSecondaryEditCtrl",["url","ResourceService","$scope","Translator","ConfirmService",_ResourcesSecondaryEditCtrl2.default]).directive("resourcesSecondaryShow",[function(){return new _ResourcesSecondaryShowDirective2.default}]).directive("resourcesSecondaryEdit",[function(){return new _ResourcesSecondaryEditDirective2.default}])},1792:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _ResourcesSecondaryBaseCtrl=__webpack_require__(1793);var _ResourcesSecondaryBaseCtrl2=_interopRequireDefault(_ResourcesSecondaryBaseCtrl);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResourcesSecondaryShowCtrl=function(_ResourcesSecondaryBa){(0,_inherits3.default)(ResourcesSecondaryShowCtrl,_ResourcesSecondaryBa);function ResourcesSecondaryShowCtrl(){(0,_classCallCheck3.default)(this,ResourcesSecondaryShowCtrl);return(0,_possibleConstructorReturn3.default)(this,(ResourcesSecondaryShowCtrl.__proto__||(0,_getPrototypeOf2.default)(ResourcesSecondaryShowCtrl)).apply(this,arguments))}return ResourcesSecondaryShowCtrl}(_ResourcesSecondaryBaseCtrl2.default);exports.default=ResourcesSecondaryShowCtrl},1793:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _ResourcesCtrl2=__webpack_require__(1786);var _ResourcesCtrl3=_interopRequireDefault(_ResourcesCtrl2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResourcesSecondaryBaseCtrl=function(_ResourcesCtrl){(0,_inherits3.default)(ResourcesSecondaryBaseCtrl,_ResourcesCtrl);function ResourcesSecondaryBaseCtrl(url,ResourceService){(0,_classCallCheck3.default)(this,ResourcesSecondaryBaseCtrl);return(0,_possibleConstructorReturn3.default)(this,(ResourcesSecondaryBaseCtrl.__proto__||(0,_getPrototypeOf2.default)(ResourcesSecondaryBaseCtrl)).call(this,url,ResourceService))}return ResourcesSecondaryBaseCtrl}(_ResourcesCtrl3.default);exports.default=ResourcesSecondaryBaseCtrl},1794:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _ResourcesSecondaryBaseCtrl=__webpack_require__(1793);var _ResourcesSecondaryBaseCtrl2=_interopRequireDefault(_ResourcesSecondaryBaseCtrl);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResourcesSecondaryEditCtrl=function(_ResourcesSecondaryBa){(0,_inherits3.default)(ResourcesSecondaryEditCtrl,_ResourcesSecondaryBa);function ResourcesSecondaryEditCtrl(url,ResourceService,$scope,Translator,ConfirmService){(0,_classCallCheck3.default)(this,ResourcesSecondaryEditCtrl);var _this=(0,_possibleConstructorReturn3.default)(this,(ResourcesSecondaryEditCtrl.__proto__||(0,_getPrototypeOf2.default)(ResourcesSecondaryEditCtrl)).call(this,url,ResourceService));_this.scope=$scope;_this.Translator=Translator;_this.confirmService=ConfirmService;_this.resourcePicker={isPickerMultiSelectAllowed:true,callback:function callback(nodes){_this.addResources(nodes);nodes={}}};return _this}(0,_createClass3.default)(ResourcesSecondaryEditCtrl,[{key:"addResources",value:function addResources(resources){if(_index2.default.isObject(resources)){for(var nodeId in resources){if(resources.hasOwnProperty(nodeId)){var node=resources[nodeId];var resource=this.ResourceService.newResource(node[1],node[2],nodeId,node[0]);if(!this.ResourceService.exists(this.resources,resource)){this.resources.push(resource)}}}this.scope.$apply()}}},{key:"removeResource",value:function removeResource(resource){var _this2=this;this.confirmService.open({title:this.Translator.trans("resource_delete_title",{resourceName:resource.name},"path_wizards"),message:this.Translator.trans("resource_delete_confirm",{},"path_wizards"),confirmButton:this.Translator.trans("resource_delete",{},"path_wizards")},function(){for(var i=0;i<_this2.resources.length;i++){if(resource.id===_this2.resources[i].id){_this2.resources.splice(i,1);break}}for(var j=0;j<_this2.excluded.length;j++){if(resource.id==_this2.excluded[j]){_this2.excluded.splice(j,1);break}}})}},{key:"togglePropagation",value:function togglePropagation(resource){resource.propagateToChildren=!resource.propagateToChildren}},{key:"toggleExcluded",value:function toggleExcluded(resource){if(resource.isExcluded){for(var i=0;i<this.excluded.length;i++){if(resource.id==this.excluded[i]){this.excluded.splice(i,1)}}}else{this.excluded.push(resource.id)}resource.isExcluded=!resource.isExcluded}}]);return ResourcesSecondaryEditCtrl}(_ResourcesSecondaryBaseCtrl2.default);exports.default=ResourcesSecondaryEditCtrl},1795:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _show=__webpack_require__(1796);var _show2=_interopRequireDefault(_show);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResourcesSecondaryShowDirective=function ResourcesSecondaryShowDirective(){(0,_classCallCheck3.default)(this,ResourcesSecondaryShowDirective);this.restrict="E";this.replace=true;this.controller="ResourcesSecondaryShowCtrl";this.controllerAs="resourcesSecondaryShowCtrl";this.template=_show2.default;this.scope={resources:"=",inherited:"=",excluded:"="};this.bindToController=true};exports.default=ResourcesSecondaryShowDirective},1796:function(module,exports){module.exports='<ul class="nav nav-tabs resource-tabs">\n    <!-- Inherited resources -->\n    <li class="resource" role="presentation" data-ng-repeat="resource in resourcesSecondaryShowCtrl.inherited | filter:{isExcluded: false}">\n        <a href="{{ resource.url || (\'claro_resource_open\'|path:{node: resource.resourceId, resourceType: resource.type}) }}" role="button" target="_blank">\n            <!-- Resource lvl -->\n            <div class="lvl-indicator lvl lvl-{{ resource.parentStep.lvl }} lvl-bg"></div>\n\n            <!-- Resource icon -->\n            <img class="resource-icon"\n                 alt="{{ resource.mimeType }}"\n                 data-ng-if="0 !== resourcesSecondaryShowCtrl.resourceIcons.length"\n                 data-ng-src="{{ (resourcesSecondaryShowCtrl.resourceIcons[resource.mimeType] || resourcesSecondaryShowCtrl.resourceIcons[\'custom/default\'])|asset }}" />\n\n            <!-- Resource name -->\n            {{ resource.name }}\n        </a>\n    </li>\n\n    <!-- Owned resources -->\n    <li class="resource" role="presentation" data-ng-repeat="resource in resourcesSecondaryShowCtrl.resources">\n        <a href="{{ resource.url || (\'claro_resource_open\'|path:{node: resource.resourceId, resourceType: resource.type}) }}" role="button" target="_blank">\n            <!-- Resource icon -->\n            <img class="resource-icon"\n                 alt="{{ resource.mimeType }}"\n                 data-ng-if="0 !== resourcesSecondaryShowCtrl.resourceIcons.length"\n                 data-ng-src="{{ (resourcesSecondaryShowCtrl.resourceIcons[resource.mimeType] || resourcesSecondaryShowCtrl.resourceIcons[\'custom/default\'])|asset }}" />\n\n            <!-- Resource name -->\n            {{ resource.name }}\n        </a>\n    </li>\n</ul>'},1797:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _edit=__webpack_require__(1798);var _edit2=_interopRequireDefault(_edit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResourcesPrimaryEditDirective=function ResourcesPrimaryEditDirective(){(0,_classCallCheck3.default)(this,ResourcesPrimaryEditDirective);this.restrict="E";this.replace=true;this.controller="ResourcesSecondaryEditCtrl";this.controllerAs="resourcesSecondaryEditCtrl";this.template=_edit2.default;this.scope={resources:"=",inherited:"=",excluded:"="};this.bindToController=true};exports.default=ResourcesPrimaryEditDirective},1798:function(module,exports){module.exports='<ul class="nav nav-tabs resource-tabs">\n    <!-- Inherited resources -->\n    <li class="resource dropdown-fix" role="presentation" data-ng-repeat="resource in resourcesSecondaryEditCtrl.inherited" data-ng-class="{ excluded: resource.isExcluded }">\n        <a href="" role="button" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">\n            <!-- Resource lvl -->\n            <div class="lvl-indicator lvl lvl-{{ resource.parentStep.lvl }} lvl-bg"></div>\n\n            <!-- Resource icon -->\n            <img class="resource-icon"\n                 alt="{{ resource.mimeType }}"\n                 data-ng-if="0 !== resourcesSecondaryEditCtrl.resourceIcons.length"\n                 data-ng-src="{{ (resourcesSecondaryEditCtrl.resourceIcons[resource.mimeType] || resourcesSecondaryEditCtrl.resourceIcons[\'custom/default\'])|asset }}" />\n\n            <!-- Resource name -->\n            {{ resource.name }}\n\n            <span class="caret"></span>\n        </a>\n\n        <!-- Menu of actions -->\n        <ul class="dropdown-menu" role="menu">\n            <!-- Go to resource -->\n            <li role="presentation">\n                <a href="{{ resource.url || (\'claro_resource_open\'|path:{node: resource.resourceId, resourceType: resource.type}) }}"\n                   role="menuitem"\n                   tabindex="-1">\n                    <span class="fa fa-fw fa-sign-out"></span>\n                    {{ \'resource_show\'|trans:{}:\'path_wizards\' }}\n                </a>\n            </li>\n\n            <!-- Toggle excluded -->\n            <li role="presentation">\n                <a href="" role="menuitem" tabindex="-1" data-ng-click="resourcesSecondaryEditCtrl.toggleExcluded(resource)">\n                    <span data-ng-if="resource.isExcluded">\n                        <span class="fa fa-fw fa-eye"></span> {{ \'resource_show_parent\'|trans:{}:\'path_wizards\' }}\n                    </span>\n                    <span data-ng-if="!resource.isExcluded">\n                        <span class="fa fa-fw fa-eye-slash"></span> {{ \'resource_hide_parent\'|trans:{}:\'path_wizards\' }}\n                    </span>\n                </a>\n            </li>\n        </ul>\n    </li>\n\n    <!-- Owned resources -->\n    <li class="resource dropdown-fix" role="presentation" data-ng-repeat="resource in resourcesSecondaryEditCtrl.resources">\n        <a href="" role="button" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">\n            <!-- Resource icon -->\n            <img class="resource-icon"\n                 alt="{{ resource.mimeType }}"\n                 data-ng-if="0 !== resourcesSecondaryEditCtrl.resourceIcons.length"\n                 data-ng-src="{{ (resourcesSecondaryEditCtrl.resourceIcons[resource.mimeType] || resourcesSecondaryEditCtrl.resourceIcons[\'custom/default\'])|asset }}" />\n\n            <!-- Resource name -->\n            {{ resource.name }}\n\n            <span class="caret"></span>\n        </a>\n\n        <!--Menu of actions -->\n        <ul class="dropdown-menu" role="menu">\n            <!-- Go to resource -->\n            <li role="presentation">\n                <a href="" role="menuitem" tabindex="-1" data-ng-click="resourcesSecondaryEditCtrl.showResource(resource)">\n                    <span class="fa fa-fw fa-sign-out"></span> {{ \'resource_show\'|trans:{}:\'path_wizards\' }}\n                </a>\n            </li>\n\n            <!-- Toggle propagation to children -->\n            <li role="presentation">\n                <a href="" role="menuitem" tabindex="-1" data-ng-click="resourcesSecondaryEditCtrl.togglePropagation(resource)">\n                    <span data-ng-if="!resource.propagateToChildren">\n                        <span class="fa fa-fw fa-eye"></span> {{ \'resource_propagate\'|trans:{}:\'path_wizards\' }}\n                    </span>\n                    <span data-ng-if="resource.propagateToChildren">\n                        <span class="fa fa-fw fa-eye-slash"></span> {{ \'resource_no_propagate\'|trans:{}:\'path_wizards\' }}\n                    </span>\n                </a>\n            </li>\n\n            <!-- Delete resource -->\n            <li role="presentation" class="divider"></li>\n            <li role="presentation">\n                <a href="" role="menuitem" tabindex="-1" data-ng-click="resourcesSecondaryEditCtrl.removeResource(resource)">\n                    <span class="fa fa-fw fa-trash-o"></span> {{ \'resource_delete\'|trans:{}:\'path_wizards\' }}\n                </a>\n            </li>\n        </ul>\n    </li>\n\n    <!-- Add secondary resource button -->\n    <li role="presentation">\n        <btn-resource-picker class="resource-add" data-parameters="resourcesSecondaryEditCtrl.resourcePicker">\n            <span class="fa fa-fw fa-plus"></span> {{ \'resource_secondary_add\'|trans:{}:\'path_wizards\' }}\n        </btn-resource-picker>\n    </li>\n</ul>'},1799:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(237);__webpack_require__(798);__webpack_require__(1800);var _UserProgressionService=__webpack_require__(1804);var _UserProgressionService2=_interopRequireDefault(_UserProgressionService);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("UserProgression",["ui.fos-js-router","translation","Alert"]).service("UserProgressionService",["$http","$q","Translator","url","AlertService",_UserProgressionService2.default])},1800:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _AlertService=__webpack_require__(1801);var _AlertService2=_interopRequireDefault(_AlertService);var _AlertBoxDirective=__webpack_require__(1802);var _AlertBoxDirective2=_interopRequireDefault(_AlertBoxDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Alert",[]).service("AlertService",["$timeout",_AlertService2.default]).directive("alertBox",["AlertService",function(AlertService){return new _AlertBoxDirective2.default(AlertService)}])},1801:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AlertService=function(){function AlertService($timeout){(0,_classCallCheck3.default)(this,AlertService);this.$timeout=$timeout;this.duration=7e3;this.alerts=[];this.current={}}(0,_createClass3.default)(AlertService,[{key:"getCurrent",value:function getCurrent(){if(this.alerts.length>0){this.displayAlert(this.alerts.shift())}return this.current}},{key:"getAlerts",value:function getAlerts(){return this.alerts}},{key:"addAlert",value:function addAlert(type,msg,timeoutFlag){var display=false;if(this.alerts.length===0){display=true}this.alerts.push({type:type,msg:msg});if(display){if(timeoutFlag){this.displayAlert(this.alerts.shift())}else{this.displayAlertWithoutTimeout(this.alerts.shift())}}}},{key:"displayAlertWithoutTimeout",value:function displayAlertWithoutTimeout(alert){this.current.type=alert.type;this.current.msg=alert.msg}},{key:"displayAlert",value:function displayAlert(alert){var _this=this;this.current.type=alert.type;this.current.msg=alert.msg;this.$timeout(function(){return _this.closeCurrent()},this.duration)}},{key:"closeCurrent",value:function closeCurrent(){if(this.current){delete this.current.type;delete this.current.msg}if(this.alerts.length>0){this.displayAlert(this.alerts.shift())}}}]);return AlertService}();exports.default=AlertService},1802:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _alertBox=__webpack_require__(1803);var _alertBox2=_interopRequireDefault(_alertBox);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AlertBoxDirective=function AlertBoxDirective(AlertService){(0,_classCallCheck3.default)(this,AlertBoxDirective);this.restrict="E";this.replace=true;this.template=_alertBox2.default;this.scope={};this.link=function(scope){scope.current=AlertService.getCurrent();scope.closeCurrent=function(){AlertService.closeCurrent()}}};exports.default=AlertBoxDirective},1803:function(module,exports){module.exports="<div class=\"alert-box\" data-ng-if=\"current.msg\" data-ng-click=\"closeCurrent()\" data-ng-class=\"{ 'text-success': 'success' == current.type, 'text-warning': 'warning' == current.type, 'text-danger': 'error' == current.type, 'text-info': 'info' == current.type }\">\n    <span class=\"fa fa-fw\" data-ng-class=\"{ 'fa-check': 'success' == current.type, 'fa-warning': 'warning' == current.type, 'fa-times': 'error' == current.type, 'fa-info': 'info' == current.type }\"></span>\n    <span data-ng-bind-html=\"current.msg\"></span>\n</div>"},1804:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UserProgressionService=function(){function UserProgressionService($http,$q,Translator,url,AlertService){(0,_classCallCheck3.default)(this,UserProgressionService);this.$http=$http;this.$q=$q;this.Translator=Translator;this.UrlGenerator=url;this.AlertService=AlertService;this.progression=null;this.totalProgression=0;this.inProgress={}}(0,_createClass3.default)(UserProgressionService,[{key:"get",value:function get(){return this.progression}},{key:"set",value:function set(value){this.progression=value}},{key:"getForStep",value:function getForStep(step){var stepProgression=null;if(_index2.default.isObject(this.progression)&&_index2.default.isObject(this.progression[step.resourceId])){stepProgression=this.progression[step.resourceId]}return stepProgression}},{key:"isStepInProgress",value:function isStepInProgress(step){return this.inProgress[step.resourceId]||false}},{key:"iStepAlreadyAuthorized",value:function iStepAlreadyAuthorized(step){var alreadyAuthorized=false;var stepProgression=this.getForStep(step);if(stepProgression&&stepProgression.authorized){alreadyAuthorized=true}return alreadyAuthorized}},{key:"create",value:function create(step,status,authorized){var _this=this;var deferred=this.$q.defer();if(this.isStepInProgress(step)){return deferred.promise}var params={user_progression_authorized:authorized?true:false,user_progression_status:status?status:"unseen"};this.inProgress[step.resourceId]=true;this.$http.post(this.UrlGenerator("innova_path_progression_create",{id:step.resourceId}),params).success(function(response){_this.inProgress[step.resourceId]=false;_this.progression[response.progression.stepId]=response.progression;if(response.progression.status==="seen"||response.progression.status==="done"){_this.totalProgression+=1}deferred.resolve(response)}).error(function(response){_this.inProgress[step.resourceId]=false;_this.AlertService.addAlert("error",_this.Translator.trans("progression_save_error",{},"path_wizards"));deferred.reject(response)});return deferred.promise}},{key:"update",value:function update(step,status,authorized){var _this2=this;var deferred=this.$q.defer();var params={user_progression_authorized:authorized||this.progression[step.id].authorized,user_progression_status:status||this.progression[step.id].status};this.inProgress[step.resourceId]=true;this.$http.put(this.UrlGenerator("innova_path_progression_update",{id:step.resourceId}),params).success(function(response){_this2.inProgress[step.resourceId]=false;var oldStatus="";if(!_index2.default.isObject(_this2.progression[response.progression.stepId])){_this2.progression[response.progression.stepId]=response.progression}else{oldStatus=_this2.progression[response.progression.stepId].status;_this2.progression[response.progression.stepId].status=response.progression.status;_this2.progression[response.progression.stepId].authorized=response.progression.authorized}if((status==="seen"||status==="done")&&oldStatus!=="seen"&&oldStatus!=="done"){
_this2.totalProgression+=1}else if((oldStatus==="seen"||oldStatus==="done")&&status!=="seen"&&status!=="done"){_this2.totalProgression-=1}deferred.resolve(response.progression.status)}).error(function(response){_this2.inProgress[step.resourceId]=false;_this2.AlertService.addAlert("error",_this2.Translator.trans("progression_save_error",{},"path_wizards"));deferred.reject(response)});return deferred.promise}},{key:"getTotalProgression",value:function getTotalProgression(){return this.totalProgression}},{key:"setTotalProgression",value:function setTotalProgression(value){this.totalProgression=parseInt(value)}},{key:"callForUnlock",value:function callForUnlock(step){var _this3=this;var deferred=this.$q.defer();this.$http.get(this.UrlGenerator("innova_path_step_callforunlock",{step:step.resourceId})).success(function(response){if(!_index2.default.isObject(_this3.progression[step.stepId])){_this3.progression[response.stepId]=response}else{_this3.progression[response.stepId].lockedcall=response.lockedcall}deferred.resolve(response)}).error(function(response){deferred.reject(response)});return deferred.promise}}]);return UserProgressionService}();exports.default=UserProgressionService},1805:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(798);__webpack_require__(1778);__webpack_require__(1773);__webpack_require__(1806);var _StepConditionsService=__webpack_require__(1822);var _StepConditionsService2=_interopRequireDefault(_StepConditionsService);var _ConditionEditCtrl=__webpack_require__(1823);var _ConditionEditCtrl2=_interopRequireDefault(_ConditionEditCtrl);var _ConditionEditDirective=__webpack_require__(1824);var _ConditionEditDirective2=_interopRequireDefault(_ConditionEditDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Condition",["translation","Confirm","Form","CriteriaGroup"]).service("StepConditionsService",["$q","CriteriaGroupService",_StepConditionsService2.default]).controller("ConditionEditCtrl",["Translator","ConfirmService","StepConditionsService",_ConditionEditCtrl2.default]).directive("conditionEdit",[function(){return new _ConditionEditDirective2.default}])},1806:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(798);__webpack_require__(1778);__webpack_require__(1807);var _CriteriaGroupService=__webpack_require__(1818);var _CriteriaGroupService2=_interopRequireDefault(_CriteriaGroupService);var _CriteriaGroupCtrl=__webpack_require__(1819);var _CriteriaGroupCtrl2=_interopRequireDefault(_CriteriaGroupCtrl);var _CriteriaGroupDirective=__webpack_require__(1820);var _CriteriaGroupDirective2=_interopRequireDefault(_CriteriaGroupDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("CriteriaGroup",["translation","Confirm","Criterion"]).service("CriteriaGroupService",["$q","CriterionService",_CriteriaGroupService2.default]).controller("CriteriaGroupCtrl",["Translator","ConfirmService","CriteriaGroupService","CriterionService",_CriteriaGroupCtrl2.default]).directive("criteriaGroup",[function(){return new _CriteriaGroupDirective2.default}])},1807:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(237);__webpack_require__(798);__webpack_require__(1778);__webpack_require__(1760);var _CriterionService=__webpack_require__(1808);var _CriterionService2=_interopRequireDefault(_CriterionService);var _ActivityAttemptCriterion=__webpack_require__(1809);var _ActivityAttemptCriterion2=_interopRequireDefault(_ActivityAttemptCriterion);var _ActivityStatusCriterion=__webpack_require__(1812);var _ActivityStatusCriterion2=_interopRequireDefault(_ActivityStatusCriterion);var _GroupCriterion=__webpack_require__(1813);var _GroupCriterion2=_interopRequireDefault(_GroupCriterion);var _TeamCriterion=__webpack_require__(1814);var _TeamCriterion2=_interopRequireDefault(_TeamCriterion);var _CriterionCtrl=__webpack_require__(1815);var _CriterionCtrl2=_interopRequireDefault(_CriterionCtrl);var _CriterionDirective=__webpack_require__(1816);var _CriterionDirective2=_interopRequireDefault(_CriterionDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Criterion",["ui.fos-js-router","translation","Confirm","Path"]).service("CriterionService",["ActivityAttemptCriterion","ActivityStatusCriterion","GroupCriterion","TeamCriterion",_CriterionService2.default]).service("ActivityAttemptCriterion",["$log","$q","$http","Translator","url",_ActivityAttemptCriterion2.default]).service("ActivityStatusCriterion",["$log","$q","$http","Translator","url",_ActivityStatusCriterion2.default]).service("GroupCriterion",["$log","$q","$http","Translator","url",_GroupCriterion2.default]).service("TeamCriterion",["$log","$q","$http","Translator","url","PathService",_TeamCriterion2.default]).controller("CriterionCtrl",["Translator","ConfirmService","CriterionService",_CriterionCtrl2.default]).directive("criterion",[function(){return new _CriterionDirective2.default}])},1808:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CriterionService=function(){function CriterionService(ActivityAttemptCriterion,ActivityStatusCriterion,GroupCriterion,TeamCriterion){(0,_classCallCheck3.default)(this,CriterionService);this.criterionTypes={activityrepetition:ActivityAttemptCriterion,activitystatus:ActivityStatusCriterion,usergroup:GroupCriterion,userteam:TeamCriterion}}(0,_createClass3.default)(CriterionService,[{key:"getTypes",value:function getTypes(){return this.criterionTypes}},{key:"getType",value:function getType(type){if(this.criterionTypes[type]){return this.criterionTypes[type]}return null}},{key:"newCriterion",value:function newCriterion(parentGroup){var newCriterion={critid:null,type:null,data:null};if(parentGroup){parentGroup.criterion.push(newCriterion)}return newCriterion}},{key:"testCriterion",value:function testCriterion(step,criterion){return this.criterionTypes[criterion.type].test(step,criterion.data)}},{key:"removeCriterion",value:function removeCriterion(step,criterionToDelete){this.browseCriteria(step.condition.criteriagroups,function(criteriaGroup,criterion){var deleted=false;if(criterion===criterionToDelete){var pos=criteriaGroup.criterion.indexOf(criterionToDelete);if(-1!==pos){criteriaGroup.criterion.splice(pos,1);deleted=true}}return deleted})}},{key:"browseCriteria",value:function browseCriteria(criteriaGroups,callback){function recursiveLoop(criteriaGroup){var terminated=false;if(typeof callback==="function"){for(var i=0;i<criteriaGroup.criterion.length;i++){terminated=callback(criteriaGroup,criteriaGroup.criterion[i]);if(terminated){break}}}if(!terminated&&typeof criteriaGroup.criteriagroup!=="undefined"&&criteriaGroup.criteriagroup.length!==0){for(var _i=0;_i<criteriaGroup.criteriagroup.length;_i++){terminated=recursiveLoop(criteriaGroup.criteriagroup[_i])}}return terminated}if(typeof criteriaGroups!=="undefined"&&criteriaGroups.length!==0){for(var j=0;j<criteriaGroups.length;j++){var terminated=recursiveLoop(criteriaGroups[j]);if(terminated){break}}}}}]);return CriterionService}();exports.default=CriterionService},1809:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _ActivityCriterion2=__webpack_require__(1810);var _ActivityCriterion3=_interopRequireDefault(_ActivityCriterion2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ActivityAttemptCriterion=function(_ActivityCriterion){(0,_inherits3.default)(ActivityAttemptCriterion,_ActivityCriterion);function ActivityAttemptCriterion(){(0,_classCallCheck3.default)(this,ActivityAttemptCriterion);return(0,_possibleConstructorReturn3.default)(this,(ActivityAttemptCriterion.__proto__||(0,_getPrototypeOf2.default)(ActivityAttemptCriterion)).apply(this,arguments))}(0,_createClass3.default)(ActivityAttemptCriterion,[{key:"test",value:function test(step,dataToTest){var _this2=this;var deferred=this.$q.defer();this.getEvaluation(step).then(function(evaluation){var errors=[];var attempts=evaluation.attempts?parseInt(evaluation.attempts):0;if(attempts<parseInt(dataToTest)){errors.push(_this2.Translator.trans("condition_criterion_test_repetition",{activityRep:dataToTest,userRep:attempts},"path_wizards"))}deferred.resolve(errors)});return deferred.promise}}]);return ActivityAttemptCriterion}(_ActivityCriterion3.default);exports.default=ActivityAttemptCriterion},1810:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof2=__webpack_require__(34);var _typeof3=_interopRequireDefault(_typeof2);var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _BaseCriterion2=__webpack_require__(1811);var _BaseCriterion3=_interopRequireDefault(_BaseCriterion2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ActivityCriterion=function(_BaseCriterion){(0,_inherits3.default)(ActivityCriterion,_BaseCriterion);function ActivityCriterion($log,$q,$http,Translator,url){(0,_classCallCheck3.default)(this,ActivityCriterion);var _this=(0,_possibleConstructorReturn3.default)(this,(ActivityCriterion.__proto__||(0,_getPrototypeOf2.default)(ActivityCriterion)).call(this,$log,$q,$http,Translator,url));_this.statuses=null;_this.statusesPromise=null;return _this}(0,_createClass3.default)(ActivityCriterion,[{key:"getStatuses",value:function getStatuses(){var _this2=this;if(!this.statusesPromise){var _ret=function(){var deferred=_this2.$q.defer();if(null!==_this2.statuses){deferred.resolve(_this2.statuses)}else{_this2.$http.get(_this2.UrlGenerator("innova_path_criteria_activity_statuses")).success(function(response){_this2.statuses=response;deferred.resolve(response);delete _this2.statusesPromise}).error(function(response){deferred.reject(response);delete _this2.statusesPromise});_this2.statusesPromise=deferred.promise}return{v:deferred.promise}}();if((typeof _ret==="undefined"?"undefined":(0,_typeof3.default)(_ret))==="object")return _ret.v}return this.statusesPromise}},{key:"getEvaluation",value:function getEvaluation(step){var deferred=this.$q.defer();this.$http.get(this.UrlGenerator("innova_path_criteria_evaluation",{id:step.activityId})).success(function(response){deferred.resolve(response)}).error(function(response){deferred.reject(response)});return deferred.promise}}]);return ActivityCriterion}(_BaseCriterion3.default);exports.default=ActivityCriterion},1811:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BaseCriterion=function(){function BaseCriterion($log,$q,$http,Translator,url){(0,_classCallCheck3.default)(this,BaseCriterion);this.$log=$log;this.$q=$q;this.$http=$http;this.Translator=Translator;this.UrlGenerator=url}(0,_createClass3.default)(BaseCriterion,[{key:"test",value:function test(){this.$log.error("A criterion must implement the `test(dataToTest)` method.")}}]);return BaseCriterion}();exports.default=BaseCriterion},1812:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _ActivityCriterion2=__webpack_require__(1810);var _ActivityCriterion3=_interopRequireDefault(_ActivityCriterion2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ActivityStatusCriterion=function(_ActivityCriterion){(0,_inherits3.default)(ActivityStatusCriterion,_ActivityCriterion);function ActivityStatusCriterion(){(0,_classCallCheck3.default)(this,ActivityStatusCriterion);return(0,_possibleConstructorReturn3.default)(this,(ActivityStatusCriterion.__proto__||(0,_getPrototypeOf2.default)(ActivityStatusCriterion)).apply(this,arguments))}(0,_createClass3.default)(ActivityStatusCriterion,[{key:"test",value:function test(step,dataToTest){var _this2=this;var deferred=this.$q.defer();this.getEvaluation(step).then(function(evaluation){var errors=[];var status=evaluation.status?evaluation.status:"N/A";if(status!==dataToTest){errors.push(_this2.Translator.trans("condition_criterion_test_status",{activityStatus:dataToTest,userStatus:status},"path_wizards"))}deferred.resolve(errors)});return deferred.promise}}]);return ActivityStatusCriterion}(_ActivityCriterion3.default);exports.default=ActivityStatusCriterion},1813:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof2=__webpack_require__(34);var _typeof3=_interopRequireDefault(_typeof2);var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _BaseCriterion2=__webpack_require__(1811);var _BaseCriterion3=_interopRequireDefault(_BaseCriterion2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GroupCriterion=function(_BaseCriterion){(0,_inherits3.default)(GroupCriterion,_BaseCriterion);function GroupCriterion($log,$q,$http,Translator,url){(0,_classCallCheck3.default)(this,GroupCriterion);var _this=(0,_possibleConstructorReturn3.default)(this,(GroupCriterion.__proto__||(0,_getPrototypeOf2.default)(GroupCriterion)).call(this,$log,$q,$http,Translator,url));_this.platformGroups=null;_this.platformGroupsPromise=null;_this.userGroups=null;_this.userGroupsPromise=null;return _this}(0,_createClass3.default)(GroupCriterion,[{key:"test",value:function test(step,dataToTest){var _this2=this;var deferred=this.$q.defer();this.$q.all([this.getPlatformGroups(),this.getUserGroups()]).then(function(){var errors=[];if(!_this2.userGroups[dataToTest]){var message=null;if(0===_this2.userGroups.length){message=_this2.Translator.trans("condition_criterion_test_usergroup_nogroup",{activityGroup:_this2.platformGroups[dataToTest]},"path_wizards")}else{message=_this2.Translator.trans("condition_criterion_test_usergroup",{activityGroup:_this2.platformGroups[dataToTest],userGroup:_this2.getGroupNames(_this2.userGroups)},"path_wizards")}errors.push(message)}deferred.resolve(errors)});return deferred.promise}},{key:"getGroupNames",value:function getGroupNames(groups){var groupNames="";for(var groupId in groups){if(groups.hasOwnProperty(groupId)){groupNames+=0===groupNames.length?groups[groupId]:", "+groups[groupId]}}return groupNames}},{key:"getPlatformGroups",value:function getPlatformGroups(){var _this3=this;if(!this.platformGroupsPromise){var _ret=function(){var deferred=_this3.$q.defer();if(null!==_this3.platformGroups){deferred.resolve(_this3.platformGroups)}else{_this3.$http.get(_this3.UrlGenerator("innova_path_criteria_groups")).success(function(response){_this3.platformGroups=response;deferred.resolve(response);delete _this3.platformGroupsPromise}).error(function(response){deferred.reject(response);delete _this3.platformGroupsPromise});_this3.platformGroupsPromise=deferred.promise}return{v:deferred.promise}}();if((typeof _ret==="undefined"?"undefined":(0,_typeof3.default)(_ret))==="object")return _ret.v}return this.platformGroupsPromise}},{key:"getUserGroups",value:function getUserGroups(){var _this4=this;if(!this.userGroupsPromise){var _ret2=function(){var deferred=_this4.$q.defer();if(null!==_this4.userGroups){deferred.resolve(_this4.userGroups)}else{_this4.$http.get(_this4.UrlGenerator("innova_path_criteria_user_groups")).success(function(response){_this4.userGroups=response;deferred.resolve(response);delete _this4.userGroupsPromise}).error(function(response){deferred.reject(response);delete _this4.userGroupsPromise});_this4.userGroupsPromise=deferred.promise}return{v:deferred.promise}}();if((typeof _ret2==="undefined"?"undefined":(0,_typeof3.default)(_ret2))==="object")return _ret2.v}return this.userGroupsPromise}}]);return GroupCriterion}(_BaseCriterion3.default);exports.default=GroupCriterion},1814:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof2=__webpack_require__(34);var _typeof3=_interopRequireDefault(_typeof2);var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _BaseCriterion2=__webpack_require__(1811);var _BaseCriterion3=_interopRequireDefault(_BaseCriterion2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TeamCriterion=function(_BaseCriterion){(0,_inherits3.default)(TeamCriterion,_BaseCriterion);function TeamCriterion($log,$q,$http,Translator,url,PathService){(0,_classCallCheck3.default)(this,TeamCriterion);var _this=(0,_possibleConstructorReturn3.default)(this,(TeamCriterion.__proto__||(0,_getPrototypeOf2.default)(TeamCriterion)).call(this,$log,$q,$http,Translator,url));_this.PathService=PathService;_this.workspaceTeams=null;_this.workspaceTeamsPromise=null;_this.userTeams=null;_this.userTeamsPromise=null;return _this}(0,_createClass3.default)(TeamCriterion,[{key:"test",value:function test(step,dataToTest){var _this2=this;var deferred=this.$q.defer();this.$q.all([this.getWorkspaceTeams(),this.getUserTeams()]).then(function(){var errors=[];if(!_this2.userTeams[dataToTest]){var message=null;if(0===_this2.userTeams.length){message=_this2.Translator.trans("condition_criterion_test_userteam_noteam",{activityTeam:_this2.workspaceTeams[dataToTest]},"path_wizards")}else{message=_this2.Translator.trans("condition_criterion_test_userteam",{activityTeam:_this2.workspaceTeams[dataToTest],userTeam:_this2.getTeamNames(_this2.userTeams)},"path_wizards")}errors.push(message)}deferred.resolve(errors)});return deferred.promise}},{key:"getTeamNames",value:function getTeamNames(teams){var teamNames="";for(var groupId in teams){if(teams.hasOwnProperty(groupId)){teamNames+=0===teamNames.length?teams[groupId]:", "+teams[groupId]}}return teamNames}},{key:"getWorkspaceTeams",value:function getWorkspaceTeams(){var _this3=this;if(!this.workspaceTeamsPromise){var _ret=function(){var deferred=_this3.$q.defer();if(null!==_this3.workspaceTeams){deferred.resolve(_this3.workspaceTeams)}else{_this3.$http.get(_this3.UrlGenerator("innova_path_criteria_teams",{id:_this3.PathService.getId()})).success(function(response){_this3.workspaceTeams=response;deferred.resolve(response);delete _this3.workspaceTeamsPromise}).error(function(response){deferred.reject(response);delete _this3.workspaceTeamsPromise});_this3.workspaceTeamsPromise=deferred.promise}return{v:deferred.promise}}();if((typeof _ret==="undefined"?"undefined":(0,_typeof3.default)(_ret))==="object")return _ret.v}return this.workspaceTeamsPromise}},{key:"getUserTeams",value:function getUserTeams(){var _this4=this;if(!this.userTeamsPromise){var _ret2=function(){var deferred=_this4.$q.defer();if(null!==_this4.userTeams){deferred.resolve(_this4.userTeams)}else{_this4.$http.get(_this4.UrlGenerator("innova_path_criteria_user_teams")).success(function(response){_this4.userTeams=response;deferred.resolve(response);delete _this4.userTeamsPromise}).error(function(response){deferred.reject(response);delete _this4.userTeamsPromise});_this4.userTeamsPromise=deferred.promise}return{v:deferred.promise}}();if((typeof _ret2==="undefined"?"undefined":(0,_typeof3.default)(_ret2))==="object")return _ret2.v}return this.userTeamsPromise}}]);return TeamCriterion}(_BaseCriterion3.default);exports.default=TeamCriterion},1815:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CriterionCtrl=function(){function CriterionCtrl(Translator,ConfirmService,CriterionService){var _this=this;(0,_classCallCheck3.default)(this,CriterionCtrl);this.Translator=Translator;this.ConfirmService=ConfirmService;this.CriterionService=CriterionService;this.platformGroups=[];this.CriterionService.getType("usergroup").getPlatformGroups().then(function(result){_this.platformGroups=result});this.workspaceTeams=[];this.CriterionService.getType("userteam").getWorkspaceTeams().then(function(result){_this.workspaceTeams=result});this.activityStatuses=[];this.CriterionService.getType("activitystatus").getStatuses().then(function(result){_this.activityStatuses=result})}(0,_createClass3.default)(CriterionCtrl,[{key:"removeCriterion",value:function removeCriterion(){var _this2=this;this.ConfirmService.open({title:this.Translator.trans("criterion_delete_title",{},"path_wizards"),message:this.Translator.trans("criterion_delete_confirm",{},"path_wizards"),confirmButton:this.Translator.trans("criterion_delete",{},"path_wizards")},function(){_this2.CriterionService.removeCriterion(_this2.step,_this2.criterion)})}}]);return CriterionCtrl}();exports.default=CriterionCtrl},1816:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _criterion=__webpack_require__(1817);var _criterion2=_interopRequireDefault(_criterion);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CriterionDirective=function CriterionDirective(){(0,_classCallCheck3.default)(this,CriterionDirective);this.restrict="E";this.replace=true;this.template=_criterion2.default;this.controller="CriterionCtrl";this.controllerAs="criterionCtrl";this.bindToController=true;this.scope={step:"=",criterion:"="}};exports.default=CriterionDirective},1817:function(module,exports){module.exports='<div class="well well-sm">\n    <div class="row">\n        <div class="col-md-11 col-sm-10">\n            <!-- list of criterion type -->\n            <div class="row form-group">\n                <label class="control-label col-md-4 required data-ng-binding">{{ \'condition_criterion_type\'|trans:{}:\'path_wizards\' }} :</label>\n                <div class="col-md-8 criterion-type">\n                    <select class="form-control" name="criterion-type" id="criterion-type" data-ng-model="criterionCtrl.criterion.type">\n                        <option value="">{{\'condition_criterion_choice\'|trans:{}:\'path_wizards\' }}</option>\n                        <option value="usergroup">{{\'condition_criterion_type_usergroup\'|trans:{}:\'path_wizards\' }}</option>\n                        <option value="userteam">{{\'condition_criterion_type_userteam\'|trans:{}:\'path_wizards\' }}</option>\n                        <option value="activitystatus" data-ng-if="\'automatic\' === criterionCtrl.step.evaluationType">{{\'condition_criterion_type_activitystatus\'|trans:{}:\'path_wizards\' }}</option>\n                        <option value="activityrepetition" data-ng-if="\'automatic\' === criterionCtrl.step.evaluationType">{{\'condition_criterion_type_activityrepetition\'|trans:{}:\'path_wizards\' }}</option>\n                    </select>\n                </div>\n            </div>\n\n            <!-- Data for selected criterion type -->\n            <div class="row form-group" data-ng-switch="criterionCtrl.criterion.type" data-ng-if="criterionCtrl.criterion.type">\n                <!-- if userteam is chosen -->\n                <div data-ng-switch-when="userteam">\n                    <label class="control-label col-md-4 required">{{ \'condition_criterion_userteam\'|trans:{}:\'path_wizards\' }} :</label>\n                    <div class="col-md-8">\n                        <select class="form-control" data-ng-model="criterionCtrl.criterion.data"\n                                data-ng-options="k as v for (k, v) in criterionCtrl.workspaceTeams" required="">\n                            <option value="">{{\'condition_criterion_choice\'|trans:{}:\'path_wizards\' }}</option>\n                        </select>\n                    </div>\n                </div>\n\n                <!-- if usergroup is chosen -->\n                <div data-ng-switch-when="usergroup">\n                    <label class="control-label col-md-4 required">{{ \'condition_criterion_usergroup\'|trans:{}:\'path_wizards\' }} :</label>\n                    <div class="col-md-8">\n                        <select class="form-control" data-ng-model="criterionCtrl.criterion.data"\n                                data-ng-options="k as v for (k, v) in criterionCtrl.platformGroups" required="">\n                            <option value="">{{\'condition_criterion_choice\'|trans:{}:\'path_wizards\' }}</option>\n                        </select>\n                    </div>\n                </div>\n\n                <!-- if activitystatus is chosen -->\n                <div data-ng-switch-when="activitystatus">\n                    <label class="control-label col-md-4 required">{{ \'condition_criterion_activitystatus\'|trans:{}:\'path_wizards\' }} :</label>\n                    <div class="col-md-8">\n                        <select class="form-control" data-ng-model="criterionCtrl.criterion.data"\n                                data-ng-options="v for (k, v) in criterionCtrl.activityStatuses" required="">\n                            <option value="">{{\'condition_criterion_choice\'|trans:{}:\'path_wizards\' }}</option>\n                        </select>\n                    </div>\n                </div>\n\n                <!-- if activityrepetition is chosen -->\n                <div data-ng-switch-when="activityrepetition">\n                    <label class="control-label col-md-4 required">{{ \'condition_criterion_activityrepetition\'|trans:{}:\'path_wizards\' }} :</label>\n                    <div class="col-md-8">\n                        <input class="form-control" data-ng-model="criterionCtrl.criterion.data" type="text" required="" data-field-validation="" />\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="col-md-1 col-sm-2 text-right">\n            <button type="button" data-ng-click="criterionCtrl.removeCriterion()" class="btn btn-danger">\n                <span class="fa fa-trash"></span>\n                <span class="sr-only">{{ \'condition_criterion_delete\'|trans:{}:\'path_wizards\' }}</span>\n            </button>\n        </div>\n    </div>\n</div>'},1818:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CriteriaGroupService=function(){function CriteriaGroupService($q,CriterionService){(0,_classCallCheck3.default)(this,CriteriaGroupService);this.$q=$q;this.CriterionService=CriterionService}(0,_createClass3.default)(CriteriaGroupService,[{key:"newGroup",value:function newGroup(parent){var newGroup={cgid:null,lvl:parent?parent.lvl+1:0,criterion:[],criteriagroup:[]};if(parent){parent.criteriagroup.push(newGroup)}return newGroup}},{key:"testGroup",value:function testGroup(step,criteriaGroup){var deferred=this.$q.defer();var errorList=[];var criteria=[];for(var i=0;i<criteriaGroup.criterion.length;i++){criteria.push(this.CriterionService.testCriterion(step,criteriaGroup.criterion[i]).then(function(errors){errorList=errorList.concat(errors)}))}for(var _i=0;_i<criteriaGroup.criteriagroup.length;_i++){criteria.push(this.testGroup(step,criteriaGroup.criteriagroup[_i]).then(function(errors){errorList=errorList.concat(errors)}))}this.$q.all(criteria).then(function(){deferred.resolve(errorList)});return deferred.promise}},{key:"removeGroup",value:function removeGroup(step,groupToDelete){this.browseGroups(step.condition.criteriagroups,function(parent,group){var deleted=false;if(group===groupToDelete){if(typeof parent!=="undefined"&&null!==parent){var pos=parent.criteriagroup.indexOf(groupToDelete);if(-1!==pos){parent.criteriagroup.splice(pos,1);deleted=true}}else{var _pos=step.condition.criteriagroups.indexOf(groupToDelete);if(-1!==_pos){step.condition.criteriagroups.splice(_pos,1);deleted=true}}}return deleted})}},{key:"browseGroups",value:function browseGroups(criteriaGroups,callback){function recursiveLoop(parentGroup,currentGroup){var terminated=false;if(typeof callback==="function"){terminated=callback(parentGroup,currentGroup)}if(!terminated&&typeof currentGroup.criteriagroup!=="undefined"&&currentGroup.criteriagroup.length!==0){for(var i=0;i<currentGroup.criteriagroup.length;i++){terminated=recursiveLoop(currentGroup,currentGroup.criteriagroup[i])}}return terminated;
}if(typeof criteriaGroups!=="undefined"&&criteriaGroups.length!==0){for(var j=0;j<criteriaGroups.length;j++){var terminated=recursiveLoop(null,criteriaGroups[j]);if(terminated){break}}}}}]);return CriteriaGroupService}();exports.default=CriteriaGroupService},1819:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CriteriaGroupCtrl=function(){function CriteriaGroupCtrl(Translator,ConfirmService,CriteriaGroupService,CriterionService){(0,_classCallCheck3.default)(this,CriteriaGroupCtrl);this.Translator=Translator;this.ConfirmService=ConfirmService;this.CriteriaGroupService=CriteriaGroupService;this.CriterionService=CriterionService}(0,_createClass3.default)(CriteriaGroupCtrl,[{key:"addGroup",value:function addGroup(){this.CriteriaGroupService.newGroup(this.criteriaGroup)}},{key:"removeGroup",value:function removeGroup(){var _this=this;this.ConfirmService.open({title:this.Translator.trans("criteriagroup_delete_title",{},"path_wizards"),message:this.Translator.trans("criteriagroup_delete_confirm",{},"path_wizards"),confirmButton:this.Translator.trans("criteriagroup_delete",{},"path_wizards")},function(){_this.CriteriaGroupService.removeGroup(_this.step,_this.criteriaGroup)})}},{key:"addCriterion",value:function addCriterion(){this.CriterionService.newCriterion(this.criteriaGroup)}}]);return CriteriaGroupCtrl}();exports.default=CriteriaGroupCtrl},1820:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _criteriaGroup=__webpack_require__(1821);var _criteriaGroup2=_interopRequireDefault(_criteriaGroup);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CriteriaGroupDirective=function CriteriaGroupDirective(){(0,_classCallCheck3.default)(this,CriteriaGroupDirective);this.restrict="E";this.replace=true;this.template=_criteriaGroup2.default;this.controller="CriteriaGroupCtrl";this.controllerAs="criteriaGroupCtrl";this.bindToController=true;this.scope={step:"=",criteriaGroup:"="}};exports.default=CriteriaGroupDirective},1821:function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-heading clearfix">\n        <button type="button" data-ng-click="criteriaGroupCtrl.addGroup()" class="btn btn-sm btn-default">\n            <span class="fa fa-plus"></span>\n            <span>{{ \'condition_criteria_group_add\'|trans:{}:\'path_wizards\' }}</span>\n        </button>\n\n        <button type="button" data-ng-click="criteriaGroupCtrl.addCriterion()" class="btn btn-sm btn-primary">\n            <span class="fa fa-plus"></span>\n            <span>{{ \'condition_criterion_add\'|trans:{}:\'path_wizards\' }}</span>\n        </button>\n\n        <button type="button" data-ng-if="criteriaGroupCtrl.criteriaGroup.lvl !== 0" data-ng-click="criteriaGroupCtrl.removeGroup()" class="pull-right btn btn-sm btn-danger">\n            <span class="fa fa-trash"></span>\n            <span>{{ \'condition_criteria_group_delete\'|trans:{}:\'path_wizards\' }}</span>\n        </button>\n    </div>\n\n    <div class="panel-body">\n        <ul class="criterion">\n            <li data-ng-repeat="criterion in criteriaGroupCtrl.criteriaGroup.criterion">\n                <criterion data-step="criteriaGroupCtrl.step" data-criterion="criterion"></criterion>\n            </li>\n\n            <li data-ng-if="0 === criteriaGroupCtrl.criteriaGroup.criterion.length">\n                <div class="well well-sm">\n                    <em>{{ \'condition_criteria_group_no_criterion\'|trans:{}:\'path_wizards\' }}</em>\n                </div>\n            </li>\n        </ul>\n\n        <ul class="criteria-group" data-ng-if="0 !== criteriaGroupCtrl.criteriaGroup.criteriagroup">\n            <li data-ng-repeat="group in criteriaGroupCtrl.criteriaGroup.criteriagroup">\n                <criteria-group data-step="criteriaGroupCtrl.step" data-criteria-group="group"></criteria-group>\n            </li>\n        </ul>\n    </div>\n</div>'},1822:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StepConditionsService=function(){function StepConditionsService($q,CriteriaGroupService){(0,_classCallCheck3.default)(this,StepConditionsService);this.$q=$q;this.CriteriaGroupService=CriteriaGroupService}(0,_createClass3.default)(StepConditionsService,[{key:"initialize",value:function initialize(step){var newCriteriaGroup=this.CriteriaGroupService.newGroup();var newCondition={scid:null,criteriagroups:[newCriteriaGroup]};step.condition=newCondition;return newCondition}},{key:"testCondition",value:function testCondition(step){var deferred=this.$q.defer();var errorList=[];var groups=[];if(step.condition){for(var i=0;i<step.condition.criteriagroups.length;i++){groups.push(this.CriteriaGroupService.testGroup(step,step.condition.criteriagroups[i]).then(function(errors){errorList=errorList.concat(errors)}))}this.$q.all(groups).then(function(){deferred.resolve(errorList)})}else{deferred.resolve(errorList)}return deferred.promise}}]);return StepConditionsService}();exports.default=StepConditionsService},1823:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ConditionEditCtrl=function(){function ConditionEditCtrl(Translator,ConfirmService,StepConditionsService){(0,_classCallCheck3.default)(this,ConditionEditCtrl);this.Translator=Translator;this.ConfirmService=ConfirmService;this.ConditionService=StepConditionsService}(0,_createClass3.default)(ConditionEditCtrl,[{key:"addCondition",value:function addCondition(){this.ConditionService.initialize(this.step)}},{key:"removeCondition",value:function removeCondition(){var _this=this;this.ConfirmService.open({title:this.Translator.trans("condition_delete_title",{},"path_wizards"),message:this.Translator.trans("condition_delete_confirm",{},"path_wizards"),confirmButton:this.Translator.trans("condition_delete",{},"path_wizards")},function(){_this.step.condition=null})}}]);return ConditionEditCtrl}();exports.default=ConditionEditCtrl},1824:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _edit=__webpack_require__(1825);var _edit2=_interopRequireDefault(_edit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ConditionEditDirective=function ConditionEditDirective(){(0,_classCallCheck3.default)(this,ConditionEditDirective);this.restrict="E";this.replace=true;this.controller="ConditionEditCtrl";this.controllerAs="conditionEditCtrl";this.template=_edit2.default;this.scope={step:"=",next:"="};this.bindToController=true};exports.default=ConditionEditDirective},1825:function(module,exports){module.exports='<div>\n    <!-- Initialize condition button -->\n    <button type="button" role="button" class="btn btn-block btn-default" data-ng-click="conditionEditCtrl.addCondition()" data-ng-if="!conditionEditCtrl.step.condition" style="margin-bottom: 20px;">\n        <span class="fa fa-fw fa-lock"></span>\n        {{ \'condition_init_conditionstructure\'|trans:{step: conditionEditCtrl.next}:\'path_wizards\' }} <b>{{ conditionEditCtrl.next.name }}</b>\n    </button>\n\n    <!-- Next step condition -->\n    <div class="panel-condition panel panel-default" data-ng-if="conditionEditCtrl.step.condition">\n        <div class="panel-heading">\n            <h4 class="panel-title">\n                <span class="fa fa-lock"></span>\n                {{ \'condition_access\'|trans:{}:\'path_wizards\' }} <b>{{ conditionEditCtrl.next.name }}</b>\n            </h4>\n\n            <div class="btns">\n                <!-- Remove condition button -->\n                <button type="button" class="btn btn-sm btn-danger" data-ng-click="conditionEditCtrl.removeCondition()" data-ng-if="conditionEditCtrl.step.condition">\n                    <span class="fa fa-trash"></span>\n                    <span>{{ \'condition_condition_delete\'|trans:{}:\'path_wizards\' }}</span>\n                </button>\n            </div>\n        </div>\n\n        <div class="panel-body" data-ng-if="conditionEditCtrl.step.condition">\n            <div class="alert alert-info" data-ng-if="conditionEditCtrl.step.primaryResource.length === 0">\n                <span class="fa fa-info-circle"></span>\n                {{ \'condition_step_no_activity\'|trans:{}:\'path_wizards\' }}\n            </div>\n\n            <div class="alert alert-info" data-ng-if="conditionEditCtrl.step.evaluationType !== \'automatic\'">\n                <span class="fa fa-info-circle"></span>\n                {{ \'condition_step_activity_notmanageable\'|trans:{}:\'path_wizards\' }}\n            </div>\n\n            <ul class="criteria-group" data-ng-if="conditionEditCtrl.step.condition">\n                <li data-ng-repeat="group in conditionEditCtrl.step.condition.criteriagroups">\n                    <criteria-group data-step="conditionEditCtrl.step" data-criteria-group="group"></criteria-group>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n'},1826:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StepService=function(){function StepService($http,$filter,Translator,url,IdentifierService,ResourceService){(0,_classCallCheck3.default)(this,StepService);this.$http=$http;this.$filter=$filter;this.Translator=Translator;this.UrlGenerator=url;this.IdentifierService=IdentifierService;this.ResourceService=ResourceService}(0,_createClass3.default)(StepService,[{key:"newStep",value:function newStep(parentStep){var lvl=parentStep?parentStep.lvl+1:0;var newStep={id:this.IdentifierService.generateUUID(),lvl:lvl,name:parentStep?"Step "+lvl+"."+(parentStep.children.length+1):this.Translator.trans("root_default_name",{},"path_wizards"),description:" ",children:[],activityId:null,resourceId:null,activityHeight:null,primaryResource:[],resources:[],excludedResources:[],withTutor:false,who:null,where:null,duration:null,evaluationType:null};if(parentStep){if(!parentStep.children instanceof Array){parentStep.children=[]}parentStep.children.push(newStep)}return newStep}},{key:"isBetweenAccessibilityDates",value:function isBetweenAccessibilityDates(step){var now=this.$filter("date")(new Date,"yyyy-MM-dd HH:mm:ss");var from=null;if(step.accessibleFrom!=null&&step.accessibleFrom.length!==0){from=step.accessibleFrom}var until=null;if(step.accessibleUntil!=null&&step.accessibleUntil.length!==0){until=step.accessibleUntil}var accessible=false;if((null===from||now>=from)&&(null===until||now<=until)){accessible=true}return accessible}},{key:"loadActivity",value:function loadActivity(step,activityId){var _this=this;this.$http.get(this.UrlGenerator("innova_path_load_activity",{nodeId:activityId})).success(function(data){return _this.setActivity(step,data)})}},{key:"setActivity",value:function setActivity(step,activity){if(_index2.default.isDefined(activity)&&_index2.default.isObject(activity)){step.activityId=activity["id"];step.name=activity["name"];step.description=activity["description"];step.primaryResource=[];step.resources=[];if(_index2.default.isDefined(activity["primaryResource"])&&_index2.default.isObject(activity["primaryResource"])){var primaryResource=this.ResourceService.newResource(activity["primaryResource"]["type"],activity["primaryResource"]["mimeType"],activity["primaryResource"]["resourceId"],activity["primaryResource"]["name"]);this.addResource(step.primaryResource,primaryResource)}if(_index2.default.isDefined(activity["resources"])&&_index2.default.isObject(activity["resources"])){for(var i=0;i<activity["resources"].length;i++){var current=activity["resources"][i];var resource=this.ResourceService.newResource(current["type"],current["mimeType"],current["resourceId"],current["name"]);this.addResource(step.resources,resource)}}step.withTutor=activity["withTutor"];step.who=activity["who"];step.where=activity["where"];step.duration=activity["duration"];step.evaluationType=activity["evaluationType"]}}},{key:"addResource",value:function addResource(resourcesList,resource){if(!this.ResourceService.exists(resourcesList,resource)){resourcesList.push(resource)}}}]);return StepService}();exports.default=StepService},1827:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _StepBaseCtrl2=__webpack_require__(1828);var _StepBaseCtrl3=_interopRequireDefault(_StepBaseCtrl2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StepShowCtrl=function(_StepBaseCtrl){(0,_inherits3.default)(StepShowCtrl,_StepBaseCtrl);function StepShowCtrl(step,inheritedResources,PathService,authorization,$sce,UserProgressionService){(0,_classCallCheck3.default)(this,StepShowCtrl);var _this=(0,_possibleConstructorReturn3.default)(this,(StepShowCtrl.__proto__||(0,_getPrototypeOf2.default)(StepShowCtrl)).call(this,step,inheritedResources,PathService));_this.userProgressionService=UserProgressionService;if(_index2.default.isDefined(_this.step)&&_index2.default.isDefined(_this.step.description)&&typeof _this.step.description==="string"){_this.step.description=$sce.trustAsHtml(_this.step.description)}_this.authorization=authorization;_this.progression=_this.userProgressionService.getForStep(_this.step);if(_this.authorization&&_this.authorization.granted){if(!_index2.default.isObject(_this.progression)){_this.progression=_this.userProgressionService.create(_this.step,"seen",true)}else{var status="unseen"===_this.progression.status?"seen":_this.progression.status;_this.userProgressionService.update(_this.step,status,true)}}return _this}(0,_createClass3.default)(StepShowCtrl,[{key:"updateProgression",value:function updateProgression(newStatus){this.userProgressionService.update(this.step,newStatus)}}]);return StepShowCtrl}(_StepBaseCtrl3.default);exports.default=StepShowCtrl},1828:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StepBaseCtrl=function(){function StepBaseCtrl(step,inheritedResources,PathService){(0,_classCallCheck3.default)(this,StepBaseCtrl);this.pathService=PathService;this.step=step;this.inheritedResources=inheritedResources;this.previous=this.pathService.getPrevious(step);this.next=this.pathService.getNext(step);this.path=this.pathService.getPath()}(0,_createClass3.default)(StepBaseCtrl,[{key:"goTo",value:function goTo(step){this.pathService.goTo(step)}}]);return StepBaseCtrl}();exports.default=StepBaseCtrl},1829:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof2=__webpack_require__(34);var _typeof3=_interopRequireDefault(_typeof2);var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _StepBaseCtrl2=__webpack_require__(1828);var _StepBaseCtrl3=_interopRequireDefault(_StepBaseCtrl2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StepEditCtrl=function(_StepBaseCtrl){(0,_inherits3.default)(StepEditCtrl,_StepBaseCtrl);function StepEditCtrl(step,inheritedResources,PathService,url,$scope,StepService,tinymceConfig){(0,_classCallCheck3.default)(this,StepEditCtrl);var _this=(0,_possibleConstructorReturn3.default)(this,(StepEditCtrl.__proto__||(0,_getPrototypeOf2.default)(StepEditCtrl)).call(this,step,inheritedResources,PathService));_this.scope=$scope;_this.stepService=StepService;_this.UrlGenerator=url;_this.collapsedPanels={description:false,properties:true,conditions:true};_this.tinymceOptions=tinymceConfig;_this.resourcePicker={isPickerMultiSelectAllowed:false,typeWhiteList:["activity"],callback:function callback(nodes){if((typeof nodes==="undefined"?"undefined":(0,_typeof3.default)(nodes))==="object"&&nodes.length!==0){for(var nodeId in nodes){if(nodes.hasOwnProperty(nodeId)){_this.stepService.loadActivity(_this.step,nodeId);break}}_this.scope.$apply();nodes={}}}};return _this}(0,_createClass3.default)(StepEditCtrl,[{key:"showActivity",value:function showActivity(){var activityRoute=this.UrlGenerator("innova_path_show_activity",{activityId:this.step.activityId});window.open(activityRoute,"_blank")}},{key:"deleteActivity",value:function deleteActivity(){this.step.activityId=null}}]);return StepEditCtrl}(_StepBaseCtrl3.default);exports.default=StepEditCtrl},1830:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AuthorizationCheckerService=function(){function AuthorizationCheckerService($q,Translator,PathService,StepService,UserProgressionService,StepConditionsService){(0,_classCallCheck3.default)(this,AuthorizationCheckerService);this.$q=$q;this.Translator=Translator;this.PathService=PathService;this.StepService=StepService;this.UserProgressionService=UserProgressionService;this.ConditionService=StepConditionsService;this.editEnabled=false}(0,_createClass3.default)(AuthorizationCheckerService,[{key:"isEditEnabled",value:function isEditEnabled(){return this.editEnabled}},{key:"setEditEnabled",value:function setEditEnabled(value){this.editEnabled=value}},{key:"isAuthorized",value:function isAuthorized(step){var _this=this;var deferred=this.$q.defer();if(!_index2.default.isObject(step)){deferred.resolve({granted:true,errors:[]})}else if(this.isEditEnabled()||0===step.lvl){deferred.resolve({granted:true,errors:[]})}else if(!this.StepService.isBetweenAccessibilityDates(step)){deferred.resolve({granted:false,errors:[this.Translator.trans("step_not_accessible",{},"path_wizards")]})}else if(this.UserProgressionService.iStepAlreadyAuthorized(step)){deferred.resolve({granted:true,errors:[]})}else{(function(){var conditionChecks=[];var currentAuth={granted:true,errors:[]};var previous=_this.PathService.getPrevious(step);if(previous.condition){conditionChecks.push(_this.ConditionService.testCondition(previous).then(function(errors){if(0!==errors.length){currentAuth.granted=false;currentAuth.errors=currentAuth.errors.concat(errors)}}))}if(_this.PathService.getPath().completeBlockingCondition){conditionChecks.push(_this.isAuthorized(previous).then(function(authorization){currentAuth.granted=currentAuth.granted&&authorization.granted;currentAuth.errors=currentAuth.errors.concat(authorization.errors)}))}_this.$q.all(conditionChecks).then(function(){deferred.resolve(currentAuth)})})()}return deferred.promise}}]);return AuthorizationCheckerService}();exports.default=AuthorizationCheckerService},1831:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _authorizationBlock=__webpack_require__(1832);var _authorizationBlock2=_interopRequireDefault(_authorizationBlock);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AuthorizationBlockDirective=function AuthorizationBlockDirective(){(0,_classCallCheck3.default)(this,AuthorizationBlockDirective);this.restrict="E";this.replace="true";this.template=_authorizationBlock2.default;this.controllerAs="authorizationBlockCtrl";this.controller=["UserProgressionService",function(UserProgressionService){this.progression=UserProgressionService.getForStep(this.step);this.callForUnlock=function(){UserProgressionService.callForUnlock(this.step)}}];this.scope={step:"=",authorization:"="};this.bindToController=true};exports.default=AuthorizationBlockDirective},1832:function(module,exports){module.exports='<div class="authorization-block">\n    <h2 class="h3 text-center">\n        <span class="fa fa-lock"></span>\n        {{ \'step_locked\'|trans:{}:\'path_wizards\' }}\n    </h2>\n\n    <p class="text-muted text-center">\n        {{ \'step_locked_info\'|trans:{}:\'path_wizards\' }}\n    </p>\n\n    <div class="alert alert-warning text-left"\n         data-ng-repeat="error in authorizationBlockCtrl.authorization.errors">\n        <span class="fa fa-warning"></span>\n        <span data-ng-bind-html="error"></span>\n    </div>\n\n    <!-- Call for unlock -->\n    <button type="button"\n            class="btn btn-lg btn-block btn-primary"\n            data-ng-if="!authorizationBlockCtrl.progression.lockedcall"\n            data-ng-click="authorizationBlockCtrl.callForUnlock()">\n        <span class="fa fa-life-saver"></span> {{ \'unlock_this\'|trans:{}:\'path_wizards\' }}\n    </button>\n\n    <div class="alert alert-success" data-ng-if="authorizationBlockCtrl.progression.lockedcall">\n        <span class="fa fa-unlock"></span>\n        {{ \'user_progression_lockedcall_sent\'|trans:{}:\'path_wizards\' }}\n    </div>\n</div>\n'},1833:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(5);__webpack_require__(1834);__webpack_require__(1835);__webpack_require__(798);__webpack_require__(1768);__webpack_require__(1763);__webpack_require__(1778);__webpack_require__(1799);var _SummaryService=__webpack_require__(1836);var _SummaryService2=_interopRequireDefault(_SummaryService);var _SummaryShowCtrl=__webpack_require__(1837);var _SummaryShowCtrl2=_interopRequireDefault(_SummaryShowCtrl);var _SummaryEditCtrl=__webpack_require__(1839);var _SummaryEditCtrl2=_interopRequireDefault(_SummaryEditCtrl);var _SummaryShowDirective=__webpack_require__(1840);var _SummaryShowDirective2=_interopRequireDefault(_SummaryShowDirective);var _SummaryEditDirective=__webpack_require__(1842);var _SummaryEditDirective2=_interopRequireDefault(_SummaryEditDirective);var _SummaryItemShowDirective=__webpack_require__(1844);var _SummaryItemShowDirective2=_interopRequireDefault(_SummaryItemShowDirective);var _SummaryItemEditDirective=__webpack_require__(1846);var _SummaryItemEditDirective2=_interopRequireDefault(_SummaryItemEditDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Summary",["ui.bootstrap","ui.tree","pageslide-directive","translation","Utils","Clipboard","Confirm","UserProgression"]).service("SummaryService",[_SummaryService2.default]).controller("SummaryShowCtrl",["SummaryService","PathService","UserProgressionService",_SummaryShowCtrl2.default]).controller("SummaryEditCtrl",["SummaryService","PathService",_SummaryEditCtrl2.default]).directive("pathSummaryShow",[function(){return new _SummaryShowDirective2.default}]).directive("pathSummaryEdit",[function(){return new _SummaryEditDirective2.default}]).directive("summaryItemShow",[function(){return new _SummaryItemShowDirective2.default}]).directive("summaryItemEdit",[function(){return new _SummaryItemEditDirective2.default}])},1834:function(module,exports){!function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30,defaultCollapsed:!1})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(e,n){this.scope=e,e.$element=n,e.$nodeScope=null,e.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(e,n){function t(e){var n,o,l,r=0,a=e.childNodes();if(!a||0===a.length)return 0;for(l=a.length-1;l>=0;l--)n=a[l],o=1+t(n),r=Math.max(r,o);return r}this.scope=e,e.$element=n,e.$modelValue=null,e.$parentNodeScope=null,e.$childNodesScope=null,e.$parentNodesScope=null,e.$treeScope=null,e.$handleScope=null,e.$type="uiTreeNode",e.$$allowNodeDrop=!1,e.collapsed=!1,e.init=function(t){var o=t[0];e.$treeScope=t[1]?t[1].scope:null,e.$parentNodeScope=o.scope.$nodeScope,e.$modelValue=o.scope.$modelValue[e.$index],e.$parentNodesScope=o.scope,o.scope.initSubNode(e),n.on("$destroy",function(){o.scope.destroySubNode(e)})},e.index=function(){return e.$parentNodesScope.$modelValue.indexOf(e.$modelValue)},e.dragEnabled=function(){return!(e.$treeScope&&!e.$treeScope.dragEnabled)},e.isSibling=function(n){return e.$parentNodesScope==n.$parentNodesScope},e.isChild=function(n){var t=e.childNodes();return t&&t.indexOf(n)>-1},e.prev=function(){var n=e.index();return n>0?e.siblings()[n-1]:null},e.siblings=function(){return e.$parentNodesScope.childNodes()},e.childNodesCount=function(){return e.childNodes()?e.childNodes().length:0},e.hasChild=function(){return e.childNodesCount()>0},e.childNodes=function(){return e.$childNodesScope&&e.$childNodesScope.$modelValue?e.$childNodesScope.childNodes():null},e.accept=function(n,t){return e.$childNodesScope&&e.$childNodesScope.$modelValue&&e.$childNodesScope.accept(n,t)},e.remove=function(){return e.$parentNodesScope.removeNode(e)},e.toggle=function(){e.collapsed=!e.collapsed,e.$treeScope.$callbacks.toggle(e.collapsed,e)},e.collapse=function(){e.collapsed=!0},e.expand=function(){e.collapsed=!1},e.depth=function(){var n=e.$parentNodeScope;return n?n.depth()+1:1},e.maxSubDepth=function(){return e.$childNodesScope?t(e.$childNodesScope):0}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function(e,n){this.scope=e,e.$element=n,e.$modelValue=null,e.$nodeScope=null,e.$treeScope=null,e.$type="uiTreeNodes",e.$nodesMap={},e.nodropEnabled=!1,e.maxDepth=0,e.cloneEnabled=!1,e.initSubNode=function(n){return n.$modelValue?void(e.$nodesMap[n.$modelValue.$$hashKey]=n):null},e.destroySubNode=function(n){return n.$modelValue?void(e.$nodesMap[n.$modelValue.$$hashKey]=null):null},e.accept=function(n,t){return e.$treeScope.$callbacks.accept(n,e,t)},e.beforeDrag=function(n){return e.$treeScope.$callbacks.beforeDrag(n)},e.isParent=function(n){return n.$parentNodesScope==e},e.hasChild=function(){return e.$modelValue.length>0},e.safeApply=function(e){var n=this.$root.$$phase;"$apply"==n||"$digest"==n?e&&"function"==typeof e&&e():this.$apply(e)},e.removeNode=function(n){var t=e.$modelValue.indexOf(n.$modelValue);return t>-1?(e.safeApply(function(){e.$modelValue.splice(t,1)[0]}),e.$treeScope.$callbacks.removed(n)):null},e.insertNode=function(n,t){e.safeApply(function(){e.$modelValue.splice(n,0,t)})},e.childNodes=function(){var n,t=[];if(e.$modelValue)for(n=0;n<e.$modelValue.length;n++)t.push(e.$nodesMap[e.$modelValue[n].$$hashKey]);return t},e.depth=function(){return e.$nodeScope?e.$nodeScope.depth():0},e.outOfDepth=function(n){var t=e.maxDepth||e.$treeScope.maxDepth;return t>0?e.depth()+n.maxSubDepth()+1>t:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(e,n){this.scope=e,e.$element=n,e.$nodesScope=null,e.$type="uiTree",e.$emptyElm=null,e.$callbacks=null,e.dragEnabled=!0,e.emptyPlaceholderEnabled=!0,e.maxDepth=0,e.dragDelay=0,e.cloneEnabled=!1,e.nodropEnabled=!1,e.isEmpty=function(){return e.$nodesScope&&e.$nodesScope.$modelValue&&0===e.$nodesScope.$modelValue.length},e.place=function(n){e.$nodesScope.$element.append(n),e.$emptyElm.remove()},this.resetEmptyElement=function(){e.$nodesScope.$modelValue&&0!==e.$nodesScope.$modelValue.length||!e.emptyPlaceholderEnabled?e.$emptyElm.remove():n.append(e.$emptyElm)},e.resetEmptyElement=this.resetEmptyElement}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(e,n){return{restrict:"A",scope:!0,controller:"TreeController",link:function(t,o,l,r){var a,i,d,c={accept:null,beforeDrag:null},s={};angular.extend(s,e),s.treeClass&&o.addClass(s.treeClass),"table"===o.prop("tagName").toLowerCase()?(t.$emptyElm=angular.element(n.document.createElement("tr")),i=o.find("tr"),d=i.length>0?angular.element(i).children().length:1e6,a=angular.element(n.document.createElement("td")).attr("colspan",d),t.$emptyElm.append(a)):t.$emptyElm=angular.element(n.document.createElement("div")),s.emptyTreeClass&&t.$emptyElm.addClass(s.emptyTreeClass),t.$watch("$nodesScope.$modelValue.length",function(e){angular.isNumber(e)&&r.resetEmptyElement()},!0),t.$watch(l.dragEnabled,function(e){"boolean"==typeof e&&(t.dragEnabled=e)}),t.$watch(l.emptyPlaceholderEnabled,function(e){"boolean"==typeof e&&(t.emptyPlaceholderEnabled=e,r.resetEmptyElement())}),t.$watch(l.nodropEnabled,function(e){"boolean"==typeof e&&(t.nodropEnabled=e)}),t.$watch(l.cloneEnabled,function(e){"boolean"==typeof e&&(t.cloneEnabled=e)}),t.$watch(l.maxDepth,function(e){"number"==typeof e&&(t.maxDepth=e)}),t.$watch(l.dragDelay,function(e){"number"==typeof e&&(t.dragDelay=e)}),c.accept=function(e,n){return!(n.nodropEnabled||n.$treeScope.nodropEnabled||n.outOfDepth(e));
},c.beforeDrag=function(){return!0},c.removed=function(){},c.dropped=function(){},c.dragStart=function(){},c.dragMove=function(){},c.dragStop=function(){},c.beforeDrop=function(){},c.toggle=function(){},t.$watch(l.uiTree,function(e){angular.forEach(e,function(e,n){c[n]&&"function"==typeof e&&(c[n]=e)}),t.$callbacks=c},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(e){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(n,t,o,l){var r={};angular.extend(r,e),r.handleClass&&t.addClass(r.handleClass),n!=l.scope&&(n.$nodeScope=l.scope,l.scope.$handleScope=n)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout","$q",function(e,n,t,o,l,r){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(a,i,d,c){var s,u,p,f,m,h,g,$,b,N,y,v,S,E,T,x,C,w,D,X,Y,A,V,H,I={},O="ontouchstart"in window,k=null,M=document.body,P=document.documentElement;angular.extend(I,e),I.nodeClass&&i.addClass(I.nodeClass),a.init(c),a.collapsed=!!n.getNodeAttribute(a,"collapsed")||e.defaultCollapsed,a.sourceOnly=a.nodropEnabled||a.$treeScope.nodropEnabled,a.$watch(d.collapsed,function(e){"boolean"==typeof e&&(a.collapsed=e)}),a.$watch("collapsed",function(e){n.setNodeAttribute(a,"collapsed",e),d.$set("collapsed",e)}),a.$on("angular-ui-tree:collapse-all",function(){a.collapsed=!0}),a.$on("angular-ui-tree:expand-all",function(){a.collapsed=!1}),N=function(e){if((O||2!==e.button&&3!==e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var l,r,d,c,N,y,v,S,E,T=angular.element(e.target);if(l=n.treeNodeHandlerContainerOfElement(T),l&&(T=angular.element(l)),r=i.clone(),S=n.elementIsTreeNode(T),E=n.elementIsTreeNodeHandle(T),(S||E)&&!(S&&n.elementContainsTreeNodeHandler(T)||(d=T.prop("tagName").toLowerCase(),"input"==d||"textarea"==d||"button"==d||"select"==d))){for(H=angular.element(e.target);H&&H[0]&&H[0]!==i;){if(n.nodrag(H))return;H=H.parent()}a.beforeDrag(a)&&(e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault(),N=n.eventObj(e),s=!0,u=n.dragInfo(a),c=i.prop("tagName"),"tr"===c.toLowerCase()?(f=angular.element(t.document.createElement(c)),y=angular.element(t.document.createElement("td")).addClass(I.placeholderClass).attr("colspan",i[0].children.length),f.append(y)):f=angular.element(t.document.createElement(c)).addClass(I.placeholderClass),m=angular.element(t.document.createElement(c)),I.hiddenClass&&m.addClass(I.hiddenClass),p=n.positionStarted(N,i),f.css("height",n.height(i)+"px"),h=angular.element(t.document.createElement(a.$parentNodesScope.$element.prop("tagName"))).addClass(a.$parentNodesScope.$element.attr("class")).addClass(I.dragClass),h.css("width",n.width(i)+"px"),h.css("z-index",9999),v=(i[0].querySelector(".angular-ui-tree-handle")||i[0]).currentStyle,v&&(document.body.setAttribute("ui-tree-cursor",o.find("body").css("cursor")||""),o.find("body").css({cursor:v.cursor+"!important"})),a.sourceOnly&&f.css("display","none"),i.after(f),i.after(m),h.append(u.isClone()&&a.sourceOnly?r:i),o.find("body").append(h),h.css({left:N.pageX-p.offsetX+"px",top:N.pageY-p.offsetY+"px"}),g={placeholder:f,dragging:h},D(),a.$apply(function(){a.$treeScope.$callbacks.dragStart(u.eventArgs(g,p))}),$=Math.max(M.scrollHeight,M.offsetHeight,P.clientHeight,P.scrollHeight,P.offsetHeight),b=Math.max(M.scrollWidth,M.offsetWidth,P.clientWidth,P.scrollWidth,P.offsetWidth))}}},y=function(e){var o,l,r,i,d,c,m,N,y,v,S,E,T,x,C,w,D,X=n.eventObj(e);if(h){if(e.preventDefault(),t.getSelection?t.getSelection().removeAllRanges():t.document.selection&&t.document.selection.empty(),r=X.pageX-p.offsetX,i=X.pageY-p.offsetY,0>r&&(r=0),0>i&&(i=0),i+10>$&&(i=$-10),r+10>b&&(r=b-10),h.css({left:r+"px",top:i+"px"}),d=window.pageYOffset||t.document.documentElement.scrollTop,c=d+(window.innerHeight||t.document.clientHeight||t.document.clientHeight),c<X.pageY&&$>c&&(C=Math.min($-c,10),window.scrollBy(0,C)),d>X.pageY&&window.scrollBy(0,-10),n.positionMoved(e,p,s),s)return void(s=!1);if(N=n.offset(h).left-n.offset(f).left>=I.threshold,y=X.pageX-(t.pageXOffset||t.document.body.scrollLeft||t.document.documentElement.scrollLeft)-(t.document.documentElement.clientLeft||0),v=X.pageY-(t.pageYOffset||t.document.body.scrollTop||t.document.documentElement.scrollTop)-(t.document.documentElement.clientTop||0),angular.isFunction(h.hide)?h.hide():(S=h[0].style.display,h[0].style.display="none"),t.document.elementFromPoint(y,v),T=angular.element(t.document.elementFromPoint(y,v)),V=n.treeNodeHandlerContainerOfElement(T),V&&(T=angular.element(V)),angular.isFunction(h.show)?h.show():h[0].style.display=S,A=!(n.elementIsTreeNodeHandle(T)||n.elementIsTreeNode(T)||n.elementIsTreeNodes(T)||n.elementIsTree(T)||n.elementIsPlaceholder(T)),A&&(f.remove(),k&&(k.resetEmptyElement(),k=null)),p.dirAx&&p.distAxX>=I.levelThreshold&&(p.distAxX=0,p.distX>0&&(o=u.prev(),o&&!o.collapsed&&o.accept(a,o.childNodesCount())&&(o.$childNodesScope.$element.append(f),u.moveTo(o.$childNodesScope,o.childNodes(),o.childNodesCount()))),p.distX<0&&(l=u.next(),l||(m=u.parentNode(),m&&m.$parentNodesScope.accept(a,m.index()+1)&&(m.$element.after(f),u.moveTo(m.$parentNodesScope,m.siblings(),m.index()+1))))),!p.dirAx){if(n.elementIsTree(T)?E=T.controller("uiTree").scope:n.elementIsTreeNodeHandle(T)?E=T.controller("uiTreeHandle").scope:n.elementIsTreeNode(T)?E=T.controller("uiTreeNode").scope:n.elementIsTreeNodes(T)?E=T.controller("uiTreeNodes").scope:n.elementIsPlaceholder(T)?E=T.controller("uiTreeNodes").scope:T.controller("uiTreeNode")&&(E=T.controller("uiTreeNode").scope),x=!1,!E)return;if(!E.$treeScope||E.$parent.nodropEnabled||E.$treeScope.nodropEnabled||f.css("display",""),"uiTree"==E.$type&&E.dragEnabled&&(x=E.isEmpty()),"uiTreeHandle"==E.$type&&(E=E.$nodeScope),"uiTreeNode"!=E.$type&&!x)return;k&&f.parent()[0]!=k.$element[0]&&(k.resetEmptyElement(),k=null),x?(k=E,E.$nodesScope.accept(a,0)&&(E.place(f),u.moveTo(E.$nodesScope,E.$nodesScope.childNodes(),0))):E.dragEnabled()&&(T=E.$element,w=n.offset(T),D=E.horizontal?X.pageX<w.left+n.width(T)/2:X.pageY<w.top+n.height(T)/2,E.$parentNodesScope.accept(a,E.index())?D?(T[0].parentNode.insertBefore(f[0],T[0]),u.moveTo(E.$parentNodesScope,E.siblings(),E.index())):(T.after(f),u.moveTo(E.$parentNodesScope,E.siblings(),E.index()+1)):!D&&E.accept(a,E.childNodesCount())?(E.$childNodesScope.$element.append(f),u.moveTo(E.$childNodesScope,E.childNodes(),E.childNodesCount())):A=!0)}a.$apply(function(){a.$treeScope.$callbacks.dragMove(u.eventArgs(g,p))})}},v=function(e){var n=u.eventArgs(g,p);e.preventDefault(),X(),a.$treeScope.$apply(function(){r.when(a.$treeScope.$callbacks.beforeDrop(n)).then(function(e){e!==!1&&a.$$allowNodeDrop&&!A?(u.apply(),a.$treeScope.$callbacks.dropped(n)):w()})["catch"](function(){w()})["finally"](function(){m.replaceWith(a.$element),f.remove(),h&&(h.remove(),h=null),a.$treeScope.$callbacks.dragStop(n),a.$$allowNodeDrop=!1,u=null;var e=document.body.getAttribute("ui-tree-cursor");null!==e&&(o.find("body").css({cursor:e}),document.body.removeAttribute("ui-tree-cursor"))})})},S=function(e){a.dragEnabled()&&N(e)},E=function(e){y(e)},T=function(e){a.$$allowNodeDrop=!0,v(e)},x=function(e){v(e)},C=function(){var e;return{exec:function(n,t){t||(t=0),this.cancel(),e=l(n,t)},cancel:function(){l.cancel(e)}}}(),w=function(){i.bind("touchstart mousedown",function(e){C.exec(function(){S(e)},a.dragDelay||0)}),i.bind("touchend touchcancel mouseup",function(){C.cancel()})},w(),D=function(){angular.element(o).bind("touchend",T),angular.element(o).bind("touchcancel",T),angular.element(o).bind("touchmove",E),angular.element(o).bind("mouseup",T),angular.element(o).bind("mousemove",E),angular.element(o).bind("mouseleave",x)},X=function(){angular.element(o).unbind("touchend",T),angular.element(o).unbind("touchcancel",T),angular.element(o).unbind("touchmove",E),angular.element(o).unbind("mouseup",T),angular.element(o).unbind("mousemove",E),angular.element(o).unbind("mouseleave",x)},Y=function(e){27==e.keyCode&&(a.$$allowNodeDrop=!1,v(e))},angular.element(t.document).bind("keydown",Y),a.$on("$destroy",function(){angular.element(t.document).unbind("keydown",Y)})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(e){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(n,t,o,l){var r={},a=l[0],i=l[1],d=l[2];angular.extend(r,e),r.nodesClass&&t.addClass(r.nodesClass),i?(i.scope.$childNodesScope=n,n.$nodeScope=i.scope):d.scope.$nodesScope=n,n.$treeScope=d.scope,a&&(a.$render=function(){n.$modelValue=a.$modelValue}),n.$watch(function(){return o.maxDepth},function(e){"number"==typeof e&&(n.maxDepth=e)}),n.$watch(function(){return o.nodropEnabled},function(e){"undefined"!=typeof e&&(n.nodropEnabled=!0)},!0),o.$observe("horizontal",function(e){n.horizontal="undefined"!=typeof e})}}}])}(),function(){"use strict";function e(e,n){if(void 0===n)return null;for(var t=n.parentNode,o=1,l="function"==typeof t.setAttribute&&t.hasAttribute(e)?t:null;t&&"function"==typeof t.setAttribute&&!t.hasAttribute(e);){if(t=t.parentNode,l=t,t===document.documentElement){l=null;break}o++}return l}angular.module("ui.tree").factory("UiTreeHelper",["$document","$window","treeConfig",function(n,t,o){return{nodesData:{},setNodeAttribute:function(e,n,t){if(!e.$modelValue)return null;var o=this.nodesData[e.$modelValue.$$hashKey];o||(o={},this.nodesData[e.$modelValue.$$hashKey]=o),o[n]=t},getNodeAttribute:function(e,n){if(!e.$modelValue)return null;var t=this.nodesData[e.$modelValue.$$hashKey];return t?t[n]:null},nodrag:function(e){return"undefined"!=typeof e.attr("data-nodrag")?"false"!==e.attr("data-nodrag"):!1},eventObj:function(e){var n=e;return void 0!==e.targetTouches?n=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(n=e.originalEvent.targetTouches.item(0)),n},dragInfo:function(e){return{source:e,sourceInfo:{cloneModel:e.$treeScope.cloneEnabled===!0?angular.copy(e.$modelValue):void 0,nodeScope:e,index:e.index(),nodesScope:e.$parentNodesScope},index:e.index(),siblings:e.siblings().slice(0),parent:e.$parentNodesScope,moveTo:function(e,n,t){this.parent=e,this.siblings=n.slice(0);var o=this.siblings.indexOf(this.source);o>-1&&(this.siblings.splice(o,1),this.source.index()<t&&t--),this.siblings.splice(t,0,this.source),this.index=t},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(e){return angular.copy(e)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(e,n){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:e,pos:n}},apply:function(){var e=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,this.sourceInfo.cloneModel):(this.source.remove(),this.parent.insertNode(this.index,e)))}}},height:function(e){return e.prop("scrollHeight")},width:function(e){return e.prop("scrollWidth")},offset:function(e){var o=e[0].getBoundingClientRect();return{width:e.prop("offsetWidth"),height:e.prop("offsetHeight"),top:o.top+(t.pageYOffset||n[0].body.scrollTop||n[0].documentElement.scrollTop),left:o.left+(t.pageXOffset||n[0].body.scrollLeft||n[0].documentElement.scrollLeft)}},positionStarted:function(e,n){var t={},o=e.pageX,l=e.pageY;return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(o=e.originalEvent.touches[0].pageX,l=e.originalEvent.touches[0].pageY),t.offsetX=o-this.offset(n).left,t.offsetY=l-this.offset(n).top,t.startX=t.lastX=o,t.startY=t.lastY=l,t.nowX=t.nowY=t.distX=t.distY=t.dirAx=0,t.dirX=t.dirY=t.lastDirX=t.lastDirY=t.distAxX=t.distAxY=0,t},positionMoved:function(e,n,t){var o,l=e.pageX,r=e.pageY;return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(l=e.originalEvent.touches[0].pageX,r=e.originalEvent.touches[0].pageY),n.lastX=n.nowX,n.lastY=n.nowY,n.nowX=l,n.nowY=r,n.distX=n.nowX-n.lastX,n.distY=n.nowY-n.lastY,n.lastDirX=n.dirX,n.lastDirY=n.dirY,n.dirX=0===n.distX?0:n.distX>0?1:-1,n.dirY=0===n.distY?0:n.distY>0?1:-1,o=Math.abs(n.distX)>Math.abs(n.distY)?1:0,t?(n.dirAx=o,void(n.moving=!0)):(n.dirAx!==o?(n.distAxX=0,n.distAxY=0):(n.distAxX+=Math.abs(n.distX),0!==n.dirX&&n.dirX!==n.lastDirX&&(n.distAxX=0),n.distAxY+=Math.abs(n.distY),0!==n.dirY&&n.dirY!==n.lastDirY&&(n.distAxY=0)),void(n.dirAx=o))},elementIsTreeNode:function(e){return"undefined"!=typeof e.attr("ui-tree-node")},elementIsTreeNodeHandle:function(e){return"undefined"!=typeof e.attr("ui-tree-handle")},elementIsTree:function(e){return"undefined"!=typeof e.attr("ui-tree")},elementIsTreeNodes:function(e){return"undefined"!=typeof e.attr("ui-tree-nodes")},elementIsPlaceholder:function(e){return e.hasClass(o.placeholderClass)},elementContainsTreeNodeHandler:function(e){return e[0].querySelectorAll("[ui-tree-handle]").length>=1},treeNodeHandlerContainerOfElement:function(n){return e("ui-tree-handle",n[0])}}}])}()},1835:function(module,exports,__webpack_require__){module.exports=__webpack_require__(3)(19)},1836:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SummaryService=function(){function SummaryService(){(0,_classCallCheck3.default)(this,SummaryService);this.state={opened:true,pinned:true}}(0,_createClass3.default)(SummaryService,[{key:"getState",value:function getState(){return this.state}},{key:"toggleOpened",value:function toggleOpened(){this.state.opened=!this.state.opened}},{key:"setOpened",value:function setOpened(value){this.state.opened=value}},{key:"togglePinned",value:function togglePinned(){this.state.pinned=!this.state.pinned}},{key:"setPinned",value:function setPinned(value){this.state.pinned=value}}]);return SummaryService}();exports.default=SummaryService},1837:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _SummaryBaseCtrl2=__webpack_require__(1838);var _SummaryBaseCtrl3=_interopRequireDefault(_SummaryBaseCtrl2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SummaryShowCtrl=function(_SummaryBaseCtrl){(0,_inherits3.default)(SummaryShowCtrl,_SummaryBaseCtrl);function SummaryShowCtrl(SummaryService,PathService,UserProgressionService){(0,_classCallCheck3.default)(this,SummaryShowCtrl);var _this=(0,_possibleConstructorReturn3.default)(this,(SummaryShowCtrl.__proto__||(0,_getPrototypeOf2.default)(SummaryShowCtrl)).call(this,SummaryService,PathService));_this.userProgressionService=UserProgressionService;_this.progression=_this.userProgressionService.get();_this.totalSteps=_this.pathService.getTotalSteps();var path=_this.pathService.getPath();if(_index2.default.isObject(path)){if(!path.summaryDisplayed){_this.SummaryService.setOpened(false);_this.SummaryService.setPinned(false)}else{_this.SummaryService.setOpened(true);_this.SummaryService.setPinned(true)}}return _this}(0,_createClass3.default)(SummaryShowCtrl,[{key:"getTotalProgression",value:function getTotalProgression(){return this.userProgressionService.getTotalProgression()}},{key:"getTotalProgressionPercentage",value:function getTotalProgressionPercentage(){return Math.round(this.getTotalProgression()*100/this.totalSteps)+"%"}}]);return SummaryShowCtrl}(_SummaryBaseCtrl3.default);exports.default=SummaryShowCtrl},1838:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SummaryBaseCtrl=function(){function SummaryBaseCtrl(SummaryService,PathService){(0,_classCallCheck3.default)(this,SummaryBaseCtrl);this.SummaryService=SummaryService;this.pathService=PathService;this.state=this.SummaryService.getState();this.structure=[];var path=this.pathService.getPath();if(_index2.default.isObject(path)){this.structure=path.steps}}(0,_createClass3.default)(SummaryBaseCtrl,[{key:"close",value:function close(){this.SummaryService.setOpened(false)}},{key:"toggleOpened",value:function toggleOpened(){this.SummaryService.toggleOpened()}},{key:"togglePinned",value:function togglePinned(){this.SummaryService.togglePinned()}},{key:"getPsPushClass",value:function getPsPushClass(){return this.state.pinned?"path-summary-opened":""}}]);return SummaryBaseCtrl}();exports.default=SummaryBaseCtrl},1839:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _jquery=__webpack_require__(123);var _jquery2=_interopRequireDefault(_jquery);var _SummaryBaseCtrl2=__webpack_require__(1838);var _SummaryBaseCtrl3=_interopRequireDefault(_SummaryBaseCtrl2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SummaryEditCtrl=function(_SummaryBaseCtrl){(0,_inherits3.default)(SummaryEditCtrl,_SummaryBaseCtrl);function SummaryEditCtrl(SummaryService,PathService){(0,_classCallCheck3.default)(this,SummaryEditCtrl);var _this=(0,_possibleConstructorReturn3.default)(this,(SummaryEditCtrl.__proto__||(0,_getPrototypeOf2.default)(SummaryEditCtrl)).call(this,SummaryService,PathService));_this.treeOptions={dragStart:function dragStart(event){(0,_jquery2.default)(".angular-ui-tree-handle").tooltip("disable");if(event.source&&event.source.nodeScope&&event.source.nodeScope.$element){event.source.nodeScope.$element.find(".angular-ui-tree-handle").tooltip("hide")}},dropped:function dropped(){(0,_jquery2.default)(".angular-ui-tree-handle").tooltip("enable");_this.pathService.reorderSteps()}};return _this}return SummaryEditCtrl}(_SummaryBaseCtrl3.default);exports.default=SummaryEditCtrl},1840:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _show=__webpack_require__(1841);var _show2=_interopRequireDefault(_show);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SummaryShowDirective=function SummaryShowDirective(){(0,_classCallCheck3.default)(this,SummaryShowDirective);this.restrict="E";this.replace=true;this.controller="SummaryShowCtrl";this.controllerAs="summaryShowCtrl";this.template=_show2.default;this.scope={title:"="};this.bindToController=true};exports.default=SummaryShowDirective},1841:function(module,exports){module.exports='<div>\n    <div class="path-summary-pin-toggle-btn btn-group">\n        <button role="button" data-ng-click="summaryShowCtrl.toggleOpened()" data-ng-class="{ \'active\': summaryShowCtrl.state.opened }" class="btn btn-sm btn-primary">\n            {{ \'summary\'|trans:{}:\'path_wizards\' }}\n        </button>\n        <button class="btn btn-sm btn-default" data-ng-click="summaryShowCtrl.togglePinned()" data-ng-class="{ \'btn-success active\': summaryShowCtrl.state.pinned }">\n            <span class="fa fa-map-pin"></span>\n        </button>\n    </div>\n\n    <!-- Angular can\'t initialize 2 directives on same element (here, PathSummaryDirective & NgPageslideDirective) so we need a container -->\n    <div data-pageslide="" data-ps-open="summaryShowCtrl.state.opened" data-ps-side="left" data-ps-class="path-summary-container" data-ps-push="summaryShowCtrl.state.pinned" data-ps-push-class="path-summary-opened" data-ps-pin-class="path-summary-pinned">\n        <a href="" id="sidebar-left-close" class="ps-close pull-right" data-ng-click="summaryShowCtrl.close()" data-placement="right" data-toggle="tooltip" data-original-title="{{ \'sidebar_close\'|trans:{}:\'path_wizards\' }}">\n            <span class="fa fa-angle-double-left"></span>\n            <span class="sr-only">{{ \'sidebar_close\'|trans:{}:\'path_wizards\' }}</span>\n        </a>\n\n        <div class="path-summary path-summary-show">\n            <!-- List title -->\n            <h2>\n                <span class="fa fa-sitemap"></span>\n                {{ summaryShowCtrl.title }}\n            </h2>\n\n            <!-- User progression -->\n            <uib-progressbar data-ng-if="summaryShowCtrl.progression" max="summaryShowCtrl.totalSteps" value="summaryShowCtrl.getTotalProgression()">\n                <span style="color:white; white-space:nowrap;"> {{ summaryShowCtrl.getTotalProgressionPercentage() }} {{ \'completed\'|trans:{}:\'path_wizards\' }}</span>\n            </uib-progressbar>\n\n            <!-- Block to display where there is no structure -->\n            <div data-ng-if="summaryShowCtrl.structure.length === 0" class="text-center">\n                <em>There is no structure for this path.</em>\n            </div>\n\n            <!-- Block to display when a structure is set -->\n            <div class="path-summary-tree" data-ui-tree="" data-ng-if="summaryShowCtrl.structure.length !== 0">\n                <ul class="tree" data-ui-tree-nodes="" data-ng-model="summaryShowCtrl.structure" data-nodrop="">\n                    <summary-item-show data-ui-tree-node="" data-ng-repeat="step in summaryShowCtrl.structure" data-step="step"></summary-item-show>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>'},1842:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _edit=__webpack_require__(1843);var _edit2=_interopRequireDefault(_edit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SummaryEditDirective=function SummaryEditDirective(){(0,_classCallCheck3.default)(this,SummaryEditDirective);this.restrict="E";this.replace=true;this.controller="SummaryEditCtrl";this.controllerAs="summaryEditCtrl";this.template=_edit2.default;this.scope={title:"="};this.bindToController=true};exports.default=SummaryEditDirective},1843:function(module,exports){module.exports='<div>\n    <div class="path-summary-pin-toggle-btn btn-group">\n        <button role="button" data-ng-click="summaryEditCtrl.toggleOpened()" data-ng-class="{ \'active\': summaryEditCtrl.state.opened }" class="btn btn-sm btn-primary">\n            {{ \'summary\'|trans:{}:\'path_wizards\' }}\n        </button>\n\n        <button class="btn btn-sm btn-default" data-ng-click="summaryEditCtrl.togglePinned()" data-ng-class="{ \'btn-success active\': summaryEditCtrl.state.pinned }">\n            <span class="fa fa-map-pin"></span>\n        </button>\n    </div>\n\n    <!-- Angular can\'t initialize 2 directives on same element (here, PathSummaryDirective & NgPageslideDirective) so we need a container -->\n    <div data-pageslide="" data-ps-open="summaryEditCtrl.state.opened" data-ps-side="left" data-ps-class="path-summary-container" data-ps-push="summaryEditCtrl.state.pinned" data-ps-push-class="path-summary-opened" data-ps-pin-class="path-summary-pinned">\n        <a href="" id="sidebar-left-close" class="ps-close pull-right" data-ng-click="summaryEditCtrl.close()" data-placement="right" data-toggle="tooltip" data-original-title="{{ \'sidebar_close\'|trans:{}:\'path_wizards\' }}">\n            <span class="fa fa-angle-double-left"></span>\n            <span class="sr-only">{{ \'sidebar_close\'|trans:{}:\'path_wizards\' }}</span>\n        </a>\n\n        <div class="path-summary">\n            <!-- List title -->\n            <h2>\n                <span class="fa fa-sitemap"></span>\n                {{ summaryEditCtrl.title }}\n            </h2>\n\n            <!-- Block to display where there is no structure -->\n            <div data-ng-if="summaryEditCtrl.structure.length === 0" class="text-center col-md-12">\n                <em>{{ \'path_no_structure\'|trans:{}:\'path_wizards\' }}</em>\n            </div>\n\n            <!-- Block to display when a structure is set -->\n            <div class="path-summary-tree" ui-tree="summaryEditCtrl.treeOptions" data-ng-if="summaryEditCtrl.structure.length !== 0">\n                <ul class="tree" ui-tree-nodes="" data-ng-model="summaryEditCtrl.structure" data-nodrop-enabled="">\n                    <summary-item-edit data-ui-tree-node="" data-ng-repeat="step in summaryEditCtrl.structure" data-step="step"></summary-item-edit>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n'},1844:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _showItem=__webpack_require__(1845);var _showItem2=_interopRequireDefault(_showItem);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SummaryItemShowDirective=function SummaryItemShowDirective(){(0,_classCallCheck3.default)(this,SummaryItemShowDirective);this.restrict="E";this.replace=true;this.template=_showItem2.default;this.controller=["$routeParams","PathService","UserProgressionService",function($routeParams,PathService,UserProgressionService){this.current=$routeParams;this.collapsed=false;this.path=PathService.getPath();this.userProgression=UserProgressionService.getForStep(this.step);this.goTo=function(){PathService.goTo(this.step)};this.updateProgression=function(status){if(!_index2.default.isObject(this.userProgression)){UserProgressionService.create(this.step,status)}else{UserProgressionService.update(this.step,status)}}}];this.controllerAs="summaryItemShowCtrl";this.bindToController=true;this.scope={step:"="}};exports.default=SummaryItemShowDirective},1845:function(module,exports){module.exports='<li>\n    <!-- Item row -->\n    <div data-nodrag="" class="tree-item" data-ng-class="{ \'active-step\': summaryItemShowCtrl.current.stepId == summaryItemShowCtrl.step.id || (!summaryItemShowCtrl.current.stepId && 0 == summaryItemShowCtrl.step.lvl) }">\n        <!-- Level indicator -->\n        <div class="lvl-indicator lvl lvl-{{ summaryItemShowCtrl.step.lvl }} lvl-bg"></div>\n\n        <!-- Step name -->\n        <div class="step" data-ng-class="{ \'lvl lvl-{{ summaryItemShowCtrl.step.lvl }} lvl-text\': summaryItemShowCtrl.current.stepId == summaryItemShowCtrl.step.id }" data-ng-click="summaryItemShowCtrl.goTo(step)">\n            <!-- Collapse / Expand button -->\n            <a class="step-toggle" href="" data-ng-click="summaryItemShowCtrl.collapsed = !summaryItemShowCtrl.collapsed; $event.stopPropagation();" data-ng-show="0 !== summaryItemShowCtrl.step.children.length" role="button">\n                <span class="fa fa-fw" data-ng-class="{ \'fa-caret-right\': summaryItemShowCtrl.collapsed, \'fa-caret-down\': !summaryItemShowCtrl.collapsed }"></span>\n            </a>\n\n            {{ summaryItemShowCtrl.step.name | truncate }}\n        </div>\n\n        <div class="step-progression dropdown" data-ng-switch="summaryItemShowCtrl.userProgression.status" data-ng-if="summaryItemShowCtrl.userProgression.status">\n            <a href="" id="step-progression-{{ summaryItemShowCtrl.step.id }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <!-- Step is seen -->\n                <span data-ng-switch-when="seen" class="fa fa-fw fa-eye" data-container="body" data-placement="right" data-toggle="tooltip" data-original-title="{{ \'user_progression_step_seen\'|trans:{}:\'path_wizards\' }}"></span>\n\n                <!-- Step is done -->\n                <span data-ng-switch-when="to_do" class="text-warning fa fa-fw fa-square-o" data-container="body" data-placement="right" data-toggle="tooltip" data-original-title="{{ \'user_progression_step_to_do\'|trans:{}:\'path_wizards\' }}"></span>\n\n                <!-- Step is done -->\n                <span data-ng-switch-when="done" class="text-success fa fa-fw fa-check-square-o" data-container="body" data-placement="right" data-toggle="tooltip" data-original-title="{{ \'user_progression_step_done\'|trans:{}:\'path_wizards\' }}"></span>\n\n                <!-- Step is to review -->\n                <span data-ng-switch-when="to_review" class="text-info fa fa-fw fa-retweet" data-container="body" data-placement="right" data-toggle="tooltip" data-original-title="{{ \'user_progression_step_to_review\'|trans:{}:\'path_wizards\' }}"></span>\n            </a>\n\n            <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="step-progression-{{ summaryItemShowCtrl.step.id }}" data-ng-if="summaryItemShowCtrl.path.manualProgressionAllowed">\n                <li>\n                    <a href="" class="link-progression link-progression-to_do" data-ng-click="summaryItemShowCtrl.updateProgression(\'to_do\')">\n                        <span class="fa fa-fw fa-square-o"></span>\n                        {{ \'user_progression_step_to_do_label\'|trans:{}:\'path_wizards\' }}\n                    </a>\n                </li>\n\n                <li>\n                    <a href="" class="link-progression link-progression-done" data-ng-click="summaryItemShowCtrl.updateProgression(\'done\')">\n                        <span class="fa fa-fw fa-check-square-o"></span>\n                        {{ \'user_progression_step_done_label\'|trans:{}:\'path_wizards\' }}\n                    </a>\n                </li>\n\n                <li>\n                    <a href="" class="link-progression link-progression-to_review" data-ng-click="summaryItemShowCtrl.updateProgression(\'to_review\')">\n                        <span class="fa fa-fw fa-retweet"></span>\n                        {{ \'user_progression_step_to_review_label\'|trans:{}:\'path_wizards\' }}\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <ul class="step-children lvl lvl-{{ summaryItemShowCtrl.step.lvl }} lvl-border" data-ui-tree-nodes="" data-ng-model="summaryItemShowCtrl.step.children" data-ng-hide="summaryItemShowCtrl.collapsed">\n        <summary-item-show data-ui-tree-node="" data-ng-repeat="step in summaryItemShowCtrl.step.children" data-step="step"></summary-item-show>\n    </ul>\n</li>\n';
},1846:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _editItem=__webpack_require__(1847);var _editItem2=_interopRequireDefault(_editItem);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SummaryItemEditDirective=function SummaryItemEditDirective(){(0,_classCallCheck3.default)(this,SummaryItemEditDirective);this.restrict="E";this.replace=true;this.template=_editItem2.default;this.controller=["$routeParams","Translator","ClipboardService","ConfirmService","IdentifierService","PathService",function($routeParams,Translator,ClipboardService,ConfirmService,IdentifierService,PathService){this.current=$routeParams;this.collapsed=false;this.maxDepth=PathService.getMaxDepth();this.clipboardDisabled=ClipboardService.getDisabled();this.goTo=function(){PathService.goTo(this.step)};this.addStep=function(){PathService.addStep(this.step,true)};this.copy=function(){ClipboardService.copy(this.step)};this.paste=function(){var _this=this;ClipboardService.paste(this.step.children,function(clipboardData){PathService.browseSteps([clipboardData],function(parentStep,step){step.id=IdentifierService.generateUUID();step.resourceId=null;step.activityId=null;step.lvl=parentStep?parentStep.lvl+1:_this.step.lvl+1;step.name=step.name?step.name+" ":"";step.name+="("+Translator.trans("copy",{},"path_wizards")+")"})})};this.removeStep=function(){var _this2=this;if(0!==this.step.lvl){ConfirmService.open({title:Translator.trans("step_delete_title",{stepName:this.step.name},"path_wizards"),message:Translator.trans("step_delete_confirm",{},"path_wizards"),confirmButton:Translator.trans("step_delete",{},"path_wizards")},function(){var updatePreview=false;if(_this2.step.id==_this2.current.stepId){updatePreview=true}PathService.removeStep(_this2.step,updatePreview)})}}}];this.controllerAs="summaryItemEditCtrl";this.bindToController=true;this.scope={step:"="}};exports.default=SummaryItemEditDirective},1847:function(module,exports){module.exports='<li>\n    <!-- Item row -->\n    <div ui-tree-handle class="tree-item" data-ng-class="{ \'active-step\': summaryItemEditCtrl.current.stepId == summaryItemEditCtrl.step.id || (!summaryItemEditCtrl.current.stepId && 0 == summaryItemEditCtrl.step.lvl) }"\n         data-ng-mouseenter="showButtons = true"\n         data-ng-mouseleave="showButtons = false">\n\n        <!-- Level indicator -->\n        <div class="lvl-indicator lvl lvl-{{ summaryItemEditCtrl.step.lvl }} lvl-bg">\n            <!-- Drag&Drop handler -->\n            <div data-ng-if="summaryItemEditCtrl.step.lvl !== 0" data-ui-tree-handle="" class="step-drag-handler" data-toggle="tooltip" data-container="body" title="{{ \'step_drag\' | trans:{}:\'path_wizards\' }}">\n                <span class="fa fa-ellipsis-v"></span>\n                <span class="sr-only">{{ \'step_drag\' | trans:{}:\'path_wizards\' }}</span>\n            </div>\n        </div>\n\n        <!-- Step name -->\n        <div class="step lvl lvl-{{ summaryItemEditCtrl.step.lvl }}" data-nodrag="" data-ng-class="{ \'lvl-text\': summaryItemEditCtrl.current.stepId == summaryItemEditCtrl.step.id }" data-ng-click="summaryItemEditCtrl.goTo(step)">\n            <!-- Collapse / Expand button -->\n            <a class="step-toggle" href="" data-ng-click="summaryItemEditCtrl.collapsed = !summaryItemEditCtrl.collapsed; $event.stopPropagation();" data-ng-show="0 !== summaryItemEditCtrl.step.children.length" role="button">\n                <span class="fa fa-fw" data-ng-class="{\'fa-caret-right\': summaryItemEditCtrl.collapsed, \'fa-caret-down\': !summaryItemEditCtrl.collapsed}"></span>\n            </a>\n\n            {{ summaryItemEditCtrl.step.name | truncate }}\n        </div>\n\n        <!-- Actions available -->\n        <span data-ng-show="showButtons || summaryItemEditCtrl.current.stepId == summaryItemEditCtrl.step.id || (!summaryItemEditCtrl.current.stepId && 0 == summaryItemEditCtrl.step.lvl)" class="step-actions btn-group" data-nodrag="">\n            <!-- Add child -->\n            <a href="" role="button" class="btn btn-default btn-sm" data-ng-click="summaryItemEditCtrl.addStep()" data-ng-disabled="summaryItemEditCtrl.step.lvl >= summaryItemEditCtrl.maxDepth" data-toggle="tooltip" data-container="body" title="{{ \'step_add_child\' | trans:{}:\'path_wizards\' }}">\n                <span class="fa fa-plus"></span>\n                <span class="sr-only">{{ \'step_add_child\' | trans:{}:\'path_wizards\' }}</span>\n            </a>\n\n            <!-- Copy to clipboard -->\n            <a href="" role="button" class="btn btn-default btn-sm" data-ng-click="summaryItemEditCtrl.copy()" data-ng-disabled="summaryItemEditCtrl.clipboardDisabled.copy" data-toggle="tooltip" data-container="body" title="{{ \'step_copy\' | trans:{}:\'path_wizards\' }}">\n                <span class="fa fa-copy"></span>\n                <span class="sr-only">{{ \'step_copy\' | trans:{}:\'path_wizards\' }}</span>\n            </a>\n\n            <!-- Paste from clipboard -->\n            <a href="" role="button" class="btn btn-default btn-sm" data-ng-click="summaryItemEditCtrl.paste()" data-ng-disabled="summaryItemEditCtrl.clipboardDisabled.paste" data-toggle="tooltip" data-container="body" title="{{ \'step_paste\' | trans:{}:\'path_wizards\' }}">\n                <span class="fa fa-paste"></span>\n                <span class="sr-only">{{ \'step_paste\' | trans:{}:\'path_wizards\' }}</span>\n            </a>\n\n            <!-- Delete step -->\n            <a href="" role="button" class="btn btn-danger btn-sm" data-ng-click="summaryItemEditCtrl.removeStep()" data-ng-disabled="0 === summaryItemEditCtrl.step.lvl" data-toggle="tooltip" data-container="body" title="{{ \'step_delete\' | trans:{}:\'path_wizards\' }}">\n                <span class="fa fa-trash-o"></span>\n                <span class="sr-only">{{ \'step_delete\' | trans:{}:\'path_wizards\' }}</span>\n            </a>\n        </span>\n    </div>\n\n    <ul ui-tree-nodes class="step-children lvl lvl-{{ summaryItemEditCtrl.step.lvl }} lvl-border" data-ng-model="summaryItemEditCtrl.step.children" data-ng-hide="summaryItemEditCtrl.collapsed">\n        <summary-item-edit data-ui-tree-node="" data-ng-repeat="step in summaryItemEditCtrl.step.children" data-step="step"></summary-item-edit>\n    </ul>\n</li>\n'},1848:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _PathNavigationCtrl=__webpack_require__(1849);var _PathNavigationCtrl2=_interopRequireDefault(_PathNavigationCtrl);var _PathNavigationDirective=__webpack_require__(1850);var _PathNavigationDirective2=_interopRequireDefault(_PathNavigationDirective);var _PathNavigationItemDirective=__webpack_require__(1852);var _PathNavigationItemDirective2=_interopRequireDefault(_PathNavigationItemDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Navigation",[]).controller("PathNavigationCtrl",["$routeParams","$scope","PathService",_PathNavigationCtrl2.default]).directive("pathNavigation",[function(){return new _PathNavigationDirective2.default}]).directive("pathNavigationItem",[function(){return new _PathNavigationItemDirective2.default}])},1849:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PathNavigationCtrl=function(){function PathNavigationCtrl($routeParams,$scope,PathService){var _this=this;(0,_classCallCheck3.default)(this,PathNavigationCtrl);this.pathService=PathService;this.current=$routeParams;this.step={};this.parents={};$scope.$watch(function(){return _this.current},this.reloadStep.bind(this),true);$scope.$watch(function(){return _this.step},this.reloadStep.bind(this),true)}(0,_createClass3.default)(PathNavigationCtrl,[{key:"reloadStep",value:function reloadStep(){this.step=null;if(_index2.default.isDefined(this.current)&&_index2.default.isDefined(this.current.stepId)){this.step=this.pathService.getStep(this.current.stepId)}else{this.step=this.pathService.getRoot()}if(_index2.default.isDefined(this.step)&&_index2.default.isObject(this.step)){this.parents=this.pathService.getParents(this.step)}}}]);return PathNavigationCtrl}();exports.default=PathNavigationCtrl},1850:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _navigation=__webpack_require__(1851);var _navigation2=_interopRequireDefault(_navigation);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PathNavigationDirective=function PathNavigationDirective(){(0,_classCallCheck3.default)(this,PathNavigationDirective);this.restrict="E";this.replace=true;this.controller="PathNavigationCtrl";this.controllerAs="pathNavigationCtrl";this.template=_navigation2.default;this.scope={};this.bindToController=true};exports.default=PathNavigationDirective},1851:function(module,exports){module.exports='<div class="clearfix">\n    <ul class="pull-left path-breadcrumbs" data-ng-if="pathNavigationCtrl.step">\n        <!-- Parents of the current Step -->\n        <path-navigation-item data-ng-repeat="parent in pathNavigationCtrl.parents" data-element="parent" data-parent="pathNavigationCtrl.parents[$index - 1]" data-current="pathNavigationCtrl.step"></path-navigation-item>\n\n        <!-- Current step -->\n        <path-navigation-item data-element="pathNavigationCtrl.step" data-parent="pathNavigationCtrl.parents[pathNavigationCtrl.parents.length - 1]" data-current="pathNavigationCtrl.step"></path-navigation-item>\n\n        <!-- Next step -->\n        <li class="step-item dropdown" data-ng-if="pathNavigationCtrl.step.children && 0 !== pathNavigationCtrl.step.children.length">\n            <a href="" role="button" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true" id="step-children-dropdown">\n                <span class="fa fa-ellipsis-h"></span>\n                <span class="sr-only">{{ \'next_steps\'|trans:{}:\'path_wizards\' }}</span>\n            </a>\n\n            <ul class="dropdown-menu" role="menu" aria-labelledby="step-children-dropdown">\n                <!-- step-item lvl lvl-{{ child.lvl }} lvl-child lvl-hover -->\n                <li data-ng-repeat="child in pathNavigationCtrl.step.children" role="presentation">\n                    <a role="menuitem" tabindex="-1" href="#/{{ child.id }}">{{ child.name | truncate }}</a>\n                </li>\n            </ul>\n        </li>\n    </ul>\n</div>\n'},1852:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _navigationItem=__webpack_require__(1853);var _navigationItem2=_interopRequireDefault(_navigationItem);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PathNavigationDirective=function PathNavigationDirective(){(0,_classCallCheck3.default)(this,PathNavigationDirective);this.restrict="E";this.replace=true;this.controller=function PathNavigationItemCtrl(){};this.controllerAs="pathNavigationItemCtrl";this.template=_navigationItem2.default;this.scope={parent:"=?",element:"=",current:"="};this.bindToController=true};exports.default=PathNavigationDirective},1853:function(module,exports){module.exports='<li class="step-item lvl lvl-{{ pathNavigationItemCtrl.element.lvl }} lvl-zindex-reverse lvl-border" data-ng-class="{ \'dropdown\': 1 < pathNavigationItemCtrl.parent.children.length, \'current\': pathNavigationItemCtrl.element.id == pathNavigationItemCtrl.current.id  }">\n    <!-- Step level -->\n    <!--<div class="lvl-indicator lvl lvl-{{ pathNavigationItemCtrl.element.lvl }} lvl-bg"></div>-->\n\n    <!-- Step link (if `element` is not the current step) -->\n    <a data-ng-if="pathNavigationItemCtrl.element.id != pathNavigationItemCtrl.current.id" href="#/{{ pathNavigationItemCtrl.element.id }}">{{ pathNavigationItemCtrl.element.name | truncate }}</a>\n\n    <!-- Step name (if `element` is the current step) -->\n    <span data-ng-if="pathNavigationItemCtrl.element.id == pathNavigationItemCtrl.current.id">{{ pathNavigationItemCtrl.element.name | truncate }}</span>\n\n    <!-- Siblings dropdown -->\n    <a href="" class="dropdown-toggle" type="button" id="step-{{ pathNavigationItemCtrl.element.id }}-siblings-dropdown" data-toggle="dropdown" aria-expanded="true" data-ng-if="1 < pathNavigationItemCtrl.parent.children.length">\n        <span class="caret"></span>\n        <span class="sr-only">{{ \'see_step_siblings\'|trans:{}:\'path_wizards\' }}</span>\n    </a>\n    <ul class="dropdown-menu" role="menu" aria-labelledby="step-{{ pathNavigationItemCtrl.element.id }}-siblings-dropdown" data-ng-if="1 < pathNavigationItemCtrl.parent.children.length">\n        <!-- step-item lvl lvl-{{ sibling.lvl }} lvl-border lvl-hover -->\n        <li class="" data-ng-repeat="sibling in pathNavigationItemCtrl.parent.children" role="presentation" data-ng-class="{ \'current\': pathNavigationItemCtrl.element.id == sibling.id }">\n            <a role="menuitem" tabindex="-1" href="#/{{ sibling.id }}">{{ sibling.name | truncate }}</a>\n        </li>\n    </ul>\n</li>'},1854:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PathService=function(){function PathService($http,$q,$timeout,$location,Translator,url,AlertService,StepService,UserProgressionService){(0,_classCallCheck3.default)(this,PathService);this.$http=$http;this.$q=$q;this.$timeout=$timeout;this.$location=$location;this.Translator=Translator;this.UrlGenerator=url;this.AlertService=AlertService;this.StepService=StepService;this.UserProgressionService=UserProgressionService;this.path=null;this.maxDepth=8;this.totalSteps=0}(0,_createClass3.default)(PathService,[{key:"getId",value:function getId(){return this.path.id}},{key:"getPath",value:function getPath(){return this.path}},{key:"setPath",value:function setPath(value){var _this=this;this.path=value;this.totalSteps=0;this.browseSteps(this.path.steps,function(){_this.totalSteps++})}},{key:"getMaxDepth",value:function getMaxDepth(){return this.maxDepth}},{key:"getLastSeenStep",value:function getLastSeenStep(){var _this2=this;var lastSeen=null;this.browseSteps(this.path.steps,function(parent,step){var progression=_this2.UserProgressionService.getForStep(step);if(progression){lastSeen=step}});if(null===lastSeen&&this.path.steps&&0!==this.path.steps.length){lastSeen=this.path.steps[0]}return lastSeen}},{key:"getTotalSteps",value:function getTotalSteps(){return this.totalSteps}},{key:"initialize",value:function initialize(){var rootStep=this.StepService.newStep();this.path.steps.push(rootStep)}},{key:"save",value:function save(){var _this3=this;var dataToSave={innova_path:{name:this.path.name,description:this.path.description,breadcrumbs:this.path.breadcrumbs,summaryDisplayed:this.path.summaryDisplayed,completeBlockingCondition:this.path.completeBlockingCondition,manualProgressionAllowed:this.path.manualProgressionAllowed,structure:_index2.default.toJson(this.path)}};var deferred=this.$q.defer();this.$http.put(this.UrlGenerator("innova_path_editor_wizard_save",{id:this.path.id}),dataToSave).success(function(response){if("ERROR_VALIDATION"===response.status){for(var i=0;i<response.messages.length;i++){_this3.AlertService.addAlert("error",response.messages[i])}deferred.reject(response)}else{_index2.default.merge(_this3.path,response.data);_this3.AlertService.addAlert("success",_this3.Translator.trans("path_save_success",{},"path_wizards"));deferred.resolve(response)}}).error(function(response){_this3.AlertService.addAlert("error",_this3.Translator.trans("path_save_error",{},"path_wizards"));deferred.reject(response)});return deferred.promise}},{key:"publish",value:function publish(){var _this4=this;var deferred=this.$q.defer();this.$http.put(this.UrlGenerator("innova_path_publish",{id:this.path.id})).success(function(response){if("ERROR"===response.status){for(var i=0;i<response.messages.length;i++){_this4.AlertService.addAlert("error",response.messages[i])}deferred.reject(response)}else{_index2.default.merge(_this4.path,response.data);_this4.AlertService.addAlert("success",_this4.Translator.trans("publish_success",{},"path_wizards"));deferred.resolve(response)}}).error(function(response){_this4.AlertService.addAlert("error",_this4.Translator.trans("publish_error",{},"path_wizards"));deferred.reject(response)});return deferred.promise}},{key:"goTo",value:function goTo(step){var _this5=this;this.$timeout(function(){if(_index2.default.isObject(step)){_this5.$location.path("/"+step.id)}else{_this5.$location.path("/")}},1)}},{key:"getPrevious",value:function getPrevious(step){var previous=null;if(_index2.default.isDefined(step)&&_index2.default.isObject(step)&&0!==step.lvl){var parent=this.getParent(step);if(_index2.default.isObject(parent)&&_index2.default.isObject(parent.children)){var position=parent.children.indexOf(step);if(-1!==position&&_index2.default.isObject(parent.children[position-1])){var previousSibling=parent.children[position-1];var lastChild=this.getLastChild(previousSibling);if(_index2.default.isObject(lastChild)){previous=lastChild}else{previous=previousSibling}}else{previous=parent}}}return previous}},{key:"getLastChild",value:function getLastChild(step){var lastChild=null;if(_index2.default.isDefined(step)&&_index2.default.isObject(step)&&_index2.default.isObject(step.children)&&_index2.default.isObject(step.children[step.children.length-1])){var child=step.children[step.children.length-1];if(!_index2.default.isObject(child.children)||0>=child.children.length){lastChild=child}else{lastChild=this.getLastChild(child)}}return lastChild}},{key:"getNext",value:function getNext(step){var next=null;if(_index2.default.isDefined(step)&&_index2.default.isObject(step)){if(_index2.default.isObject(step.children)&&_index2.default.isObject(step.children[0])){next=step.children[0]}else if(0!==step.lvl){next=this.getNextSibling(step)}}return next}},{key:"getNextSibling",value:function getNextSibling(step){var sibling=null;if(0!==step.lvl){var parent=this.getParent(step);if(_index2.default.isObject(parent.children)){var position=parent.children.indexOf(step);if(-1!==position&&_index2.default.isObject(parent.children[position+1])){sibling=parent.children[position+1]}}if(null===sibling){sibling=this.getNextSibling(parent)}}return sibling}},{key:"getParents",value:function getParents(step,reverse){var parents=[];var parent=this.getParent(step);if(parent){parents.push(parent);parents=parents.concat(this.getParents(parent));parents.sort(function(a,b){if(a.lvl<b.lvl){return-1}else if(a.lvl>b.lvl){return 1}return 0});if(reverse){parents.reverse()}}return parents}},{key:"getParent",value:function getParent(step){var parentStep=null;this.browseSteps(this.path.steps,function(parent,current){if(step.id==current.id){parentStep=parent;return true}return false});return parentStep}},{key:"browseSteps",value:function browseSteps(steps,callback){function recursiveLoop(parentStep,currentStep){var terminated=false;if(typeof callback==="function"){terminated=callback(parentStep,currentStep)}if(!terminated&&typeof currentStep.children!=="undefined"&&currentStep.children.length!==0){for(var i=0;i<currentStep.children.length;i++){terminated=recursiveLoop(currentStep,currentStep.children[i])}}return terminated}if(typeof steps!=="undefined"&&steps.length!==0){for(var j=0;j<steps.length;j++){var terminated=recursiveLoop(null,steps[j]);if(terminated){break}}}}},{key:"reorderSteps",value:function reorderSteps(){this.browseSteps(this.path.steps,function(parent,step){if(null!==parent){step.lvl=parent.lvl+1}else{step.lvl=0}})}},{key:"addStep",value:function addStep(parent,displayNew){if(parent.lvl<this.maxDepth){var step=this.StepService.newStep(parent);if(displayNew){this.goTo(step)}}}},{key:"removeStep",value:function removeStep(stepToDelete,redirect){var _this6=this;this.browseSteps(this.path.steps,function(parent,step){var deleted=false;if(step===stepToDelete){if(typeof parent!=="undefined"&&null!==parent){var pos=parent.children.indexOf(stepToDelete);if(-1!==pos){parent.children.splice(pos,1);deleted=true}}else{var _pos=_this6.path.steps.indexOf(stepToDelete);if(-1!==_pos){_this6.path.steps.splice(_pos,1);deleted=true}}}return deleted});if(redirect){if(this.path.steps[0]){this.goTo(this.path.steps[0])}else{this.goTo(null)}}}},{key:"getRoot",value:function getRoot(){var root=null;if(_index2.default.isDefined(this.path)&&_index2.default.isObject(this.path)&&_index2.default.isObject(this.path.steps)&&_index2.default.isObject(this.path.steps[0])){root=this.path.steps[0]}return root}},{key:"getStep",value:function getStep(stepId){var step=null;if(_index2.default.isDefined(this.path)&&_index2.default.isObject(this.path)){this.browseSteps(this.path.steps,function(parent,current){if(current.id==stepId){step=current;return true}return false})}return step}},{key:"getStepInheritedResources",value:function getStepInheritedResources(step){function retrieveInheritedResources(stepToFind,currentStep,inheritedResources){var stepFound=false;if(stepToFind.id!==currentStep.id&&typeof currentStep.children!=="undefined"&&null!==currentStep.children){for(var i=0;i<currentStep.children.length;i++){stepFound=retrieveInheritedResources(stepToFind,currentStep.children[i],inheritedResources);if(stepFound){if(typeof currentStep.resources!=="undefined"&&null!==currentStep.resources){for(var j=currentStep.resources.length-1;j>=0;j--){if(currentStep.resources[j].propagateToChildren){var resource=_index2.default.copy(currentStep.resources[j]);resource.parentStep={id:currentStep.id,lvl:currentStep.lvl,name:currentStep.name};resource.isExcluded=stepToFind.excludedResources.indexOf(resource.id)!=-1;inheritedResources.unshift(resource)}}}break}}}else{stepFound=true}return stepFound}var stepFound=false;var inheritedResources=[];if(this.path.steps&&this.path.steps.length!==0){for(var i=0;i<this.path.steps.length;i++){var currentStep=this.path.steps[i];stepFound=retrieveInheritedResources(step,currentStep,inheritedResources);if(stepFound){break}}}return inheritedResources}}]);return PathService}();exports.default=PathService},1855:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _PathBaseCtrl2=__webpack_require__(1856);var _PathBaseCtrl3=_interopRequireDefault(_PathBaseCtrl2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PathShowCtrl=function(_PathBaseCtrl){(0,_inherits3.default)(PathShowCtrl,_PathBaseCtrl);function PathShowCtrl($window,$route,$routeParams,url,PathService,AuthorizationCheckerService,UserProgressionService){(0,_classCallCheck3.default)(this,PathShowCtrl);var _this=(0,_possibleConstructorReturn3.default)(this,(PathShowCtrl.__proto__||(0,_getPrototypeOf2.default)(PathShowCtrl)).call(this,$window,$route,$routeParams,url,PathService));_this.AuthorizationCheckerService=AuthorizationCheckerService;_this.userProgressionService=UserProgressionService;if(_index2.default.isObject(_this.userProgression)){_this.userProgressionService.set(_this.userProgression)}_this.AuthorizationCheckerService.setEditEnabled(_this.editEnabled);_this.userProgressionService.setTotalProgression(_this.totalProgression);return _this}(0,_createClass3.default)(PathShowCtrl,[{key:"edit",value:function edit(){var url=this.UrlGenerator("innova_path_editor_wizard",{id:this.path.id});if(_index2.default.isObject(this.currentStep)&&_index2.default.isDefined(this.currentStep.stepId)){url+="#/"+this.currentStep.stepId}this.window.location.href=url}}]);return PathShowCtrl}(_PathBaseCtrl3.default);exports.default=PathShowCtrl},1856:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PathBaseCtrl=function PathBaseCtrl($window,$route,$routeParams,url,PathService){(0,_classCallCheck3.default)(this,PathBaseCtrl);this.window=$window;this.UrlGenerator=url;this.pathService=PathService;this.pathService.setPath(this.path);this.currentStep=$routeParams;$route.reload()};exports.default=PathBaseCtrl},1857:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(159);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(163);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(164);var _inherits3=_interopRequireDefault(_inherits2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _PathBaseCtrl2=__webpack_require__(1856);var _PathBaseCtrl3=_interopRequireDefault(_PathBaseCtrl2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PathEditCtrl=function(_PathBaseCtrl){(0,_inherits3.default)(PathEditCtrl,_PathBaseCtrl);function PathEditCtrl($window,$route,$routeParams,url,PathService,Translator,HistoryService,ConfirmService,$scope,tinymceConfig){(0,_classCallCheck3.default)(this,PathEditCtrl);var _this=(0,_possibleConstructorReturn3.default)(this,(PathEditCtrl.__proto__||(0,_getPrototypeOf2.default)(PathEditCtrl)).call(this,$window,$route,$routeParams,url,PathService));_this.Translator=Translator;_this.historyService=HistoryService;_this.confirmService=ConfirmService;_this.tinymceOptions=tinymceConfig;_this.historyDisabled=HistoryService.getDisabled();_this.unsaved=false;if(0===_this.path.steps.length){_this.pathService.initialize()}var path=_this.path;$scope.$watch(function(){return path},function(newValue){var empty=_this.historyService.isEmpty();var updated=_this.historyService.update(newValue);if(!empty&&updated){_this.unsaved=true}},true);return _this}(0,_createClass3.default)(PathEditCtrl,[{key:"undo",value:function undo(){if(this.historyService.canUndo()){this.historyService.undo(this.path)}}},{key:"redo",value:function redo(){if(this.historyService.canRedo()){this.historyService.redo(this.path)}}},{key:"save",value:function save(){var _this2=this;if(this.unsaved){this.pathService.save().then(function(){_this2.modified=true;_this2.unsaved=false})}}},{key:"publish",value:function publish(){var _this3=this;if(!this.published||this.modified){this.pathService.publish().then(function(){_this3.modified=false;_this3.published=true;_this3.unsaved=false;_this3.historyService.clear();if(_this3.path.steps[0]!=="undefined"){_this3.pathService.goTo(_this3.path.steps[0])}})}}},{key:"preview",value:function preview(){var _this5=this;function doPreview(url){var _this4=this;if(this.modified){this.confirmService.open({title:this.Translator.trans("preview_with_pending_changes_title",{},"path_wizards"),message:this.Translator.trans("preview_with_pending_changes_message",{},"path_wizards"),confirmButton:this.Translator.trans("preview_with_pending_changes_button",{},"path_wizards")},function(){return _this4.window.location.href=url})}else{this.window.location.href=url}}if(this.published){(function(){var url=_this5.UrlGenerator("innova_path_player_wizard",{id:_this5.path.id});if(_index2.default.isObject(_this5.currentStep)&&_index2.default.isDefined(_this5.currentStep.stepId)){url+="#/"+_this5.currentStep.stepId}if(_this5.unsaved){_this5.pathService.save().then(function(){_this5.modified=true;_this5.unsaved=false;doPreview.call(_this5,url)})}else{doPreview.call(_this5,url)}})()}}},{key:"unlockManager",value:function unlockManager(){this.window.location.href=this.UrlGenerator("innova_path_manage_results",{id:this.path.id})}}]);return PathEditCtrl}(_PathBaseCtrl3.default);exports.default=PathEditCtrl},1858:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _show=__webpack_require__(1859);var _show2=_interopRequireDefault(_show);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PathShowDirective=function PathShowDirective(){(0,_classCallCheck3.default)(this,PathShowDirective);this.restrict="E";this.replace=true;this.controller="PathShowCtrl";this.controllerAs="pathShowCtrl";this.template=_show2.default;this.scope={path:"=",editEnabled:"=",userProgression:"=?",totalProgression:"@"};this.bindToController=true};exports.default=PathShowDirective},1859:function(module,exports){module.exports='<div class="path-container path-show">\n    <div class="path-header">\n        <h1 class="h4">\n            <button type="button" role="button" style="margin-right: 5px;" class="btn btn-sm btn-primary btn-path-edit" data-ng-if="pathShowCtrl.path.steps.length !== 0 && pathShowCtrl.editEnabled" data-ng-click="pathShowCtrl.edit()" data-placement="top" data-toggle="tooltip" data-original-title="{{ \'edit\'|trans:{}:\'path_wizards\' }}">\n                <span class="fa fa-fw fa-pencil"></span>\n                <span class="sr-only">{{ \'edit\'|trans:{}:\'path_wizards\' }}</span>\n            </button>\n\n            {{ pathShowCtrl.path.name }}\n        </h1>\n        <div data-ng-if="pathShowCtrl.path.description" data-ng-bind-html="pathShowCtrl.path.description | trustAsHtml"></div>\n\n        <!-- Breadcrumbs -->\n        <path-navigation class="hidden-xs" data-ng-if="pathShowCtrl.path.breadcrumbs && pathShowCtrl.path.steps.length !== 0"></path-navigation>\n    </div>\n\n    <!-- Summary of the Path-->\n    <path-summary-show data-title="pathShowCtrl.path.name" data-ng-if="pathShowCtrl.path.steps.length !== 0"></path-summary-show>\n\n\n    <!-- User messages -->\n    <alert-box></alert-box>\n\n    <!-- Current step -->\n    <div data-ng-view="" data-ng-if="pathShowCtrl.path.steps.length !== 0"></div>\n\n    <!-- Empty path alert -->\n    <div class="row" data-ng-if="pathShowCtrl.path.steps.length === 0">\n        <div class="col-md-6 col-md-offset-3">\n            <div class="alert alert-info text-center">\n                <span class="fa fa-fw fa-warning"></span>\n\n                <!-- Message for Users who can only read the Path -->\n                <span data-ng-if="!pathShowCtrl.editEnabled">{{ \'path_empty_user_read_only\'|trans:{}:\'path_wizards\' }}</span>\n\n                <!-- Message for Users who can edit the Path -->\n                <span data-ng-if="pathShowCtrl.editEnabled">{{ \'path_empty_user_can_edit\'|trans:{}:\'path_wizards\' }}</span>\n            </div>\n\n            <!-- Display a big button for those who can edit Paths -->\n            <button class="btn btn-block btn-primary btn-lg" data-ng-if="pathShowCtrl.editEnabled" data-ng-click="pathShowCtrl.edit()">\n                <span class="fa fa-pencil"></span>\n                {{ \'edit\'|trans:{}:\'path_wizards\' }}\n            </button>\n        </div>\n    </div>\n</div>';
},1860:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _edit=__webpack_require__(1861);var _edit2=_interopRequireDefault(_edit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PathEditDirective=function PathEditDirective(){(0,_classCallCheck3.default)(this,PathEditDirective);this.restrict="E";this.replace=true;this.controller="PathEditCtrl";this.controllerAs="pathEditCtrl";this.template=_edit2.default;this.scope={path:"=",modified:"@",published:"@"};this.bindToController=true};exports.default=PathEditDirective},1861:function(module,exports){module.exports='<div class="path-container path-form">\n    <div class="path-header">\n        <h1 class="h4">\n            {{ pathEditCtrl.path.name }}\n        </h1>\n    </div>\n\n    <!-- Summary of the Path-->\n    <path-summary-edit data-title="pathEditCtrl.path.name"></path-summary-edit>\n\n    <!-- Form of the Path -->\n    <form action="#" role="form" class="form-horizontal" method="post" name="pathform">\n        <div class="row">\n            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">\n                <div class="panel panel-default">\n                    <nav class="navbar navbar-default navbar-static-top path-edit-navbar" role="navigation">\n                        <div class="container-fluid">\n                            <div class="navbar-header">\n                                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#path-editor-navbar" aria-expanded="false">\n                                    <span class="sr-only">Toggle navigation</span>\n                                    <span class="icon-bar"></span>\n                                    <span class="icon-bar"></span>\n                                    <span class="icon-bar"></span>\n                                </button>\n                            </div>\n\n                            <div class="collapse navbar-collapse" id="path-editor-navbar">\n                                <ul class="nav navbar-nav navbar-left">\n                                    <!-- Undo from history button -->\n                                    <li data-ng-class="{ \'disabled\': pathEditCtrl.historyDisabled.undo }">\n                                        <a href="" data-ng-click="pathEditCtrl.undo()" data-placement="bottom" data-toggle="tooltip" data-original-title="{{ \'undo\'|trans:{}:\'path_wizards\' }}">\n                                            <span class="fa fa-reply"></span>\n                                            <span class="sr-only"> {{ \'undo\'|trans:{}:\'path_wizards\' }}</span>\n                                        </a>\n                                    </li>\n\n                                    <!-- Redo from history button -->\n                                    <li data-ng-class="{ \'disabled\': pathEditCtrl.historyDisabled.redo }">\n                                        <a href="" data-ng-click="pathEditCtrl.redo()" data-placement="bottom" data-toggle="tooltip" data-original-title="{{ \'redo\'|trans:{}:\'path_wizards\' }}">\n                                            <span class="fa fa-share"></span>\n                                            <span class="sr-only">{{ \'redo\'|trans:{}:\'path_wizards\' }}</span>\n                                        </a>\n                                    </li>\n                                </ul>\n\n                                <ul class="nav navbar-nav navbar-right">\n                                    <!-- Unlock management button -->\n                                    <li>\n                                        <a href="" data-ng-click="pathEditCtrl.unlockManager()">\n                                            <span class="fa fa-lock"></span> {{ \'path_dashboard\'|trans:{}:\'path_wizards\' }}\n                                        </a>\n                                    </li>\n\n                                    <!-- Save button -->\n                                    <li data-ng-class="{disabled: !pathEditCtrl.unsaved}">\n                                        <a href="" data-ng-click="pathEditCtrl.save()">\n                                            <span class="fa fa-floppy-o"></span> {{ \'save\'|trans:{}:\'path_wizards\' }}\n                                        </a>\n                                    </li>\n\n                                    <!-- Publish button -->\n                                    <li data-ng-class="{disabled: pathEditCtrl.published && !pathEditCtrl.modified}">\n                                        <a href="" data-ng-click="pathEditCtrl.publish()">\n                                            <span class="fa fa-share-square-o"></span> {{ \'publish\'|trans:{}:\'path_wizards\' }}\n                                        </a>\n                                    </li>\n\n                                    <!-- Preview button -->\n                                    <li data-ng-class="{disabled: !pathEditCtrl.published}">\n                                        <a href="" data-ng-click="pathEditCtrl.preview()">\n                                            <span class="fa fa-sign-out"></span> {{ \'preview\'|trans:{}:\'path_wizards\' }}\n                                        </a>\n                                    </li>\n                                </ul>\n\n                                <p class="navbar-text navbar-right">\n                                    <!-- User messages -->\n                                    <alert-box></alert-box>\n                                </p>\n                            </div>\n                        </div>\n                    </nav>\n\n                    <div class="panel-body" data-ng-if="!hidePath">\n                        <!-- Name of the path -->\n                        <div class="row form-group">\n                            <label class="control-label col-md-3 required" for="innova_path_name">{{ \'path_name\'|trans:{}:\'path_wizards\' }}</label>\n                            <div class="col-md-9">\n                                <input type="text" class="form-control" id="innova_path_name" name="innova_path[name]" placeholder="{{ \'name_help\'|trans:{}:\'path_wizards\' }}" data-ng-model="pathEditCtrl.path.name" />\n                            </div>\n                        </div>\n\n                        <!-- Description of the path -->\n                        <div class="row form-group">\n                            <label class="control-label col-md-3" for="innova_path_description">{{ \'path_description\'|trans:{}:\'path_wizards\' }}</label>\n                            <div class="col-md-9">\n                                <textarea data-ui-tinymce="pathEditCtrl.tinymceOptions" class="form-control" id="innova_path_description" name="innova_path[description]" placeholder="{{ \'description_help\'|trans:{}:\'path_wizards\' }}" data-ng-model="pathEditCtrl.path.description"></textarea>\n                            </div>\n                        </div>\n\n                        <!-- Does the path have a breadcrumbs ?-->\n                        <div class="row form-group">\n                            <label class="control-label col-md-3" for="innova_path_breadcrumbs">{{ \'path_breadcrumbs\'|trans:{}:\'path_wizards\' }}</label>\n                            <div class="col-md-9">\n                                <div class="checkbox">\n                                    <input type="checkbox" id="innova_path_breadcrumbs" name="innova_path[breadcrumbs]" data-ng-model="pathEditCtrl.path.breadcrumbs" />\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Is Summary opened by default ? -->\n                        <div class="row form-group">\n                            <label class="control-label col-md-3" for="innova_path_summaryDisplayed">{{ \'path_summary_displayed\'|trans:{}:\'path_wizards\' }}</label>\n                            <div class="col-md-9">\n                                <div class="checkbox">\n                                    <input type="checkbox" id="innova_path_summaryDisplayed" name="innova_path[summaryDisplayed]" data-ng-model="pathEditCtrl.path.summaryDisplayed" />\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Is a condition blocking all the following steps or just the next ? -->\n                        <div class="row form-group">\n                            <label class="control-label col-md-3" for="innova_path_completeBlockingCondition">{{ \'path_complete_blocking_condition\'|trans:{}:\'path_wizards\' }}</label>\n                            <div class="col-md-9">\n                                <div class="checkbox">\n                                    <input type="checkbox" id="innova_path_completeBlockingCondition" name="innova_path[completeBlockingCondition]" data-ng-model="pathEditCtrl.path.completeBlockingCondition" />\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Is it possible for the user to set manualy the progression when following this path  -->\n                        <div class="row form-group">\n                            <label class="control-label col-md-3" for="innova_path_manualProgressionAllowed">{{ \'path_manual_progression_allowed\'|trans:{}:\'path_wizards\' }}</label>\n                            <div class="col-md-9">\n                                <div class="checkbox">\n                                    <input type="checkbox" id="innova_path_manualProgressionAllowed" name="innova_path[manualProgressionAllowed]" data-ng-model="pathEditCtrl.path.manualProgressionAllowed" />\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="row form-group form-last">\n                            <label class="control-label col-md-3">{{ \'path_status\'|trans:{}:\'path_wizards\' }}</label>\n                            <div class="col-md-9">\n                                <!-- Path not saved -->\n                                <p data-ng-if="pathEditCtrl.unsaved" class="form-control-static text-danger">{{ \'unsaved\'|trans:{}:\'path_wizards\' }}</p>\n\n                                <!-- Path not published -->\n                                <p data-ng-if="!pathEditCtrl.published && !pathEditCtrl.unsaved" class="form-control-static text-danger">{{ \'draft\'|trans:{}:\'path_wizards\' }}</p>\n\n                                <!-- Path published without modifications -->\n                                <p data-ng-if="pathEditCtrl.published && !pathEditCtrl.modified && !pathEditCtrl.unsaved" class="form-control-static text-success">{{ \'published\'|trans:{}:\'path_wizards\' }}</p>\n\n                                <!-- Path published with modifications -->\n                                <p data-ng-if="pathEditCtrl.published && pathEditCtrl.modified && !pathEditCtrl.unsaved" class="form-control-static text-warning">{{ \'published\'|trans:{}:\'path_wizards\' }} {{ \'modified\'|trans:{}:\'path_wizards\' }}</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="panel-footer text-center toggle-path-info" data-ng-click="hidePath = !hidePath">\n                        <span class="fa fa-fw" data-ng-class="{ \'fa-angle-double-down\': hidePath, \'fa-angle-double-up\': !hidePath }"></span>\n                        <span data-ng-if="!hidePath">{{ \'hide_path_info\'|trans:{}:\'path_wizards\' }}</span>\n                        <span data-ng-if="hidePath">{{ \'show_path_info\'|trans:{}:\'path_wizards\' }}</span>\n                        <span class="fa fa-fw" data-ng-class="{ \'fa-angle-double-down\': hidePath, \'fa-angle-double-up\': !hidePath }"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Breadcrumbs -->\n        <path-navigation class="hidden-xs" data-ng-if="pathEditCtrl.path.breadcrumbs"></path-navigation>\n\n        <!-- Display current step -->\n        <div data-ng-view=""></div>\n    </form>\n</div>\n'},1862:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(247);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("PathModuleBase",["angular-loading-bar"]).config(["cfpLoadingBarProvider",function(cfpLoadingBarProvider){cfpLoadingBarProvider.latencyThreshold=200;cfpLoadingBarProvider.includeBar=false;cfpLoadingBarProvider.spinnerTemplate='<div class="loading">Loading&#8230;</div>'}])},1863:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PathApp=function(){function PathApp(){(0,_classCallCheck3.default)(this,PathApp)}(0,_createClass3.default)(PathApp,null,[{key:"run",value:function run($rootScope,$location,$anchorScroll){$rootScope.$on("$routeChangeError",function(evt,current,previous,rejection){if("step_not_found"===rejection){$location.path("/")}});$rootScope.$on("$routeChangeSuccess",function(){$anchorScroll("scroll-to-onload")})}},{key:"resolveFunctions",get:function get(){return{step:["$q","$route","PathService",function getCurrentStep($q,$route,PathService){var deferred=$q.defer();var step=null;if($route.current.params&&$route.current.params.stepId){step=PathService.getStep($route.current.params.stepId)}if(_index2.default.isDefined(step)&&_index2.default.isObject(step)){deferred.resolve(step)}else{deferred.reject("step_not_found")}return deferred.promise}],inheritedResources:["$route","PathService",function getCurrentInheritedResources($route,PathService){var inherited=[];var step=PathService.getStep($route.current.params.stepId);if(_index2.default.isDefined(step)&&_index2.default.isObject(step)){inherited=PathService.getStepInheritedResources(step)}return inherited}]}}},{key:"resolveRootFunctions",get:function get(){return{step:["PathService",function getRootStep(PathService){return PathService.getRoot()}],inheritedResources:["PathService",function getRootInheritedResources(PathService){var inherited=[];var root=PathService.getRoot();if(_index2.default.isObject(root)){inherited=PathService.getStepInheritedResources(root)}return inherited}]}}}]);return PathApp}();exports.default=PathApp},1864:function(module,exports){module.exports='<div class="row" id="scroll-to-onload">\n    <!-- No selected step alert -->\n    <div data-ng-if="!stepEditCtrl.step" class="col-md-12">\n        <div class="alert alert-info text-center">\n            {{ \'no_step_selected\'|trans:{}:\'path_wizards\' }}\n        </div>\n    </div>\n\n    <!-- Step form -->\n    <div data-ng-if="stepEditCtrl.step" class="col-md-12 panel-step">\n        <!-- Secondary resources of the Step -->\n        <resources-secondary-edit data-resources="stepEditCtrl.step.resources" data-inherited="stepEditCtrl.inheritedResources" data-excluded="stepEditCtrl.step.excludedResources"></resources-secondary-edit>\n\n        <!-- Form of the Step -->\n        <div class="panel panel-default">\n            <!-- Step level -->\n            <div class="lvl-indicator lvl lvl-{{ stepEditCtrl.step.lvl }} lvl-bg"></div>\n\n            <div class="panel-body">\n                <div class="panel-step-heading row">\n                    <!-- Previous step -->\n                    <div class="col-md-1 col-sm-2 col-xs-2 text-left">\n                        <button type="button" data-ng-click="stepEditCtrl.goTo(stepEditCtrl.previous)" class="btn btn-block btn-default" data-ng-disabled="null == stepEditCtrl.previous" data-placement="bottom" data-toggle="tooltip" data-original-title="{{ stepEditCtrl.previous.name }}">\n                            <span class="fa fa-arrow-left"></span>\n                            <span class="sr-only">previous</span>\n                        </button>\n                    </div>\n\n                    <div class="col-md-10 col-sm-8 col-xs-8">\n                        <label class="control-label sr-only" for="step-name">Step name</label>\n                        <!-- Edit step name -->\n                        <div class="input-group col-md-12">\n                            <input type="text" class="form-control text-center" name="step-name" id="step-name" data-ng-model="stepEditCtrl.step.name" />\n                            <div class="input-group-btn">\n                                <button data-ng-click="stepEditCtrl.showActivity()" class="btn btn-default" type="button" data-ng-if="stepEditCtrl.step.activityId" data-toggle="tooltip" data-container="body" title="{{ \'see_activity\'|trans:{}:\'path_wizards\' }}">\n                                    <span class="fa fa-sign-out"></span>\n                                    <span class="sr-only">{{ \'see_activity\'|trans:{}:\'path_wizards\' }}</span>\n                                </button>\n\n                                <btn-resource-picker class="btn btn-default" data-parameters="stepEditCtrl.resourcePicker" data-toggle="tooltip" data-container="body" title="{{ \'select_activity\'|trans:{}:\'path_wizards\' }}">\n                                    <span class="fa fa-folder-open"></span>\n                                    <span class="sr-only">{{ \'select_activity\'|trans:{}:\'path_wizards\' }}</span>\n                                </btn-resource-picker>\n\n                                <button data-ng-click="stepEditCtrl.deleteActivity()" class="btn btn-danger" type="button" data-ng-if="stepEditCtrl.step.activityId" data-toggle="tooltip" data-container="body" title="{{ \'delete_activity\'|trans:{}:\'path_wizards\' }}">\n                                    <span class="fa fa-trash-o"></span>\n                                    <span class="sr-only">{{ \'delete_activity\'|trans:{}:\'path_wizards\' }}</span>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Next step button -->\n                    <div class="col-md-1 col-sm-2 col-xs-2 text-right">\n                        <button type="button" data-ng-click="stepEditCtrl.goTo(stepEditCtrl.next)" class="btn btn-block btn-default" data-ng-disabled="null == stepEditCtrl.next" data-placement="bottom" data-toggle="tooltip" data-original-title="{{ stepEditCtrl.next.name }}">\n                            <span class="sr-only">next</span>\n                            <span class="fa fa-arrow-right"></span>\n                        </button>\n                    </div>\n                </div>\n\n                <!-- Description -->\n                <div class="panel panel-default">\n                    <div class="panel-heading">\n                        <h4 class="panel-title" data-ng-click="stepEditCtrl.collapsedPanels.description = !stepEditCtrl.collapsedPanels.description">\n                            <span class="fa fa-fw" data-ng-class="{ \'fa-caret-right\': stepEditCtrl.collapsedPanels.description, \'fa-caret-down\': !stepEditCtrl.collapsedPanels.description }"></span>\n                            Description\n                        </h4>\n                    </div>\n\n                    <div id="panel-description" data-ng-show="!stepEditCtrl.collapsedPanels.description">\n                        <textarea data-ui-tinymce="stepEditCtrl.tinymceOptions" data-before-unload="off" class="form-control" name="step-description" data-ng-model="stepEditCtrl.step.description"></textarea>\n                    </div>\n                </div>\n\n                <!-- Primary resource -->\n                <resources-primary-edit data-resources="stepEditCtrl.step.primaryResource"></resources-primary-edit>\n\n                <!-- Properties -->\n                <div class="panel panel-default">\n                    <div class="panel-heading">\n                        <h4 class="panel-title" data-ng-click="stepEditCtrl.collapsedPanels.properties = !stepEditCtrl.collapsedPanels.properties">\n                            <span class="fa fa-fw" data-ng-class="{ \'fa-caret-right\': stepEditCtrl.collapsedPanels.properties, \'fa-caret-down\': !stepEditCtrl.collapsedPanels.properties }"></span>\n                            {{ \'properties\'|trans:{}:\'path_wizards\' }}\n                        </h4>\n                    </div>\n\n                    <div class="panel-body" data-ng-show="!stepEditCtrl.collapsedPanels.properties">\n                        <!-- Evaluation Type -->\n                        <div class="form-group">\n                            <label class="control-label col-md-4" for="evaluation-type">{{ \'step_evaluation_type\'|trans:{}:\'path_wizards\' }}</label>\n                            <div class="col-md-8">\n                                <select class="form-control" id="evaluation-type" name="evaluation-type" data-ng-model="stepEditCtrl.step.evaluationType">\n                                    <option value="manual">{{ \'manual\'|trans:{}:\'platform\' }}</option>\n                                    <option value="automatic">{{ \'automatic\'|trans:{}:\'platform\' }}</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <!-- Min height of the Activity -->\n                        <div class="form-group">\n                            <label class="control-label col-md-4" for="activity-height">{{ \'activity_height\'|trans:{}:\'path_wizards\' }}</label>\n                            <div class="col-md-3">\n                                <div class="input-group">\n                                    <input type="text" class="form-control text-right" name="activity-height" id="activity-height" data-ng-model="stepEditCtrl.step.activityHeight" data-ng-disabled="!stepEditCtrl.step.primaryResource || stepEditCtrl.step.primaryResource.length == 0" />\n                                    <span class="input-group-addon">px</span>\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- With tutor -->\n                        <div class="form-group">\n                            <label class="control-label col-md-4" for="with-tutor">{{ \'with_tutor\'|trans:{}:\'path_wizards\' }}</label>\n                            <div class="col-md-4">\n                                <select class="form-control" name="with-tutor" id="with-tutor" data-ng-model="stepEditCtrl.step.withTutor">\n                                    <option value=""></option>\n                                    <option value="true">{{ \'yes\'|trans:{}:\'path_wizards\' }}</option>\n                                    <option value="false">{{ \'no\'|trans:{}:\'path_wizards\' }}</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <!-- Who -->\n                        <div class="form-group">\n                            <label class="control-label col-md-4" for="step-who">{{ \'step_who\'|trans:{}:\'path_wizards\' }}</label>\n                            <div class="col-md-8">\n                                <select class="form-control" id="step-who" name="step-who" data-ng-model="stepEditCtrl.step.who">\n                                    <option value=""></option>\n                                    <option value="individual">{{ \'individual\'|trans:{}:\'platform\' }}</option>\n                                    <option value="collaborative">{{ \'collaborative\'|trans:{}:\'platform\' }}</option>\n                                    <option value="mixed">{{ \'mixed\'|trans:{}:\'platform\' }}</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <!-- Where -->\n                        <div class="form-group">\n                            <label class="control-label col-md-4" for="step-where">{{ \'step_where\'|trans:{}:\'path_wizards\' }}</label>\n                            <div class="col-md-8">\n                                <select class="form-control" id="step-where" name="step-where" data-ng-model="stepEditCtrl.step.where">\n                                    <option value=""></option>\n                                    <option value="classroom">{{ \'classroom\'|trans:{}:\'platform\' }}</option>\n                                    <option value="anywhere">{{ \'anywhere\'|trans:{}:\'platform\' }}</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <!-- Duration -->\n                        <div class="form-group">\n                            <label class="control-label col-md-4" for="duration">{{ \'step_duration\'|trans:{}:\'path_wizards\' }}</label>\n                            <div class="col-md-8">\n                                <duration-field class="row" data-model="stepEditCtrl.step.duration"></duration-field>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Conditions for the Next step -->\n        <condition-edit data-ng-if="stepEditCtrl.next" data-step="stepEditCtrl.step" data-next="stepEditCtrl.next"></condition-edit>\n    </div>\n</div>\n'}});