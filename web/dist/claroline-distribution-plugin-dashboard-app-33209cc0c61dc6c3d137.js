webpackJsonp([24],{0:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(245);__webpack_require__(247);__webpack_require__(793);__webpack_require__(6);__webpack_require__(237);__webpack_require__(794);__webpack_require__(796);__webpack_require__(798);__webpack_require__(799);__webpack_require__(803);__webpack_require__(807);var _dashboards=__webpack_require__(812);var _dashboards2=_interopRequireDefault(_dashboards);var _admin=__webpack_require__(813);var _admin2=_interopRequireDefault(_admin);var _dashboard=__webpack_require__(814);var _dashboard2=_interopRequireDefault(_dashboard);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("DashboardApp",["ngRoute","angular-loading-bar","ui.fos-js-router","ui.translation","mgcrea.ngStrap.datepicker","authentication","translation","workspace","Dashboards","Admin","Dashboard"]).config(["$routeProvider","cfpLoadingBarProvider","$datepickerProvider",function DashboardAppConfig($routeProvider,cfpLoadingBarProvider,$datepickerProvider){cfpLoadingBarProvider.latencyThreshold=200;cfpLoadingBarProvider.includeBar=false;cfpLoadingBarProvider.spinnerTemplate='<div class="loading">Loading&#8230;</div>';_index2.default.extend($datepickerProvider.defaults,{dateFormat:"dd/MM/yyyy",dateType:"string",startWeek:1,iconLeft:"fa fa-fw fa-chevron-left",iconRight:"fa fa-fw fa-chevron-right",modelDateFormat:"yyyy-MM-ddTHH:mm:ss",autoclose:true});$routeProvider.when("/",{template:_dashboards2.default,controller:"DashboardsCtrl",controllerAs:"dashboardsCtrl",resolve:{user:["UserService",function userResolve(UserService){return UserService.getConnectedUser()}],dashboards:["DashboardService",function dashboardsResolve(DashboardService){return DashboardService.getAll()}]}}).when("/dashboards/:id",{template:_dashboard2.default,controller:"DashboardCtrl",controllerAs:"dashboardCtrl",resolve:{user:["UserService",function userResolve(UserService){return UserService.getConnectedUser()}],dashboard:["$route","DashboardService",function dashboardResolve($route,DashboardService){var promise=null;if($route.current.params&&$route.current.params.id){promise=DashboardService.getOne($route.current.params.id)}return promise}],data:["$route","DashboardService",function dashboardResolve($route,DashboardService){var promise=null;if($route.current.params&&$route.current.params.id){promise=DashboardService.getDashboardData($route.current.params.id)}return promise}]}}).when("/new",{template:_admin2.default,controller:"AdminDashboardCtrl",controllerAs:"adminDashboardCtrl",resolve:{user:["UserService",function userResolve(UserService){return UserService.getConnectedUser()}],workspaces:["WorkspaceService",function workspacesResolve(WorkspaceService){return WorkspaceService.getConnectedUserWorkspaces()}],nbDashboards:["DashboardService",function nbDashboardResolve(DashboardService){return DashboardService.countDashboards()}],dashboard:[function dashboardResolve(){var today=new Date;var dashboardDefaultName=today.getFullYear()+"-"+(today.getMonth()+1)+"-"+today.getDate();return{name:dashboardDefaultName}}]}}).when("/dashboards/:id/edit",{template:_admin2.default,controller:"AdminDashboardCtrl",controllerAs:"adminDashboardCtrl",resolve:{user:["UserService",function userResolve(UserService){return UserService.getConnectedUser()}],workspaces:["WorkspaceService",function workspacesResolve(WorkspaceService){return WorkspaceService.getConnectedUserWorkspaces()}],nbDashboards:["DashboardService",function nbDashboardResolve(DashboardService){return DashboardService.countDashboards()}],dashboard:["$route","DashboardService",function dashboardResolve($route,DashboardService){var promise=null;if($route.current.params&&$route.current.params.id){promise=DashboardService.getOne($route.current.params.id)}return promise}]}}).otherwise({redirectTo:"/"})}])},448:function(module,exports,__webpack_require__){"use strict";__webpack_require__(10);var _angularBootstrap=__webpack_require__(5);var _angularBootstrap2=_interopRequireDefault(_angularBootstrap);var _ConfirmModalDirective=__webpack_require__(449);var _ConfirmModalDirective2=_interopRequireDefault(_ConfirmModalDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}angular.module("ui.modal",["ui.bootstrap"]).directive("confirmModal",["$uibModal",function(){return new _ConfirmModalDirective2.default}])},449:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _ConfirmModalController=__webpack_require__(450);var _ConfirmModalController2=_interopRequireDefault(_ConfirmModalController);var _confirmModal=__webpack_require__(451);var _confirmModal2=_interopRequireDefault(_confirmModal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ConfirmModalDirective=function ConfirmModalDirective(){(0,_classCallCheck3.default)(this,ConfirmModalDirective);this.restrict="A";this.replace=false;this.scope={content:"@confirmModal",confirmCallback:"&confirmModalAction",cancelCallback:"&confirmModalCancel"};this.bindToController=true;this.controllerAs="modalCtrl";this.controller=["$uibModal",function(){function ModalCtrl($uibModal){(0,_classCallCheck3.default)(this,ModalCtrl);this.$uibModal=$uibModal}(0,_createClass3.default)(ModalCtrl,[{key:"open",value:function open(){var _this=this;var message=this.content;this.$uibModal.open({template:_confirmModal2.default,controller:_ConfirmModalController2.default,controllerAs:"confirmCtrl",resolve:{content:function content(){return message}}}).result.then(function(d){if(typeof _this.confirmCallback==="function"){_this.confirmCallback()}},function(d){if(typeof _this.cancelCallback==="function"){_this.cancelCallback()}})}}]);return ModalCtrl}()];this.link=function link(scope,element,attr,controller){element.on("click",controller.open.bind(controller));scope.$on("$destroy",function(){element.off("click",controller.open.bind(controller))})}};exports.default=ConfirmModalDirective},450:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ConfirmModalController=function(){function ConfirmModalController($uibModalInstance,content){(0,_classCallCheck3.default)(this,ConfirmModalController);this.$uibModalInstance=$uibModalInstance;this.content=content}(0,_createClass3.default)(ConfirmModalController,[{key:"cancel",value:function cancel(){this.$uibModalInstance.dismiss("cancel")}},{key:"confirm",value:function confirm(){this.$uibModalInstance.close()}}]);return ConfirmModalController}();exports.default=ConfirmModalController},451:function(module,exports){module.exports='<div class="modal-body" data-ng-bind-html="confirmCtrl.content"></div>\n\n<div class="modal-footer">\n    <button class="btn btn-primary" data-ng-click="confirmCtrl.confirm()">\n        {{ \'confirm\' | trans:{}:\'platform\' }}\n    </button>\n    <button class="btn btn-default cancel" data-ng-click="confirmCtrl.cancel()">\n        {{ \'cancel\' | trans:{}:\'platform\' }}\n    </button>\n</div>'},793:function(module,exports,__webpack_require__){module.exports=__webpack_require__(3)(8)},794:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _WorkspaceService=__webpack_require__(795);var _WorkspaceService2=_interopRequireDefault(_WorkspaceService);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("workspace",[]).service("WorkspaceService",["$http","$q","url",_WorkspaceService2.default])},795:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WorkspaceService=function(){function WorkspaceService($http,$q,url){(0,_classCallCheck3.default)(this,WorkspaceService);this.$http=$http;this.$q=$q;this.UrlService=url}(0,_createClass3.default)(WorkspaceService,[{key:"getConnectedUserWorkspaces",value:function getConnectedUserWorkspaces(){var deferred=this.$q.defer();this.$http.get(this.UrlService("api_get_connected_user_workspaces",{})).success(function onSuccess(response){deferred.resolve(response)}.bind(this)).error(function onError(response){deferred.reject(response)});return deferred.promise}}]);return WorkspaceService}();exports.default=WorkspaceService},796:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _UserService=__webpack_require__(797);var _UserService2=_interopRequireDefault(_UserService);__webpack_require__(237);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("authentication",[]).service("UserService",["$http","$q","url",_UserService2.default])},797:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UserService=function(){function UserService($http,$q,url){(0,_classCallCheck3.default)(this,UserService);this.$http=$http;this.$q=$q;this.UrlService=url}(0,_createClass3.default)(UserService,[{key:"getConnectedUser",value:function getConnectedUser(){var deferred=this.$q.defer();this.$http.get(this.UrlService("api_get_connected_user",{})).success(function onSuccess(response){deferred.resolve(response)}.bind(this)).error(function onError(response){deferred.reject(response)});return deferred.promise}},{key:"connectedUserIsAdmin",value:function connectedUserIsAdmin(user){return user.roles&&user.roles.length>0&&user.roles.find(function(el){return el.name==="ROLE_ADMIN"})!==undefined}}]);return UserService}();exports.default=UserService},798:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("translation",[]).service("Translator",function(){return Translator})},799:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(237);var _DashboardService=__webpack_require__(800);var _DashboardService2=_interopRequireDefault(_DashboardService);var _DashboardsCtrl=__webpack_require__(801);var _DashboardsCtrl2=_interopRequireDefault(_DashboardsCtrl);var _SecondsToHmsFilter=__webpack_require__(802);var _SecondsToHmsFilter2=_interopRequireDefault(_SecondsToHmsFilter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Dashboards",[]).controller("DashboardsCtrl",["user","dashboards","DashboardService",_DashboardsCtrl2.default]).service("DashboardService",["$http","$q","url",_DashboardService2.default]).filter("secondsToHms",[_SecondsToHmsFilter2.default])},800:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DashboardService=function(){function DashboardService($http,$q,url){(0,_classCallCheck3.default)(this,DashboardService);this.$http=$http;this.$q=$q;this.UrlService=url}(0,_createClass3.default)(DashboardService,[{key:"create",value:function create(data){var deferred=this.$q.defer();this.$http.post(this.UrlService("create_dashboard",{}),data).success(function(response){deferred.resolve(response)}).error(function(){deferred.reject([])});return deferred.promise}},{key:"update",value:function update(data){var deferred=this.$q.defer();this.$http.put(this.UrlService("update_dashboard",{dashboardId:data.id}),data).success(function(response){deferred.resolve(response)}).error(function(){deferred.reject([])});return deferred.promise}},{key:"delete",value:function _delete(id){var deferred=this.$q.defer();this.$http.delete(this.UrlService("delete_dashboard",{dashboardId:id})).success(function(response){deferred.resolve(response)}).error(function(){deferred.reject([])});return deferred.promise}},{key:"getAll",value:function getAll(){var deferred=this.$q.defer();this.$http.get(this.UrlService("get_dashboards",{})).success(function(response){deferred.resolve(response)}).error(function(){deferred.reject([])});return deferred.promise}},{key:"getOne",value:function getOne(id){var deferred=this.$q.defer();this.$http.get(this.UrlService("get_dashboard",{dashboardId:id})).success(function(response){deferred.resolve(response)}).error(function(){deferred.reject([])});return deferred.promise}},{key:"getDashboardData",value:function getDashboardData(id){var deferred=this.$q.defer();this.$http.get(this.UrlService("get_dashboard_spent_times",{dashboardId:id})).success(function(response){deferred.resolve(response)}).error(function(){deferred.reject([])});return deferred.promise}},{key:"getDashboardDataByWorkspace",value:function getDashboardDataByWorkspace(id){var deferred=this.$q.defer();this.$http.get(this.UrlService("get_dashboard_spent_times_by_workspace",{workspaceId:id})).success(function(response){deferred.resolve(response)}).error(function(){deferred.reject([])});return deferred.promise}},{key:"countDashboards",value:function countDashboards(){var deferred=this.$q.defer();this.$http.get(this.UrlService("get_nb_dashboards",{})).success(function(response){deferred.resolve(response)}).error(function(){deferred.reject([])});return deferred.promise}}]);return DashboardService}();exports.default=DashboardService},801:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DashboardsCtrl=function(){function DashboardsCtrl(user,dashboards,DashboardService){(0,_classCallCheck3.default)(this,DashboardsCtrl);this.user=user;this.dashboards=dashboards;this.DashboardService=DashboardService}(0,_createClass3.default)(DashboardsCtrl,[{key:"delete",value:function _delete(id){var promise=this.DashboardService.delete(id);promise.then(function(){var deleted=this.dashboards.find(function(el){return el.id===id});this.dashboards.splice(this.dashboards.indexOf(deleted),1)}.bind(this))}}]);return DashboardsCtrl}();exports.default=DashboardsCtrl},802:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function SecondsToHmsFilter(){return function(d){d=Number(d);var result="";if(d>0){var hours=Math.floor(d/3600);var minutes=Math.floor(d%3600/60);var seconds=Math.floor(d%3600%60);if(hours<10){hours="0"+hours}if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}result=hours+" h "+minutes+"' "+seconds+"''"}else{result="00 h 00' 00''"}return result}}exports.default=SecondsToHmsFilter},803:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _DashboardCtrl=__webpack_require__(804);var _DashboardCtrl2=_interopRequireDefault(_DashboardCtrl);var _DetailsDirective=__webpack_require__(805);var _DetailsDirective2=_interopRequireDefault(_DetailsDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Dashboard",["Dashboards"]).controller("DashboardCtrl",["Translator","WorkspaceService","DashboardService","user","dashboard","data",_DashboardCtrl2.default]).directive("dashboardDetails",[_DetailsDirective2.default])},804:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DashboardCtrl=function DashboardCtrl(Translator,WorkspaceService,DashboardService,user,dashboard,data){(0,_classCallCheck3.default)(this,DashboardCtrl);this.WorkspaceService=WorkspaceService;this.Translator=Translator;this.DashboardService=DashboardService;this.user=user;this.dashboard=dashboard;this.data=data};exports.default=DashboardCtrl},805:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=DetailsDirective;var _details=__webpack_require__(806);var _details2=_interopRequireDefault(_details);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DetailsDirective(){return{restrict:"E",replace:true,template:_details2.default,scope:{computed:"=",dashboard:"=",user:"="}}}},806:function(module,exports){module.exports="<div class=\"row\">\n    <div class=\"col-md-12\">\n        <h4>{{'selection' | trans:{}:'dashboard'}} : {{dashboard.workspace.name}}</h4>\n        <hr>\n        <table data-ng-if=\"computed.length > 0\"  class=\"table table-striped\">\n          <thead>\n            <th>{{'user' | trans:{}:'platform'}}</th>\n            <th>{{'connection_time' | trans:{}:'dashboard'}}</th>\n          </thead>\n          <tbody>\n            <tr data-ng-repeat=\"entry in computed\">\n              <td>{{entry.user.firstName}} {{entry.user.lastName}}</td>\n              <td>{{entry.time | secondsToHms}}</td>\n            </tr>\n          </tbody>\n        </table>\n        <h5 data-ng-if=\"computed.length === 0\">{{'no_result_for_query' | trans:{}:'dashboard'}}</h5>\n    </div>\n</div>\n"},807:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(5);__webpack_require__(793);__webpack_require__(6);__webpack_require__(448);__webpack_require__(237);__webpack_require__(799);__webpack_require__(803);var _StepOneDirective=__webpack_require__(808);var _StepOneDirective2=_interopRequireDefault(_StepOneDirective);var _StepOneCtrl=__webpack_require__(810);var _StepOneCtrl2=_interopRequireDefault(_StepOneCtrl);var _AdminDashboardCtrl=__webpack_require__(811);var _AdminDashboardCtrl2=_interopRequireDefault(_AdminDashboardCtrl);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("Admin",["ngRoute","ui.translation","ui.bootstrap","ui.modal","mgcrea.ngStrap.datepicker","Dashboards","Dashboard"]).controller("AdminDashboardCtrl",["$location","Translator","DashboardService","workspaces","user","nbDashboards","dashboard",_AdminDashboardCtrl2.default]).controller("StepOneCtrl",["Translator","DashboardService",_StepOneCtrl2.default]).directive("stepOne",[_StepOneDirective2.default])},808:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=StepOneDirective;var _stepOne=__webpack_require__(809);var _stepOne2=_interopRequireDefault(_stepOne);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StepOneDirective(){return{restrict:"E",replace:true,controller:"StepOneCtrl",controllerAs:"stepOneCtrl",template:_stepOne2.default,scope:{workspaces:"=",dashboard:"=",user:"="},bindToController:true}}},809:function(module,exports){module.exports='<div class="row">\n    <div class="col-md-12">\n        <div class="form-inline">\n            <div class="form-group">\n                <label for="dashboardName">{{\'name\' | trans:{}:\'platform\'}}</label>\n                <input type="text" class="form-control" id="dashboardName" data-ng-model="stepOneCtrl.dashboard.name" placeholder="Enter a name">\n            </div>\n        </div>\n        <hr>\n        <div class="row">\n            <div class="col-md-12">\n                <h4>{{\'new_dashboard_step_1\' | trans:{}:\'dashboard\'}}</h4>\n            </div>\n        </div>\n        <hr>\n        <!-- WORKSPACES LIST FILTER -->\n        <select name="workspace" data-ng-model="stepOneCtrl.selectedFilter" data-ng-change="stepOneCtrl.filterList()" class="form-control">\n            <option data-ng-repeat="filter in stepOneCtrl.filters" value="{{filter.value}}">{{filter.name}}</option>\n        </select>\n\n        <hr>\n        <!-- WORKSPACES LIST -->\n        <table class="table table-striped">\n            <thead>\n                <th>{{\'workspace_name\' | trans:{}:\'dashboard\'}}</th>\n                <th>{{\'workspace_select\' | trans:{}:\'dashboard\'}}</th>\n            </thead>\n            <tbody>\n                <tr data-ng-repeat="workspace in stepOneCtrl.filtered">\n                    <td>{{workspace.name}}</td>\n                    <td>\n                      <input type="radio" name="workspaces" data-ng-value="workspace.id" data-ng-change="stepOneCtrl.selectedWorkspaceChanged(workspace)" data-ng-model="stepOneCtrl.dashboard.workspace.id">\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n        <hr>\n    </div>\n</div>\n'},810:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StepOneCtrl=function(){function StepOneCtrl(Translator,DashboardService){(0,_classCallCheck3.default)(this,StepOneCtrl);this.Translator=Translator;this.DashboardService=DashboardService;this.filtered=[];this.filters=[{value:"MY",name:Translator.trans("workspaces_filter_my",{},"dashboard")},{value:"FOLLOWING",name:Translator.trans("workspaces_filter_attended",{},"dashboard")}];this.selectedFilter=this.dashboard.workspace!==undefined&&this.dashboard.workspace.creatorId===this.user.id||this.dashboard.workspace===undefined?"MY":"FOLLOWING";this.filterList()}(0,_createClass3.default)(StepOneCtrl,[{key:"filterList",value:function filterList(){var _this=this;if(this.selectedFilter==="MY"){this.filtered=this.workspaces.filter(function(el){return el.creatorId===_this.user.id})}else{this.filtered=this.workspaces.filter(function(el){return el.creatorId!==_this.user.id})}}},{key:"selectedWorkspaceChanged",value:function selectedWorkspaceChanged(workspace){this.dashboard.workspace=workspace}}]);return StepOneCtrl}();exports.default=StepOneCtrl},811:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AdminDashboardCtrl=function(){function AdminDashboardCtrl($location,Translator,DashboardService,workspaces,user,nbDashboards,dashboard){(0,_classCallCheck3.default)(this,AdminDashboardCtrl);this.$location=$location;this.Translator=Translator;this.DashboardService=DashboardService;this.workspaces=workspaces;this.user=user;this.dashboard=dashboard;this.isEditMode=this.dashboard.id!==undefined?true:false;if(!this.isEditMode){this.dashboard.name+="-"+Translator.trans("view",{},"dashboard")+(nbDashboards+1);this.dashboard.creatorId=this.user.id}this.computed={};this.currentStep=1;this.nbSteps=1;this.isLastStep=this.currentStep>this.nbSteps;this.isPreview=false}(0,_createClass3.default)(AdminDashboardCtrl,[{key:"setStep",value:function setStep(number){this.currentStep=number;this.isLastStep=this.currentStep>this.nbSteps;if(this.isLastStep){this.getDashboardDataForPreview(this.dashboard.workspace.id)}else{this.isPreview=false}}},{key:"getDashboardDataForPreview",value:function getDashboardDataForPreview(id){var promise=this.DashboardService.getDashboardDataByWorkspace(id);promise.then(function(result){this.computed=result;this.isPreview=true;this.isLastStep=false}.bind(this))}},{key:"saveDashboard",value:function saveDashboard(){if(this.dashboard.id){var promise=this.DashboardService.update(this.dashboard);promise.then(function(){this.$location.path("/")}.bind(this))}else{var _promise=this.DashboardService.create(this.dashboard);_promise.then(function(){this.$location.path("/")}.bind(this))}}}]);return AdminDashboardCtrl}();exports.default=AdminDashboardCtrl},812:function(module,exports){module.exports='<div class="panel-heading">\n    <h3 class="panel-title">{{\'dashboards\' | trans:{}:\'tools\'}}</h3>\n</div>\n<div class="panel-body">\n    <!-- create new view row -->\n    <div class="row">\n        <div class="col-md-12">\n            <a class="btn btn-primary" href="#/new" title="{{\'click_to_add_view\' | trans:{}:\'dashboard\'}}">\n               <i class="fa fa-plus"></i> {{\'view\' | trans:{}:\'dashboard\'}}\n            </a>\n        </div>\n    </div>\n    <hr>\n    <!-- view list row -->\n    <div class="row" data-ng-if="dashboardsCtrl.dashboards.length > 0">\n        <div class="col-md-12">\n            <table class="table table-striped">\n                <thead>\n                    <th>{{\'view_name\' | trans:{}:\'dashboard\'}}</th>\n                    <th>{{\'actions\' | trans:{}:\'platform\'}}</th>\n                </thead>\n                <tbody>\n                    <tr data-ng-repeat="dashboard in dashboardsCtrl.dashboards">\n                        <td>\n                            <a href="#/dashboards/{{dashboard.id}}">{{dashboard.name}}</a>\n                        </td>\n                        <td>\n                          <a href="#/dashboards/{{dashboard.id}}/edit" class="btn btn-default" title="{{\'edit_view\' | trans:{}:\'dashboard\'}}">\n                            <i class="fa fa-pencil"></i> {{\'edit\' | trans:{}:\'platform\'}}\n                          </a>\n                          <button class="btn btn-danger" title="{{\'delete_view\' | trans:{}:\'dashboard\'}}" data-ng-click="dashboardsCtrl.delete(dashboard.id)">\n                            <i class="fa fa-trash"></i> {{\'delete\' | trans:{}:\'platform\'}}\n                          </button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n\n    <!-- view no item in list row -->\n    <div class="row" data-ng-if="dashboardsCtrl.dashboards.length === 0">\n        <div class="col-md-12">\n            <h3>{{\'message_no_views\' | trans:{}:\'dashboard\'}}</h3>\n        </div>\n    </div>\n</div>\n'},813:function(module,exports){module.exports='<div class="panel-heading">\n    <h3 data-ng-if="adminDashboardCtrl.isEditMode === false" class="panel-title">{{\'new_dashboard_title\' | trans:{}:\'dashboard\'}}</h3>\n    <h3 data-ng-if="adminDashboardCtrl.isEditMode === true" class="panel-title">{{\'edit_dashboard_title\' | trans:{}:\'dashboard\'}} - {{adminDashboardCtrl.dashboard.name}} </h3>\n</div>\n<div class="panel-body">\n    <!-- ADMIN DASHBOARD STEP ONE :: WORKSPACE CHOICE -->\n    <step-one data-ng-if="adminDashboardCtrl.currentStep === 1 && !adminDashboardCtrl.isPreview" data-user="adminDashboardCtrl.user" data-workspaces="adminDashboardCtrl.workspaces" data-dashboard="adminDashboardCtrl.dashboard"></step-one>\n    <!-- ADMIN DASHBOARD PREVIEW QUERY -->\n    <dashboard-details data-ng-if="adminDashboardCtrl.isPreview" data-user="adminDashboardCtrl.user" data-computed="adminDashboardCtrl.computed" data-dashboard="adminDashboardCtrl.dashboard"><dashboard-details>\n</div>\n<div class="panel-footer">\n  <div class="row">\n    <div class="col-md-12 text-right">\n        <button class="btn btn-default" data-ng-if="adminDashboardCtrl.currentStep > 1" data-ng-click="adminDashboardCtrl.setStep(adminDashboardCtrl.currentStep - 1)">{{\'previous\' | trans:{}:\'platform\'}}</button>\n        <a class="btn btn-default" href="#/">{{\'cancel\' | trans:{}:\'platform\'}}</a>\n        <button class="btn btn-primary" data-ng-if="adminDashboardCtrl.currentStep <= adminDashboardCtrl.nbSteps" data-ng-click="adminDashboardCtrl.setStep(adminDashboardCtrl.currentStep + 1)">{{\'next\' | trans:{}:\'dashboard\'}}</button>\n        <button  data-ng-if="adminDashboardCtrl.isPreview" class="btn btn-primary" data-ng-click="adminDashboardCtrl.saveDashboard()">{{\'save\' | trans:{}:\'platform\'}}</button>\n    </div>\n  </div>\n</div>\n'},814:function(module,exports){module.exports='<div class="panel-heading">\n    <h3 class="panel-title">{{\'view\' | trans:{}:\'dashboard\'}}\n        -\n        {{dashboardCtrl.dashboard.name}}</h3>\n</div>\n<div class="panel-body">\n    <!-- dashboard details row -->\n    <dashboard-details data-user="dashboardCtrl.user" data-computed="dashboardCtrl.data" data-dashboard="createDashboardCtrl.dashboard"><dashboard-details>\n</div>\n<div class="panel-footer">\n  <div class="row text-right">\n    <div class="col-md-12">\n      <a href="#/" class="btn btn-default">{{\'back_to_list\' | trans:{}:\'dashboard\'}}</a>\n    </div>\n  </div>\n</div>\n'}});