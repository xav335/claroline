webpackJsonp([9],{0:function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(123);var _jquery2=_interopRequireDefault(_jquery);var _underscore=__webpack_require__(282);var _underscore2=_interopRequireDefault(_underscore);__webpack_require__(283);__webpack_require__(284);__webpack_require__(285);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var tinymce=window.tinymce;var home=window.Claroline.Home;var translator=window.Translator;var routing=window.Routing;tinymce.DOM.loadCSS(home.asset+"packages/claroline-tinymce-mention/css/autocomplete.css");var codemirrorPath=home.asset+"packages/tinymce-codemirror/plugins/codemirror/codemirror-4.8";tinymce.claroline={disableBeforeUnload:false,domChange:null,buttons:{},plugins:{}};tinymce.claroline.init=tinymce.claroline.init||{};tinymce.claroline.plugins=tinymce.claroline.plugins||{};tinymce.claroline.editorChange=function(editor){setTimeout(function(){var container=(0,_jquery2.default)(editor.getContainer()).find("iframe").first();var height=container.contents().height();var max="autoresize_max_height";var min="autoresize_min_height";switch(true){case height<=tinymce.claroline.configuration[min]:container.css("height",tinymce.claroline.configuration[min]);break;case height>=tinymce.claroline.configuration[max]:container.css("height",tinymce.claroline.configuration[max]);container.css("overflow","scroll");break;default:container.css("height",height)}},500)};tinymce.claroline.paste=function(plugin,args){if((0,_jquery2.default)("#platform-configuration").attr("data-enable-opengraph")==="1"){var link=(0,_jquery2.default)("<div>"+args.content+"</div>").text().trim();home.canGenerateContent(link,function(data){tinymce.activeEditor.insertContent("<div>"+data+"</div>");tinymce.claroline.editorChange(tinymce.activeEditor)})}};tinymce.claroline.checkBeforeUnload=function(){if(!tinymce.claroline.disableBeforeUnload){for(var id in tinymce.editors){if(tinymce.editors.hasOwnProperty(id)&&tinymce.editors[id].isBeforeUnloadActive&&tinymce.editors[id].getContent()!==""&&(0,_jquery2.default)(tinymce.editors[id].getElement()).data("saved")){return true}}}return false};tinymce.claroline.setBeforeUnloadActive=function(editor){if((0,_jquery2.default)(editor.getElement()).data("before-unload")!=="off"){editor.isBeforeUnloadActive=true}else{editor.isBeforeUnloadActive=false}};tinymce.claroline.toggleFullscreen=function(element){(0,_jquery2.default)(element).parents(".modal").first().toggleClass("fullscreen")};tinymce.claroline.setup=function(editor){editor.on("change",function(){if(editor.getElement()){editor.getElement().value=editor.getContent();if(editor.isBeforeUnloadActive){(0,_jquery2.default)(editor.getElement()).data("saved","false");tinymce.claroline.disableBeforeUnload=false}}}).on("LoadContent",function(){tinymce.claroline.editorChange(editor);tinymce.claroline.customInit(editor)});editor.on("BeforeRenderUI",function(){editor.theme.panel.find("toolbar").slice(1).hide()});editor.addButton("displayAllButtons",{icon:"none fa fa-chevron-down",classes:"widget btn",tooltip:translator.trans("tinymce_all_buttons",{},"platform"),onclick:function onclick(){if(!this.active()){this.active(true);editor.theme.panel.find("toolbar").slice(1).show()}else{this.active(false);editor.theme.panel.find("toolbar").slice(1).hide()}}});tinymce.claroline.setBeforeUnloadActive(editor);(0,_jquery2.default)("body").bind("ajaxComplete",function(){setTimeout(function(){if(editor.getElement()&&editor.getElement().value===""){editor.setContent("")}},200)})};tinymce.claroline.mentionsSource=function(query,process,delimiter){if(!_underscore2.default.isUndefined(window.Workspace)&&!_underscore2.default.isNull(window.Workspace.id)){if(delimiter==="@"&&query.length>0){var searchUserInWorkspaceUrl=routing.generate("claro_user_search_in_workspace")+"/";_jquery2.default.getJSON(searchUserInWorkspaceUrl+window.Workspace.id+"/"+query,function(data){if(!_underscore2.default.isEmpty(data)&&!_underscore2.default.isUndefined(data.users)&&!_underscore2.default.isEmpty(data.users)){process(data.users)}})}}};tinymce.claroline.mentionsItem=function(item){var avatar='<i class="fa fa-user"></i>';if(item.avatar!==null){avatar='<img src="'+home.asset+"uploads/pictures/"+item.avatar+'" alt="'+item.name+'" class="img-responsive">'}return"<li>"+'<a href="javascript:;"><span class="user-picker-dropdown-avatar">'+avatar+"</span>"+'<span class="user-picker-dropdown-name">'+item.name+"</span>"+'<small class="user-picker-avatar-mail text-muted">('+item.mail+")</small></a>"+"</li>"};tinymce.claroline.mentionsInsert=function(item){var publicProfileUrl=routing.generate("claro_public_profile_view")+"/";return'<user id="'+item.id+'"><a href="'+publicProfileUrl+item.id+'">'+item.name+"</a></user>"};var homeTheme=document.getElementById("homeTheme");var themeCSS=homeTheme.innerText||homeTheme.textContent;tinymce.claroline.configuration={paste_data_images:true,relative_urls:false,remove_script_host:false,theme:"modern",language:home.locale.trim(),browser_spellcheck:true,autoresize_min_height:100,autoresize_max_height:500,content_css:[themeCSS,home.asset+"bundles/clarolinecore/css/common/tinymce.css",home.asset+"packages/font-awesome/css/font-awesome.min.css"],toolbar2:"styleselect | undo redo | forecolor backcolor | bullist numlist | outdent indent | "+"media link charmap | print preview code",extended_valid_elements:"user[id], a[data-toggle|data-parent], span[*]",paste_preprocess:tinymce.claroline.paste,setup:tinymce.claroline.setup,mentions:{source:tinymce.claroline.mentionsSource,render:tinymce.claroline.mentionsRender,insert:tinymce.claroline.mentionsInsert,delay:200},picker:{openResourcesInNewTab:false},codemirror:{path:codemirrorPath}};tinymce.claroline.customInit=function(editor){_jquery2.default.each(tinymce.claroline.init,function(key,func){func(editor)})};tinymce.claroline.initialization=function(){(0,_jquery2.default)("textarea.claroline-tiny-mce:not(.tiny-mce-done)").each(function(){var element=(0,_jquery2.default)(this);var config=null;var plugins=["autoresize advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars fullscreen","insertdatetime media nonbreaking save table directionality","template paste textcolor emoticons code -mention -accordion -codemirror"];var toolbar1="bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | fullscreen displayAllButtons";_jquery2.default.each(tinymce.claroline.plugins,function(key,value){if(value===true){plugins.push(key);toolbar1+=" "+key}});tinymce.claroline.configuration.plugins=plugins;tinymce.claroline.configuration.toolbar1=toolbar1;if(element.data("newTab")==="yes"){config=_underscore2.default.extend({},tinymce.claroline.configuration);config.picker.openResourcesInNewTab=true}else{config=tinymce.claroline.configuration}element.tinymce(config).on("remove",function(){var editor=tinymce.get(element.attr("id"));if(editor){editor.destroy()}}).addClass("tiny-mce-done")})};(0,_jquery2.default)("body").bind("ajaxComplete",function(){tinymce.claroline.initialization()}).on("click",'.mce-widget.mce-btn[aria-label="Fullscreen"]',function(){tinymce.claroline.toggleFullscreen(this);(0,_jquery2.default)(window).scrollTop((0,_jquery2.default)(this).parents(".mce-tinymce.mce-container.mce-panel").first().offset().top);window.dispatchEvent(new window.Event("resize"))}).bind("DOMSubtreeModified",function(){clearTimeout(tinymce.claroline.domChange);tinymce.claroline.domChange=setTimeout(tinymce.claroline.initialization,10)}).on("click","form *[type=submit]",function(){tinymce.claroline.disableBeforeUnload=true});(0,_jquery2.default)(document).ready(function(){tinymce.claroline.initialization()});(0,_jquery2.default)(window).on("beforeunload",function(){if(tinymce.claroline.checkBeforeUnload()){return translator.trans("leave_this_page",{},"platform")}})},282:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(){var root=this;var previousUnderscore=root._;var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create;var Ctor=function(){};var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(true){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.8.3";var optimizeCb=function(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value)};case 2:return function(value,other){return func.call(context,value,other)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}};var cb=function(value,context,argCount){if(value==null)return _.identity;if(_.isFunction(value))return optimizeCb(value,context,argCount);if(_.isObject(value))return _.matcher(value);return _.property(value)};_.iteratee=function(value,context){return cb(value,context,Infinity)};var createAssigner=function(keysFunc,undefinedOnly){return function(obj){var length=arguments.length;if(length<2||obj==null)return obj;for(var index=1;index<length;index++){var source=arguments[index],keys=keysFunc(source),l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if(!undefinedOnly||obj[key]===void 0)obj[key]=source[key]}}return obj}};var baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;Ctor.prototype=null;return result};var property=function(key){return function(obj){return obj==null?void 0:obj[key]}};var MAX_ARRAY_INDEX=Math.pow(2,53)-1;var getLength=property("length");var isArrayLike=function(collection){var length=getLength(collection);return typeof length=="number"&&length>=0&&length<=MAX_ARRAY_INDEX};_.each=_.forEach=function(obj,iteratee,context){iteratee=optimizeCb(iteratee,context);var i,length;if(isArrayLike(obj)){for(i=0,length=obj.length;i<length;i++){iteratee(obj[i],i,obj)}}else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++){iteratee(obj[keys[i]],keys[i],obj)}}return obj};_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length);for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results};function createReduce(dir){function iterator(obj,iteratee,memo,keys,index,length){for(;index>=0&&index<length;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo}return function(obj,iteratee,memo,context){iteratee=optimizeCb(iteratee,context,4);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=dir>0?0:length-1;if(arguments.length<3){memo=obj[keys?keys[index]:index];index+=dir}return iterator(obj,iteratee,memo,keys,index,length)}}_.reduce=_.foldl=_.inject=createReduce(1);_.reduceRight=_.foldr=createReduce(-1);_.find=_.detect=function(obj,predicate,context){var key;if(isArrayLike(obj)){key=_.findIndex(obj,predicate,context)}else{key=_.findKey(obj,predicate,context)}if(key!==void 0&&key!==-1)return obj[key]};_.filter=_.select=function(obj,predicate,context){var results=[];predicate=cb(predicate,context);_.each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value)});return results};_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context)};_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false}return true};_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true}return false};_.contains=_.includes=_.include=function(obj,item,fromIndex,guard){if(!isArrayLike(obj))obj=_.values(obj);if(typeof fromIndex!="number"||guard)fromIndex=0;return _.indexOf(obj,item,fromIndex)>=0};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){var func=isFunc?method:value[method];return func==null?func:func.apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,_.property(key))};_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs))};_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs))};_.max=function(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value>result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=value;lastComputed=computed}})}return result};_.min=function(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value<result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=value;lastComputed=computed}})}return result};_.shuffle=function(obj){var set=isArrayLike(obj)?obj:_.values(obj);var length=set.length;var shuffled=Array(length);for(var index=0,rand;index<length;index++){rand=_.random(0,index);if(rand!==index)shuffled[index]=shuffled[rand];shuffled[rand]=set[index]}return shuffled};_.sample=function(obj,n,guard){if(n==null||guard){if(!isArrayLike(obj))obj=_.values(obj);return obj[_.random(obj.length-1)]}return _.shuffle(obj).slice(0,Math.max(0,n))};_.sortBy=function(obj,iteratee,context){iteratee=cb(iteratee,context);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iteratee,context){var result={};iteratee=cb(iteratee,context);_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)});return result}};_.groupBy=group(function(result,value,key){if(_.has(result,key))result[key].push(value);else result[key]=[value]});_.indexBy=group(function(result,value,key){result[key]=value});_.countBy=group(function(result,value,key){if(_.has(result,key))result[key]++;else result[key]=1});_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(isArrayLike(obj))return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return isArrayLike(obj)?obj.length:_.keys(obj).length};_.partition=function(obj,predicate,context){predicate=cb(predicate,context);var pass=[],fail=[];_.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value)});return[pass,fail]};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];return _.initial(array,array.length-n)};_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)))};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return _.rest(array,Math.max(0,array.length-n))};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,strict,startIndex){var output=[],idx=0;for(var i=startIndex||0,length=getLength(input);i<length;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value))){if(!shallow)value=flatten(value,shallow,strict);var j=0,len=value.length;output.length+=len;while(j<len){output[idx++]=value[j++]}}else if(!strict){output[idx++]=value}}return output};_.flatten=function(array,shallow){return flatten(array,shallow,false)};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iteratee,context){if(!_.isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false}if(iteratee!=null)iteratee=cb(iteratee,context);var result=[];var seen=[];for(var i=0,length=getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;if(isSorted){if(!i||seen!==computed)result.push(value);seen=computed}else if(iteratee){if(!_.contains(seen,computed)){seen.push(computed);result.push(value)}}else if(!_.contains(result,value)){result.push(value)}}return result};_.union=function(){return _.uniq(flatten(arguments,true,true))};_.intersection=function(array){var result=[];var argsLength=arguments.length;for(var i=0,length=getLength(array);i<length;i++){var item=array[i];if(_.contains(result,item))continue;for(var j=1;j<argsLength;j++){if(!_.contains(arguments[j],item))break}if(j===argsLength)result.push(item)}return result};_.difference=function(array){var rest=flatten(arguments,true,true,1);return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){return _.unzip(arguments)};_.unzip=function(array){var length=array&&_.max(array,getLength).length||0;var result=Array(length);for(var index=0;index<length;index++){result[index]=_.pluck(array,index)}return result};_.object=function(list,values){var result={};for(var i=0,length=getLength(list);i<length;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};function createPredicateIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);var length=getLength(array);var index=dir>0?0:length-1;for(;index>=0&&index<length;index+=dir){if(predicate(array[index],index,array))return index}return-1}}_.findIndex=createPredicateIndexFinder(1);_.findLastIndex=createPredicateIndexFinder(-1);_.sortedIndex=function(array,obj,iteratee,context){iteratee=cb(iteratee,context,1);var value=iteratee(obj);var low=0,high=getLength(array);while(low<high){var mid=Math.floor((low+high)/2);if(iteratee(array[mid])<value)low=mid+1;else high=mid}return low};function createIndexFinder(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=getLength(array);if(typeof idx=="number"){if(dir>0){i=idx>=0?idx:Math.max(idx+length,i)}else{length=idx>=0?Math.min(idx+1,length):idx+length+1}}else if(sortedIndex&&idx&&length){idx=sortedIndex(array,item);return array[idx]===item?idx:-1}if(item!==item){idx=predicateFind(slice.call(array,i,length),_.isNaN);return idx>=0?idx+i:-1}for(idx=dir>0?i:length-1;idx>=0&&idx<length;idx+=dir){if(array[idx]===item)return idx}return-1}}_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex);_.lastIndexOf=createIndexFinder(-1,_.findLastIndex);_.range=function(start,stop,step){if(stop==null){stop=start||0;start=0}step=step||1;var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start}return range};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype);var result=sourceFunc.apply(self,args);if(_.isObject(result))return result;return self};_.bind=function(func,context){if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");var args=slice.call(arguments,2);var bound=function(){return executeBound(func,bound,context,this,args.concat(slice.call(arguments)))};return bound};_.partial=function(func){var boundArgs=slice.call(arguments,1);var bound=function(){var position=0,length=boundArgs.length;var args=Array(length);for(var i=0;i<length;i++){args[i]=boundArgs[i]===_?arguments[position++]:boundArgs[i]}while(position<arguments.length)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound};_.bindAll=function(obj){var i,length=arguments.length,key;if(length<=1)throw new Error("bindAll must be passed function names");for(i=1;i<length;i++){key=arguments[i];obj[key]=_.bind(obj[key],obj)}return obj};_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=""+(hasher?hasher.apply(this,arguments):key);if(!_.has(cache,address))cache[address]=func.apply(this,arguments);return cache[address]};memoize.cache={};return memoize};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=_.partial(_.delay,_,1);_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null}previous=now;result=func.apply(context,args);if(!timeout)context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait&&last>=0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result}};_.wrap=function(func,wrapper){return _.partial(wrapper,func)};_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}};_.compose=function(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.before=function(times,func){var memo;return function(){if(--times>0){memo=func.apply(this,arguments)}if(times<=1)func=null;return memo}};_.once=_.partial(_.before,2);var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString");var nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length;var constructor=obj.constructor;var proto=_.isFunction(constructor)&&constructor.prototype||ObjProto;var prop="constructor";if(_.has(obj,prop)&&!_.contains(keys,prop))keys.push(prop);while(nonEnumIdx--){prop=nonEnumerableProps[nonEnumIdx];if(prop in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop)){keys.push(prop)}}}_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.allKeys=function(obj){if(!_.isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]]}return values};_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=_.keys(obj),length=keys.length,results={},currentKey;for(var index=0;index<length;index++){currentKey=keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj)}return results};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]]}return pairs};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i]}return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=createAssigner(_.allKeys);_.extendOwn=_.assign=createAssigner(_.keys);_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);var keys=_.keys(obj),key;for(var i=0,length=keys.length;i<length;i++){key=keys[i];if(predicate(obj[key],key,obj))return key}};_.pick=function(object,oiteratee,context){var result={},obj=object,iteratee,keys;if(obj==null)return result;if(_.isFunction(oiteratee)){keys=_.allKeys(obj);iteratee=optimizeCb(oiteratee,context)}else{keys=flatten(arguments,false,false,1);iteratee=function(value,key,obj){return key in obj};obj=Object(obj)}for(var i=0,length=keys.length;i<length;i++){var key=keys[i];var value=obj[key];if(iteratee(value,key,obj))result[key]=value}return result};_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee)){iteratee=_.negate(iteratee)}else{var keys=_.map(flatten(arguments,false,false,1),String);iteratee=function(value,key){return!_.contains(keys,key)}}return _.pick(obj,iteratee,context)};_.defaults=createAssigner(_.allKeys,true);_.create=function(prototype,props){var result=baseCreate(prototype);if(props)_.extendOwn(result,props);return result};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(object==null)return!length;var obj=Object(object);for(var i=0;i<length;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return false}return true};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case"[object RegExp]":case"[object String]":return""+a===""+b;case"[object Number]":if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var areArrays=className==="[object Array]";if(!areArrays){if(typeof a!="object"||typeof b!="object")return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&("constructor"in a&&"constructor"in b)){return false}}aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b}aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)return false;while(length--){if(!eq(a[length],b[length],aStack,bStack))return false}}else{var keys=_.keys(a),key;length=keys.length;if(_.keys(b).length!==length)return false;while(length--){key=keys[length];if(!(_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))return false}}aStack.pop();bStack.pop();return true};_.isEqual=function(a,b){return eq(a,b)};_.isEmpty=function(obj){if(obj==null)return true;if(isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj)))return obj.length===0;return _.keys(obj).length===0};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==="[object Array]"};_.isObject=function(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj};_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return _.has(obj,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){_.isFunction=function(obj){return typeof obj=="function"||false}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)==="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return obj!=null&&hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.constant=function(value){return function(){return value}};_.noop=function(){};_.property=property;_.propertyOf=function(obj){return obj==null?function(){}:function(key){return obj[key]}};_.matcher=_.matches=function(attrs){attrs=_.extendOwn({},attrs);return function(obj){return _.isMatch(obj,attrs)}};_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var unescapeMap=_.invert(escapeMap);var createEscaper=function(map){var escaper=function(match){return map[match]};var source="(?:"+_.keys(map).join("|")+")";var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,"g");return function(string){string=string==null?"":""+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap);_.unescape=createEscaper(unescapeMap);_.result=function(object,property,fallback){var value=object==null?void 0:object[property];if(value===void 0){value=fallback}return _.isFunction(value)?value.call(object):value};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\u2028|\u2029/g;var escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,escapeChar);index=offset+match.length;if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}else if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}else if(evaluate){source+="';\n"+evaluate+"\n__p+='"}return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";
try{var render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}var template=function(data){return render.call(this,data,_)};var argument=settings.variable||"obj";template.source="function("+argument+"){\n"+source+"}";return template};_.chain=function(obj){var instance=_(obj);instance._chain=true;return instance};var result=function(instance,obj){return instance._chain?_(obj).chain():obj};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result(this,func.apply(_,args))}})};_.mixin(_);_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name==="shift"||name==="splice")&&obj.length===0)delete obj[0];return result(this,obj)}});_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result(this,method.apply(this._wrapped,arguments))}});_.prototype.value=function(){return this._wrapped};_.prototype.valueOf=_.prototype.toJSON=_.prototype.value;_.prototype.toString=function(){return""+this._wrapped};if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return _}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}}).call(this)},283:function(module,exports){(function(e,t){"use strict";var n=function(e,n){this.editor=e;this.options=t.extend({},{source:[],delay:500,queryBy:"name",items:10},n);this.matcher=this.options.matcher||this.matcher;this.renderDropdown=this.options.renderDropdown||this.renderDropdown;this.render=this.options.render||this.render;this.insert=this.options.insert||this.insert;this.highlighter=this.options.highlighter||this.highlighter;this.query="";this.hasFocus=true;this.renderInput();this.bindEvents()};n.prototype={constructor:n,renderInput:function(){var e='<span id="autocomplete">'+'<span id="autocomplete-delimiter">'+this.options.delimiter+"</span>"+'<span id="autocomplete-searchtext"><span class="dummy">\ufeff</span></span>'+"</span>";this.editor.execCommand("mceInsertContent",false,e);this.editor.focus();this.editor.selection.select(this.editor.selection.dom.select("span#autocomplete-searchtext span")[0]);this.editor.selection.collapse(0)},bindEvents:function(){this.editor.on("keyup",this.editorKeyUpProxy=t.proxy(this.rteKeyUp,this));this.editor.on("keydown",this.editorKeyDownProxy=t.proxy(this.rteKeyDown,this));this.editor.on("click",this.editorClickProxy=t.proxy(this.rteClicked,this));var e=this.editor.__bindings.keydown.pop();this.editor.__bindings.keydown.unshift(e);t(this.editor.getWin()).on("scroll",this.rteScroll=t.proxy(function(){this.cleanUp(true)},this));t("body").on("click",this.bodyClickProxy=t.proxy(this.rteLostFocus,this))},unbindEvents:function(){this.editor.off("keyup",this.editorKeyUpProxy);this.editor.off("keydown",this.editorKeyDownProxy);this.editor.on("click",this.editorClickProxy);t(this.editor.getWin()).off("scroll",this.rteScroll);t("body").off("click",this.bodyClickProxy)},rteKeyUp:function(e){switch(e.which||e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 8:if(this.query===""){this.cleanUp(true)}else{this.lookup()}break;case 9:case 13:var t=this.$dropdown!==undefined?this.$dropdown.find("li.active"):[];if(t.length){this.select(t.data());this.cleanUp(false)}else{this.cleanUp(true)}break;case 27:this.cleanUp(true);break;default:this.lookup()}},rteKeyDown:function(e){switch(e.which||e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault();if(this.$dropdown!==undefined){this.highlightPreviousResult()}break;case 40:e.preventDefault();if(this.$dropdown!==undefined){this.highlightNextResult()}break}e.stopPropagation()},rteClicked:function(e){var n=t(e.target);if(this.hasFocus&&n.parent().attr("id")!=="autocomplete-searchtext"){this.cleanUp(true)}},rteLostFocus:function(e,t){if(this.hasFocus){this.cleanUp(true)}},lookup:function(){this.query=t.trim(t(this.editor.getBody()).find("#autocomplete-searchtext").text()).replace("\ufeff","");if(this.$dropdown===undefined){this.show()}clearTimeout(this.searchTimeout);this.searchTimeout=setTimeout(t.proxy(function(){var e=t.isFunction(this.options.source)?this.options.source(this.query,t.proxy(this.process,this),this.options.delimiter):this.options.source;if(e){this.process(e)}},this),this.options.delay)},matcher:function(e){return~e[this.options.queryBy].toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while((i=e.shift())!==undefined){if(!i[this.options.queryBy].toLowerCase().indexOf(this.query.toLowerCase())){t.push(i)}else if(~i[this.options.queryBy].indexOf(this.query)){n.push(i)}else{r.push(i)}}return t.concat(n,r)},highlighter:function(e){return e.replace(new RegExp("("+this.query+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},show:function(){var e=t(this.editor.getContainer()).offset(),n=t(this.editor.getContentAreaContainer()).position(),r=t(this.editor.dom.select("span#autocomplete")).position(),i=e.top+n.top+r.top+t(this.editor.selection.getNode()).innerHeight()-t(this.editor.getDoc()).scrollTop()+5,s=e.left+n.left+r.left;this.$dropdown=t(this.renderDropdown()).css({top:i,left:s});t("body").append(this.$dropdown);this.$dropdown.on("click",t.proxy(this.autoCompleteClick,this))},process:function(e){if(!this.hasFocus){return}var n=this,r=[],i=t.grep(e,function(e){return n.matcher(e)});i=n.sorter(i);i=i.slice(0,this.options.items);t.each(i,function(e,s){var o=t(n.render(s));o.html(o.html().replace(o.text(),n.highlighter(o.text())));t.each(i[e],function(e,t){o.attr("data-"+e,t)});r.push(o[0].outerHTML)});if(r.length){this.$dropdown.html(r.join("")).show()}else{this.$dropdown.hide()}},renderDropdown:function(){return'<ul class="rte-autocomplete dropdown-menu"><li class="loading"></li></ul>'},render:function(e){return"<li>"+'<a href="javascript:;"><span>'+e.name+"</span></a>"+"</li>"},autoCompleteClick:function(e){var n=t(e.target).closest("li").data();if(!t.isEmptyObject(n)){this.select(n);this.cleanUp(false)}e.stopPropagation();e.preventDefault()},highlightPreviousResult:function(){var e=this.$dropdown.find("li.active").index(),t=e===0?this.$dropdown.find("li").length-1:--e;this.$dropdown.find("li").removeClass("active").eq(t).addClass("active")},highlightNextResult:function(){var e=this.$dropdown.find("li.active").index(),t=e===this.$dropdown.find("li").length-1?0:++e;this.$dropdown.find("li").removeClass("active").eq(t).addClass("active")},select:function(e){this.editor.focus();var t=this.editor.dom.select("span#autocomplete")[0];this.editor.dom.remove(t);this.editor.execCommand("mceInsertContent",false,this.insert(e)+"&nbsp;")},insert:function(e){return"<span>"+e.name+"</span>"},cleanUp:function(e){this.unbindEvents();this.hasFocus=false;if(this.$dropdown!==undefined){this.$dropdown.remove();delete this.$dropdown}if(e){var n=this.query,r=t(this.editor.dom.select("span#autocomplete")),i=t("<p>"+this.options.delimiter+n+"</p>")[0].firstChild,s=t(this.editor.selection.getNode()).offset().top===r.offset().top+(r.outerHeight()-r.height())/2;this.editor.dom.replace(i,r[0]);if(s){this.editor.selection.select(i);this.editor.selection.collapse()}}}};e.create("tinymce.plugins.Mention",{init:function(e,r){function o(){var n=t(e.selection.getNode()).is("a"),r=e.selection.getRng().startOffset,i=e.selection.getRng().startContainer.textContent,s=i.substr(r-1,1);return n||!!t.trim(s).length?false:true}var i,s=e.getParam("mentions");s.delimiter=s.delimiter!==undefined?!t.isArray(s.delimiter)?[s.delimiter]:s.delimiter:["@"];e.on("keypress",function(r){var u=t.inArray(String.fromCharCode(r.which||r.keyCode),s.delimiter);if(u>-1&&o()){if(i===undefined||i.hasFocus!==undefined&&!i.hasFocus){r.preventDefault();i=new n(e,t.extend({},s,{delimiter:s.delimiter[u]}))}}})},getInfo:function(){return{longname:"mention",author:"Steven Devooght",version:e.majorVersion+"."+e.minorVersion}}});e.PluginManager.add("mention",e.plugins.Mention)})(tinymce,jQuery)},284:function(module,exports){tinymce.PluginManager.requireLangPack("codemirror");tinymce.PluginManager.add("codemirror",function(a,c){function b(){a.focus();a.selection.collapse(!0);a.selection.setContent('<span class="CmCaReT" style="display:none">&#0;</span>');var b=a.windowManager.open({title:"HTML source code",url:c+"/source.html",width:800,height:550,resizable:!0,maximizable:!0,buttons:[{text:"Ok",subtype:"primary",onclick:function(){document.querySelectorAll(".mce-container-body>iframe")[0].contentWindow.submit();b.close()}},{text:"Cancel",onclick:"close"}]})}a.addButton("code",{title:"Source code",icon:"code",onclick:b});a.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:b})})},285:function(module,exports){"use strict";var tinymce=window.tinymce;var home=window.Claroline.Home;tinymce.PluginManager.requireLangPack("codemirror");tinymce.PluginManager.add("codemirror",function(editor,url){function showSourceEditor(){editor.focus();editor.selection.collapse(true);editor.selection.setContent('<span class="CmCaReT" style="display:none">&#0;</span>');var win=editor.windowManager.open({title:"HTML source code",url:home.asset+"packages/tinymce-codemirror/plugins/codemirror/source.html",width:800,height:550,resizable:true,maximizable:true,buttons:[{text:"Ok",subtype:"primary",onclick:function onclick(){var doc=document.querySelectorAll(".mce-container-body>iframe")[0];doc.contentWindow.submit();win.close()}},{text:"Cancel",onclick:"close"}]})}editor.addButton("code",{title:"Source code",icon:"code",onclick:showSourceEditor});editor.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:showSourceEditor})})}});