webpackJsonp([44],{0:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(5);__webpack_require__(245);__webpack_require__(441);__webpack_require__(224);__webpack_require__(247);__webpack_require__(246);__webpack_require__(442);__webpack_require__(6);__webpack_require__(237);__webpack_require__(1941);var _tinymce=__webpack_require__(1942);var _tinymce2=_interopRequireDefault(_tinymce);var _interceptor=__webpack_require__(1943);var _interceptor2=_interopRequireDefault(_interceptor);var _wiki=__webpack_require__(1944);var _wiki2=_interopRequireDefault(_wiki);var _messages=__webpack_require__(1945);var _messages2=_interopRequireDefault(_messages);var _messagesPartial=__webpack_require__(1946);var _messagesPartial2=_interopRequireDefault(_messagesPartial);var _wikiPartial=__webpack_require__(1947);var _wikiPartial2=_interopRequireDefault(_wikiPartial);var _wikiController=__webpack_require__(1948);var _wikiController2=_interopRequireDefault(_wikiController);var _treeController=__webpack_require__(1951);var _treeController2=_interopRequireDefault(_treeController);var _treeComponent=__webpack_require__(1952);var _treeComponent2=_interopRequireDefault(_treeComponent);var _tree=__webpack_require__(1953);var _tree2=_interopRequireDefault(_tree);var _node_rendererPartial=__webpack_require__(1954);var _node_rendererPartial2=_interopRequireDefault(_node_rendererPartial);var _section_rendererPartial=__webpack_require__(1955);var _section_rendererPartial2=_interopRequireDefault(_section_rendererPartial);var _optionsPartial=__webpack_require__(1956);var _optionsPartial2=_interopRequireDefault(_optionsPartial);var _sectionPartial=__webpack_require__(1957);var _sectionPartial2=_interopRequireDefault(_sectionPartial);var _section=__webpack_require__(1958);var _section2=_interopRequireDefault(_section);var _contributionPartial=__webpack_require__(1959);var _contributionPartial2=_interopRequireDefault(_contributionPartial);var _contribution=__webpack_require__(1960);var _contribution2=_interopRequireDefault(_contribution);var _diffPartial=__webpack_require__(1961);var _diffPartial2=_interopRequireDefault(_diffPartial);var _diff=__webpack_require__(1962);var _diff2=_interopRequireDefault(_diff);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.element(document).ready(function(){_index2.default.bootstrap(_index2.default.element(document).find("body")[0],["WikiModule"],{strictDi:true})});_index2.default.module("WikiModule",["ui.bootstrap","ngRoute","ui.tinymce","ui.tree","angular-loading-bar","ngResource","angular-loading-bar","ngAnimate","ui.translation","ui.fos-js-router","cfp.loadingBar","datetime"]).run(["$templateCache",function($templateCache){$templateCache.put("node_renderer.html",_node_rendererPartial2.default);$templateCache.put("section_renderer.html",_section_rendererPartial2.default)}]).run(["$anchorScroll",function($anchorScroll){$anchorScroll.yOffset=80}]).service("tinyMceConfig",_tinymce2.default).service("WikiService",_wiki2.default).service("TreeService",_tree2.default).factory("Messages",function(){return[]}).factory("wikiModal",["$uibModal",function($modal){return{open:function open(template,scope,element){return $modal.open({template:template,scope:scope,resolve:{sectionToDelete:element}})}}}]).factory("restInterceptor",["$location","Messages","transFilter",function($location,Messages,transFilter){return new _interceptor2.default($location,Messages,transFilter)}]).controller("wikiController",_wikiController2.default).controller("treeController",_treeController2.default).controller("messagesController",_messages2.default).controller("sectionController",_section2.default).controller("contributionController",_contribution2.default).controller("diffController",_diff2.default).directive("dynamicHeader",["$compile",function($compile){return{restrict:"E",transclude:true,link:function link(scope,element,attr){var html=element.html();if(isFinite(attr.level)){var level=attr.level*1+1;if(level<2){level=2}if(level>4){level=4}var domElement=document.createElement("h"+level);_index2.default.element(domElement).html(html).addClass(attr.class);var e=$compile(domElement)(scope);element.replaceWith(e)}}}}]).directive("emitEvent",function(){return{restrict:"A",link:function link(scope,element,attrs){scope.$emit("ngRepeatLoop",scope.$index,scope[attrs.emitEvent])}}}).directive("flattenedTreeOptions",["WikiService",function(wikiService){var recur=function recur(tree){var flattenedTree=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var loop=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var treeLength=tree.length;for(var i=0;i<treeLength;i++){if(tree[i].activeContribution.title){var nbsps=Array(tree[i].level).join("&nbsp;");var numbering=(loop+"."+(i+1)).substring(3);var title=tree[i].activeContribution.title;flattenedTree.push({id:tree[i].id,title:""+nbsps+numbering+" "+title})}if("__children"in tree[i]){recur(tree[i].__children,flattenedTree,loop+"."+(i+1))}}return flattenedTree};return{restrict:"A",link:function link(scope,element){var titles=recur(wikiService.sections);for(var key in recur(wikiService.sections)){var domElement=document.createElement("option");var angularElement=_index2.default.element(domElement);angularElement.html(titles[key].title).attr("value",titles[key].id);element.append(domElement)}}}}]).directive("section",function(){return{restrict:"A",controller:_section2.default,controllerAs:"cvm",require:["?^^section","section"],link:{pre:function pre($scope,element,attr,ctrl){if(ctrl[0]===null){ctrl[1].parent=ctrl[1].wiki.sections[0]}else{ctrl[1].parent=ctrl[0]}}}}}).directive("wikiMessages",function(){return{restrict:"E",controllerAs:"vm",controller:_messages2.default,template:_messagesPartial2.default}}).directive("wikiBreadcrumbs",function(){return{restrict:"A",controller:_wikiController2.default,controllerAs:"vm",scope:true}}).directive("wikiTree",function(){return{restrict:"E",controllerAs:"vm",controller:"treeController",template:_treeComponent2.default}}).filter("trustedHtml",["$sce",function($sce){return function(text){return $sce.trustAsHtml(text)}}]).filter("htmlToPlaintext",function(){return function(text){return text?String(text).replace(/<[^>]+>/gm,""):""}}).filter("convertAPIDate",["datetime",function(datetime){return function(text){try{var parser=datetime("yyyy-MM-dd HH:mm:ss");var dateToParse=String(text).substring(0,19);parser.parse(dateToParse);return parser.getDate()}catch(err){return String(text)}}}]).filter("datetime",["dateFilter","transFilter",function(dateFilter,transFilter){return function(text){return dateFilter(text,transFilter("angular_date_format",{},"icap_wiki"))}}]).config(["$routeProvider","$locationProvider","$httpProvider",function($routeProvider,$locationProvider,$httpProvider){$locationProvider.html5Mode({enabled:false,requireBase:true});$routeProvider.when("/",{template:_wikiPartial2.default,controllerAs:"vm",controller:_wikiController2.default,resolve:{breadcrumbs:["$route","WikiService",function($route,wikiService){$route.current.params.breadcrumbs=[{title:wikiService.title}]}]}}).when("/options",{template:_optionsPartial2.default,controllerAs:"vm",controller:_wikiController2.default,resolve:{breadcrumbs:["$route","WikiService","transFilter",function($route,wikiService,transFilter){$route.current.params.breadcrumbs=[{title:wikiService.title,link:"/"},{title:transFilter("options","icap_wiki")}]}]}}).when("/section/:sectionId",{template:_sectionPartial2.default,controllerAs:"vm",controller:"sectionController",resolve:{breadcrumbs:["$route","WikiService","transFilter",function($route,wikiService,transFilter){$route.current.params.breadcrumbs=[{title:wikiService.title,link:"/"},{title:transFilter("history","icap_wiki")}]}]}}).when("/section/:sectionId/contribution/:contributionId",{template:_contributionPartial2.default,controllerAs:"vm",controller:"contributionController",resolve:{breadcrumbs:["$route","WikiService","transFilter",function($route,wikiService,transFilter){$route.current.params.breadcrumbs=[{title:wikiService.title,link:"/"},{title:transFilter("history","icap_wiki"),link:"/section/"+$route.current.params.sectionId},{title:transFilter("contribution","icap_wiki")}]}]}}).when("/section/:sectionId/compare/:oldId/:newId",{template:_diffPartial2.default,controllerAs:"vm",controller:"diffController",resolve:{breadcrumbs:["$route","WikiService","transFilter",function($route,wikiService,transFilter){$route.current.params.breadcrumbs=[{title:wikiService.title,link:"/"},{title:transFilter("history","icap_wiki"),link:"/section/"+$route.current.params.sectionId},{title:transFilter("revision_comparison","icap_wiki")}]}]}}).otherwise("/");$httpProvider.interceptors.push("restInterceptor")}])},276:function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(277),__esModule:true}},277:function(module,exports,__webpack_require__){__webpack_require__(278);var $Object=__webpack_require__(20).Object;module.exports=function getOwnPropertyNames(it){return $Object.getOwnPropertyNames(it)}},278:function(module,exports,__webpack_require__){__webpack_require__(162)("getOwnPropertyNames",function(){return __webpack_require__(81).f})},442:function(module,exports,__webpack_require__){module.exports=__webpack_require__(3)(5)},1941:function(module,exports,__webpack_require__){module.exports=__webpack_require__(3)(42)},1942:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getOwnPropertyNames=__webpack_require__(276);var _getOwnPropertyNames2=_interopRequireDefault(_getOwnPropertyNames);var _getIterator2=__webpack_require__(557);var _getIterator3=_interopRequireDefault(_getIterator2);var _keys=__webpack_require__(179);var _keys2=_interopRequireDefault(_keys);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _weakMap=__webpack_require__(254);var _weakMap2=_interopRequireDefault(_weakMap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _tinymce=new _weakMap2.default;var tinyMceConfig=function(){function tinyMceConfig(){(0,_classCallCheck3.default)(this,tinyMceConfig);_tinymce.set(this,window.tinymce);_tinymce.get(this).claroline.init=_tinymce.get(this).claroline.init||{};_tinymce.get(this).claroline.plugins=_tinymce.get(this).claroline.plugins||{};this._setFromTinymceConfiguration(_tinymce.get(this).claroline.configuration);this._setPluginsToolbarAndFormat();this._configurationOverrides();this._hacks()}(0,_createClass3.default)(tinyMceConfig,[{key:"_setPluginsToolbarAndFormat",value:function _setPluginsToolbarAndFormat(){var plugins=["autoresize advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars fullscreen","insertdatetime media nonbreaking save table directionality","template paste textcolor emoticons code -accordion -codemirror"];var toolbar1="bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | fullscreen displayAllButtons";var tinyPlugins=_tinymce.get(this).claroline.plugins;(0,_keys2.default)(tinyPlugins).forEach(function(key){var value=tinyPlugins[key];if("autosave"!=key&&value===true){plugins.push(key);toolbar1+=" "+key}});this.plugins=plugins;this.toolbar1=toolbar1}},{key:"_setFromTinymceConfiguration",value:function _setFromTinymceConfiguration(config){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=(0,_getIterator3.default)((0,_getOwnPropertyNames2.default)(config)),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var prop=_step.value;this[prop]=config[prop]}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}},{key:"_configurationOverrides",value:function _configurationOverrides(){this.autoresize_max_height=false}},{key:"_hacks",value:function _hacks(){this.setup=function(ed){ed.on("init",function(){var oldApply=ed.formatter.apply;ed.formatter.apply=function apply(name,vars,node){oldApply(name,vars,node);ed.fire("ExecCommand",{name:name,vars:vars})}})}}}]);return tinyMceConfig}();exports.default=tinyMceConfig},1943:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _weakMap=__webpack_require__(254);var _weakMap2=_interopRequireDefault(_weakMap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _$location=new _weakMap2.default;var _Messages=new _weakMap2.default;var _transFilter=new _weakMap2.default;var InterceptorFactory=function(){function InterceptorFactory($location,Messages,transFilter){(0,_classCallCheck3.default)(this,InterceptorFactory);_$location.set(this,$location);_Messages.set(this,Messages);_transFilter.set(this,transFilter)}(0,_createClass3.default)(InterceptorFactory,[{key:"_setMessage",value:function _setMessage(type,msg){_Messages.get(this).push({type:type,msg:_transFilter.get(this)(msg,{},"icap_wiki")})}},{key:"responseError",get:function get(){var _this=this;return function(rejection){switch(rejection.status){case 401:_this._setMessage("warning","error_401");_$location.get(_this).path("/");break;case 404:_this._setMessage("warning","error_404");break;case 500:_this._setMessage("danger","error_500");break}}}}]);return InterceptorFactory}();exports.default=InterceptorFactory},1944:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getIterator2=__webpack_require__(557);var _getIterator3=_interopRequireDefault(_getIterator2);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _weakMap=__webpack_require__(254);var _weakMap2=_interopRequireDefault(_weakMap);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _wiki=new _weakMap2.default;var _$resource=new _weakMap2.default;var _$q=new _weakMap2.default;var _url=new _weakMap2.default;var _transFilter=new _weakMap2.default;var WikiService=function(){function WikiService($resource,wiki,$q,url,transFilter){(0,_classCallCheck3.default)(this,WikiService);_wiki.set(this,wiki);_$resource.set(this,$resource);_$q.set(this,$q);_url.set(this,url);_transFilter.set(this,transFilter);this.displayedSection=null;this.diff=null;this.oldWiki=_index2.default.copy(_wiki.get(this))}(0,_createClass3.default)(WikiService,[{key:"setDisplayedSection",value:function setDisplayedSection(id){if(!this.displayedSection){this.displayedSection=this._recursiveSearch(this.sections,"id",id)}if(this.displayedSection&&!("contributions"in this.displayedSection)){return this.loadContributions(this.displayedSection)}return _$q.get(this).resolve()}},{key:"setDisplayedContribution",value:function setDisplayedContribution(id){if(!this.displayedContribution&&this.displayedSection){this.displayedContribution=this._recursiveSearch(this.displayedSection.contributions,"id",id)}}},{key:"loadContributions",value:function loadContributions(section){var url=_url.get(this)("icap_wiki_api_get_wiki_section_contribution",{wiki:this.id,section:section.id});var Contribution=_$resource.get(this)(url);var contribution=Contribution.get(function(){section.contributions=contribution.response});return contribution.$promise}},{key:"setDiffContributions",value:function setDiffContributions(sectionId,oldId,newId){var _this=this;var url=_url.get(this)("icap_wiki_api_get_wiki_section_contribution_diff",{wiki:this.id,section:sectionId,oldContributionId:oldId,newContributionId:newId});var Diff=_$resource.get(this)(url);var diff=Diff.get(function(){_this.diff=diff.response})}},{key:"_recursiveSearch",value:function _recursiveSearch(haystack,key,value){var withParent=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var parent=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=(0,_getIterator3.default)(haystack),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var element=_step.value;if(element[key]===value){if(withParent){element.parent=parent}return element}if("__children"in element){var found=this._recursiveSearch(element.__children,key,value,withParent,element);if(found)return found}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return null}},{key:"addSection",value:function addSection(parent){var newSection=this.newEmptySection;newSection.parentId=parent.id;newSection.level=parent.level+1;parent.__children.push(newSection)}},{key:"editSection",value:function editSection(section,newContrib,updatedSection){var _this2=this;var url=_url.get(this)("icap_wiki_api_post_wiki_section_contribution",{wiki:this.id,section:section.id,visible:updatedSection.visible,referenceSectionId:updatedSection.referenceSectionId,isBrother:updatedSection.isBrother});var Contribution=_$resource.get(this)(url);var contribution=new Contribution(newContrib);contribution.contributor=this.activeUserId;contribution.parentSectionId=section.parentId;if(!("title"in contribution)){contribution.title=this.title}return contribution.$save(function(success){_this2.sections=success.sections})}},{key:"updateSection",value:function updateSection(sect,updatedSec){var _this3=this;var url=_url.get(this)("icap_wiki_api_put_wiki_section",{wiki:this.id,section:sect.id,visible:updatedSec.visible,referenceSectionId:updatedSec.referenceSectionId,isBrother:!!updatedSec.isBrother});var Section=_$resource.get(this)(url,null,{update:{method:"PUT"}});var section=new Section(updatedSec);return section.$update(function(success){_this3.sections=success.sections})}},{key:"defineAsActive",value:function defineAsActive(section,contribution){var url=_url.get(this)("icap_wiki_api_patch_wiki_section_contribution",{wiki:this.id,section:section.id,contribution:contribution.id});var Contribution=_$resource.get(this)(url,null,{setActive:{method:"PATCH"}});var contrib=new Contribution(contribution);return contrib.$setActive(function(){contribution.is_active=true;section.activeContribution=contribution})}},{key:"toggleVisibility",value:function toggleVisibility(sect){var url=_url.get(this)("icap_wiki_api_put_wiki_section",{wiki:this.id,section:sect.id,visible:!sect.visible});var Section=_$resource.get(this)(url,null,{update:{method:"PUT"}});var section=new Section(sect);return section.$update(function(){sect.visible=!sect.visible})}},{key:"updateOptions",value:function updateOptions(){var _this4=this;this.oldWiki=_index2.default.copy(_wiki.get(this));var url=_url.get(this)("icap_wiki_api_patch_wiki",{wiki:this.id});var Wiki=_$resource.get(this)(url,null,{updateOptions:{method:"PATCH"}});var wiki=new Wiki(_wiki.get(this));return wiki.$updateOptions(function(){},function(){_this4.revertOptions()})}},{key:"revertOptions",value:function revertOptions(){this.wiki=this.oldWiki}},{key:"softDeleteSection",value:function softDeleteSection(sect,withChildren){var _this5=this;var url=_url.get(this)("icap_wiki_api_delete_wiki_section",{wiki:this.id,section:sect.id});var Section=_$resource.get(this)(url,{withChildren:withChildren});var section=new Section(sect);return section.$delete(function(success){_this5.sections=success.sections;_this5.deletedSections=success.deletedSections})}},{key:"hardDeleteSection",value:function hardDeleteSection(sect,idx){var _this6=this;var url=_url.get(this)("icap_wiki_api_delete_wiki_section",{wiki:this.id,section:sect.id});var Section=_$resource.get(this)(url);var section=new Section(sect);return section.$delete(function(){_this6.deletedSections.splice(idx,1)})}},{key:"restoreSection",value:function restoreSection(sect){var _this7=this;var url=_url.get(this)("icap_wiki_api_patch_wiki_section",{wiki:this.id,section:sect.id});var Section=_$resource.get(this)(url,null,{restore:{method:"PATCH"}});var section=new Section(sect);return section.$restore(function(){var restoredSectionIdx=_this7.deletedSections.indexOf(sect);var restoredSection=_this7.deletedSections.splice(restoredSectionIdx,1)[0];restoredSection.deleted=false;restoredSection.deletionDate=null;_this7.sections[0].__children.push(restoredSection)})}},{key:"activeUserId",get:function get(){return _wiki.get(this).activeUserId}},{key:"id",get:function get(){return _wiki.get(this).id}},{key:"title",get:function get(){return _wiki.get(this).title}},{key:"mode",get:function get(){return _wiki.get(this).mode},set:function set(mode){_wiki.get(this).mode=mode}},{key:"displaySectionNumbers",get:function get(){return _wiki.get(this).displaySectionNumbers},set:function set(displaySectionNumbers){_wiki.get(this).displaySectionNumbers=displaySectionNumbers}},{key:"isLoggedIn",get:function get(){return _wiki.get(this).isLoggedIn}},{key:"isAdmin",get:function get(){return _wiki.get(this).isAdmin}},{key:"isPDFExportActive",get:function get(){return _wiki.get(this).isPDFExportActive}},{key:"sections",get:function get(){return _wiki.get(this).sections},set:function set(sections){_wiki.get(this).sections=sections}},{key:"deletedSections",get:function get(){return _wiki.get(this).deletedSections},set:function set(deletedSections){_wiki.get(this).deletedSections=deletedSections}},{key:"notificationButton",get:function get(){return _wiki.get(this).notificationButton}},{key:"newEmptySection",get:function get(){return{isNew:true,id:0,visible:true,creationDate:"",deleted:false,root:1,activeContribution:{id:0,title:_transFilter.get(this)("new_section",{},"icap_wiki"),text:"",creationDate:""},__children:[]}}}]);return WikiService}();exports.default=WikiService;WikiService.$inject=["$resource","wiki","$q","url","transFilter"]},1945:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MessagesController=function(){function MessagesController(messages){(0,_classCallCheck3.default)(this,MessagesController);this.messages=messages;this.dismissTimeOut=5e3}(0,_createClass3.default)(MessagesController,[{key:"closeMessage",value:function closeMessage(index){this.messages.splice(index,1)}}]);return MessagesController}();exports.default=MessagesController;MessagesController.$inject=["Messages"]},1946:function(module,exports){module.exports='<div class="alert-messages">\n    <uib-alert\n        data-ng-repeat="message in vm.messages"\n        type="{{ message.type }}"\n        close="vm.closeMessage($index)"\n        dismiss-on-timeout="{{ vm.dismissTimeOut }}">\n        {{message.msg}}\n    </uib-alert>\n</div>'},1947:function(module,exports){module.exports='<div class="wiki-header-buttons" data-ng-if="vm.wiki.isLoggedIn || vm.wiki.isPDFExportActive">\n    <button\n        class="new-section btn btn-primary"\n        data-ng-if="vm.wiki.isLoggedIn && (vm.wiki.isAdmin || vm.wiki.mode !== 2)"\n        data-ng-click="vm.addSection(vm.wiki.sections[0])"\n        data-ng-disabled="vm.isFormOpen">\n        <i class="fa fa-plus"></i> {{ \'create_new_section\'|trans:{}:\'icap_wiki\' }}\n    </button>\n    <button\n        data-ng-if="vm.wiki.isLoggedIn && vm.wiki.isAdmin"\n        data-ng-click="vm.displayOptions()"\n        data-ng-disabled="vm.isFormOpen"\n        class="btn btn-default">\n        <i class="fa fa-wrench"></i> {{ \'options\'|trans:{}:\'icap_wiki\' }}\n    </button>\n\n    <span ng-bind-html="vm.wiki.notificationButton|trustedHtml"></span>\n    <a data-ng-if="vm.wiki.isPDFExportActive" href="#" target="_blank" class="btn btn-default"><i class="fa fa-file-pdf-o text-danger"></i> {{ \'pdf_export\'|trans:{}:\'platform\' }}</a>\n</div>\n\n<div class="panel panel-wiki">\n    <div class="panel-body">\n\n        <!-- wiki description -->\n        <div class="wiki-page-header page-header">\n            <h1 class="wiki-title-header">\n                {{ vm.wiki.title }}\n            </h1>\n            <small data-ng-if="vm.wiki.isLoggedIn && (vm.wiki.isAdmin || vm.wiki.mode !== 2)" class="wiki-actions">\n                [\n                <button\n                    data-ng-click="vm.editSection(vm.wiki.sections[0])"\n                    data-ng-disabled="vm.isFormOpen"\n                    class="edit-section link-style">\n                    {{ \'edit\'|trans:{}:\'icap_wiki\' }}\n                </button>\n                |\n                <button\n                    data-ng-click="vm.displaySection(vm.wiki.sections[0])"\n                    data-ng-disabled="vm.isFormOpen"\n                    class="history-section link-style">\n                    {{ \'history\'|trans:{}:\'icap_wiki\' }}\n                </button>\n                ]\n            </small>\n        </div>\n\n        <div\n            data-ng-if="!vm.currentContributions[vm.wiki.sections[0].id]"\n            class="wiki-description"\n            data-ng-bind-html="vm.wiki.sections[0].activeContribution.text | trustedHtml">\n        </div>\n\n        <!-- wiki description edition form -->\n        <div\n            data-ng-if="vm.currentContributions[vm.wiki.sections[0].id]"\n            id="wesc-{{ vm.wiki.sections[0].activeContribution.id }}"\n            class="wiki-edit-section-container"\n            style="display: block;">\n            <div id="editSectionContainer-1">\n                <div class="panel panel-default">\n                    <div class="panel-heading">\n                        <h3>{{ \'edit_description\' | trans:{}:\'icap_wiki\' }}</h3>\n                    </div>\n                    <div class="panel-body">\n                        <div>\n                            <form\n                                name="icap_wiki_edit_section"\n                                class="form-vertical">\n                                <div class="control-group">\n                                    <div class="controls">\n                                        <div class="form-group row">\n                                            <label class="control-label col-md-1 required" >\n                                                {{ \'icap_wiki_edit_section_type_activeContribution_text\' | trans:{}:\'icap_wiki\' }}\n                                            </label>\n                                        <div class="col-md-11">\n                                            <textarea data-ui-tinymce="vm.tinymceOptions" ng-model="vm.currentContributions[vm.wiki.sections[0].id].text"></textarea>\n                                            <br />\n                                        </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                    <div class="panel-footer">\n                        <button\n                            class="btn btn-default"\n                            data-ng-click="vm.cancelSection(vm.wiki.sections[0])"\n                            data-ng-disabled="vm.disableFormButtons">\n                            {{ \'cancel\' | trans:{}:\'icap_wiki\' }}\n                        </button>\n                        <button\n                            class="btn btn-primary"\n                            data-ng-click="vm.saveSection(vm.wiki.sections[0])"\n                            data-ng-disabled="vm.disableFormButtons">\n                            {{ \'save\' | trans:{}:\'icap_wiki\' }}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- table of contents -->\n        <wiki-tree\n            data-ng-if="vm.wiki.sections[0].__children.length > 0 && !vm.isFormOpen">\n        </wiki-tree>\n\n        <!-- wiki sections -->\n        <div class="wiki-sections">\n            <ol id="wiki-sections-list">\n                <li\n                    data-section\n                    data-ng-repeat="section in vm.wiki.sections[0].__children"\n                    data-ng-if="!section.isStale"\n                    id="section-{{section.id}}"\n                    data-ng-class="{\'invisible-wiki-section\': !section.visible, \'with-numbers\': vm.wiki.displaySectionNumbers}"\n                    data-ng-include="\'section_renderer.html\'">\n                </li>\n            </ol>\n        </div>\n\n    </div>\n</div>'},1948:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _weakMap=__webpack_require__(254);var _weakMap2=_interopRequireDefault(_weakMap);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _confirmDeletionPartial=__webpack_require__(1949);var _confirmDeletionPartial2=_interopRequireDefault(_confirmDeletionPartial);var _confirmHardDeletionPartial=__webpack_require__(1950);var _confirmHardDeletionPartial2=_interopRequireDefault(_confirmHardDeletionPartial);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _$resource=new _weakMap2.default;var _$location=new _weakMap2.default;var _$anchorScroll=new _weakMap2.default;var _Messages=new _weakMap2.default;var _transFilter=new _weakMap2.default;var _modalInstance=new _weakMap2.default;var _modalFactory=new _weakMap2.default;var _$scope=new _weakMap2.default;var WikiController=function(){function WikiController($resource,wikiService,$location,$anchorScroll,$routeParams,Messages,transFilter,modal,$scope,tinyMceConfig){(0,_classCallCheck3.default)(this,WikiController);_$resource.set(this,$resource);_$location.set(this,$location);_$anchorScroll.set(this,$anchorScroll);_Messages.set(this,Messages);_transFilter.set(this,transFilter);_modalInstance.set(this,null);_modalFactory.set(this,modal);_$scope.set(this,$scope);this.wiki=wikiService;this.$routeParams=$routeParams;this.tinymceOptions=tinyMceConfig;this.currentContributions=[];this.currentSections=[];this.disableFormButtons=false;this.disableModalButtons=false;this.isFormOpen=false}(0,_createClass3.default)(WikiController,[{key:"backToTop",value:function backToTop(){_$location.get(this).hash("top");_$anchorScroll.get(this)()}},{key:"getFontSize",value:function getFontSize(level){return level<8?21-level+"px":"14px"}},{key:"getDeletionDate",value:function getDeletionDate(myDate){return myDate.date||myDate}},{key:"displayUrl",value:function displayUrl(url){_$location.get(this).url(url)}},{key:"displayOptions",value:function displayOptions(){this.wiki.oldMode=this.wiki.mode;_$location.get(this).url("/options")}},{key:"displayHome",value:function displayHome(){_$location.get(this).url("/");
}},{key:"displaySection",value:function displaySection(section){this.wiki.displayedSection=section;_$location.get(this).url("/section/"+section.id)}},{key:"displayContribution",value:function displayContribution(section,contribution){this.wiki.displayedContribution=contribution;var url="/section/"+section.id+"/contribution/"+contribution.id;_$location.get(this).url(url)}},{key:"addSection",value:function addSection(section){this.isFormOpen=true;this.wiki.addSection(section);this.editSection(section.__children[section.__children.length-1])}},{key:"editSection",value:function editSection(section){this.isFormOpen=true;for(var k in this.currentContributions){if(k!=section.id){delete this.currentContributions[k]}}this.currentSections[section.id]=_index2.default.copy(section);delete this.currentSections[section.id].__children;this.currentSections[section.id].referenceSectionId=null;this.currentContributions[section.id]=!this.currentContributions[section.id]?_index2.default.copy(section.activeContribution):null;if((!("contributions"in section)||section.contributions.length===0)&&section.id!==0){this.wiki.loadContributions(section)}}},{key:"cancelSection",value:function cancelSection(section){if(section.isNew){section.isStale=true}delete this.currentContributions[section.id];this.isFormOpen=false}},{key:"cancelNewSection",value:function cancelNewSection(){this.createRootSection=false}},{key:"saveSection",value:function saveSection(section){this.disableFormButtons=true;if(this.currentContributions[section.id].title!==section.activeContribution.title||this.currentContributions[section.id].text!==section.activeContribution.text){this._saveSectionWithNewContribution(section,this.currentContributions[section.id],this.currentSections[section.id])}else{this._saveSectionWithoutNewContribution(section,this.currentSections[section.id])}}},{key:"toggleVisibility",value:function toggleVisibility(section){var _this=this;this.isToggling=true;this.wiki.toggleVisibility(section).finally(function(){return _this.isToggling=false})}},{key:"saveNewSection",value:function saveNewSection(section){this.disableFormButtons=true;this._saveSectionWithNewContribution(section,this.currentContributions[section.id],this.currentSections[section.id])}},{key:"confirmSoftDeleteSection",value:function confirmSoftDeleteSection(section){this.sectionToDelete=section;this._modal(_confirmDeletionPartial2.default)}},{key:"softDeleteSection",value:function softDeleteSection(section,form){var _this2=this;this.disableModalButtons=true;var withChildren=!!(form.deleteChildren&&form.deleteChildren.$modelValue);this.wiki.softDeleteSection(section,withChildren).then(function(){_this2.currentContributions=[];_this2.currentSections=[];_this2._setMessage("success","icap_wiki_section_delete_success")},function(){_this2._setMessage("danger","icap_wiki_section_delete_error")}).finally(function(){_this2.isFormOpen=false;_this2.disableModalButtons=false;_this2._cancelModal()});this.currentContributions[section.id]=null;this.currentSections[section.id]=null}},{key:"confirmHardDeleteSection",value:function confirmHardDeleteSection(section,idx){this.sectionToHardDelete=section;this.sectionToHardDelete.idx=idx;this._modal(_confirmHardDeletionPartial2.default)}},{key:"hardDeleteSection",value:function hardDeleteSection(section){var _this3=this;this.disableModalButtons=true;this.wiki.hardDeleteSection(section,this.sectionToHardDelete.idx).then(function(){_this3._setMessage("success","icap_wiki_section_remove_success")},function(){_this3._setMessage("danger","icap_wiki_section_remove_error")}).finally(function(){_this3.disableModalButtons=false;_this3._cancelModal()})}},{key:"cancelEditOptions",value:function cancelEditOptions(){this.wiki.revertOptions();_$location.get(this).url("/")}},{key:"saveOptions",value:function saveOptions(){var _this4=this;this.disableFormButtons=true;this.wiki.updateOptions().then(function(){_$location.get(_this4).url("/");_this4._setMessage("success","icap_wiki_options_save_success")},function(){_this4._setMessage("danger","icap_wiki_options_save_error")}).finally(function(){_this4.disableFormButtons=false})}},{key:"restoreSection",value:function restoreSection(section){var _this5=this;this.disableFormButtons=true;this.wiki.restoreSection(section).then(function(){_this5._setMessage("success","icap_wiki_section_restore_success")},function(){_this5._setMessage("danger","icap_wiki_section_restore_error")}).finally(function(){_this5.disableFormButtons=false})}},{key:"_saveSectionWithNewContribution",value:function _saveSectionWithNewContribution(section,newContrib,updatedSection){var _this6=this;this.wiki.editSection(section,newContrib,updatedSection).then(function(success){if(newContrib.id===0){_this6._setMessage("success","icap_wiki_section_add_success")}else{_this6._setMessage("success","icap_wiki_section_update_success")}_$location.get(_this6).hash("sect-"+success.section.id)},function(){if(newContrib.id===0){_this6._setMessage("danger","icap_wiki_section_add_error")}else{_this6._setMessage("danger","icap_wiki_section_update_error")}_$location.get(_this6).hash("top")}).finally(function(){_this6.currentContributions=[];_this6.currentSections=[];_this6.disableFormButtons=false;_this6.isFormOpen=false;_$anchorScroll.get(_this6)()})}},{key:"_saveSectionWithoutNewContribution",value:function _saveSectionWithoutNewContribution(section,updatedSection){var _this7=this;this.wiki.updateSection(section,updatedSection).then(function(){_this7.currentContributions[section.id]=null;_this7.currentSections[section.id]=null;_this7._setMessage("success","icap_wiki_section_update_success")},function(){_this7._setMessage("danger","icap_wiki_section_update_error")}).finally(function(){_this7.disableFormButtons=false;_this7.isFormOpen=false;_$location.get(_this7).hash("sect-"+section.id);_$anchorScroll.get(_this7)()})}},{key:"_setMessage",value:function _setMessage(type,msg){_Messages.get(this).push({type:type,msg:_transFilter.get(this)(msg,{},"icap_wiki")})}},{key:"_modal",value:function _modal(template){_modalInstance.set(this,_modalFactory.get(this).open(template,_$scope.get(this)))}},{key:"_cancelModal",value:function _cancelModal(){_modalInstance.get(this).dismiss()}},{key:"moderateModeWarningText",get:function get(){return _transFilter.get(this)("moderate_mode_warning",{},"icap_wiki")}}]);return WikiController}();exports.default=WikiController;WikiController.$inject=["$resource","WikiService","$location","$anchorScroll","$routeParams","Messages","transFilter","wikiModal","$scope","tinyMceConfig"]},1949:function(module,exports){module.exports='<form\n    novalidate\n    name="deleteForm"\n    class="form-horizontal">\n\n    <div class="modal-header">\n        <button\n            class="close"\n            data-ng-click="vm._cancelModal()"\n            data-ng-disabled="vm.disableModalButtons">×\n        </button>\n        <h3>\n            {{ \'delete_section\'|trans:{}:\'icap_wiki\' }}\n        </h3>\n    </div>\n\n    <div class="modal-body">\n        <fieldset>\n            <div class="control-group">\n                <div class="control-group" >\n                    <input\n                        id="deleteChildren"\n                        type="checkbox"\n                        name="deleteChildren"\n                        data-ng-model="vm.deleteChildren" />\n                    <label class="control-label" for="deleteChildren">\n                        {{ \'icap_wiki_delete_section_type_children\'|trans:{}:\'icap_wiki\' }}\n                    </label>\n                </div>\n                <br />\n                <div class=\'delete_chapter_warning\'>\n                    {{ \'delete_confirmation\'|trans:{\'sectionTitle\': vm.sectionToDelete.activeContribution.title}:\'icap_wiki\' }}\n                </div>\n            </div>\n        </fieldset>\n    </div>\n    <div class="modal-footer">\n        <button\n            class="btn"\n            data-ng-click="vm._cancelModal()"\n            data-ng-disabled="vm.disableModalButtons">\n            {{ \'cancel\'|trans:{}:\'icap_wiki\' }}\n        </button>\n        <button\n            class="btn btn-primary"\n            data-ng-disabled="vm.disableModalButtons"\n            data-ng-click="vm.softDeleteSection(vm.sectionToDelete, deleteForm)">\n            {{ \'confirm\'|trans:{}:\'icap_wiki\' }}\n        </button>\n    </div>\n</form>\n'},1950:function(module,exports){module.exports='<form\n    novalidate\n    name="hardDeleteForm"\n    class="form-horizontal">\n\n    <div class="modal-header">\n        <button\n            class="close"\n            data-ng-click="vm._cancelModal()"\n            data-ng-disabled="vm.disableModalButtons">×\n        </button>\n        <h3>\n            {{ \'remove_section\'|trans:{}:\'icap_wiki\' }}\n        </h3>\n    </div>\n\n    <div class="modal-body">\n        <fieldset>\n            <div class="control-group">\n                <div class=\'delete_chapter_warning\'>\n                    {{ \'remove_confirmation\'|trans:{\'sectionTitle\': vm.sectionToHardDelete.activeContribution.title}:\'icap_wiki\' }}\n                </div>\n            </div>\n        </fieldset>\n    </div>\n    <div class="modal-footer">\n        <button\n            class="btn"\n            data-ng-click="vm._cancelModal()"\n            data-ng-disabled="vm.disableModalButtons">\n            {{ \'cancel\'|trans:{}:\'icap_wiki\' }}\n        </button>\n        <button\n            class="btn btn-primary"\n            data-ng-disabled="vm.disableModalButtons"\n            data-ng-click="vm.hardDeleteSection(vm.sectionToHardDelete)">\n            {{ \'confirm\'|trans:{}:\'icap_wiki\' }}\n        </button>\n    </div>\n</form>\n'},1951:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _weakMap=__webpack_require__(254);var _weakMap2=_interopRequireDefault(_weakMap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _$location=new _weakMap2.default;var _Messages=new _weakMap2.default;var _transFilter=new _weakMap2.default;var TestController=function(){function TestController(wikiService,treeService,$location,Messages,transFilter){(0,_classCallCheck3.default)(this,TestController);this.wiki=wikiService;this.treeService=treeService;_$location.set(this,$location);_Messages.set(this,Messages);_transFilter.set(this,transFilter);this.dragEnabled=false}(0,_createClass3.default)(TestController,[{key:"goToSection",value:function goToSection(id){if(!this.dragEnabled){_$location.get(this).hash("sect-"+id)}}},{key:"_dragSection",value:function _dragSection(event){var _this=this;this.dragEnabled=false;var section=event.source.nodeScope.$modelValue;var newParent=null;var newPreviousSibling=null;if(event.dest.nodesScope.$parent.$type==="uiTreeNode"){newParent=event.dest.nodesScope.$parent.$modelValue;if(event.dest.index>0){newPreviousSibling=event.dest.nodesScope.$parent.$modelValue.__children[event.dest.index-1]}}else{if(event.dest.index>0){newPreviousSibling=this.wiki.sections[0].__children[event.dest.index-1]}}this.treeService.moveSection(this.wiki,section,newParent,newPreviousSibling).then(function(){},function(){_this.dragEnabled=false;_this._setMessage("danger","icap_wiki_section_move_error")}).finally(function(){_this.dragEnabled=true})}},{key:"_setMessage",value:function _setMessage(type,msg){_Messages.get(this).push({type:type,msg:_transFilter.get(this)(msg,{},"icap_wiki")})}},{key:"treeOptions",get:function get(){return{beforeDrop:this._dragSection.bind(this)}}}]);return TestController}();exports.default=TestController;TestController.$inject=["WikiService","TreeService","$location","Messages","transFilter"]},1952:function(module,exports){module.exports='<div class="wiki-contents" data-ng-if="vm.wiki.sections">\n    <div class="wiki-contents-inner well">\n        <div class="wiki-contents-title">\n            {{ \'wiki_contents\'|trans: {}:\'icap_wiki\' }}\n            <button\n                data-ng-click="vm.dragEnabled=!vm.dragEnabled"\n                data-ng-if="vm.wiki.isAdmin" id="move-contents-trigger"\n                data-ng-disabled="vm.dragDisabled"\n                class="btn btn-default btn-xs pull-right">\n                <i class="fa fa-resize-vertical"></i> <span class="fa fa-arrows"></span>\n            </button>\n        </div>\n\n        <div\n            data-ui-tree="vm.treeOptions"\n            data-drag-enabled="vm.dragEnabled">\n            <ol data-ui-tree-nodes\n                data-ng-model="vm.wiki.sections[0].__children"\n                id="wiki-contents-list"\n                class="jquery-sortable-list sortable-list"\n                data-ng-class="vm.dragEnabled ? \'sortable-enable\' : \'sortable-disable\'">\n                <li\n                    ui-tree-handle\n                    data-ui-tree-node\n                    data-ng-repeat="section in vm.wiki.sections[0].__children"\n                    data-ng-if="!section.isStale && !section.isNew"\n                    id="li-{{ section.id }}"\n                    data-ng-class="{\'invisible-wiki-content\': !section.visible }"\n                    data-ng-include="\'node_renderer.html\'">\n                </li>\n            </ol>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>\n'},1953:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _weakMap=__webpack_require__(254);var _weakMap2=_interopRequireDefault(_weakMap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _url=new _weakMap2.default;var _$resource=new _weakMap2.default;var _wiki=new _weakMap2.default;var TreeService=function(){function TreeService(url,$resource,wiki){(0,_classCallCheck3.default)(this,TreeService);_url.set(this,url);_$resource.set(this,$resource);_wiki.set(this,wiki)}(0,_createClass3.default)(TreeService,[{key:"moveSection",value:function moveSection(wiki,sect,newParent,newPreviousSibling){var _this=this;var url=_url.get(this)("icap_wiki_api_move_wiki_section",{wiki:wiki.id,section:sect.id});var Section=_$resource.get(this)(url,null,{move:{method:"POST"}});var section=new Section;section.newParent=newParent!==null?newParent.id:null;section.newPreviousSibling=newPreviousSibling!==null?newPreviousSibling.id:null;return section.$move(function(){},function(failure){_wiki.get(_this).sections=failure.sections})}}]);return TreeService}();exports.default=TreeService;TreeService.$inject=["url","$resource","wiki"]},1954:function(module,exports){module.exports='<a data-ng-click="vm.goToSection(section.id)">\n    {{ section.activeContribution.title }}\n    <span\n        data-ng-if="!section.visible"\n        class="invisible-section-text">\n        ({{"invisible"|trans: {}:\'icap_wiki\'}})\n    </span>\n</a>\n<ol\n    data-ui-tree-nodes\n    data-ng-model="section.__children">\n    <li\n        ui-tree-handle\n        data-ui-tree-node\n        data-ng-repeat="section in section.__children"\n        data-ng-if="section.__children && !section.isStale"\n        id="li-{{ section.id }}"\n        data-ng-class="{\'invisible-wiki-content\': !section.visible }"\n        data-ng-include="\'node_renderer.html\'">\n    </li>\n</ol>'},1955:function(module,exports){module.exports='<a id="sect-{{ section.id }}"></a>\n<div\n    data-ng-class="section.level>2 ? \'subsection-header\' : \'page-header\'"\n    data-ng-if="!vm.isFormOpen">\n    <dynamic-header\n        data-level="{{ section.level }}"\n        class="section-title"\n        data-ng-transclude>\n        {{ section.activeContribution.title }}\n    </dynamic-header>\n\n    <small>\n        <span\n            data-ng-if="vm.wiki.isLoggedIn && (vm.wiki.isAdmin || vm.wiki.mode !== 2)"\n            class="wiki-actions">\n            <span\n                data-ng-if="vm.wiki.isAdmin && !section.visible"\n                class="invisible-section-text">\n                ({{ \'invisible\'|trans:{}:\'icap_wiki\' }})\n            </span>\n            <span\n                    data-ng-if="!vm.wiki.isAdmin && !section.visible"\n                    class="invisible-section-text">\n                ({{ \'waiting_for_moderation\'|trans:{}:\'icap_wiki\' }})\n            </span>\n            [\n            <button\n                data-ng-click="vm.addSection(section)"\n                class="new-section link-style"\n                data-ng-disabled="vm.isFormOpen">\n                {{ \'add_new_subsection\'|trans:{}:\'icap_wiki\' }}\n            </button>\n            |\n            <button\n                data-ng-click="vm.editSection(section)"\n                class="edit-section link-style"\n                data-ng-disabled="vm.isFormOpen">\n                {{ \'edit\'|trans:{}:\'icap_wiki\' }}\n            </button>\n            |\n            <button\n                    data-ng-click="vm.displaySection(section)"\n                    class="history-section link-style"\n                    data-ng-disabled="vm.isFormOpen">\n                {{ \'history\'|trans:{}:\'icap_wiki\' }}\n            </button>\n            <span data-ng-if="vm.wiki.isLoggedIn && vm.wiki.isAdmin">\n                |\n                <button\n                        data-ng-if="section.visible"\n                        data-ng-click="vm.toggleVisibility(section)"\n                        class="history-section link-style"\n                        data-ng-disabled="vm.isToggling">\n                    {{ \'Rendre invisible\'|trans:{}:\'icap_wiki\' }}\n                </button>\n                <button\n                        data-ng-if="!section.visible"\n                        data-ng-click="vm.toggleVisibility(section)"\n                        class="history-section link-style"\n                        data-ng-disabled="vm.isToggling">\n                    {{ \'Rendre visible\'|trans:{}:\'icap_wiki\' }}\n                </button>\n                </span>\n            ]\n        </span>\n        <button\n            class="history-section link-style back-to-top"\n            data-ng-click="vm.backToTop()"\n            uib-tooltip="{{ \'back_to_top\' | trans:{}:\'icap_wiki\' }}"\n            tooltip-placement="top-right">\n            <i class="fa fa-arrow-circle-o-up" aria-hidden="true"></i>\n        </button>\n    </small>\n</div>\n\n<div\n    data-ng-if="!vm.currentContributions[section.id] && !vm.isFormOpen"\n    id="wst-{{ section.id }}"\n    class="wiki-section-text"\n    data-ng-bind-html="section.activeContribution.text | trustedHtml">\n</div>\n\n<div\n    data-ng-if="vm.currentContributions[section.id]"\n    class="wiki-edit-section-container"\n    style="display: block;">\n    <div >\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                <h3 id="myModalLabel">{{ section.isNew ? \'create_new_section\' : \'edit_section\' | trans:{}:\'icap_wiki\' }}</h3>\n            </div>\n            <div class="panel-body">\n                <div class="pull-right wiki-header-buttons">\n\n                </div>\n                <div class="clearfix"></div>\n                <div>\n                    <div\n                        class="alert alert-warning"\n                        data-ng-bind-html="vm.moderateModeWarningText|trustedHtml"\n                        data-ng-if="vm.wiki.isLoggedIn && !vm.wiki.isAdmin && vm.wiki.mode === 1"></div>\n                    <form\n                        name="icap_wiki_edit_section"\n                        class="form-vertical">\n                        <div class="control-group">\n                            <div class="controls">\n                                <div class="form-group row">\n                                    <label\n                                        class="control-label col-md-1 required">\n                                        {{ \'icap_wiki_edit_section_type_activeContribution_title\' | trans:{}:\'icap_wiki\' }}\n                                    </label>\n                                    <div class="col-md-11">\n                                        <input\n                                            type="text"\n                                            name="icap_wiki_edit_section_type[activeContribution][title]"\n                                            required="required"\n                                            class="form-control"\n                                            data-ng-model="vm.currentContributions[section.id].title">\n                                    </div>\n                                </div>\n                                <div\n                                    class="form-group row">\n                                    <label\n                                        class="control-label col-md-1 required">\n                                        {{ \'icap_wiki_edit_section_type_activeContribution_text\' | trans:{}:\'icap_wiki\' }}\n                                    </label>\n                                    <div class="col-md-11">\n                                        <textarea\n                                            data-ui-tinymce="vm.tinymceOptions"\n                                            data-ng-model="vm.currentContributions[section.id].text">\n                                        </textarea>\n                                    </div>\n                                </div>\n                                <div class="form-group row">\n                                    <label\n                                        data-ng-if="vm.wiki.isLoggedIn && vm.wiki.isAdmin && !section.isNew"\n                                        class="control-label col-md-12"\n                                        for="icap_wiki_edit_section_type_visible">\n                                        <input\n                                            type="checkbox"\n                                            id="icap_wiki_edit_section_type_visible"\n                                            name="icap_wiki_edit_section_type[visible]"\n                                            class="control-standalone control-standalone"\n                                            data-ng-model="vm.currentSections[section.id].visible" />{{ \'visible\' | trans:{}:\'icap_wiki\' }}\n                                    </label>\n                                    <div class="hidden"></div>\n                                </div>\n                            </div>\n                            <div data-ng-if="!section.isNew" class="move-wiki-section-header">{{ \'move_section\' | trans:{}:\'icap_wiki\' }}</div>\n                            <div data-ng-if="!section.isNew" class="controls">\n                                <div\n                                    class="form-group row">\n                                    <label\n                                        class="control-label col-md-12 required"\n                                        for="icap_wiki_edit_section_type_position">\n                                        {{ \'icap_wiki_edit_section_type_position\' | trans:{}:\'icap_wiki\' }}\n                                    </label>\n                                    <div\n                                        class="col-md-12">\n                                        <select\n                                            data-flattened-tree-options="{{ section.id }}"\n                                            id="icap_wiki_edit_section_type_position"\n                                            name="icap_wiki_edit_section_type[referenceSectionId]"\n                                            class="form-control"\n                                            data-ng-model="vm.currentSections[section.id].referenceSectionId"\n                                            >\n                                        </select>\n                                    </div>\n                                </div>\n\n                                <div\n                                    data-ng-if="vm.currentSections[section.id].referenceSectionId"\n                                    class="form-group row">\n                                    <label\n                                        class="control-label col-md-12"\n                                        for="icap_wiki_edit_section_type_brother">\n                                        <input\n                                            type="checkbox"\n                                            id="icap_wiki_edit_section_type_brother"\n                                            name="icap_wiki_edit_section_type[brother]"\n                                            class="control-standalone control-standalone"\n                                            data-ng-model="vm.currentSections[section.id].isBrother" />{{ \'icap_wiki_edit_section_type_brother\' | trans:{}:\'icap_wiki\' }}\n                                    </label>\n                                    <div class="hidden"></div>\n                                </div>\n                            </div>\n                        </div>\n\n                    </form>\n                </div>\n                <br/>\n            </div>\n\n            <div class="panel-footer">\n                <button\n                    class="btn btn-default"\n                    data-ng-disabled="vm.disableFormButtons"\n                    data-ng-click="vm.cancelSection(section)">\n                    {{ \'cancel\' | trans:{}:\'icap_wiki\' }}\n                </button>\n                <button\n                    data-ng-if="!section.isNew"\n                    class="btn btn-primary"\n                    data-ng-disabled="vm.disableFormButtons"\n                    data-ng-click="vm.saveSection(section, icap_wiki_edit_section)">\n                    {{ \'save\' | trans:{}:\'icap_wiki\' }}\n                </button>\n                <button\n                    data-ng-if="section.isNew"\n                    data-ng-disabled="vm.disableFormButtons"\n                    class="btn btn-primary"\n                    data-ng-click="vm.saveNewSection(section)">\n                    {{ \'create\' | trans:{}:\'icap_wiki\' }}\n                </button>\n                <button\n                    data-ng-if="!section.isNew"\n                    data-ng-disabled="vm.disableFormButtons"\n                    class="delete-section btn btn-danger pull-left"\n                    data-ng-click="vm.confirmSoftDeleteSection(section)">\n                    <i class="fa fa-trash-o"></i> {{ \'delete_section\' | trans:{}:\'icap_wiki\' }}\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n\n<ol class="wiki-sections-list-elem">\n    <li\n        data-section\n        data-ng-repeat="section in section.__children"\n        data-ng-if="!section.isStale"\n        data-ng-include="\'section_renderer.html\'"\n        data-ng-class="{\'invisible-wiki-section\': !section.visible, \'with-numbers\': vm.wiki.displaySectionNumbers}">\n    </li>\n</ol>'},1956:function(module,exports){module.exports='<div class="panel panel-wiki">\n    <div class="panel-body">\n\n        <div class="wiki-page-header page-header">\n            <h1 class="wiki-title-header">\n                {{ vm.wiki.title }} : {{"options"|trans: {}:\'icap_wiki\'}}\n            </h1>\n        </div>\n\n        <form\n            name="icap_wiki_configure"\n            class="form-vertical ng-pristine ng-valid">\n            <div class="control-group">\n                <div class="controls">\n                    <div class="form-group row">\n                        <label class="control-label col-md-3 required">\n                            {{ \'icap_wiki_options_type_mode\' | trans:{}:\'icap_wiki\' }}\n                        </label>\n\n                        <div class="col-md-9">\n                            <div id="icap_wiki_options_type_mode">\n                                <div>\n                                    <div class="wiki-mode-option-label">\n                                        <label\n                                            class="radio required"\n                                            for="icap_wiki_options_type_mode_0">\n                                            <input\n                                                type="radio"\n                                                id="icap_wiki_options_type_mode_0"\n                                                name="icap_wiki_options_type[mode]"\n                                                required="required"\n                                                data-ng-model="vm.wiki.mode"\n                                                value="0">{{ \'normal\' | trans:{}:\'icap_wiki\' }}\n                                        </label>\n                                    </div>\n                                    <div class="wiki-mode-option-text">\n                                        <small class="text-muted">\n                                            {{ \'normal_message\' | trans:{}:\'icap_wiki\' }}\n                                        </small>\n                                    </div>\n                                </div>\n                                <div>\n                                    <div class="wiki-mode-option-label">\n                                        <label\n                                            class="radio required"\n                                            for="icap_wiki_options_type_mode_1">\n                                            <input\n                                                type="radio"\n                                                id="icap_wiki_options_type_mode_1"\n                                                name="icap_wiki_options_type[mode]"\n                                                required="required"\n                                                data-ng-model="vm.wiki.mode"\n                                                value="1">{{ \'moderate\' | trans:{}:\'icap_wiki\' }}\n                                        </label>\n                                    </div>\n                                    <div\n                                        class="wiki-mode-option-text">\n                                        <small class="text-muted">\n                                            {{ \'moderate_message\' | trans:{}:\'icap_wiki\' }}\n                                        </small>\n                                    </div>\n                                </div>\n                                <div>\n                                    <div\n                                        class="wiki-mode-option-label">\n                                        <label\n                                            class="radio required"\n                                            for="icap_wiki_options_type_mode_2">\n                                            <input\n                                                type="radio"\n                                                id="icap_wiki_options_type_mode_2"\n                                                name="icap_wiki_options_type[mode]"\n                                                required="required"\n                                                data-ng-model="vm.wiki.mode"\n                                                value="2">{{ \'read_only\' | trans:{}:\'icap_wiki\' }}\n                                        </label>\n                                    </div>\n                                    <div\n                                        class="wiki-mode-option-text">\n                                        <small class="text-muted">\n                                            {{ \'read_only_message\' | trans:{}:\'icap_wiki\' }}\n                                        </small>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="well well-sm col-md-9 col-md-offset-3">\n                    <small data-ng-bind-html="\'note_well\' | trans: {}:\'icap_wiki\' | trustedHtml"></small>\n                </div>\n\n                <div class="form-group row">\n                    <label class="control-label col-md-3">\n                        {{ \'icap_wiki_options_type_display\' | trans:{}:\'icap_wiki\' }}\n                    </label>\n\n                    <div class="col-md-9">\n                        <div id="icap_wiki_options_type_display">\n                            <div>\n                                <div class="wiki-display-option-label">\n                                    <label\n                                            class="checkbox required"\n                                            for="icap_wiki_options_display_chapter_numbers">\n                                        <input\n                                            type="checkbox"\n                                            id="icap_wiki_options_display_chapter_numbers"\n                                            name="icap_wiki_options_display_chapter_numbers"\n                                            data-ng-model="vm.wiki.displaySectionNumbers"\n                                            >{{ \'display_section_numbers\' | trans:{}:\'icap_wiki\' }}\n                                    </label>\n                                </div>\n                                <div class="wiki-mode-option-text">\n                                    <small class="text-muted">\n                                        {{ \'display_section_numbers_message\' | trans:{}:\'icap_wiki\' }}\n                                    </small>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n\n            <button\n                class="btn btn-default cancel-btn"\n                data-ng-click="vm.cancelEditOptions()"\n                data-ng-disabled="vm.disableFormButtons">\n                {{ \'cancel\' | trans:{}:\'icap_wiki\' }}\n            </button>\n            <button\n                class="btn btn-primary"\n                data-ng-click="vm.saveOptions(icap_wiki_configure)"\n                data-ng-disabled="vm.disableFormButtons">\n                {{ \'confirm\' | trans:{}:\'icap_wiki\' }}\n            </button>\n        </form>\n\n        <div class="wiki-deleted-sections-container">\n            <div class="wiki-deleted-sections-header">\n                <strong>{{"deleted_sections"|trans:{}:\'icap_wiki\'}}</strong>\n            </div>\n\n            <!-- Soft deleted section list -->\n            <ul\n                id="wiki-deleted-sections-list"\n                class="list-unstyled"\n                data-ng-if="vm.wiki.deletedSections.length > 0">\n\n                <li\n                    class="wiki-contribution-version row"\n                    data-ng-repeat="section in vm.wiki.deletedSections">\n                    <div class="wiki-deleted-section-title col-sm-5">\n                        <a data-ng-click="vm.displayContribution(section, section.activeContribution)">{{section.activeContribution.title}}</a></div>\n                    <div class="col-sm-3 wiki-deleted-section-date">\n                        {{ vm.getDeletionDate(section.deletionDate) | convertAPIDate | datetime }}\n                    </div>\n                    <div class="col-sm-4">\n                        <button\n                            class="wiki-deleted-section-restore btn btn-default btn-xs"\n                            data-ng-click="vm.restoreSection(section)"\n                            data-ng-disabled="vm.disableFormButtons">\n                        {{\'restore_section\'|trans:{}:\'icap_wiki\'}}\n                        </button>\n                        <button\n                            class="delete-section btn btn-danger btn-xs"\n                            data-ng-click="vm.confirmHardDeleteSection(section, $index)"\n                            data-ng-disabled="vm.disableFormButtons">\n                            {{ \'remove_section\'|trans:{}:\'icap_wiki\' }}\n                        </button>\n                    </div>\n                </li>\n\n            </ul>\n\n            <!-- There are no sections in a soft deleted state -->\n            <div\n                data-ng-if="vm.wiki.deletedSections.length == 0">\n                {{\'no_deleted_sections\'|trans:{}:\'icap_wiki\'}}\n            </div>\n\n        </div>\n    </div>\n</div>\n';
},1957:function(module,exports){module.exports='<div class="wiki-header-buttons">\n    <button\n        data-ng-click="vm.displayHome()"\n        class="btn btn-primary">\n        {{\'back_to_wiki\'|trans:{}:\'icap_wiki\'}}\n    </button>\n</div>\n\n<div class="panel panel-wiki">\n    <div class="panel-body">\n\n        <div class="page-header">\n            <h2 class="wiki-title-header">\n                <span data-ng-if="vm.wiki.displayedSection.level === 0">{{ vm.wiki.title }}</span>\n                <span data-ng-if="vm.wiki.displayedSection.level !== 0">{{ vm.wiki.displayedSection.activeContribution.title }}</span>\n                : {{\'revision_history\'|trans:{}:\'icap_wiki\'}}\n            </h2>\n        </div>\n\n        <div>\n            <form\n                name="form_revision"\n                class="form-vertical wiki-revision-history-form">\n\n            <button\n                data-ng-if="vm.wiki.displayedSection.contributions.length > 1"\n                class="btn btn-default btn-sm"\n                data-ng-click="vm.displayDiff(vm.wiki.displayedSection, form_revision)">\n                {{\'compare_versions\'|trans:{}:\'icap_wiki\'}}\n            </button>\n\n            <ul id="wiki-section-revision-history-list" class="list-unstyled">\n                <li class="wiki-contribution-version"\n                    data-ng-repeat="contribution in vm.wiki.displayedSection.contributions"\n                    data-emit-event="contribution"\n                    data-ng-class="{\'selected-version\': vm.oldid === contribution.id || vm.diff === contribution.id}">\n\n                    <input\n                        data-ng-if="vm.wiki.displayedSection.contributions.length > 1"\n                        data-ng-class="{\'invisible\': $index <= vm.diffCheckedIndex}"\n                        id="wc-oldid-{{ contribution.id }}"\n                        data-ng-model="vm.oldid"\n                        data-ng-change="vm.oldidCheckedIndex = $index"\n                        type="radio" name="oldid" value="{{ contribution.id }}" />\n\n                    <input\n                        data-ng-if="vm.wiki.displayedSection.contributions.length > 1"\n                        data-ng-class="{\'invisible\': $index >= vm.oldidCheckedIndex}"\n                        id="wc-diff-{{ contribution.id }}"\n                        data-ng-model="vm.diff"\n                        data-ng-change="vm.diffCheckedIndex = $index"\n                        type="radio" name="diff" value="{{ contribution.id }}" />\n\n                    <a class="wiki-contribution-link" data-ng-click="vm.displayContribution(vm.wiki.displayedSection, contribution)">\n                        {{ contribution.creation_date | datetime }}\n                    </a>\n\n                    <span class="wiki-contribution-contributor">\n                        {{ contribution.contributor.user_name }} ({{ contribution.contributor.first_name }} {{ contribution.contributor.last_name }})\n                    </span>\n\n                    <span\n                        data-ng-if="contribution.id === vm.wiki.displayedSection.activeContribution.id"\n                        class="wiki-contribution-active text-success">\n                        {{\'active_contribution\'|trans:{}:\'icap_wiki\'}}\n                    </span>\n\n                    <a\n                        data-ng-if="contribution.id !== vm.wiki.displayedSection.activeContribution.id && vm.wiki.isAdmin"\n                        class="wiki-contribution-set-active btn btn-default btn-xs"\n                        data-ng-click="vm.setActiveContribution(vm.wiki.displayedSection, contribution)">\n                        {{\'set_active_contribution\'|trans:{}:\'icap_wiki\'}}\n                    </a>\n\n                </li>\n            </ul>\n\n                <button\n                    data-ng-if="vm.wiki.displayedSection.contributions.length > 1"\n                    class="btn btn-default btn-sm"\n                    data-ng-click="vm.displayDiff(vm.wiki.displayedSection, form_revision)">\n                    {{\'compare_versions\'|trans:{}:\'icap_wiki\'}}\n                </button>\n\n            </form>\n        </div>\n\n    </div>\n</div>'},1958:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _weakMap=__webpack_require__(254);var _weakMap2=_interopRequireDefault(_weakMap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _$scope=new _weakMap2.default;var _$resource=new _weakMap2.default;var _$location=new _weakMap2.default;var _$route=new _weakMap2.default;var _transFilter=new _weakMap2.default;var _Messages=new _weakMap2.default;var SectionController=function(){function SectionController($scope,$resource,$location,$route,wiki,transFilter,Messages){(0,_classCallCheck3.default)(this,SectionController);_$scope.set(this,$scope);_$resource.set(this,$resource);_$location.set(this,$location);_$route.set(this,$route);_transFilter.set(this,transFilter);_Messages.set(this,Messages);this.wiki=wiki;this.parent=null;this.oldidCheckedIndex=1;this.diffCheckedIndex=0;this.init()}(0,_createClass3.default)(SectionController,[{key:"init",value:function init(){var _this=this;var sectionId=_$route.get(this).current.pathParams.sectionId;this.wiki.setDisplayedSection(sectionId);_$scope.get(this).$on("ngRepeatLoop",function(event,index,element){if(index===0){_this.diff=element.id}if(index===1){_this.oldid=element.id}})}},{key:"displayHome",value:function displayHome(){_$location.get(this).url("/")}},{key:"displayContribution",value:function displayContribution(section,contribution){this.wiki.displayedContribution=contribution;var url="/section/"+section.id+"/contribution/"+contribution.id;_$location.get(this).url(url)}},{key:"setActiveContribution",value:function setActiveContribution(section,contribution){var _this2=this;this.wiki.defineAsActive(section,contribution).then(function(){},function(){_this2._setMessage("success","icap_wiki_set_active_contribution_error")})}},{key:"displayDiff",value:function displayDiff(section,form){_$location.get(this).url("/section/"+section.id+"/compare/"+form.oldid.$modelValue+"/"+form.diff.$modelValue)}},{key:"_setMessage",value:function _setMessage(type,msg){_Messages.get(this).push({type:type,msg:_transFilter.get(this)(msg,{},"icap_wiki")})}}]);return SectionController}();exports.default=SectionController;SectionController.$inject=["$scope","$resource","$location","$route","WikiService","transFilter","Messages"]},1959:function(module,exports){module.exports='<div class="wiki-header-buttons">\n    <button\n        data-ng-click="vm.displayHome()"\n        class="btn btn-primary">\n        {{\'back_to_wiki\'|trans:{}:\'icap_wiki\'}}\n    </button>\n    <button\n        data-ng-click="vm.displaySection(vm.wiki.displayedSection)"\n        class="btn btn-default">\n        {{\'back_to_history\'|trans:{}:\'icap_wiki\'}}\n    </button>\n</div>\n\n<div class="panel panel-wiki">\n    <div class="panel-body">\n        <div class="wiki-page-header page-header">\n            <h2 class="wiki-title-header">\n                <span data-ng-if="vm.wiki.displayedSection.level === 0">{{ vm.wiki.title }}</span>\n                <span data-ng-if="vm.wiki.displayedSection.level !== 0">{{ vm.wiki.displayedContribution.title }}</span>\n            </h2>\n        </div>\n        <div class="contribution-text" data-ng-bind-html="vm.wiki.displayedContribution.text|trustedHtml"></div>\n    </div>\n</div>'},1960:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _weakMap=__webpack_require__(254);var _weakMap2=_interopRequireDefault(_weakMap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _$location=new _weakMap2.default;var _$route=new _weakMap2.default;var ContributionController=function(){function ContributionController($location,$route,wiki){(0,_classCallCheck3.default)(this,ContributionController);_$location.set(this,$location);_$route.set(this,$route);this.wiki=wiki;this.init()}(0,_createClass3.default)(ContributionController,[{key:"init",value:function init(){var _this=this;var sectionId=_$route.get(this).current.pathParams.sectionId;this.wiki.setDisplayedSection(sectionId).then(function(){var contributionId=_$route.get(_this).current.pathParams.contributionId;_this.wiki.setDisplayedContribution(contributionId)})}},{key:"displayHome",value:function displayHome(){_$location.get(this).url("/")}},{key:"displaySection",value:function displaySection(section){_$location.get(this).url("/section/"+section.id)}}]);return ContributionController}();exports.default=ContributionController;ContributionController.$inject=["$location","$route","WikiService"]},1961:function(module,exports){module.exports='<div class="wiki-header-buttons">\n    <a data-ng-click="vm.displayHome()" class="btn btn-primary"> {{\'back_to_wiki\'|trans:{}:\'icap_wiki\'}}</a>\n    <a data-ng-click="vm.displaySection(vm.wiki.displayedSection)" class="btn btn-default"> {{\'back_to_history\'|trans:{}:\'icap_wiki\'}}</a>\n</div>\n\n<div class="panel panel-wiki">\n    <div class="panel-body">\n        <div class="page-header">\n            <h2 class="wiki-title-header">\n                <span data-ng-if="vm.wiki.displayedSection === null || vm.wiki.displayedSection.level === 0">{{ vm.wiki.title }}</span>\n                <span data-ng-if="vm.wiki.displayedSection.level !== 0">{{ vm.wiki.displayedSection.activeContribution.title }}</span>\n                : {{\'revision_comparison\'|trans:{}:\'icap_wiki\'}}\n            </h2>\n        </div>\n\n        <div class="row">\n            <div\n                class="col-md-6"\n                data-ng-repeat="contribution in vm.wiki.diff">\n                <h3\n                    data-ng-if="vm.wiki.section.level !== 0"\n                    class="wiki-revision-comparison-header"\n                    data-ng-bind-html="contribution.title | trustedHtml"></h3>\n                <div class="wiki-revision-comparison-info">\n                    [\n                    {{contribution.contributor.userName}} ({{ contribution.contributor.firstName }} {{contribution.contributor.lastName}}) -\n                    {{contribution.creationDate.date | convertAPIDate | datetime}}\n                    ]\n                </div>\n                <div data-ng-bind-html="contribution.text | trustedHtml"></div>\n            </div>\n        </div>\n        <div class="well well-sm diff-html-legend">\n            <div class="row">\n                <div class="col-md-4"><span class="diff-html-added diff-html-simple">&nbsp;</span> {{\'added\'|trans:{}:\'icap_wiki\'}}</div>\n                <div class="col-md-4"><span class="diff-html-removed diff-html-simple">&nbsp;</span> {{\'deleted\'|trans:{}:\'icap_wiki\'}}</div>\n                <div class="col-md-4"><span class="diff-html-changed diff-html-simple">&nbsp;</span> {{\'changed\'|trans:{}:\'icap_wiki\'}}</div>\n            </div>\n        </div>\n    </div>\n</div>\n\n'},1962:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _weakMap=__webpack_require__(254);var _weakMap2=_interopRequireDefault(_weakMap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _$location=new _weakMap2.default;var _$route=new _weakMap2.default;var Diff=function(){function Diff(wiki,$location,$route){(0,_classCallCheck3.default)(this,Diff);this.wiki=wiki;_$location.set(this,$location);_$route.set(this,$route);this.init()}(0,_createClass3.default)(Diff,[{key:"init",value:function init(){var _this=this;var oldId=_$route.get(this).current.params.oldId;var newId=_$route.get(this).current.params.newId;var sectionId=_$route.get(this).current.params.sectionId;this.wiki.setDisplayedSection(sectionId).then(function(){_this.wiki.setDiffContributions(sectionId,oldId,newId)})}},{key:"displayHome",value:function displayHome(){_$location.get(this).url("/")}},{key:"displaySection",value:function displaySection(section){_$location.get(this).url("/section/"+section.id)}}]);return Diff}();exports.default=Diff;Diff.$inject=["WikiService","$location","$route"]}});