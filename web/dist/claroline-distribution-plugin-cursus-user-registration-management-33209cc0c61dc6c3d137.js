webpackJsonp([23],[function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(123);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var userId=parseInt((0,_jquery2.default)("#registration-datas-box").data("user-id"));var type=parseInt((0,_jquery2.default)("#registration-datas-box").data("type"));var registeredSessionsIdsTxt=""+(0,_jquery2.default)("#registration-datas-box").data("sessions-ids");registeredSessionsIdsTxt=registeredSessionsIdsTxt.trim();var registeredSessionsIds=registeredSessionsIdsTxt==="undefined"||registeredSessionsIdsTxt===""?[]:registeredSessionsIdsTxt.split(",");var sessionsIds=[];function activateSubmitButton(){if(sessionsIds.length>0){(0,_jquery2.default)("#register-sessions-btn").removeClass("disabled")}else{(0,_jquery2.default)("#register-sessions-btn").addClass("disabled")}}function checkRegisteredSessions(){for(var i=0;i<registeredSessionsIds.length;i++){var sessionId=parseInt(registeredSessionsIds[i]);(0,_jquery2.default)("#session-chk-"+sessionId).prop("checked",true);(0,_jquery2.default)("#session-chk-"+sessionId).prop("disabled",true)}}function checkSelection(){for(var i=0;i<sessionsIds.length;i++){(0,_jquery2.default)("#session-chk-"+sessionsIds[i]).prop("checked",true)}}function uncheckSession(sessionId){(0,_jquery2.default)("#session-chk-"+sessionId).prop("checked",false)}function addSession(sessionId,sessionName,courseTitle,courseCode){for(var i=0;i<sessionsIds.length;i++){if(sessionsIds[i]===sessionId){return false}}sessionsIds.push(sessionId);var element='<div id="selected-session-element-'+sessionId+'">'+courseTitle+" <small>["+courseCode+"]</small> - "+sessionName+'&nbsp;&nbsp;<i class="fa fa-trash pointer-hand remove-session-btn" data-session-id="'+sessionId+'"></i>'+"</div>";(0,_jquery2.default)("#selected-sessions").append(element)}function removeSession(sessionId){for(var i=0;i<sessionsIds.length;i++){if(sessionsIds[i]===sessionId){sessionsIds.splice(i,1);break}}uncheckSession(sessionId);(0,_jquery2.default)("#selected-session-element-"+sessionId).remove()}function refreshSessionsList(url){_jquery2.default.ajax({url:url,type:"GET",success:function success(result){(0,_jquery2.default)("#sessions-list-box").html(result);checkRegisteredSessions();checkSelection()}})}(0,_jquery2.default)("#sessions-list-box").on("click",".pagination a",function(event){event.preventDefault();event.stopPropagation();var element=event.currentTarget;var url=(0,_jquery2.default)(element).attr("href");refreshSessionsList(url)});(0,_jquery2.default)("#sessions-list-box").on("click",".session-chk",function(){var sessionId=parseInt((0,_jquery2.default)(this).val());var courseTitle=(0,_jquery2.default)(this).data("course-title");var courseCode=(0,_jquery2.default)(this).data("course-code");var sessionName=(0,_jquery2.default)(this).data("session-name");var checked=(0,_jquery2.default)(this).prop("checked");if(checked){addSession(sessionId,sessionName,courseTitle,courseCode)}else{removeSession(sessionId)}activateSubmitButton()});(0,_jquery2.default)("#search-sessions-btn").on("click",function(){var search=(0,_jquery2.default)("#search-sessions-input").val();var url=Routing.generate("claro_cursus_sessions_datas_list",{search:search});refreshSessionsList(url)});(0,_jquery2.default)("#search-sessions-input").keypress(function(e){if(e.keyCode===13){var search=(0,_jquery2.default)(this).val();var url=Routing.generate("claro_cursus_sessions_datas_list",{search:search});refreshSessionsList(url)}});(0,_jquery2.default)("#register-sessions-btn").on("click",function(){var url=Routing.generate("claro_cursus_sessions_register",{user:userId,type:type});var parameters={};parameters.sessionsIds=sessionsIds;url+="?"+_jquery2.default.param(parameters);window.location=url});(0,_jquery2.default)("#selected-sessions").on("click",".remove-session-btn",function(){var sessionId=parseInt((0,_jquery2.default)(this).data("session-id"));removeSession(sessionId)});checkRegisteredSessions()}]);