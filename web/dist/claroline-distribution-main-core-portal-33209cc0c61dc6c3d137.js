webpackJsonp([7],{0:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(245);__webpack_require__(246);__webpack_require__(247);__webpack_require__(237);__webpack_require__(248);__webpack_require__(90);__webpack_require__(5);__webpack_require__(6);var _portalSearch=__webpack_require__(250);var _portalSearch2=_interopRequireDefault(_portalSearch);var _portal=__webpack_require__(253);var _portal2=_interopRequireDefault(_portal);var _register=__webpack_require__(270);var _register2=_interopRequireDefault(_register);var _routing=__webpack_require__(271);var _routing2=_interopRequireDefault(_routing);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var portalApp=new _register2.default("portalApp",["angular-loading-bar","ngRoute","ngAnimate","ui.asset","ui.bootstrap","ui.fos-js-router","ui.html-truster","ui.translation"]);portalApp.config(_routing2.default).directive("portalSearch",_portalSearch2.default).service("portalService",_portal2.default).filter("resourcePath",["$filter",function($filter){return function(resource){if(resource.resourceType=="directory"){return $filter("path")("claro_workspace_open_tool",{workspaceId:resource.workspaceId,toolName:"home"})}else{return $filter("path")("claro_resource_open_short",{node:resource.id})}}}]);_index2.default.element(document).ready(function(){_index2.default.bootstrap(document.getElementsByTagName("body")[0],["portalApp"])})},250:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _portalSearchPartial=__webpack_require__(251);var _portalSearchPartial2=_interopRequireDefault(_portalSearchPartial);var _portalSearch=__webpack_require__(252);var _portalSearch2=_interopRequireDefault(_portalSearch);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PortalSearchDirective=function PortalSearchDirective(){(0,_classCallCheck3.default)(this,PortalSearchDirective);this.restrict="EA";this.scope={options:"="};this.template=_portalSearchPartial2.default;this.controller=_portalSearch2.default;this.controllerAs="vm";this.bindToController=true};exports.default=PortalSearchDirective},251:function(module,exports){module.exports='<div class="container-fluid">\n    <form class="form-horizontal row" data-ng-submit="vm.submit()">\n        <div class="form-group col-md-6">\n            <div class="input-group">\n                <input type="text" class="form-control" id="searchQuery" data-ng-value="vm.options.query" data-ng-model="vm.options.query" name="query" autofocus="autofocus" placeholder="{{ \'portal_search\'|trans:{}:\'platform\' }}"/>\n                <div class="input-group-addon" data-ng-click="vm.submit()"><i class="fa fa-search"></i></div>\n            </div>\n        </div>\n    </form>\n</div>'},252:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PortalSearch=function(){function PortalSearch(){(0,_classCallCheck3.default)(this,PortalSearch);this.options=_index2.default.extend(this._defaultOptions,this.options)}(0,_createClass3.default)(PortalSearch,[{key:"submit",value:function submit(){this.options.onSearchClick.apply(this,[this.options.query])}},{key:"_defaultOptions",get:function get(){return{resourceType:"all",query:"",onSearchClick:function onSearchClick(){}}}}]);return PortalSearch}();exports.default=PortalSearch},253:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof2=__webpack_require__(34);var _typeof3=_interopRequireDefault(_typeof2);var _keys=__webpack_require__(179);var _keys2=_interopRequireDefault(_keys);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _weakMap=__webpack_require__(254);var _weakMap2=_interopRequireDefault(_weakMap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _$http=new _weakMap2.default;var _$q=new _weakMap2.default;var _$filter=new _weakMap2.default;var PortalService=function(){function PortalService(resourceTypes,$http,$q,$filter){(0,_classCallCheck3.default)(this,PortalService);_$http.set(this,$http);_$q.set(this,$q);_$filter.set(this,$filter);this.resourceTypes=resourceTypes;this.indexData=null;this.searchResults={}}(0,_createClass3.default)(PortalService,[{key:"index",value:function index(){var _this=this;if(this.indexData==null||this.indexData.length==0){var path=this._path("claro_portal_api_get");var q=this._request("get",path).then(function(data){_this.indexData=data;return _this._resolve(data)},function(data){return _this._reject(data)});return q}else{return this._resolve(this.indexData)}}},{key:"search",value:function search(resourceType,query,page){var _this2=this;resourceType=resourceType||"all";query=query||"";page=page||1;var path=this._path("claro_portal_api_search",{resourceType:resourceType,query:query,page:page});var q=this._request("get",path).then(function(data){return _this2._resolve(data)},function(data){return _this2._reject(data)});return q}},{key:"isPortalActive",value:function isPortalActive(){return(0,_keys2.default)(this.resourceTypes).length>0}},{key:"_path",value:function _path(name){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return _$filter.get(this)("path")(name,params)}},{key:"_request",value:function _request(method,path){var _this3=this;var data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var config=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};return _$http.get(this)({method:method,url:path,data:data,config:config}).then(function(response){if((0,_typeof3.default)(response.data)==="object"){return _this3._resolve(response.data)}else{return _this3._reject(response.data)}},function(response){return _this3._reject(response.data)})}},{key:"_reject",value:function _reject(data){return _$q.get(this).reject(data)}},{key:"_resolve",value:function _resolve(data){return _$q.get(this).resolve(data)}}]);return PortalService}();exports.default=PortalService;PortalService.$inject=["portal.types","$http","$q","$filter"]},270:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _weakMap=__webpack_require__(254);var _weakMap2=_interopRequireDefault(_weakMap);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _app=new _weakMap2.default;var Register=function(){function Register(appName,deps){(0,_classCallCheck3.default)(this,Register);deps=deps||[];var module=void 0;try{module=_index2.default.module(appName)}catch(error){module=_index2.default.module(appName,deps)}_app.set(this,module)}(0,_createClass3.default)(Register,[{key:"config",value:function config(constructorFn){constructorFn=this._normalizeConstructor(constructorFn);var factoryArray=this._createFactoryArray(constructorFn);_app.get(this).config(factoryArray);return this}},{key:"constant",value:function constant(name,obj){_app.get(this).constant(name,obj);return this}},{key:"controller",value:function controller(name,constructorFn){_app.get(this).controller(name,constructorFn);return this}},{key:"directive",value:function directive(name,constructorFn){constructorFn=this._normalizeConstructor(constructorFn);if(!constructorFn.prototype.compile){constructorFn.prototype.compile=function(){}}var originalCompileFn=this._cloneFunction(constructorFn.prototype.compile);this._override(constructorFn.prototype,"compile",function(){return function(){originalCompileFn.apply(this,arguments);if(constructorFn.prototype.link){return constructorFn.prototype.link.bind(this)}}});var factoryArray=this._createFactoryArray(constructorFn);_app.get(this).directive(name,factoryArray);return this}},{key:"factory",value:function factory(name,constructorFn){constructorFn=this._normalizeConstructor(constructorFn);var factoryArray=this._createFactoryArray(constructorFn);_app.get(this).factory(name,factoryArray);return this}},{key:"filter",value:function filter(name,constructorFn){constructorFn=this._normalizeConstructor(constructorFn);var factoryArray=this._createFactoryArray(constructorFn);_app.get(this).filter(name,factoryArray);return this}},{key:"provider",value:function provider(name,constructorFn){_app.get(this).provider(name,constructorFn);return this}},{key:"run",value:function run(constructorFn){constructorFn=this._normalizeConstructor(constructorFn);var factoryArray=this._createFactoryArray(constructorFn);_app.get(this).run(factoryArray);return this}},{key:"service",value:function service(name,constructorFn){_app.get(this).service(name,constructorFn);return this}},{key:"value",value:function value(name,object){_app.get(this).value(name,object);return this}},{key:"_normalizeConstructor",value:function _normalizeConstructor(input){var constructorFn=void 0;if(input.constructor==Array){var injected=input.slice(0,input.length-1);constructorFn=input[input.length-1];constructorFn.$inject=injected}else{constructorFn=input}return constructorFn}},{key:"_createFactoryArray",value:function _createFactoryArray(constructorFn){var args=constructorFn.$inject||[];var factoryArray=args.slice();factoryArray.push(function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var instance=new(Function.prototype.bind.apply(constructorFn,[null].concat(args)));for(var key in instance){instance[key]=instance[key]}return instance});return factoryArray}},{key:"_cloneFunction",value:function _cloneFunction(original){return function(){return original.apply(this,arguments)}}},{key:"_override",value:function _override(object,method,callback){object[method]=callback(object[method])}}]);return Register}();exports.default=Register},271:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=Router;var _indexPartial=__webpack_require__(272);var _indexPartial2=_interopRequireDefault(_indexPartial);var _searchPartial=__webpack_require__(273);var _searchPartial2=_interopRequireDefault(_searchPartial);var _index=__webpack_require__(274);var _index2=_interopRequireDefault(_index);var _search=__webpack_require__(275);var _search2=_interopRequireDefault(_search);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Router($routeProvider,$locationProvider){$routeProvider.when("/",{template:_indexPartial2.default,controllerAs:"vm",controller:_index2.default}).when("/search/:resourceType",{template:_searchPartial2.default,controllerAs:"vm",controller:_search2.default}).otherwise("/");$locationProvider.html5Mode(true)}Router.$inject=["$routeProvider","$locationProvider"]},272:function(module,exports){module.exports='<div data-ng-if="vm.isPortalActive && (vm.images || vm.lastResources)">\n    <portal-search data-options="vm.portalSearchOptions"></portal-search>\n    <div data-ng-if="vm.images && vm.images.length" class="container-fluid">\n        <div class="row">\n            <div class="col-md-12">\n                <h4><a href="search/image">{{ \'image\'|trans:{}:\'resource\' }}</a></h4>\n                <div class="row row-eq-height">\n                    <div data-ng-repeat="image in vm.images" class="col-xs-3 col-sm-2 col-md-1">\n                        <a class="thumbnail" href="{{ \'claro_resource_open_short\'|path:{\'node\': image.id} }}"><img data-ng-src="{{ image.relativeUrl|asset }}" alt="{{ image.name }}" title="{{ image.name }}"/></a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div data-ng-if="vm.lastResources" class="container-fluid">\n        <div class="row">\n            <div class="row">\n                <div data-ng-repeat="(key, resources) in vm.lastResources" class="portal-index-resource-type-list col-md-3">\n                    <h4><a href="search/{{resources.type}}">{{ key }}</a></h4>\n                    <div data-ng-repeat="resource in resources.list">\n                        <div><a href="{{ resource|resourcePath }}" data-ng-bind-html="resource.name|trust_html"></a></div>\n                        <div class="text-muted small italic"><em>{{ \'created_by\'|trans:{\'creator\': resource.creatorFirstName + \' \' + resource.creatorLastName, \'creationDate\': (resource.creationDate|date:(\'date_form_format\'|trans)) }:\'platform\' }}</em></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div data-ng-if="!vm.isPortalActive" data-ng-bind="\'portal_access_disabled\'|trans:{}:\'platform\' "></div>\n<div data-ng-if="vm.isPortalActive && vm.images.length == 0 && vm.lastResources.length == 0" data-ng-bind="\'portal_no_published_resources\'|trans:{}:\'platform\' "></div>'},273:function(module,exports){module.exports='<div data-ng-if="vm.isPortalActive">\n    <portal-search data-options="vm.portalSearchOptions"></portal-search>\n    <div class="container-fluid portal-search-tabs-container">\n        <ul class="nav nav-tabs portal-search-tabs row" role="tablist">\n            <li class="portal-back-button">\n                <a href="./">\n                    <i class="fa fa-angle-left"></i>\n                    <span class="option-text">{{\'portal_short\'|trans:{}:\'platform\'}}</span>\n                </a>\n            </li>\n            <li data-ng-repeat="type in vm.resourceTypes.visible" data-ng-class="{\'active\': type == vm.resourceType}">\n                <a data-ng-if="type != \'file\'" href="search/{{type}}?query={{vm.query}}">\n                    <span class="icon-bg"></span>\n                    <span class="option-text">{{ type|trans:{}:\'resource\' }}</span>\n                </a>\n                <a data-ng-if="type == \'file\'" href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">\n                    <span class="icon-bg"></span>\n                    <span class="option-text">{{ \'media\'|trans:{}:\'resource\' }}</span>\n                    <span class="caret"></span>\n                </a>\n                <ul data-ng-if="type == \'file\'" class="dropdown-menu">\n                    <li data-ng-class="{\'active\': !vm.fileType && vm.resourceType == type}">\n                        <a href="search/{{type}}?query={{vm.query}}">\n                            {{ \'all\'|trans:{}:\'resource\' }}\n                        </a>\n                    </li>\n                    <li data-ng-repeat="fileType in vm.fileTypes" data-ng-class="{\'active\': fileType == vm.fileType}">\n                        <a href="search/{{fileType}}?query={{vm.query}}">\n                            {{ fileType|trans:{}:\'resource\' }}\n                        </a>\n                    </li>\n                </ul>\n            </li>\n            <li data-ng-if="vm.resourceTypes.more && vm.resourceTypes.more.length" class="dropdown">\n                <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">\n                    <span class="option-text">{{ \'more\'|trans:{}:\'resource\' }}</span>\n                    <span class="caret"></span>\n                </a>\n                <ul class="dropdown-menu">\n                    <li data-ng-repeat="type in vm.resourceTypes.more" data-ng-class="{\'active\': type == vm.resourceType}">\n                        <a href="search/{{type}}?query={{vm.query}}">\n                            {{ type|trans:{}:\'resource\' }}\n                        </a>\n                    </li>\n                </ul>\n            </li>\n\n        </ul>\n    </div>\n    <div class="container-fluid">\n        <div class="row">\n            <div data-ng-if="vm.resourceType && vm.pagination.totalItems >=0 " class="portal-search-result-info text-muted"><em data-ng-bind="\'portal_search_total_results\'|trans:{\'type\': ((vm.fileType || vm.resourceType)|trans:\'resource\'), \'totalItems\':vm.pagination.totalItems}:\'platform\'"></em></div>\n            <div data-ng-if="vm.resources && vm.resources.length">\n                <div data-ng-repeat="resource in vm.resources">\n                    <div class="portal-search-result">\n                        <div class="icon-column pull-left">\n                            <img data-ng-src="{{ resource.relativeUrl|asset }}" style="max-width: 40px; max-height: 40px;" alt="{{ resource.name }}" title="{{ resource.name }}"/>\n                        </div>\n                        <div class="text-column pull-left">\n                            <div><a href="{{ resource|resourcePath }}" data-ng-bind-html="resource.name|trust_html"></a></div>\n                            <div class="text-muted small italic"><em>{{ \'created_by\'|trans:{\'creator\': resource.creatorFirstName + \' \' + resource.creatorLastName, \'creationDate\': (resource.creationDate|date:(\'date_form_format\'|trans)) }:\'platform\' }}</em></div>\n                        </div>\n                        <div class="clearfix"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <uib-pagination class="portal-search-pagination" data-ng-if="vm.pagination.hasToPaginate" previous-text="&#xf104" next-text="&#xf105" ng-change="vm.pageChanged()" force-ellipses="true" max-size="5" total-items="vm.pagination.totalItems" ng-model="vm.currentPage" items-per-page="vm.pagination.itemsPerPage"></uib-pagination>\n    </div>\n</div>\n<div data-ng-if="!vm.isPortalActive" data-ng-bind="\'portal_access_disabled\'|trans:{}:\'platform\' "></div>'},274:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _weakMap=__webpack_require__(254);var _weakMap2=_interopRequireDefault(_weakMap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _portalService=new _weakMap2.default;var _$location=new _weakMap2.default;var Index=function(){function Index(portalService,$location){(0,_classCallCheck3.default)(this,Index);this.isPortalActive=portalService.isPortalActive();this.portalSearchOptions={type:"all",query:"",onSearchClick:this.onSearchClicked.bind(this)};_portalService.set(this,portalService);_$location.set(this,$location);this.init()}(0,_createClass3.default)(Index,[{key:"init",value:function init(){var _this=this;if(this.isPortalActive){_portalService.get(this).index().then(function(data){_this.images=data.images;_this.lastResources=data.lastResources})}}},{key:"onSearchClicked",value:function onSearchClicked(query){_$location.get(this).path("search/all").search("query",query)}}]);return Index}();exports.default=Index;Index.$inject=["portalService","$location"]},275:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getOwnPropertyNames=__webpack_require__(276);var _getOwnPropertyNames2=_interopRequireDefault(_getOwnPropertyNames);var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _weakMap=__webpack_require__(254);var _weakMap2=_interopRequireDefault(_weakMap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _portalService=new _weakMap2.default;var _$location=new _weakMap2.default;var _$route=new _weakMap2.default;var _$rootScope=new _weakMap2.default;var Search=function(){function Search(portalService,$routeParams,$location,$route,$rootScope){(0,_classCallCheck3.default)(this,Search);this.resourceTypes=angular.merge({},portalService.resourceTypes);this.isPortalActive=portalService.isPortalActive();this.resourceType=$routeParams.resourceType||"all";this.currentPage=$routeParams.page||1;this.fileTypes=["image","video","document"];this.fileType=null;this.query=$routeParams.query||"";this.portalSearchOptions={type:this.resourceType,query:this.query,onSearchClick:this.onSearchClicked.bind(this)};_portalService.set(this,portalService);_$location.set(this,$location);_$route.set(this,$route);_$rootScope.set(this,$rootScope);this.init()}(0,_createClass3.default)(Search,[{key:"init",value:function init(){if((0,_getOwnPropertyNames2.default)(this.resourceTypes).length>0){this._fixResourceTypeOrder();this._fixFileType();this.search()}}},{key:"search",value:function search(){var _this=this;_portalService.get(this).search(this.fileType||this.resourceType,this.query,this.currentPage).then(function(data){_this.pagination=data;_this.currentPage=_this.pagination.currentPage;_this.resources=data.data})}},{key:"pageChanged",value:function pageChanged(){this.search();this._locationSearchNoReload({query:this.query,page:this.currentPage});this.currentPage=this.pagination.currentPage}},{key:"onSearchClicked",value:function onSearchClicked(query){if(query!=this.query){this.query=query;this.currentPage=1;this.search();this._locationSearchNoReload({query:query,page:this.currentPage});this.currentPage=this.pagination.currentPage}}},{key:"_fixFileType",value:function _fixFileType(){var idx=this.fileTypes.indexOf(this.resourceType);if(idx>-1){this.fileType=this.resourceType;this.resourceType="file"}}},{key:"_fixResourceTypeOrder",value:function _fixResourceTypeOrder(){var idx=this.resourceTypes.more.indexOf(this.resourceType);if(idx>-1){var tmp=this.resourceTypes.visible.pop();this.resourceTypes.visible.push(this.resourceType);this.resourceTypes.more.splice(idx,1);this.resourceTypes.more.unshift(tmp)}}},{key:"_locationSearchNoReload",value:function _locationSearchNoReload(parameters){var $location=_$location.get(this);var $route=_$route.get(this);var $rootScope=_$rootScope.get(this);var oldRoute=$route.current;var unsubscribe=$rootScope.$on("$locationChangeSuccess",function(){if(oldRoute){$route.current=oldRoute;oldRoute=null}unsubscribe();unsubscribe=null});$location.search(parameters)}}]);return Search}();exports.default=Search;Search.$inject=["portalService","$routeParams","$location","$route","$rootScope"]},276:function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(277),__esModule:true}},277:function(module,exports,__webpack_require__){__webpack_require__(278);var $Object=__webpack_require__(20).Object;module.exports=function getOwnPropertyNames(it){return $Object.getOwnPropertyNames(it)}},278:function(module,exports,__webpack_require__){__webpack_require__(162)("getOwnPropertyNames",function(){return __webpack_require__(81).f})}});