webpackJsonp([38],{0:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(5);__webpack_require__(6);__webpack_require__(149);__webpack_require__(9);var _interceptorsDefault=__webpack_require__(89);var _interceptorsDefault2=_interopRequireDefault(_interceptorsDefault);var _TracksButtonDirective=__webpack_require__(1884);var _TracksButtonDirective2=_interopRequireDefault(_TracksButtonDirective);var _TracksModalController=__webpack_require__(1888);var _TracksModalController2=_interopRequireDefault(_TracksModalController);var _TrackEditModalController=__webpack_require__(1891);var _TrackEditModalController2=_interopRequireDefault(_TrackEditModalController);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("TrackButton",["ui.bootstrap","ui.translation","FormBuilder","ClarolineAPI"]).directive("videoTracks",function(){return new _TracksButtonDirective2.default}).controller("TracksModalController",_TracksModalController2.default).controller("TrackEditModalController",_TrackEditModalController2.default).config(_interceptorsDefault2.default)},134:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NotBlank=function(){function NotBlank(){(0,_classCallCheck3.default)(this,NotBlank)}(0,_createClass3.default)(NotBlank,[{key:"validate",value:function validate(el){return!(el===undefined||el===""||el===null)}},{key:"getErrorMessage",value:function getErrorMessage(el){return Translator.trans("value_not_blank",{},"validators")}}]);return NotBlank}();exports.default=NotBlank},1884:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _TracksButtonController=__webpack_require__(1885);var _TracksButtonController2=_interopRequireDefault(_TracksButtonController);var _tracks_button=__webpack_require__(1887);var _tracks_button2=_interopRequireDefault(_tracks_button);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TracksButtonDirective=function TracksButtonDirective(){(0,_classCallCheck3.default)(this,TracksButtonDirective);this.scope={};this.restrict="E";this.template=_tracks_button2.default;this.replace=true;this.controller=_TracksButtonController2.default;this.controllerAs="tbc"};exports.default=TracksButtonDirective},1885:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _tracks=__webpack_require__(1886);var _tracks2=_interopRequireDefault(_tracks);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TracksButtonController=function(){function TracksButtonController($uibModal,$http){(0,_classCallCheck3.default)(this,TracksButtonController);this.$uibModal=$uibModal;this.tracks=window["tracks"]}(0,_createClass3.default)(TracksButtonController,[{key:"openTracks",value:function openTracks(){var _this=this;this.$uibModal.open({template:_tracks2.default,controller:"TracksModalController",controllerAs:"tmc",resolve:{tracks:function tracks(){return _this.tracks}}})}}]);return TracksButtonController}();exports.default=TracksButtonController},1886:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button>\n        <h4> {{ \'track_list\'|trans:{}:\'platform\' }} </h4>\n    </div>\n    <div class="modal-body">\n        <div>\n            <ul class="list-group">\n                <li class="list-group-item" ng-repeat="(key, track) in tmc.tracks track by track.id">\n                    <button class="btn btn-xs" ng-click="tmc.onEdit(track)"><i class="fa fa-pencil-square-o"></i></button> {{ track.lang }} ({{ track.label }}) <span class ng-if="track.is_default"> - {{ \'default\'|trans:{}:\'platform \'}} </span>\n                    <a href=\'#\' class="pull-right remove-facet-panel pointer" ng-click="tmc.onDelete(track)">x</a>\n                </li>\n            </ul>\n        </div>\n        <div>\n            <form class="form-horizontal" name="trackForm" ng-submit="tmc.onCreate(trackForm)">\n                <formbuilder form="tmc.trackForm" ng-model="tmc.newTrack"></formbuilder>\n                <input data-ng-disabled="!trackForm.$valid" type="submit" value="{{ \'new\'|trans:{}:\'platform\' }}" class="btn btn-primary"></input>\n            </form>\n        </div>\n    </div>\n</div>\n'},1887:function(module,exports){module.exports="<span>\n    <button class=\"btn btn-primary\" ng-click=\"tbc.openTracks()\"> {{ 'tracks'|trans:{}:'platform' }} </button>\n</span>\n"},1888:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _iso=__webpack_require__(209);var _iso2=_interopRequireDefault(_iso);var _form=__webpack_require__(1889);var _form2=_interopRequireDefault(_form);var _edit=__webpack_require__(1890);var _edit2=_interopRequireDefault(_edit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TracksModalController=function(){function TracksModalController(tracks,FormBuilderService,ClarolineAPIService,$uibModal){(0,_classCallCheck3.default)(this,TracksModalController);this.tracks=tracks;this.newTrack={};this.FormBuilderService=FormBuilderService;this.ClarolineAPIService=ClarolineAPIService;this.$uibModal=$uibModal;this.trackForm=_form2.default}(0,_createClass3.default)(TracksModalController,[{key:"onCreate",value:function onCreate(){var _this=this;this.newTrack["label"]=_iso2.default[this.newTrack.lang]["nativeName"];this.FormBuilderService.submit(Routing.generate("api_post_video_track",{video:window["videoId"]}),{track:this.newTrack}).then(function(d){_this.tracks.push(d.data)})}},{key:"onDelete",value:function onDelete(track){var url=Routing.generate("api_delete_video_track",{track:track.id});this.ClarolineAPIService.confirm({url:url,method:"DELETE"},function(){this.ClarolineAPIService.removeElements([track],this.tracks)}.bind(this),Translator.trans("delete_track",{},"platform"),Translator.trans("delete_track_confirm","platform"))}},{key:"onEdit",value:function onEdit(_track){var _this2=this;var modalInstance=this.$uibModal.open({template:_edit2.default,controller:"TrackEditModalController",controllerAs:"temc",resolve:{track:function track(){return _track},trackForm:function trackForm(){return _this2.trackForm}}});modalInstance.result.then(function(track){_this2.FormBuilderService.submit(Routing.generate("api_put_video_track",{track:track.id}),{track:track},"PUT")})}}]);return TracksModalController}();exports.default=TracksModalController},1889:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _NotBlank=__webpack_require__(134);var _NotBlank2=_interopRequireDefault(_NotBlank);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={fields:[["lang","lang",{label:Translator.trans("lang",{},"platform"),validators:[new _NotBlank2.default]}],["is_default","checkbox",{label:Translator.trans("is_default",{},"platform")}],["track","file",{label:Translator.trans("track",{},"platform"),validators:[new _NotBlank2.default]}]]}},1890:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button>\n        <h4> {{ \'edit_track\'|trans:{}:\'platform\' }} </h4>\n    </div>\n    <div class="modal-body">\n        <form data-ng-disabled="!editTrackForm.$valid" class="form-horizontal" name="editTrackForm" ng-submit="temc.onSubmit(editTrackForm)">\n            <formbuilder form="temc.trackForm" ng-model="temc.track"></formbuilder>\n            <input type="submit" value="{{ \'edit\'|trans:{}:\'platform\' }}" class="btn btn-primary"></input>\n        </form>\n    </div>\n</div>\n'},1891:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _iso=__webpack_require__(209);var _iso2=_interopRequireDefault(_iso);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TrackEditModalController=function(){function TrackEditModalController($http,$uibModalInstance,track){(0,_classCallCheck3.default)(this,TrackEditModalController);this.$http=$http;this.track=track;this.trackForm={fields:[["lang","lang",{label:Translator.trans("lang",{},"platform")}],["is_default","checkbox",{label:Translator.trans("is_default",{},"platform")}]]};this.$uibModalInstance=$uibModalInstance}(0,_createClass3.default)(TrackEditModalController,[{key:"onSubmit",value:function onSubmit(){this.track["label"]=_iso2.default[this.track.lang]["nativeName"];this.$uibModalInstance.close(this.track)}}]);return TrackEditModalController}();exports.default=TrackEditModalController}});