webpackJsonp([10],[function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(222);__webpack_require__(5);__webpack_require__(6);__webpack_require__(4);__webpack_require__(223);var _UserController=__webpack_require__(286);var _UserController2=_interopRequireDefault(_UserController);var _UserInfoModalController=__webpack_require__(288);var _UserInfoModalController2=_interopRequireDefault(_UserInfoModalController);var _RemoveByCsvModalController=__webpack_require__(287);var _RemoveByCsvModalController2=_interopRequireDefault(_RemoveByCsvModalController);var _ImportCsvFacetsController=__webpack_require__(402);var _ImportCsvFacetsController2=_interopRequireDefault(_ImportCsvFacetsController);var _UserAPIService=__webpack_require__(403);var _UserAPIService2=_interopRequireDefault(_UserAPIService);__webpack_require__(404);__webpack_require__(415);__webpack_require__(9);var _routing=__webpack_require__(422);var _routing2=_interopRequireDefault(_routing);__webpack_require__(237);__webpack_require__(149);__webpack_require__(237);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("UsersManager",["ClarolineSearch","ui.fos-js-router","data-table","ui.bootstrap.tpls","ClarolineAPI","ui.translation","ui.router","GroupsManager","FormBuilder","ncy-angular-breadcrumb"]).controller("UserController",["$http","ClarolineSearchService","ClarolineAPIService","$uibModal",_UserController2.default]).controller("RemoveByCsvModalController",_RemoveByCsvModalController2.default).controller("UserInfoModalController",_UserInfoModalController2.default).controller("ImportCsvFacetsController",_ImportCsvFacetsController2.default).service("UserAPIService",["$http","url",_UserAPIService2.default]).config(_routing2.default)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(3)(43)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(3)(40)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);__webpack_require__(287);var _UserInfoModalController=__webpack_require__(288);var _UserInfoModalController2=_interopRequireDefault(_UserInfoModalController);var _user_info=__webpack_require__(289);var _user_info2=_interopRequireDefault(_user_info);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);var _csv_remove=__webpack_require__(290);var _csv_remove2=_interopRequireDefault(_csv_remove);var _csv_facet=__webpack_require__(291);var _csv_facet2=_interopRequireDefault(_csv_facet);var _Configuration=__webpack_require__(292);var _Configuration2=_interopRequireDefault(_Configuration);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UserController=function(){function UserController($http,ClarolineSearchService,ClarolineAPIService,$uibModal){var _this=this;(0,_classCallCheck3.default)(this,UserController);this.ClarolineAPIService=ClarolineAPIService;this.$http=$http;this.ClarolineSearchService=ClarolineSearchService;this.userActions=[];this.search="";this.savedSearch=[];this.users=[];this.roles=[];this.selectedRoles=[];this.selected=[];this.alerts=[];this.fields=[];this.managedOrganizations=[];this.$uibModal=$uibModal;this.buttons=_Configuration2.default.getUsersAdministrationActions();var columns=[{name:this.translate("username"),isCheckboxColumn:true,headerCheckbox:true,cellRenderer:function cellRenderer(scope){var content='<a href="'+Routing.generate("claro_profile_view",{user:scope.$row.id})+'">'+scope.$row.username+"</a>";return"<span>"+content+"</span>"}},{name:this.translate("first_name"),prop:"firstName"},{name:this.translate("last_name"),prop:"lastName"},{name:this.translate("email"),prop:"mail"},{name:this.translate("actions"),cellRenderer:function cellRenderer(scope){var tr=_this.translate("show_as");var content="<a class='btn btn-default'\n            href='"+Routing.generate("claro_desktop_open",{_switch:scope.$row.username})+"'\n            data-toggle='tooltip'\n            data-placement='bottom'\n            title=''\n            data-original-title='"+tr+"'\n            role='button'>\n            <i class='fa fa-eye'></i>\n          </a>";content=_this.userActions.reduce(function(content,action){var route=Routing.generate("admin_user_action",{user:scope.$row.id,action:action["id"]});return content+("<a class='btn btn-default' href='"+route+"'><i class='fa "+action.class+"'></i></a>")},content);content+="\n            <button class='btn btn-default' ng-click='uc.userInfo($row)'><i class='fa fa-info'></i></button>\n          ";var switchTitle=scope.$row["is_enabled"]?Translator.trans("disable",{},"platform"):Translator.trans("enable",{},"platform");content+="\n            <button title='"+switchTitle+"' class='btn btn-default' ng-click='uc.switchUserState($row)'><i ng-class=\"$row.is_enabled ? 'fa fa-ban': 'fa fa-check'\"></i></button>\n          ";content+="\n            <button title='"+switchTitle+"' class='btn btn-default' ng-click='uc.switchPersonalWorkspace($row)'><i ng-class=\"$row.personal_workspace ? 'fa fa-trash-o': 'fa fa-street-view'\"></i></button>\n          ";_this.buttons.forEach(function(button){content+="\n                  <a title='"+button.name+"' href="+button.url(scope.$row.id)+" class='btn btn-default'><i class=\""+button.class+'"></i></a>\n              '});return"<div>"+content+"</div>"}}];var availableColumns=_index2.default.copy(columns);availableColumns.splice(0,1);this.dataTableOptions={scrollbarV:false,columnMode:"force",headerHeight:50,footerHeight:50,multiSelect:true,checkboxSelection:true,selectable:true,columns:columns,sizes:[10,20,50,100],paging:{externalPaging:true,size:10},availableColumns:availableColumns};$http.get(Routing.generate("api_get_user_admin_actions")).then(function(d){return _this.userActions=d.data});$http.get(Routing.generate("api_get_user_fields")).then(function(d){return _this.fields=d.data});$http.get(Routing.generate("api_get_platform_roles")).then(function(d){return _this.roles=d.data});this._onSearch=this._onSearch.bind(this);this._initPwdCallback=this._initPwdCallback.bind(this);this._deleteCallback=this._deleteCallback.bind(this);this._updateRolesCallback=this._updateRolesCallback.bind(this)}(0,_createClass3.default)(UserController,[{key:"translate",value:function translate(key){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return window.Translator.trans(key,data,"platform")}},{key:"generateQsForSelectedUsers",value:function generateQsForSelectedUsers(){var qs="";for(var i=0;i<this.selected.length;i++){qs+="userIds[]="+this.selected[i].id+"&"}return qs}},{key:"generateQsForSelectedRoles",value:function generateQsForSelectedRoles(){var qs="";for(var i=0;i<this.selected.length;i++){qs+="roleIds[]="+this.selectedRoles[i].id+"&"}return qs}},{key:"paging",value:function paging(offset,size){var _this2=this;this.ClarolineSearchService.find("api_get_search_users",this.savedSearch,offset,size).then(function(d){var users=d.data.users;for(var i=0;i<offset*size;i++){users.unshift({})}_this2.users=users;_this2.dataTableOptions.paging.count=d.data.total})}},{key:"clickDelete",value:function clickDelete(){var url=Routing.generate("api_delete_users")+"?"+this.generateQsForSelectedUsers();var users="";for(var i=0;i<this.selected.length;i++){users+=this.selected[i].username;if(i<this.selected.length-1)users+=", "}this.ClarolineAPIService.confirm({url:url,method:"DELETE"},this._deleteCallback,this.translate("delete_users"),this.translate("delete_users_confirm",{user_list:users}))}},{key:"userInfo",value:function userInfo(_user){this.$uibModal.open({template:_user_info2.default,controller:_UserInfoModalController2.default,controllerAs:"uimc",resolve:{user:function user(){return _user}}})}},{key:"initPassword",value:function initPassword(){var url=Routing.generate("api_users_password_initialize")+"?"+this.generateQsForSelectedUsers();var users="";for(var i=0;i<this.selected.length;i++){users+=this.selected[i].username;if(i<this.selected.length-1)users+=", "}this.ClarolineAPIService.confirm({url:url,method:"GET"},this._initPwdCallback,this.translate("init_password"),this.translate("init_password_confirm",{user_list:users}))}},{key:"closeAlert",value:function closeAlert(index){this.alerts.splice(index,1)}},{key:"csvRemove",value:function csvRemove(){var _this3=this;var modalInstance=this.$uibModal.open({template:_csv_remove2.default,controller:"RemoveByCsvModalController",controllerAs:"rbcmc"});modalInstance.result.then(function(){_this3.paging(0,_this3.dataTableOptions.paging.size)})}},{key:"addRolesToSelection",value:function addRolesToSelection(){var _this4=this;var url=Routing.generate("api_put_users_roles")+"?"+this.generateQsForSelectedRoles()+this.generateQsForSelectedUsers();var users=this.selected.map(function(s){return s.username}).join(", ");var roles=this.selectedRoles.map(function(r){return _this4.translate(r.translation_key)}).join(", ");this.ClarolineAPIService.confirm({url:url,method:"PUT"},this._updateRolesCallback,this.translate("role_update"),this.translate("role_update_confirm",{user_list:users,role_list:roles}))}},{key:"importFacetsForm",value:function importFacetsForm(){var _this5=this;var modalInstance=this.$uibModal.open({template:_csv_facet2.default,controller:"ImportCsvFacetsController",controllerAs:"icfc"});modalInstance.result.then(function(){_this5.alerts.push({type:"success",msg:_this5.translate("facet_imported")})})}},{key:"_onSearch",value:function _onSearch(searches){var _this6=this;this.savedSearch=searches;this.ClarolineSearchService.find("api_get_search_users",searches,0,this.dataTableOptions.paging.size).then(function(d){_this6.users=d.data.users;_this6.dataTableOptions.paging.count=d.data.total;_this6.dataTableOptions.paging.offset=0})}},{key:"_initPwdCallback",value:function _initPwdCallback(){for(var i=0;i<this.selected.length;i++){this.alerts.push({type:"success",msg:this.translate("password_initialized",{user:this.selected[i].username})})}this.selected.splice(0,this.selected.length)}},{key:"_deleteCallback",value:function _deleteCallback(){var _this7=this;this.selected.forEach(function(el){_this7.alerts.push({type:"success",msg:_this7.translate("user_removed",{user:el.username})})});this.ClarolineAPIService.removeElements(this.selected,this.users);this.selected.splice(0,this.selected.length);this.dataTableOptions.paging.count-=this.selected.length}},{key:"_updateRolesCallback",value:function _updateRolesCallback(data){var _this8=this;data.forEach(function(user){_this8.ClarolineAPIService.replaceById(user,_this8.users)});this.alerts.push({type:"success",msg:this.translate("roles_updated")})}},{key:"switchUserState",value:function switchUserState(user){user.is_enabled=!user.is_enabled;var route=user.is_enabled?"api_enable_user":"api_disable_user";this.$http.post(Routing.generate(route,{user:user.id}))}},{key:"switchPersonalWorkspace",value:function switchPersonalWorkspace(user){var route=user.personal_workspace?"api_delete_personal_workspace":"api_create_personal_workspace";this.$http.post(Routing.generate(route,{user:user.id})).then(function(){user.personal_workspace?delete user.personal_workspace:user.personal_workspace=true})}}]);return UserController}();exports.default=UserController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RemoveByCsvModalController=function(){function RemoveByCsvModalController($uibModalInstance,$uibModal,UserAPIService){(0,_classCallCheck3.default)(this,RemoveByCsvModalController);this.$uibModalInstance=$uibModalInstance;this.$uibModal=$uibModal;this.UserAPIService=UserAPIService}(0,_createClass3.default)(RemoveByCsvModalController,[{key:"submit",value:function submit(){var _this=this;var formData=new FormData(document.getElementById("csv-remove-form"));this.UserAPIService.removeFromCsv(formData).then(function(d){return _this.$uibModalInstance.close(d.data)},function(d){if(d.status===400){alert("It didn't work")}})}}]);return RemoveByCsvModalController}();exports.default=RemoveByCsvModalController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UserInfoModalController=function(){function UserInfoModalController(user,$http){var _this=this;(0,_classCallCheck3.default)(this,UserInfoModalController);this.$http=$http;this.user=user;this.rolesList=user.roles.filter(function(role){return role.type===1}).map(function(r){return _this.translate(r.translation_key)}).join(", ");this.workspaces=[];this.$http.get(Routing.generate("api_get_user_workspaces",{user:user.id})).then(function(d){return _this.workspaces=d.data})}(0,_createClass3.default)(UserInfoModalController,[{key:"translate",value:function translate(key){var parameters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return window.Translator.trans(key,parameters,"platform")}}]);return UserInfoModalController}();exports.default=UserInfoModalController},function(module,exports){module.exports="<div class=\"modal-content\">\n    <div class=\"modal-header\">\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\" ng-click=\"$close()\">&times;</button>\n        <h4> {{ uimc.user.username }} </h4>\n    </div>\n    <div class=\"modal-body\">\n        <ul>\n          <li> {{ 'username'|trans:{}:'platform' }}: {{ uimc.user.username }} </li>\n          <li> {{ 'last_name'|trans:{}:'platform' }}: {{ uimc.user.lastName }} </li>\n          <li> {{ 'first_name'|trans:{}:'platform' }}: {{ uimc.user.firstName }}</li>\n          <li> {{ 'roles'|trans:{}:'platform' }}: {{ uimc.rolesList }} </li>\n        </ul>\n\n        {{ 'workspace_list'|trans:{}:'platform' }}:\n        <ul class=\"list-group\">\n            <li ng-repeat=\"(key, workspace) in uimc.workspaces\" class=\"list-group-item\">\n                <a href=\"{{ 'claro_workspace_open'|path:{'workspaceId':workspace.id} }}\"> {{ workspace.name }} </a>\n            </li>\n        </ul>\n    </div>\n</div>\n"},function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button>\n        <h4> {{ \'csv_delete\'|trans:{}:\'platform\' }} </h4>\n    </div>\n    <form id="csv-remove-form" method="post" enctype="multipart/form-data" ng-submit="rbcmc.submit()">\n    <div class="modal-body">\n        <div class="well">\n            <div> {{ \'csv_format_user_list\'|trans:{}:\'platform\' }} </div>\n        </div>\n        <div>\n            {{ \'csv_select\'|trans:{}:\'platform\' }}\n            <input type="file" name="csv" id="user_delete_csv" class="form-control">\n        </div>\n    </div>\n    <div class="modal-footer">\n        <input type="submit" name="submit" class="btn btn-primary pull-left">\n    </div>\n    </form>\n</div>\n'},function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button>\n        <h4> {{ \'import_facets\'|trans:{}:\'platform\' }} </h4>\n    </div>\n    <form id="csv-facets" method="post" enctype="multipart/form-data" ng-submit="icfc.submit()">\n    <div class="modal-body">\n        <div class="well">\n            <div>\n                <h3> {{ \'csv_format_facets\'|trans:{}:\'platform\' }} </h3>\n                <ul>\n                    <li> {{ \'csv_format_facets_line_1\'|trans:{}:\'platform\' }} </li>\n                    <li> {{ \'csv_format_facets_line_end\'|trans:{}:\'platform\' }} </li>\n                </ul>\n            </div>\n        </div>\n        <div>\n            {{ \'csv_select\'|trans:{}:\'platform\' }}\n            <form-field field="[\'csv\', \'file\']"></form-field>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <input type="submit" name="submit" value="{{ \'import\'|trans:{}:\'platform\' }}" class="btn btn-primary pull-left">\n    </div>\n    </form>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _bundleConfigs=__webpack_require__(293);var _bundleConfigs2=_interopRequireDefault(_bundleConfigs);var _union=__webpack_require__(295);var _union2=_interopRequireDefault(_union);var _get=__webpack_require__(368);var _get2=_interopRequireDefault(_get);var _defaults=__webpack_require__(380);var _defaults2=_interopRequireDefault(_defaults);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Configuration=function(){function Configuration(config){(0,_classCallCheck3.default)(this,Configuration);this.config=getDefaultConfig(config)}(0,_createClass3.default)(Configuration,[{key:"getConfig",value:function getConfig(){return this.config}},{key:"setConfig",value:function setConfig(config){this.config=getDefaultConfig(config)}},{key:"getUsersAdministrationActions",value:function getUsersAdministrationActions(){var actions=[];for(var bundle in this.config){actions=(0,_union2.default)(actions,(0,_get2.default)(this.config[bundle],"actions",[]).filter(function(el){return el.type==="administration_users"}))}return actions}}]);return Configuration}();function getDefaultConfig(config){for(var bundle in config){setDefaultBundle(config[bundle])}return config}function setDefaultBundle(bundle){if(bundle.actions){bundle.actions.forEach(function(action,key){bundle.actions[key]=(0,_defaults2.default)(action,{href:"#",class:"fa fa-cog"})})}}exports.default=new Configuration(_bundleConfigs2.default)},function(module,exports,__webpack_require__){"use strict";module.exports={cursus:__webpack_require__(294)}},function(module,exports){"use strict";var coursesManagement=function coursesManagement(userId){return Routing.generate("claro_cursus_user_sessions_management",{user:userId})};module.exports={actions:[{name:"courses_management",url:coursesManagement,type:"administration_users",class:"fa fa-list-alt"}]}},function(module,exports,__webpack_require__){var baseFlatten=__webpack_require__(296),baseRest=__webpack_require__(309),baseUniq=__webpack_require__(326),isArrayLikeObject=__webpack_require__(365);var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true))});module.exports=union},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(297),isFlattenable=__webpack_require__(298);function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}module.exports=baseFlatten},function(module,exports){function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}module.exports=arrayPush},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(299),isArguments=__webpack_require__(302),isArray=__webpack_require__(308);var spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined;function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}module.exports=isFlattenable},function(module,exports,__webpack_require__){var root=__webpack_require__(300);var Symbol=root.Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(301);var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports){(function(global){var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){var baseIsArguments=__webpack_require__(303),isObjectLike=__webpack_require__(307);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(304),isObjectLike=__webpack_require__(307);var argsTag="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}module.exports=baseIsArguments},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(299),getRawTag=__webpack_require__(305),objectToString=__webpack_require__(306);var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}value=Object(value);return symToStringTag&&symToStringTag in value?getRawTag(value):objectToString(value)}module.exports=baseGetTag},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(299);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}module.exports=getRawTag},function(module,exports){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module.exports=objectToString},function(module,exports){function isObjectLike(value){return value!=null&&typeof value=="object"}module.exports=isObjectLike},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports,__webpack_require__){var identity=__webpack_require__(310),overRest=__webpack_require__(311),setToString=__webpack_require__(313);function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}module.exports=baseRest},function(module,exports){function identity(value){return value}module.exports=identity},function(module,exports,__webpack_require__){var apply=__webpack_require__(312);var nativeMax=Math.max;function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}module.exports=overRest},function(module,exports){function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}module.exports=apply},function(module,exports,__webpack_require__){var baseSetToString=__webpack_require__(314),shortOut=__webpack_require__(325);var setToString=shortOut(baseSetToString);module.exports=setToString},function(module,exports,__webpack_require__){var constant=__webpack_require__(315),defineProperty=__webpack_require__(316),identity=__webpack_require__(310);var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,"toString",{configurable:true,enumerable:false,value:constant(string),writable:true})};module.exports=baseSetToString},function(module,exports){function constant(value){return function(){return value}}module.exports=constant},function(module,exports,__webpack_require__){var getNative=__webpack_require__(317);var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();module.exports=defineProperty},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(318),getValue=__webpack_require__(324);function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}module.exports=getNative},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(319),isMasked=__webpack_require__(321),isObject=__webpack_require__(320),toSource=__webpack_require__(323);var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}module.exports=baseIsNative},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(304),isObject=__webpack_require__(320);var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}module.exports=isFunction},function(module,exports){function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}module.exports=isObject},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(322);var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}module.exports=isMasked},function(module,exports,__webpack_require__){var root=__webpack_require__(300);var coreJsData=root["__core-js_shared__"];module.exports=coreJsData},function(module,exports){var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}module.exports=toSource},function(module,exports){function getValue(object,key){return object==null?undefined:object[key]}module.exports=getValue},function(module,exports){var HOT_COUNT=800,HOT_SPAN=16;var nativeNow=Date.now;function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}module.exports=shortOut},function(module,exports,__webpack_require__){var SetCache=__webpack_require__(327),arrayIncludes=__webpack_require__(354),arrayIncludesWith=__webpack_require__(359),cacheHas=__webpack_require__(360),createSet=__webpack_require__(361),setToArray=__webpack_require__(364);var LARGE_ARRAY_SIZE=200;function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=true,result=[],seen=result;if(comparator){isCommon=false;includes=arrayIncludesWith}else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set){return setToArray(set)}isCommon=false;includes=cacheHas;seen=new SetCache}else{seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(!includes(seen,computed,comparator)){if(seen!==result){seen.push(computed)}result.push(value)}}return result}module.exports=baseUniq},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(328),setCacheAdd=__webpack_require__(352),setCacheHas=__webpack_require__(353);function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;module.exports=SetCache},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(329),mapCacheDelete=__webpack_require__(346),mapCacheGet=__webpack_require__(349),mapCacheHas=__webpack_require__(350),mapCacheSet=__webpack_require__(351);function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache},function(module,exports,__webpack_require__){var Hash=__webpack_require__(330),ListCache=__webpack_require__(337),Map=__webpack_require__(345);function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}module.exports=mapCacheClear},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(331),hashDelete=__webpack_require__(333),hashGet=__webpack_require__(334),hashHas=__webpack_require__(335),hashSet=__webpack_require__(336);function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(332);function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}module.exports=hashClear},function(module,exports,__webpack_require__){var getNative=__webpack_require__(317);var nativeCreate=getNative(Object,"create");module.exports=nativeCreate},function(module,exports){
function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}module.exports=hashDelete},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(332);var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}module.exports=hashGet},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(332);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}module.exports=hashHas},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(332);var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}module.exports=hashSet},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(338),listCacheDelete=__webpack_require__(339),listCacheGet=__webpack_require__(342),listCacheHas=__webpack_require__(343),listCacheSet=__webpack_require__(344);function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache},function(module,exports){function listCacheClear(){this.__data__=[];this.size=0}module.exports=listCacheClear},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(340);var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}module.exports=listCacheDelete},function(module,exports,__webpack_require__){var eq=__webpack_require__(341);function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}module.exports=assocIndexOf},function(module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(340);function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}module.exports=listCacheGet},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(340);function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}module.exports=listCacheHas},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(340);function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}module.exports=listCacheSet},function(module,exports,__webpack_require__){var getNative=__webpack_require__(317),root=__webpack_require__(300);var Map=getNative(root,"Map");module.exports=Map},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(347);function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}module.exports=mapCacheDelete},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(348);function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}module.exports=getMapData},function(module,exports){function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}module.exports=isKeyable},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(347);function mapCacheGet(key){return getMapData(this,key).get(key)}module.exports=mapCacheGet},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(347);function mapCacheHas(key){return getMapData(this,key).has(key)}module.exports=mapCacheHas},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(347);function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}module.exports=mapCacheSet},function(module,exports){var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}module.exports=setCacheAdd},function(module,exports){function setCacheHas(value){return this.__data__.has(value)}module.exports=setCacheHas},function(module,exports,__webpack_require__){var baseIndexOf=__webpack_require__(355);function arrayIncludes(array,value){var length=array==null?0:array.length;return!!length&&baseIndexOf(array,value,0)>-1}module.exports=arrayIncludes},function(module,exports,__webpack_require__){var baseFindIndex=__webpack_require__(356),baseIsNaN=__webpack_require__(357),strictIndexOf=__webpack_require__(358);function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}module.exports=baseIndexOf},function(module,exports){function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}module.exports=baseFindIndex},function(module,exports){function baseIsNaN(value){return value!==value}module.exports=baseIsNaN},function(module,exports){function strictIndexOf(array,value,fromIndex){var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}module.exports=strictIndexOf},function(module,exports){function arrayIncludesWith(array,value,comparator){var index=-1,length=array==null?0:array.length;while(++index<length){if(comparator(value,array[index])){return true}}return false}module.exports=arrayIncludesWith},function(module,exports){function cacheHas(cache,key){return cache.has(key)}module.exports=cacheHas},function(module,exports,__webpack_require__){var Set=__webpack_require__(362),noop=__webpack_require__(363),setToArray=__webpack_require__(364);var INFINITY=1/0;var createSet=!(Set&&1/setToArray(new Set([,-0]))[1]==INFINITY)?noop:function(values){return new Set(values)};module.exports=createSet},function(module,exports,__webpack_require__){var getNative=__webpack_require__(317),root=__webpack_require__(300);var Set=getNative(root,"Set");module.exports=Set},function(module,exports){function noop(){}module.exports=noop},function(module,exports){function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}module.exports=setToArray},function(module,exports,__webpack_require__){var isArrayLike=__webpack_require__(366),isObjectLike=__webpack_require__(307);function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}module.exports=isArrayLikeObject},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(319),isLength=__webpack_require__(367);function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}module.exports=isArrayLike},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}module.exports=isLength},function(module,exports,__webpack_require__){var baseGet=__webpack_require__(369);function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}module.exports=get},function(module,exports,__webpack_require__){var castPath=__webpack_require__(370),isKey=__webpack_require__(378),toKey=__webpack_require__(379);function baseGet(object,path){path=isKey(path,object)?[path]:castPath(path);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}module.exports=baseGet},function(module,exports,__webpack_require__){var isArray=__webpack_require__(308),stringToPath=__webpack_require__(371);function castPath(value){return isArray(value)?value:stringToPath(value)}module.exports=castPath},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(372),toString=__webpack_require__(374);var reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped(function(string){string=toString(string);var result=[];if(reLeadingDot.test(string)){result.push("")}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result});module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(373);var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}module.exports=memoizeCapped},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(328);var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;module.exports=memoize},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(375);function toString(value){return value==null?"":baseToString(value)}module.exports=toString},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(299),arrayMap=__webpack_require__(376),isArray=__webpack_require__(308),isSymbol=__webpack_require__(377);var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=baseToString},function(module,exports){function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}module.exports=arrayMap},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(304),isObjectLike=__webpack_require__(307);var symbolTag="[object Symbol]";function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}module.exports=isSymbol},function(module,exports,__webpack_require__){var isArray=__webpack_require__(308),isSymbol=__webpack_require__(377);var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}module.exports=isKey},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(377);var INFINITY=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=toKey},function(module,exports,__webpack_require__){var apply=__webpack_require__(312),assignInDefaults=__webpack_require__(381),assignInWith=__webpack_require__(382),baseRest=__webpack_require__(309);var defaults=baseRest(function(args){args.push(undefined,assignInDefaults);return apply(assignInWith,undefined,args)});module.exports=defaults},function(module,exports,__webpack_require__){var eq=__webpack_require__(341);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignInDefaults(objValue,srcValue,key,object){if(objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)){return srcValue}return objValue}module.exports=assignInDefaults},function(module,exports,__webpack_require__){var copyObject=__webpack_require__(383),createAssigner=__webpack_require__(386),keysIn=__webpack_require__(389);var assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)});module.exports=assignInWith},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(384),baseAssignValue=__webpack_require__(385);function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue(object,key,newValue)}else{assignValue(object,key,newValue)}}return object}module.exports=copyObject},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(385),eq=__webpack_require__(341);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}module.exports=assignValue},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(316);function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}module.exports=baseAssignValue},function(module,exports,__webpack_require__){var baseRest=__webpack_require__(309),isIterateeCall=__webpack_require__(387);function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}module.exports=createAssigner},function(module,exports,__webpack_require__){var eq=__webpack_require__(341),isArrayLike=__webpack_require__(366),isIndex=__webpack_require__(388),isObject=__webpack_require__(320);function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}module.exports=isIterateeCall},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}module.exports=isIndex},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(390),baseKeysIn=__webpack_require__(399),isArrayLike=__webpack_require__(366);function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}module.exports=keysIn},function(module,exports,__webpack_require__){var baseTimes=__webpack_require__(391),isArguments=__webpack_require__(302),isArray=__webpack_require__(308),isBuffer=__webpack_require__(392),isIndex=__webpack_require__(388),isTypedArray=__webpack_require__(395);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}module.exports=arrayLikeKeys},function(module,exports){function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}module.exports=baseTimes},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(300),stubFalse=__webpack_require__(394);var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;module.exports=isBuffer}).call(exports,__webpack_require__(393)(module))},,function(module,exports){function stubFalse(){return false}module.exports=stubFalse},function(module,exports,__webpack_require__){var baseIsTypedArray=__webpack_require__(396),baseUnary=__webpack_require__(397),nodeUtil=__webpack_require__(398);var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(304),isLength=__webpack_require__(367),isObjectLike=__webpack_require__(307);var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}module.exports=baseIsTypedArray},function(module,exports){function baseUnary(func){return function(value){return func(value)}}module.exports=baseUnary},function(module,exports,__webpack_require__){(function(module){var freeGlobal=__webpack_require__(301);var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil}).call(exports,__webpack_require__(393)(module))},function(module,exports,__webpack_require__){var isObject=__webpack_require__(320),isPrototype=__webpack_require__(400),nativeKeysIn=__webpack_require__(401);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object)}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}module.exports=baseKeysIn},function(module,exports){var objectProto=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}module.exports=isPrototype},function(module,exports){function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}module.exports=nativeKeysIn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ImportCsvFacetsController=function(){function ImportCsvFacetsController($uibModalInstance,$uibModal,UserAPIService,ClarolineAPIService){(0,_classCallCheck3.default)(this,ImportCsvFacetsController);this.$uibModalInstance=$uibModalInstance;this.$uibModal=$uibModal;this.UserAPIService=UserAPIService;this.ClarolineAPIService=ClarolineAPIService}(0,_createClass3.default)(ImportCsvFacetsController,[{key:"submit",value:function submit(){var _this=this;var formData=new FormData(document.getElementById("csv-facets"));this.UserAPIService.importCsvFacets(formData).then(function(d){return _this.$uibModalInstance.close(d.data)},function(d){if(d.status===400){ClarolineAPIService.errorModal()}})}}]);return ImportCsvFacetsController}();exports.default=ImportCsvFacetsController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UserAPIService=function(){function UserAPIService($http,url){(0,_classCallCheck3.default)(this,UserAPIService);this.$http=$http;this.UrlService=url}(0,_createClass3.default)(UserAPIService,[{key:"removeFromCsv",value:function removeFromCsv(formData){return this.$http.post(this.UrlService("api_csv_remove_user"),formData,{transformRequest:_index2.default.identity,headers:{"Content-Type":undefined}})}},{key:"importCsvFacets",value:function importCsvFacets(formData){return this.$http.post(this.UrlService("api_csv_import_facets"),formData,{transformRequest:_index2.default.identity,headers:{"Content-Type":undefined}})}}]);return UserAPIService}();exports.default=UserAPIService},function(module,exports,__webpack_require__){"use strict";__webpack_require__(10);var _GroupController=__webpack_require__(405);var _GroupController2=_interopRequireDefault(_GroupController);var _EditGroupModalController=__webpack_require__(407);var _EditGroupModalController2=_interopRequireDefault(_EditGroupModalController);var _CreateGroupModalController=__webpack_require__(406);var _CreateGroupModalController2=_interopRequireDefault(_CreateGroupModalController);var _ImportMembersModalController=__webpack_require__(408);var _ImportMembersModalController2=_interopRequireDefault(_ImportMembersModalController);var _UserListController=__webpack_require__(409);var _UserListController2=_interopRequireDefault(_UserListController);var _GroupAPIService=__webpack_require__(411);var _GroupAPIService2=_interopRequireDefault(_GroupAPIService);var _routing=__webpack_require__(412);var _routing2=_interopRequireDefault(_routing);var _module=__webpack_require__(9);var _module2=_interopRequireDefault(_module);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}angular.module("GroupsManager",["ClarolineSearch","data-table","ui.router","ncy-angular-breadcrumb"]).controller("GroupController",["$http","ClarolineSearchService","ClarolineAPIService","$uibModal",_GroupController2.default]).controller("CreateGroupModalController",_CreateGroupModalController2.default).controller("EditGroupModalController",_EditGroupModalController2.default).controller("ImportMembersModalController",_ImportMembersModalController2.default).controller("UserListController",["$http","ClarolineSearchService","$stateParams","GroupAPIService","ClarolineAPIService","$uibModal",_UserListController2.default]).service("GroupAPIService",_GroupAPIService2.default).config(_routing2.default)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _CreateGroupModalController=__webpack_require__(406);var _CreateGroupModalController2=_interopRequireDefault(_CreateGroupModalController);var _EditGroupModalController=__webpack_require__(407);var _EditGroupModalController2=_interopRequireDefault(_EditGroupModalController);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GroupController=function(){function GroupController($http,ClarolineSearchService,ClarolineAPIService,$uibModal){var _this=this;(0,_classCallCheck3.default)(this,GroupController);this.$http=$http;this.ClarolineSearchService=ClarolineSearchService;this.ClarolineAPIService=ClarolineAPIService;this.$uibModal=$uibModal;this.search="";this.savedSearch=[];this.fields=[];this.selected=[];this.alerts=[];this.groups=undefined;this.groupActions=[];var columns=[{name:this.translate("name"),prop:"name",isCheckboxColumn:true,headerCheckbox:true},{name:this.translate("actions"),cellRenderer:function cellRenderer(scope){var groupId=scope.$row.id;var content='<a class="btn btn-default pointer" ui-sref="users.groups.users({groupId: '+groupId+'})"><i class="fa fa-users"></i> </a>';content+='<a class="btn btn-default pointer" ng-click="gc.clickEdit($row)"><i class="fa fa-cog"></i></a>';content=_this.groupActions.reduce(function(content,action){var route=Routing.generate("admin_group_action",{group:scope.$row.id,action:action["id"]});return content+("<a class='btn btn-default' href='"+route+"'><i class='fa "+action.class+"'></i></a>")},content);return content}}];this.dataTableOptions={scrollbarV:false,columnMode:"force",headerHeight:50,footerHeight:50,selectable:true,multiSelect:true,checkboxSelection:true,columns:columns,paging:{externalPaging:true,size:10},sizes:[10,20,50]};$http.get(Routing.generate("api_get_group_searchable_fields")).then(function(d){return _this.fields=d.data});$http.get(Routing.generate("api_get_group_admin_actions")).then(function(d){return _this.groupActions=d.data});this._deleteCallback=this._deleteCallback.bind(this);this._onSearch=this._onSearch.bind(this)}(0,_createClass3.default)(GroupController,[{key:"translate",value:function translate(key){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return window.Translator.trans(key,data,"platform")}},{key:"generateQsForSelected",value:function generateQsForSelected(){var qs="";for(var i=0;i<this.selected.length;i++){qs+="groupIds[]="+this.selected[i].id+"&"}return qs}},{key:"closeAlert",value:function closeAlert(index){this.alerts.splice(index,1)}},{key:"clickNew",value:function clickNew(){var _this2=this;var modalInstance=this.$uibModal.open({templateUrl:Routing.generate("api_get_group_create_form",{_format:"html"}),controller:"CreateGroupModalController",controllerAs:"cgfm"});modalInstance.result.then(function(result){if(!result)return;_this2.groups.push(result);_this2.dataTableOptions.paging.count=_this2.groups.length;_this2.alerts.push({type:"success",msg:_this2.translate("group_created",{group:result.name})})})}},{key:"clickEdit",value:function clickEdit(group){var _this3=this;var modalInstance=this.$uibModal.open({templateUrl:Routing.generate("api_get_group_edit_form",{_format:"html",group:group.id})+"?bust="+Math.random().toString(36).slice(2),controller:"EditGroupModalController",controllerAs:"egfm"});modalInstance.result.then(function(result){if(!result)return;_this3.groups=_this3.ClarolineAPIService.replaceById(result,_this3.groups)})}},{key:"paging",value:function paging(offset,size){var _this4=this;this.ClarolineSearchService.find("api_get_search_groups",this.savedSearch,offset,size).then(function(d){var groups=d.data.groups;for(var i=0;i<offset*size;i++){groups.unshift({})}_this4.groups=groups;_this4.dataTableOptions.paging.count=d.data.total})}},{key:"clickDelete",value:function clickDelete(){var url=Routing.generate("api_delete_groups")+"?"+this.generateQsForSelected();var groups="";for(var i=0;i<this.selected.length;i++){groups+=this.selected[i].name;if(i<this.selected.length-1)groups+=", "}this.ClarolineAPIService.confirm({url:url,method:"DELETE"},this._deleteCallback,this.translate("delete_groups"),this.translate("delete_groups_confirm",{group_list:groups}))}},{key:"_onSearch",value:function _onSearch(searches){var _this5=this;this.savedSearch=searches;this.ClarolineSearchService.find("api_get_search_groups",searches,0,this.dataTableOptions.paging.size).then(function(d){_this5.groups=d.data.groups;_this5.dataTableOptions.paging.count=d.data.total;_this5.dataTableOptions.paging.offset=0})}},{key:"_deleteCallback",value:function _deleteCallback(data){for(var i=0;i<this.selected.length;i++){this.alerts.push({type:"success",msg:this.translate("group_removed",{group:this.selected[i].name})})}this.dataTableOptions.paging.count-=this.selected.length;this.ClarolineAPIService.removeElements(this.selected,this.groups);this.selected.splice(0,this.selected.length)}}]);return GroupController}();exports.default=GroupController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CreateGroupModalController=function(){function CreateGroupModalController(GroupAPIService,$uibModalInstance,$uibModal){(0,_classCallCheck3.default)(this,CreateGroupModalController);this.GroupAPIService=GroupAPIService;this.$uibModalInstance=$uibModalInstance;this.$uibModal=$uibModal;this.group={}}(0,_createClass3.default)(CreateGroupModalController,[{key:"submit",value:function submit(){
var _this=this;this.GroupAPIService.create(this.group).then(function(d){return _this.$uibModalInstance.close(d.data)},function(d){if(d.status===400){_this.$uibModalInstance.close();_this.$uibModal.open({template:d.data,controller:"CreateGroupModalController",bindToController:true})}})}}]);return CreateGroupModalController}();exports.default=CreateGroupModalController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EditGroupModalController=function(){function EditGroupModalController(GroupAPIService,$uibModalInstance,$uibModal){(0,_classCallCheck3.default)(this,EditGroupModalController);this.GroupAPIService=GroupAPIService;this.$uibModalInstance=$uibModalInstance;this.$uibModal=$uibModal;this.group={}}(0,_createClass3.default)(EditGroupModalController,[{key:"submit",value:function submit(){var _this=this;this.GroupAPIService.edit(this.group).then(function(d){return _this.$uibModalInstance.close(d.data)},function(d){if(d.status===400){_this.$uibModalInstance.close();_this.$uibModal.open({template:d.data,controller:"EditGroupModalController",bindToController:true})}})}}]);return EditGroupModalController}();exports.default=EditGroupModalController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ImportMembersModalController=function(){function ImportMembersModalController(GroupAPIService,$uibModalInstance,$uibModal,group){(0,_classCallCheck3.default)(this,ImportMembersModalController);this.GroupAPIService=GroupAPIService;this.$uibModalInstance=$uibModalInstance;this.$uibModal=$uibModal;this.group=group}(0,_createClass3.default)(ImportMembersModalController,[{key:"submit",value:function submit(){var _this=this;var formData=new FormData(document.getElementById("csv-group-members-form"));this.GroupAPIService.importMembers(formData,this.group).then(function(d){return _this.$uibModalInstance.close(d.data)},function(d){if(d.status===400){alert("Bad form")}})}}]);return ImportMembersModalController}();exports.default=ImportMembersModalController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _ImportMembersModalController=__webpack_require__(408);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UserListController=function(){function UserListController($http,ClarolineSearchService,$stateParams,GroupAPIService,ClarolineAPIService,$uibModal){var _this=this;(0,_classCallCheck3.default)(this,UserListController);this.$http=$http;this.ClarolineSearchService=ClarolineSearchService;this.ClarolineAPIService=ClarolineAPIService;this.$stateParams=$stateParams;this.$uibModal=$uibModal;this.GroupAPIService=GroupAPIService;this.groupId=$stateParams.groupId;this.group=[];this.users=undefined;this.search="";this.savedSearch=[];this.selected=[];this.alerts=[];this.fields=[];this.baseSearch={field:"group_id",id:0,value:this.groupId};var columns=[{name:this.translate("username"),prop:"username",isCheckboxColumn:true,headerCheckbox:true},{name:this.translate("first_name"),prop:"firstName"},{name:this.translate("last_name"),prop:"lastName"},{name:this.translate("email"),prop:"mail"}];this.GroupAPIService.find(this.groupId).then(function(d){_this.group=d.data});this.$http.get(Routing.generate("api_get_user_fields")).then(function(d){_this.fields=d.data;for(var i=0;i<_this.fields.length;i++){if(_this.fields[i]==="group"){_this.fields.splice(i,1)}}});this.dataTableOptions={scrollbarV:false,columnMode:"force",headerHeight:50,footerHeight:50,selectable:true,multiSelect:true,checkboxSelection:true,columns:columns,paging:{externalPaging:true,size:10},sizes:[10,20,50]};this._addToGroupCallback=this._addToGroupCallback.bind(this);this._removeFromGroupCallback=this._removeFromGroupCallback.bind(this);this._pickerCallback=this._pickerCallback.bind(this);this._onSearch=this._onSearch.bind(this)}(0,_createClass3.default)(UserListController,[{key:"translate",value:function translate(key){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return window.Translator.trans(key,data,"platform")}},{key:"mergeSearches",value:function mergeSearches(searches,element){var found=false;for(var i=0;i<searches.length;i++){if(searches[i]==element)found=true}if(!found){searches.push(element)}return searches}},{key:"clickDelete",value:function clickDelete(){var url=Routing.generate("api_remove_users_from_group",{group:this.groupId})+"?"+this.ClarolineAPIService.generateQueryString(this.selected,"userIds");var users="";for(var i=0;i<this.selected.length;i++){users+=this.selected[i].username;if(i<this.selected.length-1)users+=", "}this.ClarolineAPIService.confirm({url:url,method:"GET"},this._removeFromGroupCallback,this.translate("remove_users_from_group"),this.translate("remove_users_from_group_confirm",{group:this.group.name,user_list:users}))}},{key:"paging",value:function paging(offset,size){var _this2=this;this.savedSearch=this.mergeSearches(this.savedSearch,this.baseSearch);this.ClarolineSearchService.find("api_get_search_users",this.savedSearch,offset,size).then(function(d){var users=d.data.users;for(var i=0;i<offset*size;i++){users.unshift({})}_this2.users=users;_this2.dataTableOptions.paging.count=d.data.total})}},{key:"addUser",value:function addUser(){var excludeUser=[];var userPicker=new UserPicker;var options={picker_name:"user_group_picker",picker_title:this.translate("add_user"),multiple:true,blacklist:excludeUser,return_datas:true};userPicker.configure(options,this._pickerCallback);userPicker.open()}},{key:"importMembers",value:function importMembers(){var _this3=this;var modalInstance=this.$uibModal.open({template:__webpack_require__(410),controller:"ImportMembersModalController",controllerAs:"immc",resolve:{group:function group(){return _this3.group}}});modalInstance.result.then(function(result){_this3.paging(0,_this3.dataTableOptions.paging.size)})}},{key:"closeAlert",value:function closeAlert(index){this.alerts.splice(index,1)}},{key:"_addToGroupCallback",value:function _addToGroupCallback(data){this.users=this.users.concat(data);for(var i=0;i<data.length;i++){this.alerts.push({type:"success",msg:this.translate("user_added",{user:data[i].username})})}this.dataTableOptions.paging.count+=data.length}},{key:"_removeFromGroupCallback",value:function _removeFromGroupCallback(data){this.ClarolineAPIService.removeElements(this.selected,this.users);this.dataTableOptions.paging.count-=this.selected.length;for(var i=0;i<this.selected.length;i++){this.alerts.push({type:"success",msg:this.translate("user_removed",{user:this.selected[i].username})})}this.selected.splice(0,this.selected.length)}},{key:"_pickerCallback",value:function _pickerCallback(data){var userIds=[];var users="";for(var i=0;i<data.length;i++){userIds.push(data[i]);users+=data[i].username;if(i<data.length-1)users+=", "}var url=Routing.generate("api_add_users_to_group",{group:this.groupId})+"?"+this.ClarolineAPIService.generateQueryString(userIds,"userIds");this.ClarolineAPIService.confirm({url:url,method:"GET"},this._addToGroupCallback,this.translate("add_users_to_group"),this.translate("add_users_to_group_confirm",{group:this.group.name,user_list:users}))}},{key:"_onSearch",value:function _onSearch(searches){var _this4=this;searches=this.mergeSearches(searches,this.baseSearch);this.ClarolineSearchService.find("api_get_search_users",searches,0,this.dataTableOptions.paging.size).then(function(d){_this4.users=d.data.users;_this4.dataTableOptions.paging.count=d.data.total})}}]);return UserListController}();exports.default=UserListController},function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$close()">&times;</button>\n        <h4> {{ \'import_users\'|trans:{}:\'platform\' }} </h4>\n    </div>\n    <form id="csv-group-members-form" method="post" enctype="multipart/form-data" ng-submit="immc.submit()">\n    <div class="modal-body">\n        <div class="well">\n            <div> {{ \'csv_format_user_list\'|trans:{}:\'platform\' }} </div>\n        </div>\n        <div>\n            {{ \'csv_select\'|trans:{}:\'platform\' }}\n            <input type="file" name="csv" id="csv-group-members" class="form-control"></input>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <input type="submit" name="submit" class="btn btn-primary pull-left">\n    </div>\n    </form>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GroupAPIService=function(){function GroupAPIService($http,ClarolineAPIService){(0,_classCallCheck3.default)(this,GroupAPIService);this.$http=$http;this.ClarolineAPIService=ClarolineAPIService}(0,_createClass3.default)(GroupAPIService,[{key:"create",value:function create(newGroup){var data=this.ClarolineAPIService.formSerialize("group_form",newGroup);return this.$http.post(Routing.generate("api_post_group",{_format:"html"}),data,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}},{key:"edit",value:function edit(group){var data=this.ClarolineAPIService.formSerialize("group_form",group);return this.$http.put(Routing.generate("api_put_group",{_format:"html",group:group.id}),data,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}},{key:"find",value:function find(groupId){return this.$http.get(Routing.generate("api_get_group",{group:groupId}))}},{key:"importMembers",value:function importMembers(formData,group){return this.$http.post(Routing.generate("api_group_members_import",{group:group.id}),formData,{transformRequest:angular.identity,headers:{"Content-Type":undefined}})}}]);return GroupAPIService}();exports.default=GroupAPIService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function($stateProvider,$urlRouterProvider){var translate=function translate(key){return window.Translator.trans(key,{},"platform")};$stateProvider.state("users.groups.list",{url:"",ncyBreadcrumb:{label:translate("group_list"),parent:"users.list"},views:{groups:{template:__webpack_require__(413),controller:"GroupController",controllerAs:"gc"}}}).state("users.groups.users",{url:"/{groupId}",ncyBreadcrumb:{label:translate("users"),parent:"users.groups.list"},views:{users:{template:__webpack_require__(414),controller:"UserListController",controllerAs:"ulc"}}})}},function(module,exports){module.exports='<!-- this could cause double loading -->\n<div>\n    <uib-alert ng-repeat="alert in gc.alerts" type="{{ alert.type }}" close="gc.closeAlert($index)">{{ alert.msg }}</uib-alert>\n    <div>\n        <div class="btn-group">\n            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                <i class="fa fa-cog"></i> <span class="caret"></span>\n            </button>\n            <ul class="dropdown-menu">\n                <li><a class="pointer" ng-click="gc.clickNew()"> {{ \'new\'|trans:{}:\'platform\' }} </a></li>\n                <li><a class="pointer" ng-click="gc.clickDelete()"> {{ \'delete\'|trans:{}:\'platform\' }} </a></li>\n            </ul>\n        </div>\n    </div>\n\n    <div align="center" class="action-bar">\n        <div class="panel-body">\n            <clarolinesearch on-search="gc._onSearch" fields="gc.fields"></clarolinesearch>\n        </div>   \n    </div>\n\n    <div>\n        <dtable options="gc.dataTableOptions" rows="gc.groups" class="material" on-page="gc.paging(offset, size)" selected="gc.selected"></dtable>\n    </div>\n\n</div>'},function(module,exports){module.exports='<div>\n    <h3> {{ ulc.group.name }} </h3>\n    <uib-alert ng-repeat="alert in ulc.alerts" type="{{ alert.type }}" close="ulc.closeAlert($index)">{{ alert.msg }}</uib-alert>\n    <div>\n        <div class="btn-group">\n            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                <i class="fa fa-cog"></i> <span class="caret"></span>\n            </button>\n            <ul class="dropdown-menu">\n                <li><a class="pointer" ng-click="ulc.addUser()"> {{ \'add\'|trans:{}:\'platform\' }} </a></li>\n                <li><a class="pointer" ng-click="ulc.clickDelete()"> {{ \'delete\'|trans:{}:\'platform\' }} </a></li>\n                <li role="separator" class="divider"></li>\n                <li><a class="pointer" ng-click="ulc.importMembers()">{{ \'import_users\'|trans:{}:\'platform\' }}</a></li>\n                <li role="separator" class="divider"></li>\n                <li><a href="{{ \'api_get_search_users\'|path:{\'_format\': \'xls\', \'page\': 0, \'limit\': 9999} }}?group_id[]={{ ulc.group.id }}"> {{ \'excel_export\'|trans:{}:\'platform\' }} </a></li>\n                <li><a href="{{ \'api_get_search_users\'|path:{\'_format\': \'csv\', \'page\': 0, \'limit\': 9999} }}?group_id[]={{ ulc.group.id }}"> {{ \'csv_export\'|trans:{}:\'platform\' }} </a></li>\n            </ul>\n        </div>\n    </div>\n\n    <div align="center" class="action-bar">\n        <div class="panel-body">\n            <clarolinesearch on-search="ulc._onSearch" fields="ulc.fields"></clarolinesearch>\n        </div>\n    </div>\n    <div>\n        <dtable options="ulc.dataTableOptions" rows="ulc.users" class="material" on-page="ulc.paging(offset, size)" selected="ulc.selected"></dtable>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(10);__webpack_require__(416);var _interceptorsDefault=__webpack_require__(89);var _interceptorsDefault2=_interopRequireDefault(_interceptorsDefault);var _ClarolineSearchController=__webpack_require__(417);var _ClarolineSearchController2=_interopRequireDefault(_ClarolineSearchController);var _ClarolineSearchDirective=__webpack_require__(418);var _ClarolineSearchDirective2=_interopRequireDefault(_ClarolineSearchDirective);var _ClarolineSearchService=__webpack_require__(420);var _ClarolineSearchService2=_interopRequireDefault(_ClarolineSearchService);var _SearchOptionsService=__webpack_require__(421);var _SearchOptionsService2=_interopRequireDefault(_SearchOptionsService);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}angular.module("ClarolineSearch",["ui.select"]).config(_interceptorsDefault2.default).directive("clarolinesearch",function(){return new _ClarolineSearchDirective2.default}).service("SearchOptionsService",function(){return new _SearchOptionsService2.default}).provider("ClarolineSearchService",function(){return new _ClarolineSearchService2.default})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(3)(12)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ClarolineSearchController=function(){function ClarolineSearchController($http,SearchOptionsService){(0,_classCallCheck3.default)(this,ClarolineSearchController);this.$http=$http;this.SearchOptionsService=SearchOptionsService;this.selected=[];this.options=[]}(0,_createClass3.default)(ClarolineSearchController,[{key:"refreshOptions",value:function refreshOptions($select){this.options=this.SearchOptionsService.generateOptions(this.fields);for(var i=0;i<this.options.length;i++){this.options[i].name=this.SearchOptionsService.getOptionValue(this.options[i].field,$select.search);this.options[i].value=$select.search}}},{key:"onSelect",value:function onSelect($item,$model,$select){$select.selected.pop();var cloned=angular.copy($item);$select.selected.push(cloned);this.options.push(this.SearchOptionsService.getOptionValue($item.field));this.selected=angular.copy($select.selected)}},{key:"onRemove",value:function onRemove($item,$model,$select){this.selected=$select.selected}},{key:"search",value:function search(){this.onSearch()(this.selected)}}]);return ClarolineSearchController}();exports.default=ClarolineSearchController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _ClarolineSearchController=__webpack_require__(417);var _ClarolineSearchController2=_interopRequireDefault(_ClarolineSearchController);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ClarolineSearchDirective=function ClarolineSearchDirective(){(0,_classCallCheck3.default)(this,ClarolineSearchDirective);this.scope={};this.restrict="E";this.template=__webpack_require__(419);this.replace=false;this.controller=_ClarolineSearchController2.default;this.controllerAs="cs";this.bindToController={onSearch:"&",fields:"="}};exports.default=ClarolineSearchDirective;_ClarolineSearchController2.default.$inject=["$http","SearchOptionsService"]},function(module,exports){module.exports='<div>\n    <div class="input-group">\n        <ui-select\n            ng-model="cs.searches"\n            ng-change="cs.updateOptions"\n            on-select="cs.onSelect($item, $model, $select)"\n            reset-search-input="true"\n            tagging multiple\n            on-remove="cs.onRemove($item, $model, $select)"\n\n        >\n            <ui-select-match>\n                {{ $item.name }}\n            </ui-select-match>\n            <ui-select-choices\n                repeat="dataitem in (cs.options)"\n                refresh="cs.refreshOptions($select)"\n                refresh-delay="0"\n            >\n                {{ dataitem.name }}\n            </ui-select-choices>\n        </ui-select>\n\n        <div id="search-el"></div>\n        <span class="input-group-btn">\n            <button\n                class="filter btn btn-default"\n                type="button"\n                ng-click="cs.search()"\n                id="search-button">\n                <i class="fa fa-search"></i>\n            </button>\n        </span>\n    </div>\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ClarolineSearchService=function(){function ClarolineSearchService(){(0,_classCallCheck3.default)(this,ClarolineSearchService);this.enablePager=true;this.searchParam={}}(0,_createClass3.default)(ClarolineSearchService,[{key:"mergeObject",value:function mergeObject(obj1,obj2){for(var attrname in obj2){obj1[attrname]=obj2[attrname]}return obj1}},{key:"disablePager",value:function disablePager(){this.enablePager=false}},{key:"$get",value:function $get($http){var _this=this;return{find:function find(route,searches,page,limit){var additionalParameters=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var params=_this.enablePager?{page:page,limit:limit}:{};params=angular.extend(params,additionalParameters);var qs="?";for(var i=0;i<searches.length;i++){qs+=searches[i].field+"[]="+searches[i].value+"&"}params=_this.mergeObject(params,_this.searchParam);var route=Routing.generate(route,params)+qs;return $http.get(route)}}}}]);return ClarolineSearchService}();exports.default=ClarolineSearchService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SearchOptionsService=function(){function SearchOptionsService(){(0,_classCallCheck3.default)(this,SearchOptionsService)}(0,_createClass3.default)(SearchOptionsService,[{key:"translate",value:function translate(key){return window.Translator.trans(key,{},"platform")}},{key:"getOptionValue",value:function getOptionValue(field,search){if(!field)return;search=!search?"":search.trim();return this.translate("filter_by")+" "+this.translate(field).toLowerCase()+": "+search+""}},{key:"generateOptions",value:function generateOptions(fields){if(fields==undefined)return[];var options=[];for(var i=0;i<fields.length;i++){options.push({id:i,name:this.getOptionValue(fields[i]),field:fields[i],value:""})}return options}}]);return SearchOptionsService}();exports.default=SearchOptionsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function($stateProvider,$urlRouterProvider){var translate=function translate(key){return window.Translator.trans(key,{},"platform")};$stateProvider.state("users",{abstract:true,url:"/users",template:__webpack_require__(423)}).state("users.list",{url:"",ncyBreadcrumb:{label:translate("user_list")},views:{users:{template:__webpack_require__(424),controller:"UserController",controllerAs:"uc"}}}).state("users.groups",{abstract:true,url:"/groups",ncyBreadcrumb:{label:translate("group_list"),parent:"users.list"},views:{groups:{template:__webpack_require__(425)}}});$urlRouterProvider.otherwise("/users")}},function(module,exports){module.exports='<div ncy-breadcrumb></div>\n\n<div ui-view="users"></div>\n<div ui-view="groups"></div>\n'},function(module,exports){module.exports='<div>\n    <div>\n        <uib-alert ng-repeat="alert in uc.alerts" type="{{ alert.type }}" close="uc.closeAlert($index)">{{ alert.msg }}</uib-alert>\n        <div class="btn-group">\n            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                <i class="fa fa-cog"></i> <span class="caret"></span>\n            </button>\n            <ul class="dropdown-menu">\n                <li><a href="#" ng-click="uc.clickDelete()"> {{ \'delete\'|trans:{}:\'platform\' }} </a></li>\n                <li><a href="#" ng-click="uc.initPassword()"> {{ \'reset_password\'|trans:{}:\'platform\' }} </a></li>\n\n                <li role="separator" class="divider"></li>\n                <li><a href="{{ \'claro_admin_user_creation_form\'|path:{} }}"> {{ \'new\'|trans:{}:\'platform\' }} </a></li>\n                <li><a href="#" ng-click="uc.csvRemove()"> {{ \'csv_delete\'|trans:{}:\'platform\'}} </a></li>\n                <li><a href="{{ \'claro_admin_import_users_form\'|path:{} }}"> {{ \'import\'|trans:{}:\'platform\'}} </a></li>\n                <li><a ui-sref="users.groups.list"> {{ \'manage_group\'|trans:{}:\'platform\' }} </a></li>\n\n                <li role="separator" class="divider"></li>\n                <li><a href="{{ \'import_profile_pics_form\'|path:{} }}">{{ \'import_profile_pics\'|trans:{}:\'platform\' }}</a></li>\n                <li><a href="{{ \'claro_admin_workspace_tool_config_index\'|path:{} }}">{{ \'personal_workspace_tools_management\'|trans:{}:\'platform\' }}</a></li>\n                <li><a href="{{ \'claro_admin_personal_workspace_resource_rights\'|path:{} }}">{{ \'claro_admin_personal_workspace_resource_rights\'|trans:{}: \'platform\' }}</a></li>\n                <li><a href="{{ \'claro_admin_facet_index\'|path:{} }}"> {{ \'profile_management\'|trans:{}:\'platform\' }} </a></li>\n                <li><a class="pointer" ng-click="uc.importFacetsForm()"> {{ \'import_facets\'|trans:{}:\'platform\' }} </a>\n\n                <li role="separator" class="divider"></li>\n                <li><a href="{{ \'api_get_search_users\'|path:{\'_format\': \'xls\', \'page\': 0, \'limit\': 9999} }}"> {{ \'excel_export\'|trans:{}:\'platform\' }} </a></li>\n                <li><a href="{{ \'api_get_search_users\'|path:{\'_format\': \'csv\', \'page\': 0, \'limit\': 9999} }}"> {{ \'csv_export\'|trans:{}:\'platform\' }} </a></li>\n            </ul>\n        </div>\n        <div class="btn-group">\n            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                <i class="fa fa-users"></i> <span class="caret"></span>\n            </button>\n            <ul class="dropdown-menu">\n                <!-- style from li > a from bootstrap -->\n                <li ng-repeat="(key, role) in uc.roles" style="display: block; padding: 3px 20px; clear: both; white-space: nowrap;">\n                    <input type="checkbox" checklist-model="uc.selectedRoles" checklist-value="role"> </input>\n                    {{ role.translation_key|trans:{}:\'platform\' }}\n                <li>\n            </ul>\n            <button class="btn btn-primary" ng-click="uc.addRolesToSelection()"> {{ \'add_roles\'|trans:{}:\'platform\' }}</button>\n        </div>\n    </div>\n    <div align="center" class="action-bar">\n        <div class="panel-body">\n            <clarolinesearch on-search="uc._onSearch" fields="uc.fields"></clarolinesearch>\n        </div>\n    </div>\n    <div>\n        <dtable options="uc.dataTableOptions" rows="uc.users" class="material" on-page="uc.paging(offset, size)" selected="uc.selected"></dtable>\n    </div>\n    <style>\n        .dt .dt-cell {\n            overflow: visible;\n        }\n    </style>\n</div>'},function(module,exports){module.exports='<div ui-view="users"></div>\n<div ui-view="groups"></div>'}]);