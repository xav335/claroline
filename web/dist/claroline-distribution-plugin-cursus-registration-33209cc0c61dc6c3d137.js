webpackJsonp([21],{0:function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(1);var _index2=_interopRequireDefault(_index);__webpack_require__(4);__webpack_require__(222);__webpack_require__(5);__webpack_require__(6);var _routing=__webpack_require__(755);var _routing2=_interopRequireDefault(_routing);var _CursusDescriptionModalCtrl=__webpack_require__(761);var _CursusDescriptionModalCtrl2=_interopRequireDefault(_CursusDescriptionModalCtrl);var _CursusGroupUnregistrationModalCtrl=__webpack_require__(762);var _CursusGroupUnregistrationModalCtrl2=_interopRequireDefault(_CursusGroupUnregistrationModalCtrl);var _CursusGroupsListRegistrationModalCtrl=__webpack_require__(763);var _CursusGroupsListRegistrationModalCtrl2=_interopRequireDefault(_CursusGroupsListRegistrationModalCtrl);var _CursusGroupsUnregistrationModalCtrl=__webpack_require__(765);var _CursusGroupsUnregistrationModalCtrl2=_interopRequireDefault(_CursusGroupsUnregistrationModalCtrl);var _CursusRegistrationCtrl=__webpack_require__(766);var _CursusRegistrationCtrl2=_interopRequireDefault(_CursusRegistrationCtrl);var _CursusRegistrationManagementCtrl=__webpack_require__(767);var _CursusRegistrationManagementCtrl2=_interopRequireDefault(_CursusRegistrationManagementCtrl);var _CursusRegistrationSearchCtrl=__webpack_require__(773);var _CursusRegistrationSearchCtrl2=_interopRequireDefault(_CursusRegistrationSearchCtrl);var _CursusRegistrationSessionsModalCtrl=__webpack_require__(775);var _CursusRegistrationSessionsModalCtrl2=_interopRequireDefault(_CursusRegistrationSessionsModalCtrl);var _CursusUserUnregistrationModalCtrl=__webpack_require__(777);var _CursusUserUnregistrationModalCtrl2=_interopRequireDefault(_CursusUserUnregistrationModalCtrl);var _CursusUsersUnregistrationModalCtrl=__webpack_require__(778);var _CursusUsersUnregistrationModalCtrl2=_interopRequireDefault(_CursusUsersUnregistrationModalCtrl);var _SimpleModalCtrl=__webpack_require__(779);var _SimpleModalCtrl2=_interopRequireDefault(_SimpleModalCtrl);var _CursusRegistrationGroupsDirective=__webpack_require__(780);var _CursusRegistrationGroupsDirective2=_interopRequireDefault(_CursusRegistrationGroupsDirective);var _CursusRegistrationInformationsDirective=__webpack_require__(782);var _CursusRegistrationInformationsDirective2=_interopRequireDefault(_CursusRegistrationInformationsDirective);var _CursusRegistrationListDirective=__webpack_require__(784);var _CursusRegistrationListDirective2=_interopRequireDefault(_CursusRegistrationListDirective);var _CursusRegistrationUsersDirective=__webpack_require__(786);var _CursusRegistrationUsersDirective2=_interopRequireDefault(_CursusRegistrationUsersDirective);var _CursusQueueManagementCtrl=__webpack_require__(788);var _CursusQueueManagementCtrl2=_interopRequireDefault(_CursusQueueManagementCtrl);var _SessionsChoicesTransferModalCtrl=__webpack_require__(790);var _SessionsChoicesTransferModalCtrl2=_interopRequireDefault(_SessionsChoicesTransferModalCtrl);var _RegistrationQueueCoursesDirective=__webpack_require__(791);var _RegistrationQueueCoursesDirective2=_interopRequireDefault(_RegistrationQueueCoursesDirective);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_index2.default.module("CursusRegistrationModule",["ui.router","ui.translation","data-table","ui.bootstrap","ui.bootstrap.tpls"]).controller("CursusRegistrationCtrl",["$http",_CursusRegistrationCtrl2.default]).controller("CursusRegistrationManagementCtrl",["$stateParams","$http","$uibModal",_CursusRegistrationManagementCtrl2.default]).controller("CursusRegistrationSearchCtrl",["$stateParams","$http","$uibModal",_CursusRegistrationSearchCtrl2.default]).controller("CursusDescriptionModalCtrl",_CursusDescriptionModalCtrl2.default).controller("CursusGroupUnregistrationModalCtrl",_CursusGroupUnregistrationModalCtrl2.default).controller("CursusGroupsListRegistrationModalCtrl",_CursusGroupsListRegistrationModalCtrl2.default).controller("CursusGroupsUnregistrationModalCtrl",_CursusGroupsUnregistrationModalCtrl2.default).controller("CursusRegistrationSessionsModalCtrl",_CursusRegistrationSessionsModalCtrl2.default).controller("CursusUserUnregistrationModalCtrl",_CursusUserUnregistrationModalCtrl2.default).controller("CursusUsersUnregistrationModalCtrl",_CursusUsersUnregistrationModalCtrl2.default).controller("SimpleModalCtrl",_SimpleModalCtrl2.default).directive("cursusRegistrationGroups",function(){return new _CursusRegistrationGroupsDirective2.default}).directive("cursusRegistrationInformations",function(){return new _CursusRegistrationInformationsDirective2.default}).directive("cursusList",function(){return new _CursusRegistrationListDirective2.default}).directive("cursusRegistrationUsers",function(){return new _CursusRegistrationUsersDirective2.default}).controller("CursusQueueManagementCtrl",["$http","$uibModal",_CursusQueueManagementCtrl2.default]).controller("SessionsChoicesTransferModalCtrl",_SessionsChoicesTransferModalCtrl2.default).directive("registrationQueueCourses",function(){return new _RegistrationQueueCoursesDirective2.default}).config(_routing2.default)},222:function(module,exports,__webpack_require__){module.exports=__webpack_require__(3)(43)},755:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function($stateProvider,$urlRouterProvider){$stateProvider.state("registration_main_menu",{url:"/registration/main/menu",template:_cursus_registration_main_menu2.default}).state("registration_cursus_list",{url:"/registration/cursus/list",template:_cursus_registration_cursus_list2.default,controller:"CursusRegistrationCtrl",controllerAs:"crc"}).state("registration_searched_cursus_list",{url:"/registration/searched/cursus/{search}",template:_cursus_registration_searched_cursus_list2.default,controller:"CursusRegistrationSearchCtrl",controllerAs:"crsc"}).state("registration_cursus_management",{url:"/registration/cursus/{cursusId}/management",template:_cursus_registration_cursus_management2.default,controller:"CursusRegistrationManagementCtrl",controllerAs:"crmc"}).state("registration_queue_management",{url:"/registration/queue/management",template:_cursus_queue_management2.default,controller:"CursusQueueManagementCtrl",controllerAs:"cqmc"});$urlRouterProvider.otherwise("/registration/main/menu")};var _cursus_registration_main_menu=__webpack_require__(756);var _cursus_registration_main_menu2=_interopRequireDefault(_cursus_registration_main_menu);var _cursus_registration_cursus_list=__webpack_require__(757);var _cursus_registration_cursus_list2=_interopRequireDefault(_cursus_registration_cursus_list);var _cursus_registration_searched_cursus_list=__webpack_require__(758);var _cursus_registration_searched_cursus_list2=_interopRequireDefault(_cursus_registration_searched_cursus_list);var _cursus_registration_cursus_management=__webpack_require__(759);var _cursus_registration_cursus_management2=_interopRequireDefault(_cursus_registration_cursus_management);var _cursus_queue_management=__webpack_require__(760);var _cursus_queue_management2=_interopRequireDefault(_cursus_queue_management);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},756:function(module,exports){module.exports='<div class="panel-heading">\n    <h3 class="panel-title">\n        {{ \'claroline_cursus_tool_registration\'|trans:{}:\'tools\' }}\n    </h3>\n</div>\n<div class="list-group">\n    <a class="list-group-item pointer-hand" ui-sref="registration_cursus_list">\n        {{ \'claroline_cursus_tool_registration\'|trans:{}:\'tools\' }}\n    </a>\n    <a class="list-group-item pointer-hand" ui-sref="registration_queue_management">\n        {{ \'registration_queue_management\'|trans:{}:\'cursus\' }}\n    </a>\n</div>'},757:function(module,exports){module.exports='<div class="panel-heading">\n    <h3 class="panel-title">\n        {{ \'claroline_cursus_tool_registration\'|trans:{}:\'tools\' }}\n        <a ui-sref="registration_queue_management"\n           class="pull-right"\n           data-toggle="tooltip"\n           data-placement="left"\n           data-title="{{ \'registration_queue_management\'|trans:{}:\'cursus\' }}"\n        >\n            <i class="fa fa-th-list"></i>\n        </a>\n    </h3>\n</div>\n<div class="panel-body">\n    <div class="input-group col-md-6 pull-right">\n        <input class="form-control search-group"\n               type="text"\n               placeholder="{{ \'search\'|trans:{}:\'platform\' }}"\n               ng-model="crc.search"\n        >\n        <span class="input-group-btn">\n            <a class="filter btn btn-default"\n               type="button"\n               ui-sref="registration_searched_cursus_list({search: crc.search})"\n               ng-disabled="!crc.search"\n            >\n                <i class="fa fa-search"></i>\n            </a>\n        </span>\n    </div>\n    <br>\n    <br>\n    <hr>\n    <cursus-list></cursus-list>\n</div>'},758:function(module,exports){module.exports='<div class="panel-heading">\n    <h3 class="panel-title">\n        {{ \'claroline_cursus_tool_registration\'|trans:{}:\'tools\' }}\n        <a ui-sref="registration_queue_management"\n           class="pull-right"\n           data-toggle="tooltip"\n           data-placement="left"\n           data-title="{{ \'registration_queue_management\'|trans:{}:\'cursus\' }}"\n        >\n            <i class="fa fa-th-list"></i>\n        </a>\n    </h3>\n</div>\n<div class="panel-body">\n    <div class="alert alert-info">\n        {{ \'results_for_search_on\'|trans:{}:\'platform\' }} :\n        "{{ crsc.search }}"\n        <a class="close" ui-sref="registration_cursus_list">x</a>\n    </div>\n    <div class="well" ng-if="crsc.selectedCursusId">\n        <script type="text/ng-template" id="cursus_nodes_renderer.html">\n            <div ng-mouseenter="crsc.hoveredCursusId = cursus.id" ng-mouseleave="crsc.hoveredCursusId = 0" ng-if="!cursus.course">\n                <span class="pointer-hand"\n                      ng-class="(crsc.selectedCursusId === cursus.id) ? \'claroline-tag-highlight\' : \'\'"\n                      data-toggle="collapse"\n                      href="#collapse-{{ cursus.id }}"\n                >\n                    {{ cursus.title }}\n                </span>\n                <span ng-if="cursus.blocking">\n                    &nbsp;\n                    <i class="fa fa-lock"></i>\n                </span>\n                <span ng-if="crsc.hierarchy[cursus.id]">\n                    &nbsp;\n                    <i class="fa fa-caret-down pointer-hand"\n                       data-toggle="collapse"\n                       href="#collapse-{{ cursus.id }}"\n                    ></i>\n                </span>\n                <span ng-if="crsc.hoveredCursusId == cursus.id">\n                    &nbsp;\n                    <a ui-sref="registration_cursus_management({cursusId: cursus.id})"\n                       class="fa fa-user"\n                    >\n                    </a>\n                </span>\n            </div>\n            <span ng-if="cursus.course">\n                <span class="label label-primary" ng-class="(crsc.selectedCursusId === cursus.id) ? \'claroline-tag-highlight\' : \'\'">\n                    {{ cursus.title }}\n                </span>\n            </span>\n            <ul ng-if="crsc.hierarchy[cursus.id]" id="collapse-{{ cursus.id }}" class="collapse in">\n                <li ng-repeat="cursus in crsc.hierarchy[cursus.id]" ng-include="\'cursus_nodes_renderer.html\'">\n                </li>\n            </ul>\n        </script>\n        <div ng-repeat="cursus in crsc.hierarchy[\'root\']" ng-include="\'cursus_nodes_renderer.html\'">\n        </div>\n    </div>\n    <div class="input-group col-md-6 pull-right">\n        <input class="form-control search-group"\n               type="text"\n               placeholder="{{ \'search\'|trans:{}:\'platform\' }}"\n               ng-model="crsc.tempSearch"\n        >\n        <span class="input-group-btn">\n            <a class="filter btn btn-default"\n               type="button"\n               ui-sref="registration_searched_cursus_list({search: crsc.tempSearch})"\n               ng-disabled="!crsc.tempSearch"\n            >\n                <i class="fa fa-search"></i>\n            </a>\n        </span>\n    </div>\n    <br>\n    <br>\n    <hr>\n    <dtable options="crsc.dataTableOptions"\n            rows="crsc.cursusList" \n            class="material"\n            ng-if="crsc.cursusList.length > 0"\n    >\n    </dtable>\n    <div class="alert alert-warning" ng-if="crsc.cursusList.length === 0">\n        {{ \'no_result\'|trans:{}:\'cursus\' }}\n    </div>\n</div>'},759:function(module,exports){module.exports='<div class="panel-heading">\n    <h3 class="panel-title">\n        {{ \'claroline_cursus_tool_registration\'|trans:{}:\'tools\' }}\n        <a ui-sref="registration_queue_management"\n           class="pull-right"\n           data-toggle="tooltip"\n           data-placement="left"\n           data-title="{{ \'registration_queue_management\'|trans:{}:\'cursus\' }}"\n        >\n            <i class="fa fa-th-list"></i>\n        </a>\n    </h3>\n</div>\n<div class="panel-body">\n    <cursus-registration-informations></cursus-registration-informations>\n    <cursus-registration-groups></cursus-registration-groups>\n    <cursus-registration-users></cursus-registration-users>\n</div>'},760:function(module,exports){module.exports='<div class="panel-heading">\n    <h3 class="panel-title">\n        {{ \'registration_queue_management\'|trans:{}:\'cursus\' }}\n    </h3>\n</div>\n<div class="panel-body">\n    <div class="alert alert-info" ng-if="cqmc.search !== \'\'">\n        {{ \'results_for_search_on\'|trans:{}:\'platform\' }} :\n        "{{ cqmc.search }}"\n    </div>\n\n    <div class="input-group col-md-6 pull-right">\n        <input class="form-control search-group"\n               type="text"\n               placeholder="{{ \'search\'|trans:{}:\'platform\' }}"\n               ng-model="cqmc.tempSearch"\n        >\n        <span class="input-group-btn">\n            <button class="filter btn btn-default"\n                    type="button"\n                    ng-click="cqmc.searchDatas()"\n            >\n                <i class="fa fa-search"></i>\n            </button>\n        </span>\n    </div>\n    <br>\n    <br>\n    <hr>\n    <registration-queue-courses ng-if="cqmc.courses.length > 0"></registration-queue-courses>\n    <div class="alert alert-warning" ng-if="cqmc.courses.length === 0">\n        {{ \'no_course\'|trans:{}:\'cursus\' }}\n    <div>\n</div>'},761:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusDescriptionModalCtrl=function(){function CursusDescriptionModalCtrl($uibModalInstance,title,description){(0,_classCallCheck3.default)(this,CursusDescriptionModalCtrl);this.$uibModalInstance=$uibModalInstance;this.title=title;this.description=description}(0,_createClass3.default)(CursusDescriptionModalCtrl,[{key:"closeModal",value:function closeModal(){this.$uibModalInstance.close()}}]);return CursusDescriptionModalCtrl}();exports.default=CursusDescriptionModalCtrl},762:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusGroupUnregistrationModalCtrl=function(){function CursusGroupUnregistrationModalCtrl($http,$uibModalInstance,cursusGroupId,groupName,callBack){(0,_classCallCheck3.default)(this,CursusGroupUnregistrationModalCtrl);this.$http=$http;this.$uibModalInstance=$uibModalInstance;this.cursusGroupId=cursusGroupId;this.groupName=groupName;this.callBack=callBack}(0,_createClass3.default)(CursusGroupUnregistrationModalCtrl,[{key:"closeModal",value:function closeModal(){this.$uibModalInstance.close()}},{key:"confirmModal",value:function confirmModal(){var _this=this;var route=Routing.generate("api_delete_cursus_group",{cursusGroup:this.cursusGroupId});this.$http.delete(route).then(function(datas){if(datas["status"]===200){_this.callBack(_this.cursusGroupId);_this.closeModal()}})}}]);return CursusGroupUnregistrationModalCtrl}();exports.default=CursusGroupUnregistrationModalCtrl},763:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _cursus_registration_sessions_modal=__webpack_require__(764);var _cursus_registration_sessions_modal2=_interopRequireDefault(_cursus_registration_sessions_modal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusGroupsListRegistrationModalCtrl=function(){function CursusGroupsListRegistrationModalCtrl($http,$uibModal,$uibModalInstance,cursusId,cursusIdsTxt){(0,_classCallCheck3.default)(this,CursusGroupsListRegistrationModalCtrl);this.$http=$http;this.$uibModal=$uibModal;this.$uibModalInstance=$uibModalInstance;this.cursusId=cursusId;this.cursusIdsTxt=cursusIdsTxt;this.search="";this.tempSearch="";this.groups=[];this.groupsColumns=[{name:"name",prop:"name",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("name",{},"platform")+"</b>"}},{name:"actions",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("actions",{},"platform")+"</b>"},cellRenderer:function cellRenderer(scope){return'\n            <button class="btn btn-success btn-sm"\n                    ng-click="cglrmc.selectGroupForSessionsValidation('+scope.$row["id"]+')"\n            >\n              '+Translator.trans("register",{},"cursus")+"\n            </button>\n          "}}];this.dataTableOptions={scrollbarV:false,columnMode:"force",headerHeight:50,selectable:true,multiSelect:true,checkboxSelection:true,columns:this.groupsColumns};this.getUnregisteredGroups()}(0,_createClass3.default)(CursusGroupsListRegistrationModalCtrl,[{key:"getUnregisteredGroups",value:function getUnregisteredGroups(){var _this=this;var route=this.search===""?Routing.generate("api_get_unregistered_cursus_groups",{cursus:this.cursusId}):Routing.generate("api_get_searched_unregistered_cursus_groups",{cursus:this.cursusId,search:this.search});this.$http.get(route).then(function(datas){if(datas["status"]===200){_this.groups=datas["data"].groups}})}},{key:"selectGroupForSessionsValidation",value:function selectGroupForSessionsValidation(groupId){var _this2=this;this.closeModal();this.$uibModal.open({template:_cursus_registration_sessions_modal2.default,controller:"CursusRegistrationSessionsModalCtrl",controllerAs:"crsmc",resolve:{cursusId:function cursusId(){return _this2.cursusId},sourceId:function sourceId(){return groupId},sourceType:function sourceType(){return"group"},cursusIdsTxt:function cursusIdsTxt(){return _this2.cursusIdsTxt}}})}},{key:"closeModal",value:function closeModal(){this.$uibModalInstance.close()}},{key:"searchGroups",value:function searchGroups(){this.search=this.tempSearch;this.getUnregisteredGroups()}}]);return CursusGroupsListRegistrationModalCtrl}();exports.default=CursusGroupsListRegistrationModalCtrl},764:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button class="close" ng-click="crsmc.closeModal()">x</button>\n        <h4 class="modal-title">\n            {{ \'sessions_for_registration_selection\'|trans:{}:\'cursus\' }}\n        </h4>\n    </div>\n    <div class="modal-body">\n        <div ng-repeat="datas in crsmc.sessionsDatas">\n            <span data-toggle="collapse"\n                  href="#sessions-collapse-{{ datas[\'courseId\'] }}"\n                  class="label label-primary pointer-hand"\n            >\n                {{ datas[\'courseTitle\'] }}\n                <small>\n                    ({{ datas[\'courseCode\'] }})\n                </small>\n            </span>\n            &nbsp;\n            <i class="fa fa-caret-right pointer-hand"\n               data-toggle="collapse"\n               href="#sessions-collapse-{{ datas[\'courseId\'] }}"\n            >\n            </i>\n            <div id="sessions-collapse-{{ datas[\'courseId\'] }}"\n                 ng-class="datas[\'sessions\'].length > 0 ? \'collapse in\' : \'collapse\'"\n            >\n                <div class="radio col-md-offset-1" ng-repeat="session in datas[\'sessions\']">\n                    <small>\n                        <label>\n                            <input type="radio"\n                                   name="options-course-{{ datas[\'courseId\'] }}"\n                                   value="{{ session[\'sessionId\'] }}"\n                                   ng-model="crsmc.selectedSessions[datas[\'courseId\']]"\n                            >\n                            {{ session[\'sessionName\'] }}\n                            &nbsp;\n                            <i class="fa fa-circle"\n                               data-toggle="tooltip"\n                               data-placement="top"\n                               title="{{ \'session_not_started\'|trans:{}:\'cursus\' }}"\n                               style="color: #706c6c"\n                               ng-if="session[\'sessionStatus\'] === 0"\n                            >\n                            </i>\n                            <i class="fa fa-circle"\n                               data-toggle="tooltip"\n                               data-placement="top"\n                               title="{{ \'session_open\'|trans:{}:\'cursus\' }}"\n                               style="color: #5CB85C"\n                               ng-if="session[\'sessionStatus\'] === 1"\n                            >\n                            </i>\n                        </label>\n                    </small>\n                </div>\n                <div class="radio col-md-offset-1">\n                    <small>\n                        <code>\n                            <label>\n                                <input type="radio"\n                                       name="options-course-{{ datas[\'courseId\'] }}"\n                                       value="0"\n                                       ng-model="crsmc.selectedSessions[datas[\'courseId\']]"\n                                >\n                                <i class="fa fa-plus"></i>\n                                {{ \'create_new_session\'|trans:{}:\'cursus\' }}\n                            </label>\n                        </code>\n                    </small>\n                </div>\n            </div>\n        </div>\n        <div class="alert alert-info" ng-if="crsmc.sessionsDatas.length === 0">\n            {{ \'no_course\'|trans:{}:\'cursus\' }}\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="crsmc.closeModal()">\n            {{ \'cancel\'|trans:{}:\'platform\' }}\n        </button>\n        <button class="btn btn-primary" ng-click="crsmc.confirmModal()">\n            {{ \'ok\'|trans:{}:\'platform\' }}\n        </button>\n    </div>\n</div>'},765:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusGroupsUnregistrationModalCtrl=function(){function CursusGroupsUnregistrationModalCtrl($http,$uibModalInstance,cursusGroupsIdsTxt,callBack){(0,_classCallCheck3.default)(this,CursusGroupsUnregistrationModalCtrl);this.$http=$http;this.$uibModalInstance=$uibModalInstance;this.cursusGroupsIdsTxt=cursusGroupsIdsTxt;this.callBack=callBack}(0,_createClass3.default)(CursusGroupsUnregistrationModalCtrl,[{key:"closeModal",value:function closeModal(){this.$uibModalInstance.close()}},{key:"confirmModal",value:function confirmModal(){var _this=this;var route=Routing.generate("api_delete_cursus_groups",{cursusGroupsIdsTxt:this.cursusGroupsIdsTxt});this.$http.delete(route).then(function(datas){if(datas["status"]===200){var cursusGroupsIds=_this.cursusGroupsIdsTxt.split(",");for(var i=0;i<cursusGroupsIds.length;i++){cursusGroupsIds[i]=parseInt(cursusGroupsIds[i])}_this.callBack(cursusGroupsIds);_this.closeModal()}})}}]);return CursusGroupsUnregistrationModalCtrl}();exports.default=CursusGroupsUnregistrationModalCtrl},766:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusRegistrationCtrl=function(){function CursusRegistrationCtrl($http){(0,_classCallCheck3.default)(this,CursusRegistrationCtrl);this.$http=$http;this.initialized=false;this.cursusRoots=[];this.hoveredCursusId=0;this.search="";this.initialize()}(0,_createClass3.default)(CursusRegistrationCtrl,[{key:"initialize",value:function initialize(){var _this=this;if(!this.initialized){var route=Routing.generate("api_get_all_root_cursus");this.$http.get(route).then(function(datas){if(datas["status"]===200){_this.cursusRoots=datas["data"];_this.initialized=true}})}}}]);return CursusRegistrationCtrl}();exports.default=CursusRegistrationCtrl},767:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _cursus_registration_sessions_modal=__webpack_require__(764);var _cursus_registration_sessions_modal2=_interopRequireDefault(_cursus_registration_sessions_modal);var _cursus_groups_list_registration_modal=__webpack_require__(768);var _cursus_groups_list_registration_modal2=_interopRequireDefault(_cursus_groups_list_registration_modal);var _cursus_group_unregistration_modal=__webpack_require__(769);var _cursus_group_unregistration_modal2=_interopRequireDefault(_cursus_group_unregistration_modal);var _cursus_groups_unregistration_modal=__webpack_require__(770);var _cursus_groups_unregistration_modal2=_interopRequireDefault(_cursus_groups_unregistration_modal);var _cursus_user_unregistration_modal=__webpack_require__(771);var _cursus_user_unregistration_modal2=_interopRequireDefault(_cursus_user_unregistration_modal);var _cursus_users_unregistration_modal=__webpack_require__(772);var _cursus_users_unregistration_modal2=_interopRequireDefault(_cursus_users_unregistration_modal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusRegistrationManagementCtrl=function(){function CursusRegistrationManagementCtrl($stateParams,$http,$uibModal){(0,_classCallCheck3.default)(this,CursusRegistrationManagementCtrl);this.$http=$http;this.$uibModal=$uibModal;this.unlockedCursusTxt="";this.usersIdsTxt;this.currentCursusId=$stateParams.cursusId;this.hierarchy=[];this.lockedHierarchy=[];this.unlockedCursus=[];this.cursusGroups=[];this.cursusUsers=[];this.selectedUsers={};this.selectedCursusGroups={};this.allUsers=false;this.allGroups=false;this.usersColumns=[{name:"checkboxes",headerRenderer:function headerRenderer(){return'\n            <span>\n              <input type="checkbox" ng-click="crmc.toggleAllUsers()">\n            </span>\n          '},cellRenderer:function cellRenderer(scope){return'\n            <span>\n              <input type="checkbox" ng-model="crmc.selectedUsers['+scope.$row["userId"]+']">\n            </span>\n          '}},{name:"firstName",prop:"firstName",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("first_name",{},"platform")+"</b>"}},{name:"lastName",prop:"lastName",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("last_name",{},"platform")+"</b>"}},{name:"username",prop:"username",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("username",{},"platform")+"</b>"}},{name:"registration_date",prop:"registrationDate",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("registration_date",{},"cursus")+"</b>"},cellRenderer:function cellRenderer(scope){return"<span>"+scope.$row["registrationDate"]["date"]+"</span>"}},{name:"actions",headerRenderer:function headerRenderer(){return'\n            <button class="btn btn-default btn-sm"\n                    ng-click="crmc.unregisterSelectedUsers()"\n                    ng-disabled="!crmc.isUserSelected()"\n            >\n              '+Translator.trans("unregister_selected_users",{},"cursus")+"\n            </button>\n          "},cellRenderer:function cellRenderer(){return'\n            <button class="btn btn-danger btn-sm"\n                    ng-click="crmc.unregisterUser($row)"\n            >\n              '+Translator.trans("unregister",{},"cursus")+"\n            </button>\n          "}}];this.groupsColumns=[{name:"checkboxes",headerRenderer:function headerRenderer(){return'\n            <span>\n              <input type="checkbox" ng-click="crmc.toggleAllGroups()">\n            </span>\n          '},cellRenderer:function cellRenderer(scope){return'\n            <span>\n              <input type="checkbox" ng-model="crmc.selectedCursusGroups['+scope.$row["id"]+']">\n            </span>\n          '}},{name:"name",prop:"groupName",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("name",{},"platform")+"</b>"}},{name:"registration_date",prop:"registrationDate",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("registration_date",{},"cursus")+"</b>"},cellRenderer:function cellRenderer(scope){return"<span>"+scope.$row["registrationDate"]["date"]+"</span>"}},{name:"actions",headerRenderer:function headerRenderer(){return'\n            <button class="btn btn-default btn-sm"\n                    ng-click="crmc.unregisterSelectedGroups()"\n                    ng-disabled="!crmc.isGroupSelected()"\n            >\n              '+Translator.trans("unregister_selected_groups",{},"cursus")+"\n            </button>\n          "},cellRenderer:function cellRenderer(){return'\n            <button class="btn btn-danger btn-sm"\n                    ng-click="crmc.unregisterGroup($row)"\n            >\n              '+Translator.trans("unregister",{},"cursus")+"\n            </button>\n          "}}];this.dataGroupsTableOptions={scrollbarV:false,columnMode:"force",headerHeight:50,selectable:true,multiSelect:true,checkboxSelection:true,resizable:true,columns:this.groupsColumns};this.dataUsersTableOptions={scrollbarV:false,columnMode:"force",headerHeight:50,selectable:true,multiSelect:true,checkboxSelection:true,resizable:true,columns:this.usersColumns};this.userPickerCallBack=this.userPickerCallBack.bind(this);this.removeCursusGroup=this.removeCursusGroup.bind(this);this.removeCursusGroups=this.removeCursusGroups.bind(this);this.removeCursusUser=this.removeCursusUser.bind(this);
this.removeCursusUsers=this.removeCursusUsers.bind(this);this.initialize()}(0,_createClass3.default)(CursusRegistrationManagementCtrl,[{key:"userPickerCallBack",value:function userPickerCallBack(datas){var _this=this;if(datas===null){this.usersIdsTxt="0"}else{this.usersIdsTxt="";for(var i=0;i<datas.length;i++){this.usersIdsTxt+=datas[i]["id"]+","}var length=this.usersIdsTxt.length;if(length>0){this.usersIdsTxt=this.usersIdsTxt.substr(0,length-1)}}this.$uibModal.open({template:_cursus_registration_sessions_modal2.default,controller:"CursusRegistrationSessionsModalCtrl",controllerAs:"crsmc",resolve:{cursusId:function cursusId(){return _this.currentCursusId},sourceId:function sourceId(){return _this.usersIdsTxt},sourceType:function sourceType(){return"user"},cursusIdsTxt:function cursusIdsTxt(){return _this.unlockedCursusTxt}}})}},{key:"registerGroups",value:function registerGroups(){var _this2=this;this.$uibModal.open({template:_cursus_groups_list_registration_modal2.default,controller:"CursusGroupsListRegistrationModalCtrl",controllerAs:"cglrmc",resolve:{cursusId:function cursusId(){return _this2.currentCursusId},cursusIdsTxt:function cursusIdsTxt(){return _this2.unlockedCursusTxt}}})}},{key:"registerUsers",value:function registerUsers(){var usersIds=[];for(var i=0;i<this.cursusUsers.length;i++){usersIds.push(this.cursusUsers[i]["userId"])}var userPicker=new UserPicker;var config={picker_name:"cursus-registration-users-picker",picker_title:Translator.trans("register_users_to_cursus",{},"cursus"),multiple:true,blacklist:usersIds,return_datas:true,attach_name:false};userPicker.configure(config,this.userPickerCallBack);userPicker.open()}},{key:"unregisterGroup",value:function unregisterGroup(group){var _this3=this;var _cursusGroupId=group.id;var _groupName=group.groupName;this.$uibModal.open({template:_cursus_group_unregistration_modal2.default,controller:"CursusGroupUnregistrationModalCtrl",controllerAs:"cgumc",resolve:{cursusGroupId:function cursusGroupId(){return _cursusGroupId},groupName:function groupName(){return _groupName},callBack:function callBack(){return _this3.removeCursusGroup}}})}},{key:"unregisterSelectedGroups",value:function unregisterSelectedGroups(){var _this4=this;var _cursusGroupsIdsTxt="";for(var cursusGroupId in this.selectedCursusGroups){if(this.selectedCursusGroups[cursusGroupId]){_cursusGroupsIdsTxt+=cursusGroupId+","}}var length=_cursusGroupsIdsTxt.length;if(length>0){_cursusGroupsIdsTxt=_cursusGroupsIdsTxt.substr(0,length-1)}this.$uibModal.open({template:_cursus_groups_unregistration_modal2.default,controller:"CursusGroupsUnregistrationModalCtrl",controllerAs:"cgumc",resolve:{cursusGroupsIdsTxt:function cursusGroupsIdsTxt(){return _cursusGroupsIdsTxt},callBack:function callBack(){return _this4.removeCursusGroups}}})}},{key:"removeCursusGroup",value:function removeCursusGroup(cursusGroupId){for(var i=0;i<this.cursusGroups.length;i++){if(this.cursusGroups[i]["id"]===cursusGroupId){this.cursusGroups.splice(i,1);break}}this.updateCursusUsers()}},{key:"removeCursusGroups",value:function removeCursusGroups(cursusGroupIds){for(var i=this.cursusGroups.length-1;i>=0;i--){if(cursusGroupIds.indexOf(this.cursusGroups[i]["id"])>=0){this.cursusGroups.splice(i,1)}}this.updateCursusUsers()}},{key:"removeCursusUsers",value:function removeCursusUsers(userIds){for(var i=this.cursusUsers.length-1;i>=0;i--){if(userIds.indexOf(this.cursusUsers[i]["userId"])>=0){this.cursusUsers.splice(i,1)}}}},{key:"unregisterUser",value:function unregisterUser(user){var _this5=this;var _cursusUserId=user.id;var _name=user["firstName"]+" "+user["lastName"]+" ("+user["username"]+")";this.$uibModal.open({template:_cursus_user_unregistration_modal2.default,controller:"CursusUserUnregistrationModalCtrl",controllerAs:"cuumc",resolve:{cursusUserId:function cursusUserId(){return _cursusUserId},name:function name(){return _name},callBack:function callBack(){return _this5.removeCursusUser}}})}},{key:"unregisterSelectedUsers",value:function unregisterSelectedUsers(){var _this6=this;var idsTxt="";for(var userId in this.selectedUsers){if(this.selectedUsers[userId]){idsTxt+=userId+","}}var length=idsTxt.length;if(length>0){idsTxt=idsTxt.substr(0,length-1)}this.$uibModal.open({template:_cursus_users_unregistration_modal2.default,controller:"CursusUsersUnregistrationModalCtrl",controllerAs:"cuumc",resolve:{cursusId:function cursusId(){return _this6.currentCursusId},usersIdsTxt:function usersIdsTxt(){return idsTxt},callBack:function callBack(){return _this6.removeCursusUsers}}})}},{key:"removeCursusUser",value:function removeCursusUser(cursusUserId){for(var i=0;i<this.cursusUsers.length;i++){if(this.cursusUsers[i]["id"]===cursusUserId){this.cursusUsers.splice(i,1);break}}}},{key:"isGroupSelected",value:function isGroupSelected(){var selected=false;for(var cursusGroupId in this.selectedCursusGroups){if(this.selectedCursusGroups[cursusGroupId]){selected=true;break}}return selected}},{key:"isUserSelected",value:function isUserSelected(){var selected=false;for(var userId in this.selectedUsers){if(this.selectedUsers[userId]){selected=true;break}}return selected}},{key:"toggleAllGroups",value:function toggleAllGroups(){this.allGroups=!this.allGroups;for(var cursusGroupId in this.selectedCursusGroups){this.selectedCursusGroups[cursusGroupId]=this.allGroups}}},{key:"toggleAllUsers",value:function toggleAllUsers(){this.allUsers=!this.allUsers;for(var userId in this.selectedUsers){this.selectedUsers[userId]=this.allUsers}}},{key:"updateCursusUsers",value:function updateCursusUsers(){var _this7=this;var route=Routing.generate("api_get_cursus_users_for_cursus_registration",{cursus:this.currentCursusId});this.$http.get(route).then(function(datas){if(datas["status"]===200){_this7.cursusUsers=datas["data"]}})}},{key:"initialize",value:function initialize(){var _this8=this;var route=Routing.generate("api_get_datas_for_cursus_registration",{cursus:this.currentCursusId});this.$http.get(route).then(function(datas){var data=datas["data"];_this8.hierarchy=data["hierarchy"];_this8.lockedHierarchy=data["lockedHierarchy"];_this8.unlockedCursus=data["unlockedCursus"];_this8.cursusGroups=data["cursusGroups"];_this8.cursusUsers=data["cursusUsers"];for(var i=0;i<_this8.unlockedCursus.length;i++){_this8.unlockedCursusTxt+=_this8.unlockedCursus[i];if(i<_this8.unlockedCursus.length-1){_this8.unlockedCursusTxt+=","}}for(var _i=0;_i<_this8.cursusGroups.length;_i++){var cursusGroupId=_this8.cursusGroups[_i]["id"];_this8.selectedCursusGroups[cursusGroupId]=false}for(var _i2=0;_i2<_this8.cursusUsers.length;_i2++){var userId=_this8.cursusUsers[_i2]["userId"];_this8.selectedUsers[userId]=false}})}}]);return CursusRegistrationManagementCtrl}();exports.default=CursusRegistrationManagementCtrl},768:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button class="close" ng-click="cglrmc.closeModal()">x</button>\n        <h4 class="modal-title">\n            {{ \'register_groups_to_cursus\'|trans:{}:\'cursus\' }}\n        </h4>\n    </div>\n    <div class="modal-body">\n        <div class="alert alert-info" ng-if="cglrmc.search !== \'\'">\n            {{ \'results_for_search_on\'|trans:{}:\'platform\' }} :\n            "{{ cglrmc.search }}"\n        </div>\n        \n        <div class="input-group col-md-6 pull-right">\n            <input class="form-control search-group"\n                   type="text"\n                   placeholder="{{ \'search\'|trans:{}:\'platform\' }}"\n                   ng-model="cglrmc.tempSearch"\n            >\n            <span class="input-group-btn">\n                <button class="filter btn btn-default"\n                        type="button"\n                        ng-click="cglrmc.searchGroups()"\n                >\n                    <i class="fa fa-search"></i>\n                </button>\n            </span>\n        </div>\n        <br>\n        <br>\n        <hr>\n        <dtable options="cglrmc.dataTableOptions"\n                rows="cglrmc.groups" \n                class="material"\n                ng-if="cglrmc.groups.length > 0"\n        >\n        </dtable>\n        <div class="alert alert-warning" ng-if="cglrmc.groups.length === 0">\n            {{ \'no_group\'|trans:{}:\'platform\' }}\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cglrmc.closeModal()">\n            {{ \'close\'|trans:{}:\'platform\' }}\n        </button>\n    </div>\n</div>'},769:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button class="close" ng-click="cgumc.closeModal()">x</button>\n        <h4 class="modal-title">\n            {{ cgumc.groupName }}\n        </h4>\n    </div>\n    <div class="modal-body">\n        {{ \'unregister_group_from_cursus_confirm_message\'|trans:{}:\'cursus\' }}\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cgumc.closeModal()">\n            {{ \'cancel\'|trans:{}:\'platform\' }}\n        </button>\n        <button class="btn btn-primary" ng-click="cgumc.confirmModal()">\n            {{ \'ok\'|trans:{}:\'platform\' }}\n        </button>\n    </div>\n</div>'},770:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button class="close" ng-click="cgumc.closeModal()">x</button>\n        <h4 class="modal-title">\n            {{ \'unregister_selected_groups\'|trans:{}:\'cursus\' }}\n        </h4>\n    </div>\n    <div class="modal-body">\n        {{ \'unregister_selected_groups_message\'|trans:{}:\'cursus\' }}\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cgumc.closeModal()">\n            {{ \'cancel\'|trans:{}:\'platform\' }}\n        </button>\n        <button class="btn btn-primary" ng-click="cgumc.confirmModal()">\n            {{ \'ok\'|trans:{}:\'platform\' }}\n        </button>\n    </div>\n</div>'},771:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button class="close" ng-click="cuumc.closeModal()">x</button>\n        <h4 class="modal-title">\n            {{ cuumc.name }}\n        </h4>\n    </div>\n    <div class="modal-body">\n        {{ \'unregister_user_from_cursus_confirm_message\'|trans:{}:\'cursus\' }}\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cuumc.closeModal()">\n            {{ \'cancel\'|trans:{}:\'platform\' }}\n        </button>\n        <button class="btn btn-primary" ng-click="cuumc.confirmModal()">\n            {{ \'ok\'|trans:{}:\'platform\' }}\n        </button>\n    </div>\n</div>'},772:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button class="close" ng-click="cuumc.closeModal()">x</button>\n        <h4 class="modal-title">\n            {{ \'unregister_selected_users\'|trans:{}:\'cursus\' }}\n        </h4>\n    </div>\n    <div class="modal-body">\n        {{ \'unregister_selected_users_message\'|trans:{}:\'cursus\' }}\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cuumc.closeModal()">\n            {{ \'cancel\'|trans:{}:\'platform\' }}\n        </button>\n        <button class="btn btn-primary" ng-click="cuumc.confirmModal()">\n            {{ \'ok\'|trans:{}:\'platform\' }}\n        </button>\n    </div>\n</div>'},773:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _cursus_description_modal=__webpack_require__(774);var _cursus_description_modal2=_interopRequireDefault(_cursus_description_modal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusRegistrationSearchCtrl=function(){function CursusRegistrationSearchCtrl($stateParams,$http,$uibModal){var _this=this;(0,_classCallCheck3.default)(this,CursusRegistrationSearchCtrl);this.$http=$http;this.$uibModal=$uibModal;this.initialized=false;this.cursusList=[];this.cursusRoots=[];this.hierarchy=[];this.search=$stateParams.search;this.tempSearch=$stateParams.search;this.selectedCursusId=null;this.hoveredCursusId=0;this.columns=[{name:"title",prop:"title",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("title",{},"platform")+"</b>"},cellRenderer:function cellRenderer(scope){return'\n            <a class="pointer-hand"\n               ng-class="(crsc.selectedCursusId === '+scope.$row["id"]+") ? 'claroline-tag-highlight' : ''\"\n               ng-click=\"crsc.getHierarchy("+scope.$row["id"]+')"\n            >\n              '+scope.$row["title"]+"\n            </a>\n          "}},{name:"code",prop:"code",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("code",{},"platform")+"</b>"}},{name:"desciption",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("description",{},"platform")+"</b>"},cellRenderer:function cellRenderer(scope){var description=scope.$row["description"];var courseDescription=scope.$row["courseDescription"];var hasDescription=description!==null&&description!==""||courseDescription!==null&&courseDescription!=="";var descriptionElement=hasDescription?'\n              <i class="fa fa-eye pointer-hand"\n                 ng-click="crsc.showDescription('+scope.$row["id"]+')"\n              >\n              </i>\n            ':"-";return"<span>"+descriptionElement+"</span>"}},{name:"cursus",prop:"root",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("cursus",{},"cursus")+"</b>"},cellRenderer:function cellRenderer(scope){var rootTitle="-";var rootId=scope.$row["root"];if(_this.cursusRoots[rootId]){rootTitle=_this.cursusRoots[rootId]["title"]}return"<span>"+rootTitle+"</span>"}},{name:"type",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("type",{},"platform")+"</b>"},cellRenderer:function cellRenderer(scope){var type=Translator.trans("cursus",{},"cursus");var courseId=scope.$row["course"];if(courseId){type=Translator.trans("course",{},"cursus")}return"<span>"+type+"</span>"}}];this.dataTableOptions={scrollbarV:false,columnMode:"force",headerHeight:50,resizable:true,columns:this.columns};this.initialize()}(0,_createClass3.default)(CursusRegistrationSearchCtrl,[{key:"initialize",value:function initialize(){var _this2=this;if(!this.initialized){var route=Routing.generate("api_get_datas_for_searched_cursus_registration",{search:this.tempSearch});this.$http.get(route).then(function(datas){if(datas["status"]===200){_this2.cursusList=datas["data"]["searchedCursus"];_this2.cursusRoots=datas["data"]["roots"];_this2.initialized=true}})}}},{key:"getCursusInfos",value:function getCursusInfos(cursusId){var infos=null;for(var i=0;i<this.cursusList.length;i++){if(this.cursusList[i]["id"]===cursusId){infos=this.cursusList[i];break}}return infos}},{key:"getHierarchy",value:function getHierarchy(cursusId){var _this3=this;this.selectedCursusId=cursusId;var route=Routing.generate("api_get_datas_for_cursus_hierarchy",{cursus:cursusId});this.$http.get(route).then(function(datas){if(datas["status"]===200){_this3.hierarchy=datas["data"]}})}},{key:"showDescription",value:function showDescription(cursusId){var infos=this.getCursusInfos(cursusId);var _description=infos["courseDescription"];if(_description===null||_description===""){_description=infos["description"]}if(infos!==null){this.$uibModal.open({template:_cursus_description_modal2.default,controller:"CursusDescriptionModalCtrl",controllerAs:"cdmc",resolve:{title:function title(){return infos["title"]},description:function description(){return _description}}})}}}]);return CursusRegistrationSearchCtrl}();exports.default=CursusRegistrationSearchCtrl},774:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button class="close" ng-click="cdmc.closeModal()">x</button>\n        <h3 class="modal-title">\n            {{ cdmc.title }}\n        </h3>\n    </div>\n    <div class="modal-body">\n        <div ng-bind-html="cdmc.description"></div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cdmc.closeModal()">\n            {{ \'close\'|trans:{}:\'platform\' }}\n        </button>\n    </div>\n</div>'},775:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _simple_modal=__webpack_require__(776);var _simple_modal2=_interopRequireDefault(_simple_modal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusRegistrationSessionsModalCtrl=function(){function CursusRegistrationSessionsModalCtrl($http,$state,$uibModal,$uibModalInstance,cursusId,sourceId,sourceType,cursusIdsTxt){(0,_classCallCheck3.default)(this,CursusRegistrationSessionsModalCtrl);this.$http=$http;this.$state=$state;this.$uibModal=$uibModal;this.$uibModalInstance=$uibModalInstance;this.cursusId=cursusId;this.sourceId=sourceId;this.sourceType=sourceType;this.cursusIdsTxt=cursusIdsTxt;this.sessionsDatas=[];this.selectedSessions=[];this.initialize()}(0,_createClass3.default)(CursusRegistrationSessionsModalCtrl,[{key:"closeModal",value:function closeModal(){this.$uibModalInstance.close()}},{key:"confirmModal",value:function confirmModal(){var _this=this;var route=void 0;var sessionsIdsTxt="";for(var courseId in this.selectedSessions){sessionsIdsTxt+=this.selectedSessions[courseId]+","}var length=sessionsIdsTxt.length;sessionsIdsTxt=length>0?sessionsIdsTxt.substring(0,length-1):"0";if(this.sourceType==="group"){route=Routing.generate("api_post_group_register_to_multiple_cursus",{group:this.sourceId,cursusIdsTxt:this.cursusIdsTxt,sessionsIdsTxt:sessionsIdsTxt});this.$http.post(route).then(function(datas){if(datas["status"]===200){_this.closeModal();var resultsDatas=datas["data"];if(resultsDatas["status"]==="success"){_this.$state.transitionTo("registration_cursus_management",{cursusId:_this.cursusId},{reload:true,inherit:true,notify:true})}else{(function(){var _title=Translator.trans("registration_failed",{},"cursus");var _content="";var errorDatas=resultsDatas["datas"];for(var i=0;i<errorDatas.length;i++){_content+='<div class="alert alert-danger">'+Translator.trans("session_not_enough_place_msg",{sessionName:errorDatas[i]["sessionName"],courseTitle:errorDatas[i]["courseTitle"],courseCode:errorDatas[i]["courseCode"],remainingPlaces:errorDatas[i]["remainingPlaces"]},"cursus")+"</div>"}_this.$uibModal.open({template:_simple_modal2.default,controller:"SimpleModalCtrl",controllerAs:"smc",resolve:{title:function title(){return _title},content:function content(){return _content}}})})()}}})}else if(this.sourceType==="user"){route=Routing.generate("api_post_users_register_to_multiple_cursus",{usersIdsTxt:this.sourceId,cursusIdsTxt:this.cursusIdsTxt,sessionsIdsTxt:sessionsIdsTxt});this.$http.post(route).then(function(datas){if(datas["status"]===200){_this.closeModal();var resultsDatas=datas["data"];if(resultsDatas["status"]==="success"){_this.$state.transitionTo("registration_cursus_management",{cursusId:_this.cursusId},{reload:true,inherit:true,notify:true})}else{(function(){var _title2=Translator.trans("registration_failed",{},"cursus");var _content2="";var errorDatas=resultsDatas["datas"];for(var i=0;i<errorDatas.length;i++){_content2+='<div class="alert alert-danger">'+Translator.trans("session_not_enough_place_msg",{sessionName:errorDatas[i]["sessionName"],courseTitle:errorDatas[i]["courseTitle"],courseCode:errorDatas[i]["courseCode"],remainingPlaces:errorDatas[i]["remainingPlaces"]},"cursus")+"</div>"}_this.$uibModal.open({template:_simple_modal2.default,controller:"SimpleModalCtrl",controllerAs:"smc",resolve:{title:function title(){return _title2},content:function content(){return _content2}}})})()}}})}}},{key:"initialize",value:function initialize(){var _this2=this;var route=Routing.generate("api_get_sessions_for_cursus_list",{cursusIdsTxt:this.cursusIdsTxt});this.$http.get(route).then(function(datas){if(datas["status"]===200){_this2.sessionsDatas=datas["data"];for(var courseId in _this2.sessionsDatas){_this2.selectedSessions[courseId]=0}}})}}]);return CursusRegistrationSessionsModalCtrl}();exports.default=CursusRegistrationSessionsModalCtrl},776:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button class="close" ng-click="smc.closeModal()">x</button>\n        <h3 class="modal-title">\n            {{ smc.title }}\n        </h3>\n    </div>\n    <div class="modal-body">\n        <div ng-bind-html="smc.content"></div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="smc.closeModal()">\n            {{ \'close\'|trans:{}:\'platform\' }}\n        </button>\n    </div>\n</div>'},777:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusUserUnregistrationModalCtrl=function(){function CursusUserUnregistrationModalCtrl($http,$uibModalInstance,cursusUserId,name,callBack){(0,_classCallCheck3.default)(this,CursusUserUnregistrationModalCtrl);this.$http=$http;this.$uibModalInstance=$uibModalInstance;this.cursusUserId=cursusUserId;this.name=name;this.callBack=callBack}(0,_createClass3.default)(CursusUserUnregistrationModalCtrl,[{key:"closeModal",value:function closeModal(){this.$uibModalInstance.close()}},{key:"confirmModal",value:function confirmModal(){var _this=this;var route=Routing.generate("api_delete_cursus_user",{cursusUser:this.cursusUserId});this.$http.delete(route).then(function(datas){if(datas["status"]===200){_this.callBack(_this.cursusUserId);_this.closeModal()}})}}]);return CursusUserUnregistrationModalCtrl}();exports.default=CursusUserUnregistrationModalCtrl},778:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusUsersUnregistrationModalCtrl=function(){function CursusUsersUnregistrationModalCtrl($http,$uibModalInstance,cursusId,usersIdsTxt,callBack){(0,_classCallCheck3.default)(this,CursusUsersUnregistrationModalCtrl);this.$http=$http;this.$uibModalInstance=$uibModalInstance;this.cursusId=cursusId;this.usersIdsTxt=usersIdsTxt;this.callBack=callBack}(0,_createClass3.default)(CursusUsersUnregistrationModalCtrl,[{key:"closeModal",value:function closeModal(){this.$uibModalInstance.close()}},{key:"confirmModal",value:function confirmModal(){var _this=this;var route=Routing.generate("api_delete_cursus_users",{cursus:this.cursusId,usersIdsTxt:this.usersIdsTxt});this.$http.delete(route).then(function(datas){if(datas["status"]===200){var usersIds=_this.usersIdsTxt.split(",");for(var i=0;i<usersIds.length;i++){usersIds[i]=parseInt(usersIds[i])}_this.callBack(usersIds);_this.closeModal()}})}}]);return CursusUsersUnregistrationModalCtrl}();exports.default=CursusUsersUnregistrationModalCtrl},779:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SimpleModalCtrl=function(){function SimpleModalCtrl($uibModalInstance,$sce,title,content){(0,_classCallCheck3.default)(this,SimpleModalCtrl);this.$uibModalInstance=$uibModalInstance;this.title=title;this.content=$sce.trustAsHtml(content)}(0,_createClass3.default)(SimpleModalCtrl,[{key:"closeModal",value:function closeModal(){this.$uibModalInstance.close()}}]);return SimpleModalCtrl}();exports.default=SimpleModalCtrl},780:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _cursus_registration_groups=__webpack_require__(781);var _cursus_registration_groups2=_interopRequireDefault(_cursus_registration_groups);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusRegistrationGroupsDirective=function CursusRegistrationGroupsDirective(){(0,_classCallCheck3.default)(this,CursusRegistrationGroupsDirective);this.restrict="E";this.replace=true;this.template=_cursus_registration_groups2.default};exports.default=CursusRegistrationGroupsDirective},781:function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-heading">\n        <span class="pointer-hand" data-toggle="collapse" href="#collapse-groups-list">\n            {{ \'groups\'|trans:{}:\'platform\' }}\n        </span>\n        <span class="pull-right">\n            <i class="fa fa-users pointer-hand"\n               data-toggle="tooltip"\n               data-placement="left"\n               title="{{ \'register_groups_to_cursus\'|trans:{}:\'cursus\' }}"\n               ng-click="crmc.registerGroups()"\n            >\n            </i>\n        </span>\n    </div>\n    <div id="collapse-groups-list" class="panel-collapse collapse in">\n        <div class="panel-body">\n            <dtable options="crmc.dataGroupsTableOptions"\n                    rows="crmc.cursusGroups"\n                    class="material"\n                    ng-if="crmc.cursusGroups.length > 0"\n            >\n            </dtable>\n            <div class="alert alert-warning" ng-if="crmc.cursusGroups.length == 0">\n                {{ \'no_group\'|trans:{}:\'platform\' }}\n            </div>\n        </div>\n    </div>\n</div>'},782:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _cursus_registration_informations=__webpack_require__(783);var _cursus_registration_informations2=_interopRequireDefault(_cursus_registration_informations);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusRegistrationInformationsDirective=function CursusRegistrationInformationsDirective(){(0,_classCallCheck3.default)(this,CursusRegistrationInformationsDirective);this.restrict="E";this.replace=true;this.template=_cursus_registration_informations2.default};exports.default=CursusRegistrationInformationsDirective},783:function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-heading">\n        <span class="pointer-hand" data-toggle="collapse" href="#collapse-informations">\n            {{ \'informations\'|trans:{}:\'platform\' }}\n        </span>\n    </div>\n    <div id="collapse-informations" class="panel-collapse collapse in">\n        <div class="panel-body" ng-if="crmc.hierarchy.root">\n            <script type="text/ng-template" id="cursus_nodes_renderer.html">\n                <div ng-if="!cursus.course">\n                    <div class="cursus-element">\n                        <a ui-sref="registration_cursus_management({cursusId: cursus.id})"\n                           ng-class="(crmc.currentCursusId == cursus.id) ? \'claroline-tag-highlight\' : \'\'"\n                           style="color: #333339"\n                        >\n                            {{ cursus.title }}\n                        </a>\n                        <span ng-if="cursus.blocking">\n                            &nbsp;\n                            <i class="fa fa-lock"></i>\n                        </span>\n                        <span ng-if="crmc.hierarchy[cursus.id]">\n                            &nbsp;\n                            <i class="fa fa-caret-down pointer-hand"\n                               data-toggle="collapse"\n                               href="#collapse-{{ cursus.id }}"\n                            ></i>\n                        </span>\n                        <span ng-if="(crmc.currentCursusId == cursus.id) || (crmc.lockedHierarchy[cursus.id] && (crmc.lockedHierarchy[cursus.id] == \'up\' || crmc.lockedHierarchy[cursus.id] == \'down\'))">\n                            &nbsp;\n                            <i class="fa fa-check-circle" style="color: #5CB85C"></i>\n                        </span>\n                        <span ng-if="(crmc.currentCursusId != cursus.id) && (!crmc.lockedHierarchy[cursus.id] || (crmc.lockedHierarchy[cursus.id] != \'up\' && crmc.lockedHierarchy[cursus.id] != \'down\'))">\n                            &nbsp;\n                            <i class="fa fa-times-circle" style="color: #D9534F"></i>\n                        </span>\n                    </div>\n                </div>\n                <span ng-if="cursus.course">\n                    <span class="label label-primary">\n                        {{ cursus.title }}\n                    </span>\n                    <span ng-if="(crmc.currentCursusId == cursus.id) || (crmc.lockedHierarchy[cursus.id] && (crmc.lockedHierarchy[cursus.id] == \'up\' || crmc.lockedHierarchy[cursus.id] == \'down\'))">\n                        &nbsp;\n                        <i class="fa fa-check-circle" style="color: #5CB85C"></i>\n                    </span>\n                    <span ng-if="(crmc.currentCursusId != cursus.id) && (!crmc.lockedHierarchy[cursus.id] || (crmc.lockedHierarchy[cursus.id] != \'up\' && crmc.lockedHierarchy[cursus.id] != \'down\'))">\n                        &nbsp;\n                        <i class="fa fa-times-circle" style="color: #D9534F"></i>\n                    </span>\n                </span>\n                <ul ng-if="crmc.hierarchy[cursus.id]" id="collapse-{{ cursus.id }}" class="collapse in">\n                    <li ng-repeat="cursus in crmc.hierarchy[cursus.id]" ng-include="\'cursus_nodes_renderer.html\'">\n                    </li>\n                </ul>\n            </script>\n            <div ng-repeat="cursus in crmc.hierarchy.root" ng-include="\'cursus_nodes_renderer.html\'">\n            </div>\n        </div>\n    </div>\n</div>'},784:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _cursus_list=__webpack_require__(785);var _cursus_list2=_interopRequireDefault(_cursus_list);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusRegistrationListDirective=function CursusRegistrationListDirective(){(0,_classCallCheck3.default)(this,CursusRegistrationListDirective);this.restrict="E";this.replace=true;this.template=_cursus_list2.default};exports.default=CursusRegistrationListDirective},785:function(module,exports){module.exports='<div>\n    <script type="text/ng-template" id="cursus_nodes_renderer.html">\n        <div class="cursus-element" ng-mouseenter="crc.hoveredCursusId = cursus.id" ng-mouseleave="crc.hoveredCursusId = 0" ng-if="!cursus.course">\n            <span class="pointer-hand"\n                  data-toggle="collapse"\n                  href="#collapse-{{ cursus.id }}"\n            >\n                {{ cursus.title }}\n            </span>\n            <span ng-if="cursus.blocking">\n                &nbsp;\n                <i class="fa fa-lock"></i>\n            </span>\n            <span ng-if="cursus.children.length > 0">\n                &nbsp;\n                <i class="fa fa-caret-down pointer-hand"\n                   data-toggle="collapse"\n                   href="#collapse-{{ cursus.id }}"\n                ></i>\n            </span>\n            <span ng-if="crc.hoveredCursusId == cursus.id">\n                &nbsp;\n                <a ui-sref="registration_cursus_management({cursusId: cursus.id})"\n                   class="fa fa-user"\n                >\n                </a>\n            </span>\n        </div>\n        <span ng-if="cursus.course">\n            <span class="label label-primary pointer-hand">\n                {{ cursus.title }}\n            </span>\n        </span>\n        <ul ng-if="cursus.children.length > 0" id="collapse-{{ cursus.id }}" class="collapse">\n            <li ng-repeat="cursus in cursus.children" ng-include="\'cursus_nodes_renderer.html\'">\n            </li>\n        </ul>\n        <hr ng-if="cursus.id == cursus.root">\n    </script>\n    <div ng-repeat="cursus in crc.cursusRoots" ng-include="\'cursus_nodes_renderer.html\'">\n    </div>\n</div>';
},786:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _cursus_registration_users=__webpack_require__(787);var _cursus_registration_users2=_interopRequireDefault(_cursus_registration_users);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusRegistrationUsersDirective=function CursusRegistrationUsersDirective(){(0,_classCallCheck3.default)(this,CursusRegistrationUsersDirective);this.restrict="E";this.replace=true;this.template=_cursus_registration_users2.default};exports.default=CursusRegistrationUsersDirective},787:function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-heading">\n        <span class="pointer-hand" data-toggle="collapse" href="#collapse-users-list">\n            {{ \'users\'|trans:{}:\'platform\' }}\n        </span>\n        <span class="pull-right">\n            <i class="fa fa-user pointer-hand"\n               data-toggle="tooltip"\n               data-placement="left"\n               title="{{ \'register_users_to_cursus\'|trans:{}:\'cursus\' }}"\n               ng-click="crmc.registerUsers()"\n            >\n            </i>\n        </span>\n    </div>\n    <div id="collapse-users-list" class="panel-collapse collapse in">\n        <div class="panel-body">\n            <dtable options="crmc.dataUsersTableOptions"\n                    rows="crmc.cursusUsers"\n                    class="material"\n                    ng-if="crmc.cursusUsers.length > 0"\n            >\n            </dtable>\n            <div class="alert alert-warning" ng-if="crmc.cursusUsers.length == 0">\n                {{ \'no_user\'|trans:{}:\'platform\' }}\n            </div>\n        </div>\n    </div>\n</div>'},788:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);var _simple_modal=__webpack_require__(776);var _simple_modal2=_interopRequireDefault(_simple_modal);var _sessions_choices_transfer_modal=__webpack_require__(789);var _sessions_choices_transfer_modal2=_interopRequireDefault(_sessions_choices_transfer_modal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CursusQueueManagementCtrl=function(){function CursusQueueManagementCtrl($http,$uibModal){var _this=this;(0,_classCallCheck3.default)(this,CursusQueueManagementCtrl);this.$http=$http;this.$uibModal=$uibModal;this.connectedUser={id:0};this.courses=[];this.coursesQueues=[];this.sessionsQueues=[];this.search="";this.tempSearch="";this.isAdmin=false;this.coursesColumns=[{name:"firstName",prop:"firstName",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("first_name",{},"platform")+"</b>"}},{name:"lastName",prop:"lastName",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("last_name",{},"platform")+"</b>"}},{name:"applicationDate",prop:"applicationDate",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("application_date",{},"cursus")+"</b>"},cellRenderer:function cellRenderer(scope){return"<span>"+scope.$row["applicationDate"]+"</span>"}},{name:"sessionName",prop:"sessionName",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("session",{},"cursus")+"</b>"},cellRenderer:function cellRenderer(){return"<span>["+Translator.trans("to_define",{},"cursus")+"]</span>"}},{name:"status",prop:"status",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("status",{},"platform")+"</b>"},cellRenderer:function cellRenderer(scope){var status=scope.$row["status"];var userValidation=(status&2)===2;var validatorValidation=(status&4)===4;var organizationValidation=(status&8)===8;var cell="";if(status===1){cell+='\n              <span class="label label-warning"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    data-container="body"\n                    data-title="'+Translator.trans("waiting_for_session_transfer",{},"cursus")+'"\n              >\n                  <i class="fa fa-clock-o"></i>\n                  &nbsp;\n                  '+Translator.trans("session",{},"cursus")+"\n              </span>\n              <br>\n            "}else{if(userValidation){cell+='\n                <span class="label label-primary"\n                      data-toggle="tooltip"\n                      data-placement="top"\n                      data-container="body"\n                      data-title="'+Translator.trans("waiting_user_validation",{},"cursus")+'"\n                >\n                    <i class="fa fa-clock-o"></i>\n                    &nbsp;\n                    '+Translator.trans("user",{},"platform")+"\n                </span>\n                <br>\n              "}if(organizationValidation){cell+='\n                <span class="label label-danger"\n                      data-toggle="tooltip"\n                      data-placement="top"\n                      data-container="body"\n                      data-title="'+Translator.trans("waiting_organization_validation",{},"cursus")+'"\n                >\n                    <i class="fa fa-clock-o"></i>\n                    &nbsp;\n                    '+Translator.trans("organization",{},"platform")+"\n                </span>\n                <br>\n              "}if(validatorValidation){cell+='\n                <span class="label label-success"\n                      data-toggle="tooltip"\n                      data-placement="top"\n                      data-container="body"\n                      data-title="'+Translator.trans("waiting_validator_validation",{},"cursus")+'"\n                >\n                    <i class="fa fa-clock-o"></i>\n                    &nbsp;\n                    '+Translator.trans("validator",{},"cursus")+"\n                </span>\n                <br>\n              "}}return cell}},{name:"actions",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("actions",{},"platform")+"</b>"},cellRenderer:function cellRenderer(scope){var rights=scope.$row["rights"];var status=scope.$row["status"];var isValidated=status===1;var userValidation=(status&2)===2;var validatorValidation=(status&4)===4;var organizationValidation=(status&8)===8;var isValidator=(rights&4)===4;var isOrganizationAdmin=(rights&8)===8;var disabled=!_this.isAdmin&&(userValidation||organizationValidation&&!isOrganizationAdmin||!organizationValidation&&validatorValidation&&!isValidator);var disabledMsg="";if(userValidation){disabledMsg=Translator.trans("waiting_user_validation",{},"cursus")}else if(organizationValidation&&!isOrganizationAdmin){disabledMsg=Translator.trans("waiting_organization_validation",{},"cursus")}var cell="";if(isValidated){cell+='\n              <button class="btn btn-success btn-sm"\n                      ng-click="cqmc.transferCourseQueue('+scope.$row["id"]+", "+scope.$row["courseId"]+')"\n              >\n                  <i class="fa fa-sign-in"></i>\n              </button>\n              &nbsp;\n            '}else{cell+=disabled?'\n                <button class="btn btn-success btn-sm disabled"\n                        data-toggle="tooltip"\n                        data-placement="top"\n                        data-container="body"\n                        data-title="'+disabledMsg+'"\n                >\n              ':'\n                <button class="btn btn-success btn-sm"\n                        ng-click="cqmc.validateCourseQueue('+scope.$row["id"]+')"\n                >\n              ';cell+='\n                  <i class="fa fa-check"></i>\n              </button>\n              &nbsp;\n            '}cell+='\n            <button class="btn btn-danger btn-sm"\n                    ng-click="cqmc.declineCourseQueue('+scope.$row["id"]+')"\n            >\n                <i class="fa fa-times"></i>\n            </button>\n          ';return cell}}];this.sessionsColumns=[{name:"firstName",prop:"firstName",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("first_name",{},"platform")+"</b>"}},{name:"lastName",prop:"lastName",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("last_name",{},"platform")+"</b>"}},{name:"applicationDate",prop:"applicationDate",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("application_date",{},"cursus")+"</b>"},cellRenderer:function cellRenderer(scope){return"<span>"+scope.$row["applicationDate"]+"</span>"}},{name:"sessionName",prop:"sessionName",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("session",{},"cursus")+"</b>"}},{name:"status",prop:"status",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("status",{},"platform")+"</b>"},cellRenderer:function cellRenderer(scope){var status=scope.$row["status"];var userValidation=(status&2)===2;var validatorValidation=(status&4)===4;var organizationValidation=(status&8)===8;var cell="<span>";if(userValidation){cell+='\n              <span class="label label-primary"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    data-container="body"\n                    data-title="'+Translator.trans("waiting_user_validation",{},"cursus")+'"\n              >\n                  <i class="fa fa-clock-o"></i>\n                  &nbsp;\n                  '+Translator.trans("user",{},"platform")+"\n              </span>\n              <br>\n            "}if(organizationValidation){cell+='\n              <span class="label label-danger"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    data-container="body"\n                    data-title="'+Translator.trans("waiting_organization_validation",{},"cursus")+'"\n              >\n                  <i class="fa fa-clock-o"></i>\n                  &nbsp;\n                  '+Translator.trans("organization",{},"platform")+"\n              </span>\n              <br>\n            "}if(validatorValidation){cell+='\n              <span class="label label-success"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    data-container="body"\n                    data-title="'+Translator.trans("waiting_validator_validation",{},"cursus")+'"\n              >\n                  <i class="fa fa-clock-o"></i>\n                  &nbsp;\n                  '+Translator.trans("validator",{},"cursus")+"\n              </span>\n              <br>\n            "}cell+="</span>";return cell}},{name:"actions",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("actions",{},"platform")+"</b>"},cellRenderer:function cellRenderer(scope){var rights=scope.$row["rights"];var status=scope.$row["status"];var userValidation=(status&2)===2;var validatorValidation=(status&4)===4;var organizationValidation=(status&8)===8;var isValidator=(rights&4)===4;var isOrganizationAdmin=(rights&8)===8;var disabled=!_this.isAdmin&&(userValidation||organizationValidation&&!isOrganizationAdmin||!organizationValidation&&validatorValidation&&!isValidator);var disabledMsg="";if(userValidation){disabledMsg=Translator.trans("waiting_user_validation",{},"cursus")}else if(organizationValidation&&!isOrganizationAdmin){disabledMsg=Translator.trans("waiting_organization_validation",{},"cursus")}var cell=disabled?'\n              <button class="btn btn-success btn-sm disabled"\n                      data-toggle="tooltip"\n                      data-placement="top"\n                      data-container="body"\n                      data-title="'+disabledMsg+'"\n              >\n            ':'\n              <button class="btn btn-success btn-sm"\n                      ng-click="cqmc.validateSessionQueue('+scope.$row["id"]+')"\n              >\n            ';cell+='\n                <i class="fa fa-check"></i>\n            </button>\n            &nbsp;\n            <button class="btn btn-danger btn-sm"\n                    ng-click="cqmc.declineSessionQueue('+scope.$row["id"]+')"\n            >\n                <i class="fa fa-times"></i>\n            </button>\n          ';return cell}}];this.coursesDataTableOptions={scrollbarV:false,columnMode:"force",headerHeight:50,selectable:true,multiSelect:true,checkboxSelection:true,resizable:true,columns:this.coursesColumns};this.sessionsDataTableOptions={scrollbarV:false,columnMode:"force",headerHeight:50,selectable:true,multiSelect:true,checkboxSelection:true,resizable:true,columns:this.sessionsColumns};this.removeCourseQueue=this.removeCourseQueue.bind(this);this.initialize()}(0,_createClass3.default)(CursusQueueManagementCtrl,[{key:"searchDatas",value:function searchDatas(){this.search=this.tempSearch;if(this.search===""){this.getAllDatas()}else{this.getSearchedDatas(this.search)}}},{key:"declineCourseQueue",value:function declineCourseQueue(queueId){var _this2=this;var route=Routing.generate("api_delete_course_queue",{queue:queueId});this.$http.delete(route).then(function(datas){if(datas["status"]===200){var queueDatas=datas["data"];_this2.removeCourseQueue(queueDatas["courseId"],queueDatas["id"])}},function(datas){if(datas["status"]===403){(function(){var _title=Translator.trans("decline_failed",{},"cursus");var _content='<div class="alert alert-danger">'+Translator.trans(datas["data"],{},"cursus")+"</div>";_this2.$uibModal.open({template:_simple_modal2.default,controller:"SimpleModalCtrl",controllerAs:"smc",resolve:{title:function title(){return _title},content:function content(){return _content}}})})()}})}},{key:"declineSessionQueue",value:function declineSessionQueue(queueId){var _this3=this;var route=Routing.generate("api_delete_session_queue",{queue:queueId});this.$http.delete(route).then(function(datas){if(datas["status"]===200){var queueDatas=datas["data"];_this3.removeSessionQueue(queueDatas["courseId"],queueDatas["id"])}},function(datas){if(datas["status"]===403){(function(){var _title2=Translator.trans("decline_failed",{},"cursus");var _content2='<div class="alert alert-danger">'+Translator.trans(datas["data"],{},"cursus")+"</div>";_this3.$uibModal.open({template:_simple_modal2.default,controller:"SimpleModalCtrl",controllerAs:"smc",resolve:{title:function title(){return _title2},content:function content(){return _content2}}})})()}})}},{key:"validateCourseQueue",value:function validateCourseQueue(queueId){var _this4=this;var route=Routing.generate("api_put_course_queue_validate",{queue:queueId});this.$http.put(route).then(function(datas){if(datas["status"]===200){var queueDatas=datas["data"];if(queueDatas["type"]==="not_authorized"){(function(){var _title3=Translator.trans("validation_failed",{},"cursus");var _content3='\n              <div class="alert alert-danger">\n                  '+Translator.trans("not_authorized",{},"cursus")+"\n              </div>\n            ";_this4.$uibModal.open({template:_simple_modal2.default,controller:"SimpleModalCtrl",controllerAs:"smc",resolve:{title:function title(){return _title3},content:function content(){return _content3}}})})()}else if(queueDatas["type"]==="admin_validated"){_this4.updateCourseQueue(queueDatas["courseId"],queueDatas["id"],queueDatas["queueStatus"],0)}else if(queueDatas["type"]==="organization_validated"){_this4.updateCourseQueue(queueDatas["courseId"],queueDatas["id"],queueDatas["queueStatus"],8)}else if(queueDatas["type"]==="validator_validated"){_this4.updateCourseQueue(queueDatas["courseId"],queueDatas["id"],queueDatas["queueStatus"],4)}}})}},{key:"validateSessionQueue",value:function validateSessionQueue(queueId){var _this5=this;var route=Routing.generate("api_put_session_queue_validate",{queue:queueId});this.$http.put(route).then(function(datas){if(datas["status"]===200){var queueDatas=datas["data"];if(queueDatas["type"]==="not_authorized"){(function(){var _title4=Translator.trans("validation_failed",{},"cursus");var _content4='\n              <div class="alert alert-danger">\n                  '+Translator.trans("not_authorized",{},"cursus")+"\n              </div>\n            ";_this5.$uibModal.open({template:_simple_modal2.default,controller:"SimpleModalCtrl",controllerAs:"smc",resolve:{title:function title(){return _title4},content:function content(){return _content4}}})})()}else{if(queueDatas["type"]==="organization_validated"){_this5.updateSessionQueue(queueDatas["courseId"],queueDatas["id"],queueDatas["queueStatus"],8)}else if(queueDatas["type"]==="validator_validated"){_this5.updateSessionQueue(queueDatas["courseId"],queueDatas["id"],queueDatas["queueStatus"],4)}else if(queueDatas["type"]==="registered"){_this5.removeSessionQueue(queueDatas["courseId"],queueDatas["id"])}if(queueDatas["status"]==="failed"){(function(){var _title5=Translator.trans("registration_failed",{},"cursus");var _content5='\n                <div class="alert alert-danger">\n                    '+Translator.trans("full_session_msg",{},"cursus")+"\n                </div>\n              ";_this5.$uibModal.open({template:_simple_modal2.default,controller:"SimpleModalCtrl",controllerAs:"smc",resolve:{title:function title(){return _title5},content:function content(){return _content5}}})})()}}}})}},{key:"transferCourseQueue",value:function transferCourseQueue(_queueId,_courseId){var _this6=this;this.$uibModal.open({template:_sessions_choices_transfer_modal2.default,controller:"SessionsChoicesTransferModalCtrl",controllerAs:"sctmc",resolve:{queueId:function queueId(){return _queueId},courseId:function courseId(){return _courseId},callback:function callback(){return _this6.removeCourseQueue}}})}},{key:"getAllDatas",value:function getAllDatas(){var _this7=this;var route=Routing.generate("api_get_registration_queues_datas");this.$http.get(route).then(function(datas){if(datas["status"]===200){_this7.courses=datas["data"]["courses"];_this7.coursesQueues=datas["data"]["coursesQueues"];_this7.sessionsQueues=datas["data"]["sessionsQueues"]}})}},{key:"getSearchedDatas",value:function getSearchedDatas(search){var _this8=this;var route=Routing.generate("api_get_registration_queues_datas_by_search",{search:search});this.$http.get(route).then(function(datas){if(datas["status"]===200){_this8.courses=datas["data"]["courses"];_this8.coursesQueues=datas["data"]["coursesQueues"];_this8.sessionsQueues=datas["data"]["sessionsQueues"]}})}},{key:"checkAdminRole",value:function checkAdminRole(){if(this.connectedUser["roles"]){var roles=this.connectedUser["roles"];for(var i=0;i<roles.length;i++){if(roles[i]["name"]==="ROLE_ADMIN"){this.isAdmin=true;break}}}}},{key:"removeCourseQueue",value:function removeCourseQueue(courseId,queueId){if(this.coursesQueues[courseId]){for(var i=0;i<this.coursesQueues[courseId].length;i++){var queueDatas=this.coursesQueues[courseId][i];if(queueDatas["id"]===queueId){this.coursesQueues[courseId].splice(i,1);break}}}}},{key:"removeSessionQueue",value:function removeSessionQueue(courseId,queueId){if(this.sessionsQueues[courseId]){for(var i=0;i<this.sessionsQueues[courseId].length;i++){var queueDatas=this.sessionsQueues[courseId][i];if(queueDatas["id"]===queueId){this.sessionsQueues[courseId].splice(i,1);break}}}}},{key:"updateCourseQueue",value:function updateCourseQueue(courseId,queueId,status,mask){if(this.coursesQueues[courseId]){for(var i=0;i<this.coursesQueues[courseId].length;i++){var queueDatas=this.coursesQueues[courseId][i];if(queueDatas["id"]===queueId){this.coursesQueues[courseId][i]["status"]=status;var rights=this.coursesQueues[courseId][i]["rights"];if((rights&mask)===mask){rights-=mask;this.coursesQueues[courseId][i]["rights"]=rights;if(status!==1&&rights===0){this.removeCourseQueue(courseId,queueId)}}break}}}}},{key:"updateSessionQueue",value:function updateSessionQueue(courseId,queueId,status,mask){if(this.sessionsQueues[courseId]){for(var i=0;i<this.sessionsQueues[courseId].length;i++){var queueDatas=this.sessionsQueues[courseId][i];if(queueDatas["id"]===queueId){this.sessionsQueues[courseId][i]["status"]=status;var rights=this.sessionsQueues[courseId][i]["rights"];if((rights&mask)===mask){rights-=mask;this.sessionsQueues[courseId][i]["rights"]=rights;if(status!==1&&rights===0){this.removeSessionQueue(courseId,queueId)}}break}}}}},{key:"initialize",value:function initialize(){var _this9=this;var userRoute=Routing.generate("api_get_connected_user");this.$http.get(userRoute).then(function(userDatas){if(userDatas["status"]===200){_this9.connectedUser=userDatas["data"];_this9.checkAdminRole();var coursesRoute=Routing.generate("api_get_registration_queues_datas");_this9.$http.get(coursesRoute).then(function(coursesDatas){if(coursesDatas["status"]===200){_this9.courses=coursesDatas["data"]["courses"];_this9.coursesQueues=coursesDatas["data"]["coursesQueues"];_this9.sessionsQueues=coursesDatas["data"]["sessionsQueues"]}})}})}}]);return CursusQueueManagementCtrl}();exports.default=CursusQueueManagementCtrl},789:function(module,exports){module.exports='<div class="modal-content">\n    <div class="modal-header">\n        <button class="close" ng-click="sctmc.closeModal()">x</button>\n        <h4 class="modal-title">\n            {{ \'select_session\'|trans:{}:\'cursus\' }}\n        </h4>\n    </div>\n    <div class="modal-body">\n        <div class="alert alert-danger" ng-if="sctmc.errorMessage !== \'\'">\n            <i class="close fa fa-times" ng-click="sctmc.deleteErrorMessage()"></i>\n            {{ sctmc.errorMessage }}\n        </div>\n        <dtable options="sctmc.dataTableOptions"\n                rows="sctmc.sessions" \n                class="material"\n                ng-if="sctmc.sessions.length > 0"\n        >\n        </dtable>\n        <div class="alert alert-warning" ng-if="sctmc.sessions.length === 0">\n            {{ \'no_session\'|trans:{}:\'cursus\' }}\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="sctmc.closeModal()">\n            {{ \'cancel\'|trans:{}:\'platform\' }}\n        </button>\n        <button class="btn btn-primary" ng-click="sctmc.confirmModal()" ng-disabled="sctmc.selectedSession === null">\n            {{ \'ok\'|trans:{}:\'platform\' }}\n        </button>\n    </div>\n</div>'},790:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(14);var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SessionsChoicesTransferModalCtrl=function(){function SessionsChoicesTransferModalCtrl($http,$uibModal,$uibModalInstance,queueId,courseId,callback){(0,_classCallCheck3.default)(this,SessionsChoicesTransferModalCtrl);this.$http=$http;this.$uibModal=$uibModal;this.$uibModalInstance=$uibModalInstance;this.queueId=queueId;this.courseId=courseId;this.callback=callback;this.sessions=[];this.selectedSession=null;this.errorMessage="";this.columns=[{name:"checkboxes",headerRenderer:function headerRenderer(){return"<b></b>"},cellRenderer:function cellRenderer(scope){return'\n            <span>\n                <input type="radio"\n                       name="session-selection"\n                       value="'+scope.$row["id"]+'"\n                       ng-model="sctmc.selectedSession"\n                >\n            </span>\n          '}},{name:"name",prop:"name",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("name",{},"platform")+"</b>"}},{name:"sessionStatus",headerRenderer:function headerRenderer(){return"<b>"+Translator.trans("status",{},"platform")+"</b>"},cellRenderer:function cellRenderer(scope){var status=scope.$row["sessionStatus"];var cell="<span>";if(status===0){cell+=Translator.trans("session_not_started",{},"cursus")}else if(status===1){cell+=Translator.trans("session_open",{},"cursus")}else if(status===2){cell+=Translator.trans("session_closed",{},"cursus")}cell+="</span>";return cell}}];this.dataTableOptions={scrollbarV:false,columnMode:"force",headerHeight:50,selectable:true,multiSelect:true,checkboxSelection:true,resizable:true,columns:this.columns};this.getAvailableSessions()}(0,_createClass3.default)(SessionsChoicesTransferModalCtrl,[{key:"closeModal",value:function closeModal(){this.$uibModalInstance.close()}},{key:"confirmModal",value:function confirmModal(){var _this=this;if(this.selectedSession){var route=Routing.generate("api_post_course_queued_user_transfer",{queue:this.queueId,session:this.selectedSession});this.$http.post(route).then(function(datas){if(datas["status"]===200){var results=datas["data"];if(results["status"]==="success"){_this.callback(_this.courseId,_this.queueId);_this.closeModal()}else{_this.errorMessage=Translator.trans("session_not_enough_place_msg",{sessionName:results["datas"]["sessionName"],courseTitle:results["datas"]["courseTitle"],courseCode:results["datas"]["courseCode"],remainingPlaces:results["datas"]["remainingPlaces"]},"cursus")}}})}}},{key:"deleteErrorMessage",value:function deleteErrorMessage(){this.errorMessage=""}},{key:"getAvailableSessions",value:function getAvailableSessions(){var _this2=this;var route=Routing.generate("api_get_available_sessions_by_course",{course:this.courseId});this.$http.get(route).then(function(datas){if(datas["status"]===200){_this2.sessions=datas["data"]}})}}]);return SessionsChoicesTransferModalCtrl}();exports.default=SessionsChoicesTransferModalCtrl},791:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=__webpack_require__(13);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _registration_queue_courses=__webpack_require__(792);var _registration_queue_courses2=_interopRequireDefault(_registration_queue_courses);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RegistrationQueueCoursesDirective=function RegistrationQueueCoursesDirective(){(0,_classCallCheck3.default)(this,RegistrationQueueCoursesDirective);this.restrict="E";this.replace=true;this.template=_registration_queue_courses2.default};exports.default=RegistrationQueueCoursesDirective},792:function(module,exports){module.exports='<div class="panel panel-default" ng-repeat="course in cqmc.courses">\n    <div class="panel-heading">\n        <h4 class="panel-title pointer-hand" data-toggle="collapse" href="#collapse-{{ course[\'id\'] }}">\n            {{ course[\'title\'] }} [{{ course[\'code\'] }}]\n        </h4>\n    </div>\n    <div id="collapse-{{ course[\'id\'] }}" class="panel-collape collapse">\n        <div class="panel-body">\n            <dtable options="cqmc.coursesDataTableOptions"\n                    rows="cqmc.coursesQueues[course[\'id\']]" \n                    class="material"\n                    ng-if="cqmc.coursesQueues[course[\'id\']].length > 0"\n            >\n            </dtable>\n            <hr ng-if="cqmc.coursesQueues[course[\'id\']].length > 0 && cqmc.sessionsQueues[course[\'id\']].length > 0">\n            <dtable options="cqmc.sessionsDataTableOptions"\n                    rows="cqmc.sessionsQueues[course[\'id\']]" \n                    class="material"\n                    ng-if="cqmc.sessionsQueues[course[\'id\']].length > 0"\n            >\n            </dtable>\n        </div>\n    </div>\n</div>'}});